/* onsenui v2.10.1 - 2018-05-28 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ons=e()}(this,function(){"use strict";function t(t){kt.set(t,!0)}function e(t){var e=wt.get(t,[])||[];wt.delete(t),e.forEach(function(t){return t()})}function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(void 0===kt&&(kt=new WeakMap,wt=new WeakMap),function(t,e){wt.has(t)||wt.set(t,[]),wt.get(t).push(e)}(n,i),function(e){return e.childNodes.length>0&&t(e),kt.has(e)}(n))e(n);else{new MutationObserver(function(i){t(n),e(n)}).observe(n,{childList:!0,characterData:!0}),setImmediate(function(){t(n),e(n)})}}function i(t){t._destroy instanceof Function?t._destroy():t.remove()}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e=gi.has(t),n=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t);return!e&&n}function a(t){var e=t.isConnected;if(void 0!==e)return e;for(var n=t;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function s(t,e){for(var n=e;n&&n!==t&&!n.nextSibling;)n=n.parentNode;return n&&n!==t?n.nextSibling:null}function l(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;e(o);var r=o.localName;if("link"===r&&"import"===o.getAttribute("rel")){var a=o.import;if(a instanceof Node&&!n.has(a)){n.add(a);for(var u=a.firstChild;u;u=u.nextSibling)l(u,e,n)}i=s(t,o);continue}if("template"===r){i=s(t,o);continue}var c=o.__CE_shadowRoot;if(c)for(var h=c.firstChild;h;h=h.nextSibling)l(h,e,n)}i=function(t,e){return e.firstChild?e.firstChild:s(t,e)}(t,i)}}function u(t,e,n){t[e]=n}var c={},h=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return function(t){return"-"+e+"-"+Q.hyphenate(t)}}(),d=function(t,e){return Object.keys(e).forEach(function(n){n in t.style?t.style[n]=e[n]:h(n)in t.style?t.style[h(n)]=e[n]:Q.warn("No such style property: "+n)}),t};d.clear=function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(/\s+/).reduce(function(t,e){return t.concat([Q.hyphenate(e),h(e)])},[]),n=[],i=t.style.length-1;i>=0;i--)!function(i){var o=t.style[i];(0===e.length||e.some(function(t){return 0===o.indexOf(t)}))&&n.push(o)}(i);n.forEach(function(e){return t.style[e]=""}),""===t.getAttribute("style")&&t.removeAttribute("style")};var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},E=window.HTMLElement,C=new(function(){function t(){p(this,t),this._selectedPlatform=null,this._ignorePlatformSelect=!1}return g(t,[{key:"select",value:function(t){"string"==typeof t&&(this._selectedPlatform=t.trim().toLowerCase())}},{key:"_getSelectedPlatform",value:function(){return this._ignorePlatformSelect?null:this._selectedPlatform}},{key:"_runOnActualPlatform",value:function(t){this._ignorePlatformSelect=!0;var e=t();return this._ignorePlatformSelect=!1,e}},{key:"isWebView",value:function(){if("loading"===document.readyState||"uninitialized"==document.readyState)throw new Error("isWebView() method is available after dom contents loaded.");return!!(window.cordova||window.phonegap||window.PhoneGap)}},{key:"isIPhone",value:function(){return/iPhone/i.test(navigator.userAgent)}},{key:"isIPhoneX",value:function(){return this.isIPhone()&&(375===window.screen.width&&812===window.screen.height||812===window.screen.width&&375===window.screen.height)}},{key:"isIPad",value:function(){return/iPad/i.test(navigator.userAgent)}},{key:"isIPod",value:function(){return/iPod/i.test(navigator.userAgent)}},{key:"isIOS",value:function(){return this._getSelectedPlatform()?"ios"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/iPhone|iPad|iPod/i.test(navigator.userAgent):/iOS/i.test(device.platform)}},{key:"isIOS7above",value:function(){if("object"===("undefined"==typeof device?"undefined":f(device))&&!/browser/i.test(device.platform))return/iOS/i.test(device.platform)&&parseInt(device.version.split(".")[0])>=7;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".");return parseInt(t.split(".")[0])>=7}return!1}},{key:"isIOSSafari",value:function(){var t=window.navigator,e=t.userAgent;return!(!this.isIOS()||-1===e.indexOf("Safari")||-1===e.indexOf("Version")||t.standalone)}},{key:"isWKWebView",value:function(){var t=/constructor/i.test(E);return!(!(this.isIOS()&&window.webkit&&window.webkit.messageHandlers&&window.indexedDB)||t)}},{key:"isUIWebView",value:function(){return!(!this.isIOS()||this.isIOSSafari()||this.isWKWebView())}},{key:"isAndroidPhone",value:function(){return/Android/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)}},{key:"isAndroidTablet",value:function(){return/Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)}},{key:"isAndroid",value:function(){return this._getSelectedPlatform()?"android"===this._getSelectedPlatform():/Android/i.test("object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?navigator.userAgent:device.platform)}},{key:"isWP",value:function(){return this._getSelectedPlatform()?"wp"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent):/Win32NT|WinCE/i.test(device.platform)}},{key:"isBlackBerry",value:function(){return this._getSelectedPlatform()?"blackberry"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent):/BlackBerry/i.test(device.platform)}},{key:"isOpera",value:function(){return this._getSelectedPlatform()?"opera"===this._getSelectedPlatform():!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0}},{key:"isFirefox",value:function(){return this._getSelectedPlatform()?"firefox"===this._getSelectedPlatform():"undefined"!=typeof InstallTrigger}},{key:"isSafari",value:function(){return this._getSelectedPlatform()?"safari"===this._getSelectedPlatform():Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window["safari"]||safari.pushNotification).toString()}},{key:"isChrome",value:function(){return this._getSelectedPlatform()?"chrome"===this._getSelectedPlatform():!(!window.chrome||window.opera||navigator.userAgent.indexOf(" OPR/")>=0||navigator.userAgent.indexOf(" Edge/")>=0)}},{key:"isIE",value:function(){return this._getSelectedPlatform()?"ie"===this._getSelectedPlatform():!!document.documentMode}},{key:"isEdge",value:function(){return this._getSelectedPlatform()?"edge"===this._getSelectedPlatform():navigator.userAgent.indexOf(" Edge/")>=0}},{key:"getMobileOS",value:function(){return this.isAndroid()?"android":this.isIOS()?"ios":this.isWP()?"wp":"other"}},{key:"getIOSDevice",value:function(){return this.isIPhone()?"iphone":this.isIPad()?"ipad":this.isIPod()?"ipod":"na"}}]),t}()),A=function(t){return Q.throw("In PageAttributeExpression: "+t)},S={_variables:{},defineVariable:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"!=typeof t?A("Variable name must be a string"):"string"!=typeof e&&"function"!=typeof e?A("Variable value must be a string or a function"):this._variables.hasOwnProperty(t)&&!n&&A('"'+t+'" is already defined'),this._variables[t]=e},getVariable:function(t){return this._variables.hasOwnProperty(t)?this._variables[t]:null},removeVariable:function(t){delete this._variables[t]},getAllVariables:function(){return this._variables},_parsePart:function(t){var e=void 0,n=!1,i=0,o=[];0===t.length&&A("Unable to parse empty string");for(var r=0;r<t.length;r++)if("$"===(e=t.charAt(r))&&"{"===t.charAt(r+1)){n&&A("Nested interpolation not supported");t.substring(i,r).length>0&&o.push(t.substring(i,r)),i=r,n=!0}else if("}"===e){n||A("} must be preceeded by ${");t.substring(i,r+1).length>0&&o.push(t.substring(i,r+1)),i=r+1,n=!1}return n&&A("Unterminated interpolation"),o.push(t.substring(i,t.length)),o},_replaceToken:function(t){var e=t.match(/^\${(.*?)}$/);if(!e)return t;var n=e[1].trim(),i=this.getVariable(n);if(null!==i){if("string"==typeof i)return i;var o=i();return"string"!=typeof o&&A("Must return a string"),o}A('Variable "'+n+'" does not exist')},_replaceTokens:function(t){return t.map(this._replaceToken.bind(this))},_parseExpression:function(t){return t.split(",").map(function(t){return t.trim()}).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(function(t){return t.join("")})},evaluate:function(t){return t?this._parseExpression(t):[]}};S.defineVariable("mobileOS",C.getMobileOS()),S.defineVariable("iOSDevice",C.getIOSDevice()),S.defineVariable("runtime",function(){return C.isWebView()?"cordova":"browser"});var P={};P.config={autoStatusBarFill:!0,animationsDisabled:!1,warningsDisabled:!1},P.nullElement=window.document.createElement("div"),P.isEnabledAutoStatusBarFill=function(){return!!P.config.autoStatusBarFill},P.normalizePageHTML=function(t){return(""+t).trim()},P.waitDOMContentLoaded=function(t){if("loading"===window.document.readyState||"uninitialized"==window.document.readyState){window.document.addEventListener("DOMContentLoaded",function e(){t(),window.document.removeEventListener("DOMContentLoaded",e)})}else setImmediate(t)},P.autoStatusBarFill=function(t){var e=function e(){P.shouldFillStatusBar()&&t(),document.removeEventListener("deviceready",e)};"object"===("undefined"==typeof device?"undefined":f(device))?document.addEventListener("deviceready",e):-1===["complete","interactive"].indexOf(document.readyState)?P.waitDOMContentLoaded(e):e()},P.shouldFillStatusBar=function(){return P.isEnabledAutoStatusBarFill()&&(C.isWebView()&&C.isIOS7above()&&!C.isIPhoneX()||document.body.querySelector(".ons-status-bar-mock.ios"))},P.templateStore={_storage:{},get:function(t){return P.templateStore._storage[t]||null},set:function(t,e){P.templateStore._storage[t]=e}},window.document.addEventListener("_templateloaded",function(t){"ons-template"===t.target.nodeName.toLowerCase()&&P.templateStore.set(t.templateId,t.template)},!1),P.waitDOMContentLoaded(function(){function t(t){for(var e=window.document.querySelectorAll(t),n=0;n<e.length;n++)P.templateStore.set(e[n].getAttribute("id"),e[n].textContent||e[n].content)}t('script[type="text/ons-template"]'),t('script[type="text/template"]'),t('script[type="text/ng-template"]'),t("template")}),P.getTemplateHTMLAsync=function(t){return new Promise(function(e,n){P.waitDOMContentLoaded(function(){var i=P.templateStore.get(t);if(i){if(i instanceof DocumentFragment)return e(i);var o="string"==typeof i?i:i[1];return e(P.normalizePageHTML(o))}var r=window.document.getElementById(t);if(r){var a=r.textContent||r.content;return e(a)}var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){var i=s.responseText;if(s.status>=400&&s.status<600)n(i);else{var o=Q.createFragment(i);Q.arrayFrom(o.querySelectorAll("script")).forEach(function(t){var e=document.createElement("script");e.type=t.type||"text/javascript",e.appendChild(document.createTextNode(t.text||t.textContent||t.innerHTML)),t.parentNode.replaceChild(e,t)}),P.templateStore.set(t,o),e(o)}},s.onerror=function(){Q.throw("Page template not found: "+t)},s.send(null)})})},P.getPageHTMLAsync=function(t){var e=S.evaluate(t);return function t(n){return"string"!=typeof n?Promise.reject("Must specify a page."):P.getTemplateHTMLAsync(n).catch(function(n){return 0===e.length?Promise.reject(n):t(e.shift())})}(e.shift())};var O=function(){function t(e){p(this,t),this._animators=e.animators,this._baseClass=e.baseClass,this._baseClassName=e.baseClassName||e.baseClass.name,this._animation=e.defaultAnimation||"default",this._animationOptions=e.defaultAnimationOptions||{},this._animators[this._animation]||Q.throw("No such animation: "+this._animation)}return g(t,[{key:"setAnimationOptions",value:function(t){this._animationOptions=t}},{key:"newAnimator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=null;if(t.animation instanceof this._baseClass)return t.animation;var i=null;if("string"==typeof t.animation&&(i=this._animators[t.animation]),!i&&e)n=e;else{i=i||this._animators[this._animation];var o=Q.extend({},this._animationOptions,t.animationOptions||{},P.config.animationsDisabled?{duration:0,delay:0}:{});"function"==typeof(n=new i(o))&&(n=new n(o))}return n instanceof this._baseClass||Q.throw('"animator" is not an instance of '+this._baseClassName),n}}],[{key:"parseAnimationOptionsString",value:function(t){try{if("string"==typeof t){var e=Q.animationOptionsParse(t);if("object"===(void 0===e?"undefined":f(e))&&null!==e)return e;console.error('"animation-options" attribute must be a JSON object string: '+t)}return{}}catch(e){return console.error('"animation-options" attribute must be a JSON object string: '+t),{}}}}]),t}(),x=!0,T={quiet:"material--flat",light:"material--flat",outline:"material--flat",cta:"","large--quiet":"material--flat large","large--cta":"large",noborder:"",tappable:""},L={};L.android=function(t){var e=t.tagName.toLowerCase();if(!Q.hasModifier(t,"material")){var n=(t.getAttribute("modifier")||"").trim().split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t});n.unshift("material"),t.setAttribute("modifier",n.join(" ").trim())}-1===["ons-alert-dialog-button","ons-toolbar-button","ons-back-button","ons-button","ons-list-item","ons-fab","ons-speed-dial","ons-speed-dial-item","ons-tab"].indexOf(e)||t.hasAttribute("ripple")||t.querySelector("ons-ripple")||("ons-list-item"===e?t.hasAttribute("tappable")&&(t.setAttribute("ripple",""),t.removeAttribute("tappable")):t.setAttribute("ripple",""))},L.ios=function(t){Q.removeModifier(t,"material")&&(Q.removeModifier(t,"material--flat")&&Q.addModifier(t,Q.removeModifier(t,"large")?"large--quiet":"quiet"),t.getAttribute("modifier")||t.removeAttribute("modifier")),t.hasAttribute("ripple")&&("ons-list-item"===t.tagName.toLowerCase()&&t.setAttribute("tappable",""),t.removeAttribute("ripple"))};var M={android:!0},D=function(t,e){if(x&&!t.hasAttribute("disable-auto-styling")){var n=C.getMobileOS();if(L.hasOwnProperty(n)&&(M.hasOwnProperty(n)||e))return n}return null},I=function(t,e,n){return D(e,n)?t.split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t}).join(" "):t},N={isEnabled:function(){return x},enable:function(){return x=!0},disable:function(){return x=!1},prepare:function(t,e){var n=D(t,e);n&&L[n](t)},mapModifier:I,getPlatform:D,restoreModifier:function(t){if("android"===D(t)){var e=t.getAttribute("modifier")||"",n=I(e,t);if(/(^|\s+)material($|\s+)/i.test(e)||(n="material "+n),n!==e)return t.setAttribute("modifier",n.trim()),!0}return!1}},B=function(){function t(){p(this,t)}return g(t,null,[{key:"diff",value:function(e,n){function i(e){var n={};return t.split(e).forEach(function(t){return n[t]=t}),n}e=i((""+e).trim()),n=i((""+n).trim());var o=Object.keys(e).reduce(function(t,e){return n[e]||t.push(e),t},[]);return{added:Object.keys(n).reduce(function(t,n){return e[n]||t.push(n),t},[]),removed:o}}},{key:"applyDiffToClassList",value:function(t,e,n){t.added.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.add(t)})}),t.removed.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.remove(t)})})}},{key:"applyDiffToElement",value:function(e,n,i){Object.keys(i).forEach(function(o){for(var r=!o||Q.match(n,o)?[n]:Array.prototype.filter.call(n.querySelectorAll(o),function(t){return!Q.findParent(t,n.tagName,function(t){return t===n})}),a=0;a<r.length;a++)t.applyDiffToClassList(e,r[a].classList,i[o])})}},{key:"onModifierChanged",value:function(e,n,i,o){t.applyDiffToElement(t.diff(e,n),i,o),N.restoreModifier(i)}},{key:"refresh",value:function(e,n){t.applyDiffToElement(t.diff("",e.getAttribute("modifier")||""),e,n)}},{key:"initModifier",value:function(e,n){var i=e.getAttribute("modifier");"string"==typeof i&&t.applyDiffToElement({removed:[],added:t.split(i)},e,n)}},{key:"split",value:function(t){return"string"!=typeof t?[]:t.trim().split(/ +/).filter(function(t){return""!==t})}},{key:"addModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier"));-1==i.indexOf(n)&&(i.push(n),e.setAttribute("modifier",i.join(" ")))}else e.setAttribute("modifier",n)}},{key:"removeModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier")),o=i.indexOf(n);-1!==o&&(i.splice(o,1),e.setAttribute("modifier",i.join(" ")))}}}]),t}(),j={_ready:!1,_domContentLoaded:!1,_onDOMContentLoaded:function(){j._domContentLoaded=!0,C.isWebView()?window.document.addEventListener("deviceready",function(){j._ready=!0},!1):j._ready=!0},addBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.addEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.addEventListener("backbutton",t,!1)})},removeBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.removeEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.removeEventListener("backbutton",t,!1)})}};window.addEventListener("DOMContentLoaded",function(){return j._onDOMContentLoaded()},!1);var H={_store:{},_genId:function(){var t=0;return function(){return t++}}(),set:function(t,e){t.dataset.deviceBackButtonHandlerId&&this.remove(t);var n=t.dataset.deviceBackButtonHandlerId=H._genId();this._store[n]=e},remove:function(t){t.dataset.deviceBackButtonHandlerId&&(delete this._store[t.dataset.deviceBackButtonHandlerId],delete t.dataset.deviceBackButtonHandlerId)},get:function(t){if(t.dataset.deviceBackButtonHandlerId){var e=t.dataset.deviceBackButtonHandlerId;if(!this._store[e])throw new Error;return this._store[e]}},has:function(t){if(!t.dataset)return!1;var e=t.dataset.deviceBackButtonHandlerId;return!!this._store[e]}},R=new(function(){function t(){p(this,t),this._isEnabled=!1,this._boundCallback=this._callback.bind(this)}return g(t,[{key:"enable",value:function(){this._isEnabled||(j.addBackButtonListener(this._boundCallback),this._isEnabled=!0)}},{key:"disable",value:function(){this._isEnabled&&(j.removeBackButtonListener(this._boundCallback),this._isEnabled=!1)}},{key:"fireDeviceBackButtonEvent",value:function(){var t=document.createEvent("Event");t.initEvent("backbutton",!0,!0),document.dispatchEvent(t)}},{key:"_callback",value:function(){this._dispatchDeviceBackButtonEvent()}},{key:"createHandler",value:function(t,e){if(!(t instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");if(!(e instanceof Function))throw new Error("callback must be an instance of Function");var n={_callback:e,_element:t,disable:function(){H.remove(t)},setListener:function(t){this._callback=t},enable:function(){H.set(t,this)},isEnabled:function(){return H.get(t)===this},destroy:function(){H.remove(t),this._callback=this._element=null}};return n.enable(),n}},{key:"_dispatchDeviceBackButtonEvent",value:function(){function t(e){return{_element:e,callParentHandler:function(){for(var e=this._element.parentNode;e;){if(i=H.get(e))return i._callback(t(e));e=e.parentNode}}}}var e=this._captureTree(),n=this._findHandlerLeafElement(e),i=H.get(n);i._callback(t(n))}},{key:"_captureTree",value:function(){function t(e){var n={element:e,children:Array.prototype.concat.apply([],function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(e.children).map(function(e){if("none"===e.style.display||!1===e._isShown)return[];if(0===e.children.length&&!H.has(e))return[];var n=t(e);return 0!==n.children.length||H.has(n.element)?[n]:[]}))};if(!H.has(n.element))for(var i=0;i<n.children.length;i++){var o=n.children[i];if(H.has(o.element))return o}return n}return t(document.body)}},{key:"_findHandlerLeafElement",value:function(t){function e(t){return 0===t.children.length?t.element:1===t.children.length?e(t.children[0]):t.children.map(function(t){return t.element}).reduce(function(t,e){if(!t)return e;var n=parseInt(window.getComputedStyle(t,"").zIndex,10),i=parseInt(window.getComputedStyle(e,"").zIndex,10);if(!isNaN(n)&&!isNaN(i))return n>i?t:e;throw new Error("Capturing backbutton-handler is failure.")},null)}return e(t)}}]),t}());P.AnimatorFactory=O,P.ModifierUtil=B,P.dbbDispatcher=R;var F=function(t,e){return t.substr(0,e.length)===e},q=function(t,e){return t.substr(t.length-e.length,e.length)===e},z=function(t){return t.slice(1,-1)},V=function(t){return F(t,"{")&&q(t,"}")},W=function(t){return F(t,"[")&&q(t,"]")},U=function(t){return F(t,"'")&&q(t,"'")||F(t,'"')&&q(t,'"')},X=function(t,e,n){throw new Error("Unexpected token '"+t+"' at position "+(n.length-e.length-1)+" in string: '"+n+"'")},Y=function(t,e,n){return"true"===t||"false"===t?"true"===t:U(t)?z(t):isNaN(t)?V(t)?$(z(t)):W(t)?K(z(t)):void X(t,e,n):+t},G=function(t){var e=(t=t.trim()).length;if(":"===t[0]||","===t[0])e=1;else if("{"===t[0]||"["===t[0]){for(var n=t.charCodeAt(0),i=1,o=1;o<t.length;o++)if(t.charCodeAt(o)===n)i++;else if(t.charCodeAt(o)===n+2&&0==--i){e=o+1;break}}else if("'"===t[0]||'"'===t[0]){for(var r=1;r<t.length;r++)if(t[r]===t[0]){e=r+1;break}}else for(var a=1;a<t.length;a++)if(-1!==[" ",",",":"].indexOf(t[a])){e=a;break}return t.slice(0,e)},$=function(t){for(var e=t=t.trim(),n={},i=!0,o=void 0,r=void 0,a=void 0;t.length>0;)if(r=a,a=G(t),t=t.slice(a.length,t.length).trim(),":"===a&&(!i||!r||","===r)||","===a&&i||":"!==a&&","!==a&&r&&","!==r&&":"!==r)X(a,t,e);else if(":"===a&&i&&r){if(r=U(r)?z(r):r,!function(t){return/^[A-Z_$][A-Z0-9_$]*$/i.test(t)}(r))throw new Error("Invalid key token '"+r+"' at position 0 in string: '"+e+"'");o=r,i=!1}else","===a&&!i&&r&&(n[o]=Y(r,t,e),i=!0);return a&&(n[o]=Y(a,t,e)),n},K=function(t){for(var e=t=t.trim(),n=[],i=void 0,o=void 0;t.length>0;)i=o,o=G(t),t=t.slice(o.length,t.length).trim(),","!==o||i&&","!==i?","===o&&n.push(Y(i,t,e)):X(o,t,e);return o&&(","!==o?n.push(Y(o,t,e)):X(o,t,e)),n},Q={},J="[Onsen UI]";Q.globals={fabOffset:0,errorPrefix:J,supportsPassive:!1},C._runOnActualPlatform(function(){Q.globals.actualMobileOS=C.getMobileOS(),Q.globals.isUIWebView=C.isUIWebView(),Q.globals.isWKWebView=C.isWKWebView()});try{var Z=Object.defineProperty({},"passive",{get:function(){Q.globals.supportsPassive=!0}});window.addEventListener("testPassive",null,Z),window.removeEventListener("testPassive",null,Z)}catch(t){}Q.addEventListener=function(t,e,n,i,o){t.addEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.removeEventListener=function(t,e,n,i,o){t.removeEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.prepareQuery=function(t){return t instanceof Function?t:function(e){return Q.match(e,t)}},Q.match=function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector).call(t,e)},Q.findChild=function(t,e){for(var n=Q.prepareQuery(e),i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(o.nodeType===Node.ELEMENT_NODE&&n(o))return o}return null},Q.findParent=function(t,e,n){for(var i=Q.prepareQuery(e),o=t.parentNode;;){if(!o||o===document||o instanceof DocumentFragment||n&&n(o))return null;if(i(o))return o;o=o.parentNode}},Q.isAttached=function(t){return document.body.contains(t)},Q.hasAnyComponentAsParent=function(t){for(;t&&document.documentElement!==t;)if((t=t.parentNode)&&t.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/))return!0;return!1},Q.getAllChildNodes=function(t){var e;return(e=[t]).concat.apply(e,w(Array.from(t.children).map(function(t){return Q.getAllChildNodes(t)})))},Q.isPageControl=function(t){return t.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i)},Q.propagateAction=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];i[e]instanceof Function?i[e]():Q.propagateAction(i,e)}},Q.camelize=function(t){return t.toLowerCase().replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},Q.hyphenate=function(t){return t.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()},Q.create=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.split("."),i=document.createElement(n.shift()||"div");return n.length&&(i.className=n.join(" ")),d(i,e),i},Q.createElement=function(t){var e=document.createElement("div");t instanceof DocumentFragment?e.appendChild(document.importNode(t,!0)):e.innerHTML=t.trim(),e.children.length>1&&Q.throw("HTML template must contain a single root element");var n=e.children[0];return e.children[0].remove(),n},Q.createFragment=function(t){var e=document.createElement("template");return e.innerHTML=t,document.importNode(e.content,!0)},Q.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)if(n[o])for(var r=Object.keys(n[o]),a=0;a<r.length;a++){var s=r[a];t[s]=n[o][s]}return t},Q.arrayFrom=function(t){return Array.prototype.slice.apply(t)},Q.parseJSONObjectSafely=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=JSON.parse(""+t);if("object"===(void 0===n?"undefined":f(n))&&null!==n)return n}catch(t){return e}return e},Q.findFromPath=function(t){t=t.split(".");for(var e,n=window;e=t.shift();)n=n[e];return n},Q.getTopPage=function(t){return t&&("ons-page"===t.tagName.toLowerCase()?t:t.topPage)||null},Q.findToolbarPage=function(t){var e=Q.getTopPage(t);if(e){if(e._canAnimateToolbar())return e;for(var n=0;n<e._contentElement.children.length;n++){var i=Q.getTopPage(e._contentElement.children[n]);if(i&&!/ons-tabbar/i.test(e._contentElement.children[n].tagName))return Q.findToolbarPage(i)}}return null},Q.triggerElementEvent=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});return Object.keys(n).forEach(function(t){i[t]=n[t]}),t.dispatchEvent(i),i},Q.hasModifier=function(t,e){return!!t.hasAttribute("modifier")&&RegExp("(^|\\s+)"+e+"($|\\s+)","i").test(t.getAttribute("modifier"))},Q.addModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!Q.hasModifier(t,e)&&(t.setAttribute("modifier",((t.getAttribute("modifier")||"")+" "+e).trim()),!0)},Q.removeModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!t.getAttribute("modifier")||!Q.hasModifier(t,e))return!1;var i=t.getAttribute("modifier").split(/\s+/).filter(function(t){return t&&t!==e});return i.length?t.setAttribute("modifier",i.join(" ")):t.removeAttribute("modifier"),!0},Q.toggleModifier=function(){var t=arguments.length>2?arguments.length<=2?void 0:arguments[2]:{},e="boolean"==typeof t?t:t.force;("boolean"==typeof e?e:!Q.hasModifier.apply(Q,arguments))?Q.addModifier.apply(Q,arguments):Q.removeModifier.apply(Q,arguments)},Q.restoreClass=function(t,e,n){e.split(/\s+/).forEach(function(e){return""!==e&&!t.classList.contains(e)&&t.classList.add(e)}),t.hasAttribute("modifier")&&B.refresh(t,n)},Q.updateParentPosition=function(t){!t._parentUpdated&&t.parentElement&&("static"===window.getComputedStyle(t.parentElement).getPropertyValue("position")&&(t.parentElement.style.position="relative"),t._parentUpdated=!0)},Q.toggleAttribute=function(t,e,n){n?t.setAttribute(e,"boolean"==typeof n?"":n):t.removeAttribute(e)},Q.bindListeners=function(t,e){e.forEach(function(e){var n=e.replace(/^_[a-z]/,"_bound"+e[1].toUpperCase());t[n]=t[n]||t[e].bind(t)})},Q.each=function(t,e){return Object.keys(t).forEach(function(n){return e(n,t[n])})},Q.updateRipple=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===e&&(e=t.hasAttribute("ripple"));var i=Q.findChild(t,"ons-ripple");if(e){if(!i){var o=document.createElement("ons-ripple");Object.keys(n).forEach(function(t){return o.setAttribute(t,n[t])}),t.insertBefore(o,t.firstChild)}}else i&&i.remove()},Q.animationOptionsParse=function(t){if(t=t.trim(),V(t))return $(z(t));if(W(t))return K(z(t));throw new Error("Provided string must be object or array like: "+t)},Q.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Q.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},Q.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!P.config.warningsDisabled){var i;(i=console).warn.apply(i,[J].concat(e))}},Q.throw=function(t){throw new Error(J+" "+t)},Q.throwAbstract=function(){return Q.throw("Cannot instantiate abstract class")},Q.throwMember=function(){return Q.throw("Class member must be implemented")},Q.throwPageLoader=function(){return Q.throw("First parameter should be an instance of PageLoader")},Q.throwAnimator=function(t){return Q.throw('"Animator" param must inherit '+t+"Animator")};var tt=function(t){return t.cancelable&&t.preventDefault()};Q.iosPreventScroll=function(t){if("ios"===Q.globals.actualMobileOS){t.on("touchmove",tt),t.on("dragend",function e(n){t.off("touchmove",tt),t.off("dragend",e)})}},Q.iosPageScrollFix=function(t){"ios"===Q.globals.actualMobileOS&&(document.body.classList.toggle("ons-ios-scroll",t),Q.globals.isUIWebView&&!P.config.forceUIWebViewScrollFix||document.body.classList.toggle("ons-ios-scroll-fix",t))},Q.iosMaskScrollFix=function(t,e){if(Q.globals.isUIWebView){t[(e?"add":"remove")+"EventListener"]("touchmove",tt,!1)}},Q.isValidGesture=function(t){return void 0!==t.gesture&&(t.gesture.distance<=15||t.gesture.deltaTime<=100)},Q.checkMissingImport=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){c[t]||Q.throw("Ons"+t+" is required but was not imported (Custom Elements)")})};var et={};et.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},et.buildTransitionValue=function(t){t.property=t.property||"all",t.duration=t.duration||.4,t.timing=t.timing||"linear";return t.property.split(/ +/).map(function(e){return e+" "+t.duration+"s "+t.timing}).join(", ")},et.onceOnTransitionEnd=function(t,e){if(!t)return function(){};var n=function(n){t==n.target&&(n.stopPropagation(),i(),e())},i=function(){et._transitionEndEvents.forEach(function(e){t.removeEventListener(e,n,!1)})};return et._transitionEndEvents.forEach(function(e){t.addEventListener(e,n,!1)}),i},et._transitionEndEvents="ontransitionend"in window?["transitionend"]:"onwebkittransitionend"in window?["webkitTransitionEnd"]:"webkit"===et.vendorPrefix||"o"===et.vendorPrefix||"moz"===et.vendorPrefix||"ms"===et.vendorPrefix?[et.vendorPrefix+"TransitionEnd","transitionend"]:[],et._cssPropertyDict=function(){for(var t=window.getComputedStyle(document.documentElement,""),e={},n="A".charCodeAt(0),i="z".charCodeAt(0),o=0;o<t.length;o++){var r=t[o].replace(/^[-]+/,"").replace(/[-][a-z]/g,function(t){return t.substr(1).toUpperCase()}).replace(/^moz/,"Moz");n<=r.charCodeAt(0)&&i>=r.charCodeAt(0)&&"cssText"!==r&&"parentText"!==r&&(e[r]=!0)}return e}(),et.hasCssProperty=function(t){return t in et._cssPropertyDict},et.vendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1]}(),et.forceLayoutAtOnce=function(t,e){this.batchImmediate(function(){t.forEach(function(t){t.offsetHeight}),e()})},et.batchImmediate=function(){var t=[];return function(e){0===t.length&&setImmediate(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(e)}}(),et.batchAnimationFrame=function(){var t=[],e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};return function(n){0===t.length&&e(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(n)}}(),et.transitionPropertyName=function(){if(et.hasCssProperty("transitionDuration"))return"transition";if(et.hasCssProperty(et.vendorPrefix+"TransitionDuration"))return et.vendorPrefix+"Transition";throw new Error("Invalid state")}();var nt=function t(e,n){if(!(this instanceof t))return new t(e,n);if(e instanceof HTMLElement)this.elements=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("First argument must be an array or an instance of HTMLElement.");this.elements=e}this.defaults=n,this.transitionQueue=[],this.lastStyleAttributeDict=[]};nt.prototype={transitionQueue:void 0,elements:void 0,defaults:void 0,play:function(t){return"function"==typeof t&&this.transitionQueue.push(function(e){t(),e()}),this.startAnimation(),this},default:function(t,e,n){function i(t,e,n){return void 0!==t.duration&&(e=t.duration),void 0!==t.timing&&(n=t.timing),{css:t.css||t,duration:e,timing:n}}return this.saveStyle().queue(i(t,0,this.defaults.timing)).wait(void 0===n?this.defaults.delay:n).queue(i(e,this.defaults.duration,this.defaults.timing)).restoreStyle()},queue:function(t,e){var n=this.transitionQueue;if(t&&e&&(e.css=t,t=new nt.Transition(e)),t instanceof Function||t instanceof nt.Transition||(t=new nt.Transition(t.css?t:{css:t})),t instanceof Function)n.push(t);else{if(!(t instanceof nt.Transition))throw new Error("Invalid arguments");n.push(t.build())}return this},wait:function(t){return t>0&&this.transitionQueue.push(function(e){setTimeout(e,1e3*t)}),this},saveStyle:function(){return this.transitionQueue.push(function(t){this.elements.forEach(function(t,e){for(var n=this.lastStyleAttributeDict[e]={},i=0;i<t.style.length;i++)n[t.style[i]]=t.style[t.style[i]]}.bind(this)),t()}.bind(this)),this},restoreStyle:function(t){var e=this;if((t=t||{}).transition&&!t.duration)throw new Error('"options.duration" is required when "options.transition" is enabled.');var n=et.transitionPropertyName;if(t.transition||t.duration&&t.duration>0){var i=t.transition||"all "+t.duration+"s "+(t.timing||"linear");this.transitionQueue.push(function(o){var r,a=this.elements,s=function(){a.forEach(function(t){t.style[n]=""})},l=et.onceOnTransitionEnd(a[0],function(){clearTimeout(r),s(),o()});r=setTimeout(function(){l(),s(),o()},1e3*t.duration*1.4),a.forEach(function(t,o){var r=e.lastStyleAttributeDict[o];if(!r)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[o]=void 0;for(var a,s=0,l=t.style.length;s<l;s++)a=t.style[s],void 0===r[a]&&(r[a]="");t.style[n]=i,Object.keys(r).forEach(function(e){e!==n&&(t.style[e]=r[e])}),t.style[n]=i})})}else this.transitionQueue.push(function(t){e.elements.forEach(function(t,i){t.style[n]="none";var o=e.lastStyleAttributeDict[i];if(!o)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[i]=void 0;for(var r=0;r<t.style.length;r++)t.style[r],void 0===o[t.style[r]]&&(o[t.style[r]]="");Object.keys(o).forEach(function(e){t.style[e]=o[e]})}),t()});return this},startAnimation:function(){return this._dequeueTransition(),this},_dequeueTransition:function(){var t=this.transitionQueue.shift();if(this._currentTransition)throw new Error("Current transition exists.");this._currentTransition=t;var e=this,n=!1;t&&t.call(this,function(){if(n)throw new Error("Invalid state: This callback is called twice.");n=!0,e._currentTransition=void 0,e._dequeueTransition()})}},nt.runAll=function(){for(var t=0;t<arguments.length;t++)arguments[t].play()},(nt.Transition=function(t){this.options=t||{},this.options.duration=this.options.duration||0,this.options.timing=this.options.timing||"linear",this.options.css=this.options.css||{},this.options.property=this.options.property||"all"}).prototype={build:function(){if(0===Object.keys(this.options.css).length)throw new Error("options.css is required.");var t=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(et.hasCssProperty(n))e[n]=i;else{var o=et.vendorPrefix+et.capitalize(n);et.hasCssProperty(o)?e[o]=i:(e[o]=i,e[n]=i)}}),e}(this.options.css);if(this.options.duration>0){var e=et.buildTransitionValue(this.options),n=this;return function(i){var o,r=this.elements,a=1e3*n.options.duration*1.4,s=et.onceOnTransitionEnd(r[0],function(){clearTimeout(o),i()});o=setTimeout(function(){s(),i()},a),r.forEach(function(n){n.style[et.transitionPropertyName]=e,Object.keys(t).forEach(function(e){n.style[e]=t[e]})})}}if(this.options.duration<=0)return function(e){var n=this.elements;n.forEach(function(e){e.style[et.transitionPropertyName]="",Object.keys(t).forEach(function(n){e.style[n]=t[n]})}),n.length>0?et.forceLayoutAtOnce(n,function(){et.batchAnimationFrame(e)}):et.batchAnimationFrame(e)}}};var it,ot,rt,at,st=function t(e,n){return new t.Instance(e,n||{})};st.defaults={behavior:{touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},st.DOCUMENT=document,st.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,st.HAS_TOUCHEVENTS="ontouchstart"in window,st.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),st.NO_MOUSEEVENTS=st.HAS_TOUCHEVENTS&&st.IS_MOBILE||st.HAS_POINTEREVENTS,st.CALCULATE_INTERVAL=25;var lt={},ut=st.DIRECTION_DOWN="down",ct=st.DIRECTION_LEFT="left",ht=st.DIRECTION_UP="up",dt=st.DIRECTION_RIGHT="right",ft=st.POINTER_MOUSE="mouse",pt=st.POINTER_TOUCH="touch",gt=st.POINTER_PEN="pen",mt=st.EVENT_START="start",_t=st.EVENT_MOVE="move",vt=st.EVENT_END="end",bt=st.EVENT_RELEASE="release",yt=st.EVENT_TOUCH="touch";st.READY=!1,st.plugins=st.plugins||{},st.gestures=st.gestures||{},ot=st.utils={extend:function(t,e,n){for(var i in e)!e.hasOwnProperty(i)||void 0!==t[i]&&n||(t[i]=e[i]);return t},on:function(t,e,n,i){Q.addEventListener(t,e,n,i,!0)},off:function(t,e,n,i){Q.removeEventListener(t,e,n,i,!0)},each:function(t,e,n){var i,o;if("forEach"in t)t.forEach(e,n);else if(void 0!==t.length){for(i=0,o=t.length;i<o;i++)if(!1===e.call(n,t[i],i,t))return}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return},inStr:function(t,e){return t.indexOf(e)>-1},inArray:function(t,e,n){if(n){for(var i=0,o=t.length;i<o;i++)if(Object.keys(e).every(function(n){return t[i][n]===e[n]}))return i;return-1}if(t.indexOf)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],n=[],i=[],o=[],r=Math.min,a=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(ot.each(t,function(t){e.push(t.pageX),n.push(t.pageY),i.push(t.clientX),o.push(t.clientY)}),{pageX:(r.apply(Math,e)+a.apply(Math,e))/2,pageY:(r.apply(Math,n)+a.apply(Math,n))/2,clientX:(r.apply(Math,i)+a.apply(Math,i))/2,clientY:(r.apply(Math,o)+a.apply(Math,o))/2})},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){return Math.abs(t.clientX-e.clientX)>=Math.abs(t.clientY-e.clientY)?t.clientX-e.clientX>0?ct:dt:t.clientY-e.clientY>0?ht:ut},getDistance:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==ht||t==ut},setPrefixedCss:function(t,e,n,i){var o=["","Webkit","Moz","O","ms"];e=ot.toCamelCase(e);for(var r=0;r<o.length;r++){var a=e;if(o[r]&&(a=o[r]+a.slice(0,1).toUpperCase()+a.slice(1)),a in t.style){t.style[a]=(null===i||i)&&n||"";break}}},toggleBehavior:function(t,e,n){if(e&&t&&t.style){ot.each(e,function(e,i){ot.setPrefixedCss(t,i,e,n)});var i=n&&function(){return!1};"none"==e.userSelect&&(t.onselectstart=i),"none"==e.userDrag&&(t.ondragstart=i)}},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}},it=st.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.on(t,e,n,i),o&&o(e)})},off:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.off(t,e,n,i),o&&o(e)})},onTouch:function(t,e,n,i){var o=this,r=function(i){var r,a=i.type.toLowerCase(),s=st.HAS_POINTEREVENTS,l=ot.inStr(a,"mouse");l&&o.preventMouseEvents||(l&&e==mt&&0===i.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):s&&e==mt?o.shouldDetect=1===i.buttons||at.matchType(pt,i):l||e!=mt||(o.preventMouseEvents=!0,o.shouldDetect=!0),s&&e!=vt&&at.updatePointer(e,i),o.shouldDetect&&(r=o.doDetect.call(o,i,e,t,n)),r==vt&&(o.preventMouseEvents=!1,o.shouldDetect=!1,at.reset()),s&&e==vt&&at.updatePointer(e,i))};return this.on(t,lt[e],r,i),r},doDetect:function(t,e,n,i){var o=this.getTouchList(t,e),r=o.length,a=e,s=o.trigger,l=r;e==mt?s=yt:e==vt&&(s=bt,l=o.length-(t.changedTouches?t.changedTouches.length:1)),l>0&&this.started&&(a=_t),this.started=!0;var u=this.collectEventData(n,a,o,t);return e!=vt&&i.call(rt,u),s&&(u.changedLength=l,u.eventType=s,i.call(rt,u),u.eventType=a,delete u.changedLength),a==vt&&(i.call(rt,u),this.started=!1),a},determineEventTypes:function(){var t;return t=st.HAS_POINTEREVENTS?window.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:st.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],lt[mt]=t[0],lt[_t]=t[1],lt[vt]=t[2],lt},getTouchList:function(t,e){if(st.HAS_POINTEREVENTS)return at.getTouchList();if(t.touches){if(e==_t)return t.touches;var n=[],i=[].concat(ot.toArray(t.touches),ot.toArray(t.changedTouches)),o=[];return ot.each(i,function(t){-1===ot.inArray(n,t.identifier)&&o.push(t),n.push(t.identifier)}),o}return t.identifier=1,[t]},collectEventData:function(t,e,n,i){var o=pt;return ot.inStr(i.type,"mouse")||at.matchType(ft,i)?o=ft:at.matchType(gt,i)&&(o=gt),{center:ot.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:e,pointerType:o,srcEvent:i,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return rt.stopDetect()}}}},at=st.PointerEvent={pointers:{},getTouchList:function(){var t=[];return ot.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){t==vt||t!=vt&&1!==e.buttons?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(t,e){if(!e.pointerType)return!1;var n=e.pointerType,i={};return i[ft]=n===(e.MSPOINTER_TYPE_MOUSE||ft),i[pt]=n===(e.MSPOINTER_TYPE_TOUCH||pt),i[gt]=n===(e.MSPOINTER_TYPE_PEN||gt),i[t]},reset:function(){this.pointers={}}},rt=st.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:ot.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,n=e.options;return ot.each(this.gestures,function(i){!this.stopped&&e.enabled&&n[i.name]&&i.handler.call(i,t,e)},this),this.current&&(this.current.lastEvent=t),t.eventType==vt&&this.stopDetect(),t}},stopDetect:function(){this.previous=ot.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,e,n,i,o){var r=this.current,a=!1,s=r.lastCalcEvent,l=r.lastCalcData;s&&t.timeStamp-s.timeStamp>st.CALCULATE_INTERVAL&&(e=s.center,n=t.timeStamp-s.timeStamp,i=t.center.clientX-s.center.clientX,o=t.center.clientY-s.center.clientY,a=!0),t.eventType!=yt&&t.eventType!=bt||(r.futureCalcEvent=t),r.lastCalcEvent&&!a||(l.velocity=ot.getVelocity(n,i,o),l.angle=ot.getAngle(e,t.center),l.direction=ot.getDirection(e,t.center),r.lastCalcEvent=r.futureCalcEvent||t,r.futureCalcEvent=t),t.velocityX=l.velocity.x,t.velocityY=l.velocity.y,t.interimAngle=l.angle,t.interimDirection=l.direction},extendEventData:function(t){var e=this.current,n=e.startEvent,i=e.lastEvent||n;t.eventType!=yt&&t.eventType!=bt||(n.touches=[],ot.each(t.touches,function(t){n.touches.push({clientX:t.clientX,clientY:t.clientY})}));var o=t.timeStamp-n.timeStamp,r=t.center.clientX-n.center.clientX,a=t.center.clientY-n.center.clientY;return this.getCalculatedData(t,i.center,o,r,a),ot.extend(t,{startEvent:n,deltaTime:o,deltaX:r,deltaY:a,distance:ot.getDistance(n.center,t.center),angle:ot.getAngle(n.center,t.center),direction:ot.getDirection(n.center,t.center),scale:ot.getScale(n.touches,t.touches),rotation:ot.getRotation(n.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return void 0===e[t.name]&&(e[t.name]=!0),ot.extend(st.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},st.Instance=function(t,e){var n=this,i=e&&e.passive?{passive:!0}:void 0;!function(t){st.READY||(it.determineEventTypes(),ot.each(st.gestures,function(t){rt.register(t)}),it.onTouch(st.DOCUMENT,_t,rt.detect,t),it.onTouch(st.DOCUMENT,vt,rt.detect,t),st.READY=!0)}(i),this.element=t,this.enabled=!0,ot.each(e,function(t,n){delete e[n],e[ot.toCamelCase(n)]=t}),this.options=ot.extend(ot.extend({},st.defaults),e||{}),this.options.listenerOptions=i,this.options.behavior&&ot.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=it.onTouch(t,mt,function(t){n.enabled&&t.eventType==mt?rt.startDetect(n,t):t.eventType==yt&&rt.detect(t)},i),this.eventHandlers=[]},st.Instance.prototype={on:function(t,e,n){var i=this;return it.on(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){i.eventHandlers.push({gesture:t,handler:e})}),i},off:function(t,e,n){var i=this;return it.off(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){var n=ot.inArray(i.eventHandlers,{gesture:t,handler:e},!0);n>=0&&i.eventHandlers.splice(n,1)}),i},trigger:function(t,e){e||(e={});var n=st.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var i=this.element;return ot.hasParent(e.target,i)&&(i=e.target),i.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(ot.toggleBehavior(this.element,this.options.behavior,!1),t=-1;e=this.eventHandlers[++t];)ot.off(this.element,e.gesture,e.handler);return this.eventHandlers=[],it.off(this.element,lt[mt],this.eventStartHandler),null}},function(t){var e=!1;st.gestures.Drag={name:t,index:50,handler:function(n,i){var o=rt.current;if(!(i.options.dragMaxTouches>0&&n.touches.length>i.options.dragMaxTouches))switch(n.eventType){case mt:e=!1;break;case _t:if(n.distance<i.options.dragMinDistance&&o.name!=t)return;var r=o.startEvent.center;if(o.name!=t&&(o.name=t,i.options.dragDistanceCorrection&&n.distance>0)){var a=Math.abs(i.options.dragMinDistance/n.distance);r.pageX+=n.deltaX*a,r.pageY+=n.deltaY*a,r.clientX+=n.deltaX*a,r.clientY+=n.deltaY*a,n=rt.extendEventData(n)}(o.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=n.distance)&&(n.dragLockToAxis=!0);var s=o.lastEvent.direction;n.dragLockToAxis&&s!==n.direction&&(ot.isVertical(s)?n.direction=n.deltaY<0?ht:ut:n.direction=n.deltaX<0?ct:dt),e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),i.trigger(t+n.direction,n);var l=ot.isVertical(n.direction);(i.options.dragBlockVertical&&l||i.options.dragBlockHorizontal&&!l)&&n.preventDefault();break;case bt:e&&n.changedLength<=i.options.dragMaxTouches&&(i.trigger(t+"end",n),e=!1);break;case vt:e=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),st.gestures.Gesture={name:"gesture",index:1337,handler:function(t,e){e.trigger(this.name,t)}},function(t){var e;st.gestures.Hold={name:t,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(n,i){var o=i.options,r=rt.current;switch(n.eventType){case mt:clearTimeout(e),r.name=t,e=setTimeout(function(){r&&r.name==t&&i.trigger(t,n)},o.holdTimeout);break;case _t:n.distance>o.holdThreshold&&clearTimeout(e);break;case bt:clearTimeout(e)}}}}("hold"),st.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==bt&&e.trigger(this.name,t)}},st.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,e){if(t.eventType==bt){var n=t.touches.length,i=e.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(t.velocityX>i.swipeVelocityX||t.velocityY>i.swipeVelocityY)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},function(t){var e=!1;st.gestures.Tap={name:t,index:100,handler:function(n,i){var o,r,a=i.options,s=rt.current,l=rt.previous;switch(n.eventType){case mt:e=!1;break;case _t:e=e||n.distance>a.tapMaxDistance;break;case vt:!ot.inStr(n.srcEvent.type,"cancel")&&n.deltaTime<a.tapMaxTime&&!e&&(o=l&&l.lastEvent&&n.timeStamp-l.lastEvent.timeStamp,r=!1,l&&l.name==t&&o&&o<a.doubleTapInterval&&n.distance<a.doubleTapDistance&&(i.trigger("doubletap",n),r=!0),r&&!a.tapAlways||(s.name=t,i.trigger(s.name,n)))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),st.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,e){e.options.preventMouse&&t.pointerType==ft?t.stopDetect():(e.options.preventDefault&&t.preventDefault(),t.eventType==yt&&e.trigger("touch",t))}},function(t){var e=!1;st.gestures.Transform={name:t,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(n,i){switch(n.eventType){case mt:e=!1;break;case _t:if(n.touches.length<2)return;var o=Math.abs(1-n.scale),r=Math.abs(n.rotation);if(o<i.options.transformMinScale&&r<i.options.transformMinRotation)return;rt.current.name=t,e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),r>i.options.transformMinRotation&&i.trigger("rotate",n),o>i.options.transformMinScale&&(i.trigger("pinch",n),i.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case bt:e&&n.changedLength<2&&(i.trigger(t+"end",n),e=!1)}}}}("transform");var kt=void 0,wt=void 0,Et=new(function(){function t(){p(this,t),this.queue=[]}return g(t,[{key:"add",value:function(t,e){var n=this;this.queue.push(t),1===this.queue.length&&setImmediate(this.queue[0]),e.then(function(){n.queue.shift(),n.queue.length>0&&setTimeout(n.queue[0],1e3/30)})}}]),t}()),Ct=function(t,e){["id","class","animation"].forEach(function(n){return e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}),e.modifier&&Q.addModifier(t,e.modifier)},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=_({},e),"string"==typeof t?e.message=t:e=t,e&&(e.message||e.messageHTML)||Q.throw("Notifications must contain a message"),(e.hasOwnProperty("buttonLabels")||e.hasOwnProperty("buttonLabel"))&&(e.buttonLabels=e.buttonLabels||e.buttonLabel,Array.isArray(e.buttonLabels)||(e.buttonLabels=[e.buttonLabels||""])),Q.extend({compile:function(t){return t},callback:function(t){return t},animation:"default",cancelable:!1,primaryButtonIndex:(e.buttonLabels||n.buttonLabels||[]).length-1},n,e)},St={};St._createAlertDialog=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Promise(function(t){var i=At.apply(void 0,e);Q.checkMissingImport("AlertDialog","AlertDialogButton");var o="";i.isPrompt&&(o='\n      <input\n        class="text-input text-input--underbar"\n        type="'+(i.inputType||"text")+'"\n        placeholder="'+(i.placeholder||"")+'"\n        value="'+(i.defaultValue||"")+'"\n        style="width: 100%; margin-top: 10px;"\n      />\n    ');var r="";i.buttonLabels.forEach(function(t,e){r+='\n      <ons-alert-dialog-button\n        class="\n          '+(e===i.primaryButtonIndex?" alert-dialog-button--primal":"")+"\n          "+(i.buttonLabels.length<=2?" alert-dialog-button--rowfooter":"")+'\n        "\n        style="position: relative;">\n        '+t+"\n      </ons-alert-dialog-button>\n    "});var a={},s=function(){a.dialog.onDialogCancel&&a.dialog.removeEventListener("dialog-cancel",a.dialog.onDialogCancel),Object.keys(a).forEach(function(t){return delete a[t]}),a=null,i.destroy instanceof Function&&i.destroy()};a.dialog=document.createElement("ons-alert-dialog"),a.dialog.innerHTML='\n    <div class="alert-dialog-mask"\n      style="\n        '+(i.maskColor?"background-color: "+i.maskColor:"")+'\n      "></div>\n    <div class="alert-dialog">\n      <div class="alert-dialog-container">\n        <div class="alert-dialog-title">\n          '+(i.title||"")+'\n        </div>\n        <div class="alert-dialog-content">\n          '+(i.message||i.messageHTML)+"\n          "+o+'\n        </div>\n        <div class="\n          alert-dialog-footer\n          '+(i.buttonLabels.length<=2?" alert-dialog-footer--rowfooter":"")+'\n        ">\n          '+r+"\n        </div>\n      </div>\n    </div>\n  ",n(a.dialog),Ct(a.dialog,i),i.isPrompt&&i.submitOnEnter&&(a.input=a.dialog.querySelector(".text-input"),a.input.onkeypress=function(e){13===e.keyCode&&a.dialog.hide().then(function(){if(a){var e=a.input.value;s(),i.callback(e),t(e)}})}),a.footer=a.dialog.querySelector(".alert-dialog-footer"),Q.arrayFrom(a.dialog.querySelectorAll(".alert-dialog-button")).forEach(function(e,n){e.onclick=function(){a.dialog.hide().then(function(){if(a){var e=n;i.isPrompt&&(e=n===i.primaryButtonIndex?a.input.value:null),a.dialog.remove(),s(),i.callback(e),t(e)}})},a.footer.appendChild(e)}),i.cancelable&&(a.dialog.cancelable=!0,a.dialog.onDialogCancel=function(){setImmediate(function(){a.dialog.remove(),s()});var e=i.isPrompt?null:-1;i.callback(e),t(e)},a.dialog.addEventListener("dialog-cancel",a.dialog.onDialogCancel,!1)),document.body.appendChild(a.dialog),i.compile(a.dialog),setImmediate(function(){a.dialog.show().then(function(){if(a.input&&i.isPrompt&&i.autofocus){var t=a.input.value.length;a.input.focus(),a.input.setSelectionRange(t,t)}})})})},St.alert=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert"})},St.confirm=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["Cancel","OK"],title:"Confirm"})},St.prompt=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert",isPrompt:!0,autofocus:!0,submitOnEnter:!0})},St.toast=function(t,e){var n=new Promise(function(i){Q.checkMissingImport("Toast"),e=At(t,e,{timeout:0,force:!1});var o=Q.createElement("\n      <ons-toast>\n        "+e.message+"\n        "+(e.buttonLabels?"<button>"+e.buttonLabels[0]+"</button>":"")+"\n      </ons-toast>\n    ");Ct(o,e);var r=function(t){o&&o.hide().then(function(){o&&(o.remove(),o=null,e.callback(t),i(t))})};e.buttonLabels&&(Q.findChild(o._toast,"button").onclick=function(){return r(0)}),document.body.appendChild(o),e.compile(o);var a=function(){o.parentElement&&o.show(e).then(function(){e.timeout&&setTimeout(function(){return r(-1)},e.timeout)})};setImmediate(function(){return e.force?a():Et.add(a,n)})});return n};var Pt=function(){};Pt.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},once:function(t,e){var n=this;this.on(t,function i(){return n.off(t,i),e.apply(null,arguments)})},off:function(t,e){this._events=this._events||{},t in this._events!=!1&&(this._events[t]=this._events[t].filter(function(t){return!!e&&e!==t}))},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},Pt.mixin=function(t){for(var e=["on","once","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=Pt.prototype[e[n]]:t[e[n]]=Pt.prototype[e[n]]},window.MicroEvent=Pt;var Ot=function(){var t={_isPortrait:!1,isPortrait:function(){return this._isPortrait()},isLandscape:function(){return!this.isPortrait()},_init:function(){return document.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this),!1),"orientation"in window?window.addEventListener("orientationchange",this._onOrientationChange.bind(this),!1):window.addEventListener("resize",this._onResize.bind(this),!1),this._isPortrait=function(){return window.innerHeight>window.innerWidth},this},_onDOMContentLoaded:function(){this._installIsPortraitImplementation(),this.emit("change",{isPortrait:this.isPortrait()})},_installIsPortraitImplementation:function(){var t=window.innerWidth<window.innerHeight;"orientation"in window?window.orientation%180==0?this._isPortrait=function(){return 0===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return 90===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return window.innerHeight>window.innerWidth}},_onOrientationChange:function(){var t=this,e=this._isPortrait(),n=0,i=setInterval(function(){n++;var o=window.innerWidth,r=window.innerHeight;e&&o<=r||!e&&o>=r?(t.emit("change",{isPortrait:e}),clearInterval(i)):50===n&&(t.emit("change",{isPortrait:e}),clearInterval(i))},20)},_onResize:function(){this.emit("change",{isPortrait:this.isPortrait()})}};return Pt.mixin(t),t}()._init(),xt={add:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.addModifier(t,e)})},remove:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.removeModifier(t,e)})},contains:Q.hasModifier,toggle:Q.toggleModifier},Tt=new Pt;Tt._visible=!1;var Lt=function(){Tt._visible=!0,Tt.emit("show")},Mt=function(){Tt._visible=!1,Tt.emit("hide")},Dt=function(){Q.warn("ons-keyboard: Cordova Keyboard plugin is not present.")};document.addEventListener("deviceready",function(){("undefined"!=typeof Keyboard?(Keyboard.onshow=Lt,Keyboard.onhide=Mt,Tt.emit("init",{visible:Keyboard.isVisible}),!0):void 0!==cordova.plugins&&void 0!==cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",Lt),window.addEventListener("native.keyboardhide",Mt),Tt.emit("init",{visible:cordova.plugins.Keyboard.isVisible}),!0))||((document.querySelector("[ons-keyboard-active]")||document.querySelector("[ons-keyboard-inactive]"))&&Dt(),Tt.on=Dt)});var It=function(){var t=0;return function(){return t++}}(),Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this._lockList=[],this._waitList=[],this._log=e.log||function(){}}return g(t,[{key:"lock",value:function(){var t=this,e=function e(){t._unlock(e)};return e.id=It(),this._lockList.push(e),this._log("lock: "+e.id),e}},{key:"_unlock",value:function(t){var e=this._lockList.indexOf(t);if(-1===e)throw new Error("This function is not registered in the lock list.");this._lockList.splice(e,1),this._log("unlock: "+t.id),this._tryToFreeWaitList()}},{key:"_tryToFreeWaitList",value:function(){for(;!this.isLocked()&&this._waitList.length>0;)this._waitList.shift()()}},{key:"waitUnlock",value:function(t){if(!(t instanceof Function))throw new Error("The callback param must be a function.");this.isLocked()?this._waitList.push(t):t()}},{key:"isLocked",value:function(){return this._lockList.length>0}}]),t}(),Bt=function(){function t(e,n){p(this,t),this._loader=e instanceof Function?e:function(t,e){var n=t.page,i=t.parent;t.params,P.getPageHTMLAsync(n).then(function(t){var n=Q.createElement(t);i.appendChild(n),e(n)})},this._unloader=n instanceof Function?n:i}return g(t,[{key:"load",value:function(t,e){var n=t.page,i=t.parent,o=t.params,r=void 0===o?{}:o;this._loader({page:n,parent:i,params:r},function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");e(t)})}},{key:"unload",value:function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");this._unloader(t)}},{key:"internalLoader",set:function(t){if(!(t instanceof Function))throw Error("First parameter must be an instance of Function");this._loader=t},get:function(){return this._loader}}]),t}(),jt=new Bt,Ht=new Bt(function(t,e){var n=t.page,i=t.parent,o=(t.params,Q.createElement(n.trim()));i.appendChild(o),e(o)},i),Rt={animit:nt,defaultPageLoader:jt,elements:c,GestureDetector:st,modifier:xt,notification:St,orientation:Ot,pageAttributeExpression:S,PageLoader:Bt,platform:C,softwareKeyboard:Tt,_autoStyle:N,_internal:P,_readyLock:new Nt,_util:Q};Rt.platform.select((window.location.search.match(/platform=([\w-]+)/)||[])[1]),function(){var t=Rt._readyLock.lock();window.addEventListener("DOMContentLoaded",function(){Rt.isWebView()?window.document.addEventListener("deviceready",t,!1):t()},!1)}();var Ft=function(t){return Q.throw("This method must be called "+(t?"after":"before")+" ons.isReady() is true")};Rt.isReady=function(){return!Rt._readyLock.isLocked()},Rt.isWebView=Rt.platform.isWebView,Rt.ready=function(t){Rt.isReady()?t():Rt._readyLock.waitUnlock(t)},Rt.setDefaultDeviceBackButtonListener=function(t){Rt.isReady()||Ft(!0),Rt._defaultDeviceBackButtonHandler.setListener(t)},Rt.disableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.disable()},Rt.enableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.enable()},Rt.fireDeviceBackButtonEvent=function(){P.dbbDispatcher.fireDeviceBackButtonEvent()},Rt.enableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!0},Rt.disableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!1},Rt.mockStatusBar=function(){Rt.isReady()&&Ft(!1);var t=function(){if(!document.body.children[0]||!document.body.children[0].classList.contains("ons-status-bar-mock")){var t=C.isAndroid(),e=function(t){return'<i class="'+t.split("-")[0]+" "+t+'"></i>'},n=t?e("zmdi-twitter")+" "+e("zmdi-google-play"):"No SIM "+e("fa-wifi"),i=t?"":"12:28 PM",o=t?e("zmdi-network")+" "+e("zmdi-wifi")+" "+e("zmdi-battery")+" 12:28 PM":"80% "+e("fa-battery-three-quarters");document.body.insertBefore(Q.createElement('<div class="ons-status-bar-mock '+(t?"android":"ios")+'"><div>'+n+"</div><div>"+i+"</div><div>"+o+"</div></div>"),document.body.firstChild)}};document.body?t():P.waitDOMContentLoaded(t)},Rt.disableAnimations=function(){P.config.animationsDisabled=!0},Rt.enableAnimations=function(){P.config.animationsDisabled=!1},Rt._disableWarnings=function(){P.config.warningsDisabled=!0},Rt._enableWarnings=function(){P.config.warningsDisabled=!1},Rt.disableAutoStyling=N.disable,Rt.enableAutoStyling=N.enable,Rt.disableIconAutoPrefix=function(){Q.checkMissingImport("Icon"),c.Icon.setAutoPrefix(!1)},Rt.forceUIWebViewScrollFix=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];P.config.forceUIWebViewScrollFix=t},Rt.forcePlatformStyling=function(t){Rt.enableAutoStyling(),Rt.platform.select(t||"ios"),Rt._util.arrayFrom(document.querySelectorAll("*")).forEach(function(t){"ons-if"===t.tagName.toLowerCase()?t._platformUpdate():t.tagName.match(/^ons-/i)&&(N.prepare(t,!0),"ons-tabbar"===t.tagName.toLowerCase()&&t._updatePosition())})},Rt.preload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all((t instanceof Array?t:[t]).map(function(t){return"string"!=typeof t&&Q.throw("Expected string arguments but got "+(void 0===t?"undefined":f(t))),P.getTemplateHTMLAsync(t)}))},Rt.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(t){var n=Rt._util.createElement(t);if(n.remove(),e.append){(e.append instanceof HTMLElement?e.append:document.body).insertBefore(n,e.insertBefore||null),e.link instanceof Function&&e.link(n)}return n};return"<"===(t=t.trim()).charAt(0)?n(t):P.getPageHTMLAsync(t).then(n)},Rt.createPopover=Rt.createDialog=Rt.createAlertDialog=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rt.createElement(t,_({append:!0},e))},Rt.openActionSheet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e){Q.checkMissingImport("ActionSheet"),function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Function";return Q.throw('"options.'+t+'" must be an instance of '+e)},n=function(e){return Object.hasOwnProperty.call(t,e)},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;return t[e]instanceof n},o="buttons",r="callback",a="compile",s="destroy";(!n(o)||!i(o,Array))&&e(o,"Array"),n(r)&&!i(r)&&e(r),n(a)&&!i(a)&&e(a),n(s)&&!i(s)&&e(s)}(t);var n=Q.createElement("\n    <ons-action-sheet\n      "+(t.title?'title="'+t.title+'"':"")+"\n      "+(t.cancelable?"cancelable":"")+"\n      "+(t.modifier?'modifier="'+t.modifier+'"':"")+"\n      "+(t.maskColor?'mask-color="'+t.maskColor+'"':"")+"\n      "+(t.id?'id="'+t.id+'"':"")+"\n      "+(t.class?'class="'+t.class+'"':"")+'\n    >\n      <div class="action-sheet"></div>\n    </ons-action-sheet>\n  '),i=function i(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n&&(t.destroy&&t.destroy(n),n.removeEventListener("dialog-cancel",i,!1),n.remove(),n=null,t.callback&&t.callback(r),e(r))};n.addEventListener("dialog-cancel",i,!1);var o=document.createDocumentFragment();t.buttons.forEach(function(e,r){var a="string"==typeof e?{label:e}:_({},e);t.destructive===r&&(a.modifier=(a.modifier||"")+" destructive");var s=Q.createElement("\n      <ons-action-sheet-button\n        "+(a.icon?'icon="'+a.icon+'"':"")+"\n        "+(a.modifier?'modifier="'+a.modifier+'"':"")+"\n      >\n        "+a.label+"\n      </ons-action-sheet-button>\n    ");s.onclick=function(t){return n.hide().then(function(){return i(t,r)})},o.appendChild(s)}),Q.findChild(n,".action-sheet").appendChild(o),document.body.appendChild(n),t.compile&&t.compile(el.dialog),setImmediate(function(){return n.show({animation:t.animation,animationOptions:t.animationOptions})})})},Rt.resolveLoadingPlaceholder=function(t,e){var n=Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]"));0===n.length&&Q.throw("No ons-loading-placeholder exists"),n.filter(function(t){return!t.getAttribute("page")}).forEach(function(n){n.setAttribute("ons-loading-placeholder",t),Rt._resolveLoadingPlaceholder(n,t,e)})},Rt._setupLoadingPlaceHolders=function(){Rt.ready(function(){Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]")).forEach(function(t){var e=t.getAttribute("ons-loading-placeholder");"string"==typeof e&&Rt._resolveLoadingPlaceholder(t,e)})})},Rt._resolveLoadingPlaceholder=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return e()};e&&Rt.createElement(e).then(function(e){e.style.display="none",t.appendChild(e),n(e,function(){for(;t.firstChild&&t.firstChild!==e;)t.removeChild(t.firstChild);e.style.display=""})}).catch(function(t){return Promise.reject("Unabled to resolve placeholder: "+t)})};var qt="currentScript"in document?function(){return document.currentScript}:function(){return document.scripts[document.scripts.length-1]};Rt.getScriptPage=function(){return qt()&&/ons-page/i.test(qt().parentElement.tagName)&&qt().parentElement||null};var zt=o(function(t){!function(){function e(t,n){var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=r.length;a<s;a++)this[r[a]]=function(t,e){return function(){return t.apply(e,arguments)}}(this[r[a]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(t){o(t)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=o&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0,l=["email","number","password","search","tel","text","url"];e.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},e.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},e.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},e.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type&&"email"!==t.type&&"number"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},e.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},e.prototype.isTextField=function(t){return"textarea"===t.tagName.toLowerCase()||-1!==l.indexOf(t.type)},e.prototype.onTouchStart=function(t){var e,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],e.isContentEditable)return!0;if(o){if(e===document.activeElement&&this.isTextField(e))return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1&&t.preventDefault(),!0},e.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(t){var e,n,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],(c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=c.tagName.toLowerCase())){if(e=this.findControl(c)){if(this.focus(c),i)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||o&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),r&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return!(!o||r||!(l=c.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},e.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},e.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(t){var e,n,o;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},e.attach=function(t,n){return new e(t,n)},t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()}).FastClick;window.customElements&&(window.customElements.forcePolyfill=!0);var Vt=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Wt=o(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),Ut=(Wt.version,function(t){return"object"===(void 0===t?"undefined":f(t))?null!==t:"function"==typeof t}),Xt=function(t){if(!Ut(t))throw TypeError(t+" is not an object!");return t},Yt=function(t){try{return!!t()}catch(t){return!0}},Gt=!Yt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$t=Vt.document,Kt=Ut($t)&&Ut($t.createElement),Qt=function(t){return Kt?$t.createElement(t):{}},Jt=!Gt&&!Yt(function(){return 7!=Object.defineProperty(Qt("div"),"a",{get:function(){return 7}}).a}),Zt=function(t,e){if(!Ut(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Ut(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},te=Object.defineProperty,ee={f:Gt?Object.defineProperty:function(t,e,n){if(Xt(t),e=Zt(e,!0),Xt(n),Jt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},ne=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=Gt?function(t,e,n){return ee.f(t,e,ne(1,n))}:function(t,e,n){return t[e]=n,t},oe={}.hasOwnProperty,re=function(t,e){return oe.call(t,e)},ae=0,se=Math.random(),le=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ae+se).toString(36))},ue=o(function(t){var e=le("src"),n=Function.toString,i=(""+n).split("toString");Wt.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var a="function"==typeof o;a&&(re(o,"name")||ie(o,"name",n)),t[n]!==o&&(a&&(re(o,e)||ie(o,e,t[n]?""+t[n]:i.join(String(n)))),t===Vt?t[n]=o:r?t[n]?t[n]=o:ie(t,n,o):(delete t[n],ie(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),ce=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},he=function(t,e,n){if(ce(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},de=function t(e,n,i){var o,r,a,s,l=e&t.F,u=e&t.G,c=e&t.P,h=e&t.B,d=u?Vt:e&t.S?Vt[n]||(Vt[n]={}):(Vt[n]||{}).prototype,f=u?Wt:Wt[n]||(Wt[n]={}),p=f.prototype||(f.prototype={});u&&(i=n);for(o in i)a=((r=!l&&d&&void 0!==d[o])?d:i)[o],s=h&&r?he(a,Vt):c&&"function"==typeof a?he(Function.call,a):a,d&&ue(d,o,a,e&t.U),f[o]!=a&&ie(f,o,s),c&&p[o]!=a&&(p[o]=a)};Vt.core=Wt,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var fe=de,pe={f:{}.propertyIsEnumerable},ge={}.toString,me=function(t){return ge.call(t).slice(8,-1)},_e=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==me(t)?t.split(""):Object(t)},ve=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},be=function(t){return _e(ve(t))},ye=Object.getOwnPropertyDescriptor,ke={f:Gt?ye:function(t,e){if(t=be(t),e=Zt(e,!0),Jt)try{return ye(t,e)}catch(t){}if(re(t,e))return ne(!pe.f.call(t,e),t[e])}},we=function(t,e){if(Xt(t),!Ut(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ee={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=he(Function.call,ke.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return we(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:we};fe(fe.S,"Object",{setPrototypeOf:Ee.set});Wt.Object.setPrototypeOf;var Ce=Vt["__core-js_shared__"]||(Vt["__core-js_shared__"]={}),Ae=function(t){return Ce[t]||(Ce[t]={})},Se=o(function(t){var e=Ae("wks"),n=Vt.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:le)("Symbol."+t))}).store=e}),Pe=Se("toStringTag"),Oe="Arguments"==me(function(){return arguments}()),xe=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Pe))?n:Oe?me(e):"Object"==(i=me(e))&&"function"==typeof e.callee?"Arguments":i},Te={};Te[Se("toStringTag")]="z",Te+""!="[object z]"&&ue(Object.prototype,"toString",function(){return"[object "+xe(this)+"]"},!0);var Le=Math.ceil,Me=Math.floor,De=function(t){return isNaN(t=+t)?0:(t>0?Me:Le)(t)},Ie={},Ne=Math.min,Be=function(t){return t>0?Ne(De(t),9007199254740991):0},je=Math.max,He=Math.min,Re=Ae("keys"),Fe=function(t){return Re[t]||(Re[t]=le(t))},qe=function(t){return function(e,n,i){var o,r=be(e),a=Be(r.length),s=function(t,e){return(t=De(t))<0?je(t+e,0):He(t,e)}(i,a);if(t&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}}(!1),ze=Fe("IE_PROTO"),Ve="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),We=Object.keys||function(t){return function(t,e){var n,i=be(t),o=0,r=[];for(n in i)n!=ze&&re(i,n)&&r.push(n);for(;e.length>o;)re(i,n=e[o++])&&(~qe(r,n)||r.push(n));return r}(t,Ve)},Ue=Gt?Object.defineProperties:function(t,e){Xt(t);for(var n,i=We(e),o=i.length,r=0;o>r;)ee.f(t,n=i[r++],e[n]);return t},Xe=Vt.document,Ye=Xe&&Xe.documentElement,Ge=Fe("IE_PROTO"),$e=function(){},Ke=function(){var t,e=Qt("iframe"),n=Ve.length;for(e.style.display="none",Ye.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ke=t.F;n--;)delete Ke.prototype[Ve[n]];return Ke()},Qe=Object.create||function(t,e){var n;return null!==t?($e.prototype=Xt(t),n=new $e,$e.prototype=null,n[Ge]=t):n=Ke(),void 0===e?n:Ue(n,e)},Je=ee.f,Ze=Se("toStringTag"),tn=function(t,e,n){t&&!re(t=n?t:t.prototype,Ze)&&Je(t,Ze,{configurable:!0,value:e})},en={};ie(en,Se("iterator"),function(){return this});var nn=function(t,e,n){t.prototype=Qe(en,{next:ne(1,n)}),tn(t,e+" Iterator")},on=function(t){return Object(ve(t))},rn=Fe("IE_PROTO"),an=Object.prototype,sn=Object.getPrototypeOf||function(t){return t=on(t),re(t,rn)?t[rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?an:null},ln=Se("iterator"),un=!([].keys&&"next"in[].keys()),cn=function(){return this},hn=function(t,e,n,i,o,r,a){nn(n,e,i);var s,l,u,c=function(t){if(!un&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d="values"==o,f=!1,p=t.prototype,g=p[ln]||p["@@iterator"]||o&&p[o],m=g||c(o),_=o?d?c("entries"):m:void 0,v="Array"==e?p.entries||g:g;if(v&&(u=sn(v.call(new t)))!==Object.prototype&&u.next&&(tn(u,h,!0),re(u,ln)||ie(u,ln,cn)),d&&g&&"values"!==g.name&&(f=!0,m=function(){return g.call(this)}),(un||f||!p[ln])&&ie(p,ln,m),Ie[e]=m,Ie[h]=cn,o)if(s={values:d?m:c("values"),keys:r?m:c("keys"),entries:_},a)for(l in s)l in p||ue(p,l,s[l]);else fe(fe.P+fe.F*(un||f),e,s);return s},dn=function(t){return function(e,n){var i,o,r=String(ve(e)),a=De(n),s=r.length;return a<0||a>=s?t?"":void 0:(i=r.charCodeAt(a))<55296||i>56319||a+1===s||(o=r.charCodeAt(a+1))<56320||o>57343?t?r.charAt(a):i:t?r.slice(a,a+2):o-56320+(i-55296<<10)+65536}}(!0);hn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=dn(e,n),this._i+=t.length,{value:t,done:!1})});var fn=Se("unscopables"),pn=Array.prototype;void 0==pn[fn]&&ie(pn,fn,{});var gn=function(t){pn[fn][t]=!0},mn=function(t,e){return{value:e,done:!!t}},_n=hn(Array,"Array",function(t,e){this._t=be(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,mn(1)):"keys"==e?mn(0,n):"values"==e?mn(0,t[n]):mn(0,[n,t[n]])},"values");Ie.Arguments=Ie.Array,gn("keys"),gn("values"),gn("entries");for(var vn=Se("iterator"),bn=Se("toStringTag"),yn=Ie.Array,kn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wn=We(kn),En=0;En<wn.length;En++){var Cn,An=wn[En],Sn=kn[An],Pn=Vt[An],On=Pn&&Pn.prototype;if(On&&(On[vn]||ie(On,vn,yn),On[bn]||ie(On,bn,An),Ie[An]=yn,Sn))for(Cn in _n)On[Cn]||ue(On,Cn,_n[Cn],!0)}var xn=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},Tn=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},Ln=function(t,e,n,i){try{return i?e(Xt(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Xt(o.call(t)),e}},Mn=Se("iterator"),Dn=Array.prototype,In=function(t){return void 0!==t&&(Ie.Array===t||Dn[Mn]===t)},Nn=Se("iterator"),Bn=Wt.getIteratorMethod=function(t){if(void 0!=t)return t[Nn]||t["@@iterator"]||Ie[xe(t)]},jn=o(function(t){var e={},n={},i=t.exports=function(t,i,o,r,a){var s,l,u,c,h=a?function(){return t}:Bn(t),d=he(o,r,i?2:1),f=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(In(h)){for(s=Be(t.length);s>f;f++)if((c=i?d(Xt(l=t[f])[0],l[1]):d(t[f]))===e||c===n)return c}else for(u=h.call(t);!(l=u.next()).done;)if((c=Ln(u,d,l.value,i))===e||c===n)return c};i.BREAK=e,i.RETURN=n}),Hn=Se("species"),Rn=o(function(t){var e=le("meta"),n=ee.f,i=0,o=Object.isExtensible||function(){return!0},r=!Yt(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Ut(t))return"symbol"==(void 0===t?"undefined":f(t))?t:("string"==typeof t?"S":"P")+t;if(!re(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!re(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return r&&s.NEED&&o(t)&&!re(t,e)&&a(t),t}}}),Fn=(Rn.KEY,Rn.NEED,Rn.fastKey,Rn.getWeak,Rn.onFreeze,function(t,e){if(!Ut(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),qn=ee.f,zn=Rn.fastKey,Vn=Gt?"_s":"size",Wn=function(t,e){var n,i=zn(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n},Un={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=Qe(null),t._f=void 0,t._l=void 0,t[Vn]=0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{clear:function(){for(var t=Fn(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[Vn]=0},delete:function(t){var n=Fn(this,e),i=Wn(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[Vn]--}return!!i},forEach:function(t){Fn(this,e);for(var n,i=he(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Wn(Fn(this,e),t)}}),Gt&&qn(o.prototype,"size",{get:function(){return Fn(this,e)[Vn]}}),o},def:function(t,e,n){var i,o,r=Wn(t,e);return r?r.v=n:(t._l=r={i:o=zn(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[Vn]++,"F"!==o&&(t._i[o]=r)),t},getEntry:Wn,setStrong:function(t,e,n){hn(t,e,function(t,n){this._t=Fn(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?"keys"==t?mn(0,e.k):"values"==t?mn(0,e.v):mn(0,[e.k,e.v]):(this._t=void 0,mn(1))},n?"entries":"values",!n,!0),function(t){var e=Vt[t];Gt&&e&&!e[Hn]&&ee.f(e,Hn,{configurable:!0,get:function(){return this}})}(e)}},Xn=Se("iterator"),Yn=!1;try{[7][Xn]().return=function(){Yn=!0}}catch(t){}var Gn=function(t,e){if(!e&&!Yn)return!1;var n=!1;try{var i=[7],o=i[Xn]();o.next=function(){return{done:n=!0}},i[Xn]=function(){return o},t(i)}catch(t){}return n},$n=Ee.set,Kn=function(t,e,n,i,o,r){var a=Vt[t],s=a,l=o?"set":"add",u=s&&s.prototype,c={},h=function(t){var e=u[t];ue(u,t,"delete"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!Ut(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(r||u.forEach&&!Yt(function(){(new s).entries().next()}))){var d=new s,f=d[l](r?{}:-0,1)!=d,p=Yt(function(){d.has(1)}),g=Gn(function(t){new s(t)}),m=!r&&Yt(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});g||((s=e(function(e,n){Tn(e,s,t);var i=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&Ut(i)&&$n&&$n(t,i),t}(new a,e,s);return void 0!=n&&jn(n,o,i[l],i),i})).prototype=u,u.constructor=s),(p||m)&&(h("delete"),h("has"),o&&h("get")),(m||f)&&h(l),r&&u.clear&&delete u.clear}else s=i.getConstructor(e,t,o,l),xn(s.prototype,n),Rn.NEED=!0;return tn(s,t),c[t]=s,fe(fe.G+fe.W+fe.F*(s!=a),c),r||i.setStrong(s,t,o),s},Qn=(Kn("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Un.def(Fn(this,"Set"),t=0===t?0:t,t)}},Un),function(t){return function(){if(xe(this)!=t)throw TypeError(t+"#toJSON isn't generic");return function(t,e){var n=[];return jn(t,!1,n.push,n,e),n}(this)}});fe(fe.P+fe.R,"Set",{toJSON:Qn("Set")});var Jn=function(t){fe(fe.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Jn("Set");var Zn=function(t){fe(fe.S,t,{from:function(t){var e,n,i,o,r=arguments[1];return ce(this),(e=void 0!==r)&&ce(r),void 0==t?new this:(n=[],e?(i=0,o=he(r,arguments[2],2),jn(t,!1,function(t){n.push(o(t,i++))})):jn(t,!1,n.push,n),new this(n))}})};Zn("Set");Wt.Set,Kn("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=Un.getEntry(Fn(this,"Map"),t);return e&&e.v},set:function(t,e){return Un.def(Fn(this,"Map"),0===t?0:t,e)}},Un,!0);fe(fe.P+fe.R,"Map",{toJSON:Qn("Map")}),Jn("Map"),Zn("Map");Wt.Map;var ti=Array.isArray||function(t){return"Array"==me(t)},ei=Se("species"),ni=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,a=6==t,s=5==t||a,l=e||function(t,e){return new(function(t){var e;return ti(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ti(e.prototype)||(e=void 0),Ut(e)&&null===(e=e[ei])&&(e=void 0)),void 0===e?Array:e}(t))(e)};return function(e,u,c){for(var h,d,f=on(e),p=_e(f),g=he(u,c,3),m=Be(p.length),_=0,v=n?l(e,m):i?l(e,0):void 0;m>_;_++)if((s||_ in p)&&(h=p[_],d=g(h,_,f),t))if(n)v[_]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:v.push(h)}else if(r)return!1;return a?-1:o||r?r:v}},ii={f:Object.getOwnPropertySymbols},oi=Object.assign,ri=!oi||Yt(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=oi({},t)[n]||Object.keys(oi({},e)).join("")!=i})?function(t,e){for(var n=on(t),i=arguments.length,o=1,r=ii.f,a=pe.f;i>o;)for(var s,l=_e(arguments[o++]),u=r?We(l).concat(r(l)):We(l),c=u.length,h=0;c>h;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:oi,ai=Rn.getWeak,si=ni(5),li=ni(6),ui=0,ci=function(t){return t._l||(t._l=new hi)},hi=function(){this.a=[]},di=function(t,e){return si(t.a,function(t){return t[0]===e})};hi.prototype={get:function(t){var e=di(this,t);if(e)return e[1]},has:function(t){return!!di(this,t)},set:function(t,e){var n=di(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=li(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var fi={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=ui++,t._l=void 0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{delete:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).delete(t):n&&re(n,this._i)&&delete n[this._i]},has:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).has(t):n&&re(n,this._i)}}),o},def:function(t,e,n){var i=ai(Xt(e),!0);return!0===i?ci(t).set(e,n):i[t._i]=n,t},ufstore:ci};o(function(t){var e,n=ni(0),i=Rn.getWeak,o=Object.isExtensible,r=fi.ufstore,a={},s=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},l={get:function(t){if(Ut(t)){var e=i(t);return!0===e?r(Fn(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return fi.def(Fn(this,"WeakMap"),t,e)}},u=t.exports=Kn("WeakMap",s,l,fi,!0,!0);Yt(function(){return 7!=(new u).set((Object.freeze||Object)(a),7).get(a)})&&(e=fi.getConstructor(s,"WeakMap"),ri(e.prototype,l),Rn.NEED=!0,n(["delete","has","get","set"],function(t){var n=u.prototype,i=n[t];ue(n,t,function(n,r){if(Ut(n)&&!o(n)){this._f||(this._f=new e);var a=this._f[t](n,r);return"set"==t?this:a}return i.call(this,n,r)})}))});Jn("WeakMap"),Zn("WeakMap");Wt.WeakMap;var pi=function(t,e,n){e in t?ee.f(t,e,ne(0,n)):t[e]=n};fe(fe.S+fe.F*!Gn(function(t){}),"Array",{from:function(t){var e,n,i,o,r=on(t),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,c=0,h=Bn(r);if(u&&(l=he(l,s>2?arguments[2]:void 0,2)),void 0==h||a==Array&&In(h))for(n=new a(e=Be(r.length));e>c;c++)pi(n,c,u?l(r[c],c):r[c]);else for(o=h.call(r),n=new a;!(i=o.next()).done;c++)pi(n,c,u?Ln(o,l,[i.value,c],!0):i.value);return n.length=c,n}});Wt.Array.from;var gi=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),mi={custom:1,failed:2},_i=function(){function t(){p(this,t),this._localNameToDefinition=new Map,this._constructorToDefinition=new Map,this._patches=[],this._hasPatches=!1}return g(t,[{key:"setDefinition",value:function(t,e){this._localNameToDefinition.set(t,e),this._constructorToDefinition.set(e.constructor,e)}},{key:"localNameToDefinition",value:function(t){return this._localNameToDefinition.get(t)}},{key:"constructorToDefinition",value:function(t){return this._constructorToDefinition.get(t)}},{key:"addPatch",value:function(t){this._hasPatches=!0,this._patches.push(t)}},{key:"patchTree",value:function(t){var e=this;this._hasPatches&&l(t,function(t){return e.patch(t)})}},{key:"patch",value:function(t){if(this._hasPatches&&!t.__CE_patched){t.__CE_patched=!0;for(var e=0;e<this._patches.length;e++)this._patches[e](t)}}},{key:"connectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom?a(i)&&this.connectedCallback(i):this.upgradeElement(i)}}},{key:"disconnectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom&&this.disconnectedCallback(i)}}},{key:"patchAndUpgradeTree",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=[];if(l(t,function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var o=t.import;o instanceof Node&&"complete"===o.readyState?(o.__CE_isImportDocument=!0,o.__CE_hasRegistry=!0):t.addEventListener("load",function(){var i=t.import;i.__CE_documentLoadHandled||(i.__CE_documentLoadHandled=!0,i.__CE_isImportDocument=!0,i.__CE_hasRegistry=!0,n.delete(i),e.patchAndUpgradeTree(i,n))})}else i.push(t)},n),this._hasPatches)for(var o=0;o<i.length;o++)this.patch(i[o]);for(var r=0;r<i.length;r++)this.upgradeElement(i[r])}},{key:"upgradeElement",value:function(t){if(void 0===t.__CE_state){var e=this.localNameToDefinition(t.localName);if(e){e.constructionStack.push(t);var n=e.constructor;try{try{if(new n!==t)throw new Error("The custom element constructor did not produce the element being upgraded.")}finally{e.constructionStack.pop()}}catch(e){throw t.__CE_state=mi.failed,e}if(t.__CE_state=mi.custom,t.__CE_definition=e,e.attributeChangedCallback)for(var i=e.observedAttributes,o=0;o<i.length;o++){var r=i[o],s=t.getAttribute(r);null!==s&&this.attributeChangedCallback(t,r,null,s,null)}a(t)&&this.connectedCallback(t)}}}},{key:"connectedCallback",value:function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t),t.__CE_isConnectedCallbackCalled=!0}},{key:"disconnectedCallback",value:function(t){t.__CE_isConnectedCallbackCalled||this.connectedCallback(t);var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t),t.__CE_isConnectedCallbackCalled=void 0}},{key:"attributeChangedCallback",value:function(t,e,n,i,o){var r=t.__CE_definition;r.attributeChangedCallback&&r.observedAttributes.indexOf(e)>-1&&r.attributeChangedCallback.call(t,e,n,i,o)}}]),t}(),vi=function(){function t(e,n){p(this,t),this._internals=e,this._document=n,this._observer=void 0,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))}return g(t,[{key:"disconnect",value:function(){this._observer&&this._observer.disconnect()}},{key:"_handleMutations",value:function(t){var e=this._document.readyState;"interactive"!==e&&"complete"!==e||this.disconnect();for(var n=0;n<t.length;n++)for(var i=t[n].addedNodes,o=0;o<i.length;o++){var r=i[o];this._internals.patchAndUpgradeTree(r)}}}]),t}(),bi=function(){function t(){var e=this;p(this,t),this._value=void 0,this._resolve=void 0,this._promise=new Promise(function(t){e._resolve=t,e._value&&t(e._value)})}return g(t,[{key:"resolve",value:function(t){if(this._value)throw new Error("Already resolved.");this._value=t,this._resolve&&this._resolve(t)}},{key:"toPromise",value:function(){return this._promise}}]),t}(),yi=function(){function t(e){p(this,t),this._elementDefinitionIsRunning=!1,this._internals=e,this._whenDefinedDeferred=new Map,this._flushCallback=function(t){return t()},this._flushPending=!1,this._unflushedLocalNames=[],this._documentConstructionObserver=new vi(e,document)}return g(t,[{key:"define",value:function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!r(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this._internals.localNameToDefinition(t))throw new Error("A custom element with name '"+t+"' has already been defined.");if(this._elementDefinitionIsRunning)throw new Error("A custom element is already being defined.");this._elementDefinitionIsRunning=!0;var i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;try{var u=function(t){var e=c[t];if(void 0!==e&&!(e instanceof Function))throw new Error("The '"+t+"' callback must be a function.");return e},c=e.prototype;if(!(c instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");i=u("connectedCallback"),o=u("disconnectedCallback"),a=u("adoptedCallback"),s=u("attributeChangedCallback"),l=e.observedAttributes||[]}catch(t){return}finally{this._elementDefinitionIsRunning=!1}var h={localName:t,constructor:e,connectedCallback:i,disconnectedCallback:o,adoptedCallback:a,attributeChangedCallback:s,observedAttributes:l,constructionStack:[]};this._internals.setDefinition(t,h),this._unflushedLocalNames.push(t),this._flushPending||(this._flushPending=!0,this._flushCallback(function(){return n._flush()}))}},{key:"_flush",value:function(){if(!1!==this._flushPending)for(this._flushPending=!1,this._internals.patchAndUpgradeTree(document);this._unflushedLocalNames.length>0;){var t=this._unflushedLocalNames.shift(),e=this._whenDefinedDeferred.get(t);e&&e.resolve(void 0)}}},{key:"get",value:function(t){var e=this._internals.localNameToDefinition(t);if(e)return e.constructor}},{key:"whenDefined",value:function(t){if(!r(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this._whenDefinedDeferred.get(t);if(e)return e.toPromise();var n=new bi;this._whenDefinedDeferred.set(t,n);return this._internals.localNameToDefinition(t)&&-1===this._unflushedLocalNames.indexOf(t)&&n.resolve(void 0),n.toPromise()}},{key:"polyfillWrapFlushCallback",value:function(t){this._documentConstructionObserver.disconnect();var e=this._flushCallback;this._flushCallback=function(n){return t(function(){return e(n)})}}}]),t}();window.CustomElementRegistry=yi,yi.prototype.define=yi.prototype.define,yi.prototype.get=yi.prototype.get,yi.prototype.whenDefined=yi.prototype.whenDefined,yi.prototype.polyfillWrapFlushCallback=yi.prototype.polyfillWrapFlushCallback;var ki={Document_createElement:window.Document.prototype.createElement,Document_createElementNS:window.Document.prototype.createElementNS,Document_importNode:window.Document.prototype.importNode,Document_prepend:window.Document.prototype.prepend,Document_append:window.Document.prototype.append,Node_cloneNode:window.Node.prototype.cloneNode,Node_appendChild:window.Node.prototype.appendChild,Node_insertBefore:window.Node.prototype.insertBefore,Node_removeChild:window.Node.prototype.removeChild,Node_replaceChild:window.Node.prototype.replaceChild,Node_textContent:Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),Element_attachShadow:window.Element.prototype.attachShadow,Element_innerHTML:Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Element_getAttribute:window.Element.prototype.getAttribute,Element_setAttribute:window.Element.prototype.setAttribute,Element_removeAttribute:window.Element.prototype.removeAttribute,Element_getAttributeNS:window.Element.prototype.getAttributeNS,Element_setAttributeNS:window.Element.prototype.setAttributeNS,Element_removeAttributeNS:window.Element.prototype.removeAttributeNS,Element_insertAdjacentElement:window.Element.prototype.insertAdjacentElement,Element_prepend:window.Element.prototype.prepend,Element_append:window.Element.prototype.append,Element_before:window.Element.prototype.before,Element_after:window.Element.prototype.after,Element_replaceWith:window.Element.prototype.replaceWith,Element_remove:window.Element.prototype.remove,HTMLElement:window.HTMLElement,HTMLElement_innerHTML:Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),HTMLElement_insertAdjacentElement:window.HTMLElement.prototype.insertAdjacentElement},wi=new function t(){p(this,t)},Ei=function(t,e,n){e.prepend=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.prepend.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.append=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.append.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}}},Ci=window.customElements;if(!Ci||Ci.forcePolyfill||"function"!=typeof Ci.define||"function"!=typeof Ci.get){var Ai=new _i;!function(t){window.HTMLElement=function(){function e(){var e=this.constructor,n=t.constructorToDefinition(e);if(!n)throw new Error("The custom element being constructed was not registered with `customElements`.");var i=n.constructionStack;if(0===i.length){var o=ki.Document_createElement.call(document,n.localName);return Object.setPrototypeOf(o,e.prototype),o.__CE_state=mi.custom,o.__CE_definition=n,t.patch(o),o}var r=i.length-1,a=i[r];if(a===wi)throw new Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return i[r]=wi,Object.setPrototypeOf(a,e.prototype),t.patch(a),a}return e.prototype=ki.HTMLElement.prototype,e}()}(Ai),function(t){u(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.localNameToDefinition(e);if(n)return new n.constructor}var i=ki.Document_createElement.call(this,e);return t.patch(i),i}),u(Document.prototype,"importNode",function(e,n){var i=ki.Document_importNode.call(this,e,n);return this.__CE_hasRegistry?t.patchAndUpgradeTree(i):t.patchTree(i),i});u(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var i=t.localNameToDefinition(n);if(i)return new i.constructor}var o=ki.Document_createElementNS.call(this,e,n);return t.patch(o),o}),Ei(t,Document.prototype,{prepend:ki.Document_prepend,append:ki.Document_append})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType!==Node.TEXT_NODE){var i=void 0;if(this.firstChild){var o=this.childNodes,r=o.length;if(r>0&&a(this)){i=new Array(r);for(var s=0;s<r;s++)i[s]=o[s]}}if(n.set.call(this,e),i)for(var l=0;l<i.length;l++)t.disconnectTree(i[l])}else n.set.call(this,e)}})}u(Node.prototype,"insertBefore",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_insertBefore.call(this,e,n);if(a(this))for(var r=0;r<i.length;r++)t.connectTree(i[r]);return o}var s=a(e),l=ki.Node_insertBefore.call(this,e,n);return s&&t.disconnectTree(e),a(this)&&t.connectTree(e),l}),u(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var n=Array.prototype.slice.apply(e.childNodes),i=ki.Node_appendChild.call(this,e);if(a(this))for(var o=0;o<n.length;o++)t.connectTree(n[o]);return i}var r=a(e),s=ki.Node_appendChild.call(this,e);return r&&t.disconnectTree(e),a(this)&&t.connectTree(e),s}),u(Node.prototype,"cloneNode",function(e){var n=ki.Node_cloneNode.call(this,e);return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(n):t.patchTree(n),n}),u(Node.prototype,"removeChild",function(e){var n=a(e),i=ki.Node_removeChild.call(this,e);return n&&t.disconnectTree(e),i}),u(Node.prototype,"replaceChild",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_replaceChild.call(this,e,n);if(a(this)){t.disconnectTree(n);for(var r=0;r<i.length;r++)t.connectTree(i[r])}return o}var s=a(e),l=ki.Node_replaceChild.call(this,e,n),u=a(this);return u&&t.disconnectTree(n),s&&t.disconnectTree(e),u&&t.connectTree(e),l}),ki.Node_textContent&&ki.Node_textContent.get?e(Node.prototype,ki.Node_textContent):t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)ki.Node_removeChild.call(this,this.firstChild);ki.Node_appendChild.call(this,document.createTextNode(t))}})})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var i=this,o=void 0;if(a(this)&&(o=[],l(this,function(t){t!==i&&o.push(t)})),n.set.call(this,e),o)for(var r=0;r<o.length;r++){var s=o[r];s.__CE_state===mi.custom&&t.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(this):t.patchTree(this),e}})}function n(e,n){u(e,"insertAdjacentElement",function(e,i){var o=a(i),r=n.call(this,e,i);return o&&t.disconnectTree(i),a(r)&&t.connectTree(i),r})}if(ki.Element_attachShadow?u(Element.prototype,"attachShadow",function(t){var e=ki.Element_attachShadow.call(this,t);return this.__CE_shadowRoot=e,e}):console.warn("Custom Elements: `Element#attachShadow` was not patched."),ki.Element_innerHTML&&ki.Element_innerHTML.get)e(Element.prototype,ki.Element_innerHTML);else if(ki.HTMLElement_innerHTML&&ki.HTMLElement_innerHTML.get)e(HTMLElement.prototype,ki.HTMLElement_innerHTML);else{var i=ki.Document_createElement.call(document,"div");t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return ki.Node_cloneNode.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName?this.content:this;for(i.innerHTML=t;e.childNodes.length>0;)ki.Node_removeChild.call(e,e.childNodes[0]);for(;i.childNodes.length>0;)ki.Node_appendChild.call(e,i.childNodes[0])}})})}u(Element.prototype,"setAttribute",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_setAttribute.call(this,e,n);var i=ki.Element_getAttribute.call(this,e);ki.Element_setAttribute.call(this,e,n),n=ki.Element_getAttribute.call(this,e),t.attributeChangedCallback(this,e,i,n,null)}),u(Element.prototype,"setAttributeNS",function(e,n,i){if(this.__CE_state!==mi.custom)return ki.Element_setAttributeNS.call(this,e,n,i);var o=ki.Element_getAttributeNS.call(this,e,n);ki.Element_setAttributeNS.call(this,e,n,i),i=ki.Element_getAttributeNS.call(this,e,n),t.attributeChangedCallback(this,n,o,i,e)}),u(Element.prototype,"removeAttribute",function(e){if(this.__CE_state!==mi.custom)return ki.Element_removeAttribute.call(this,e);var n=ki.Element_getAttribute.call(this,e);ki.Element_removeAttribute.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)}),u(Element.prototype,"removeAttributeNS",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_removeAttributeNS.call(this,e,n);var i=ki.Element_getAttributeNS.call(this,e,n);ki.Element_removeAttributeNS.call(this,e,n);var o=ki.Element_getAttributeNS.call(this,e,n);i!==o&&t.attributeChangedCallback(this,n,i,o,e)}),ki.HTMLElement_insertAdjacentElement?n(HTMLElement.prototype,ki.HTMLElement_insertAdjacentElement):ki.Element_insertAdjacentElement?n(Element.prototype,ki.Element_insertAdjacentElement):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ei(t,Element.prototype,{prepend:ki.Element_prepend,append:ki.Element_append}),function(t,e,n){e.before=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.before.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.after=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.after.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.replaceWith=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)}),s=a(this);n.replaceWith.apply(this,i);for(var l=0;l<r.length;l++)t.disconnectTree(r[l]);if(s){t.disconnectTree(this);for(var u=0;u<i.length;u++){var c=i[u];c instanceof Element&&t.connectTree(c)}}},e.remove=function(){var e=a(this);n.remove.call(this),e&&t.disconnectTree(this)}}(t,Element.prototype,{before:ki.Element_before,after:ki.Element_after,replaceWith:ki.Element_replaceWith,remove:ki.Element_remove})}(Ai),document.__CE_hasRegistry=!0;var Si=new yi(Ai);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Si})}!function(t){function e(){d=!1;var t=f;f=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();!function(t){t.nodes_.forEach(function(e){var n=u.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=u.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],a=r.options;if(n===t||a.subtree){var s=e(a);s&&r.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++p}function o(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function r(t,e){return g=new o(t,e)}function a(t){return m||(m=function(t){var e=new o(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(g),m.oldValue=t,m)}function s(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var l,u=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var c=[],h=String(Math.random());window.addEventListener("message",function(t){if(t.data===h){var e=c;c=[],e.forEach(function(t){t()})}}),l=function(t){c.push(t),window.postMessage(h,"*")}}var d=!1,f=[],p=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=u.get(t);n||u.set(t,n=[]);for(var i,o=0;o<n.length;o++)if(n[o].observer===this){(i=n[o]).removeListeners(),i.options=e;break}i||(i=new s(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=u.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var g,m;s.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var o=function(t,e){return t===e?t:m&&function(t){return t===m||t===g}(t)?m:null}(n[i-1],t);if(o)return void(n[i-1]=o)}else!function(t){f.push(t),d||(d=!0,l(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=u.get(t);e||u.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=u.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,o=t.target;(s=new r("attributes",o)).attributeName=e,s.attributeNamespace=i;l=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(o,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(i)))return t.attributeOldValue?a(l):s});break;case"DOMCharacterDataModified":var s=r("characterData",o=t.target),l=t.prevValue;n(o,function(t){if(t.characterData)return t.characterDataOldValue?a(l):s});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var u,c,h=t.target;"DOMNodeInserted"===t.type?(u=[h],c=[]):(u=[],c=[h]);var d=h.previousSibling,f=h.nextSibling;(s=r("childList",t.target.parentNode)).addedNodes=u,s.removedNodes=c,s.previousSibling=d,s.nextSibling=f,n(t.relatedNode,function(t){if(t.childList)return s})}g=m=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(t,e){function n(t){return l[s]=i.apply(e,t),s++}function i(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function o(t){if(u)setTimeout(i(o,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{r(t),u=!1}}}}function r(t){delete l[t]}if(!t.setImmediate){var a,s=1,l={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(){var t=n(arguments);return process.nextTick(i(o,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(){var i=n(arguments);return t.postMessage(e+i,"*"),i}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(){var e=n(arguments);return t.port2.postMessage(e),e}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;a=function(){var e=n(arguments),i=c.createElement("script");return i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i),e}}():a=function(){var t=n(arguments);return setTimeout(i(o,t),0),t},h.setImmediate=a,h.clearImmediate=r}}(self),function(){var t={ensureViewportElement:function(){var t=document.querySelector("meta[name=viewport]");return t||((t=document.createElement("meta")).name="viewport",document.head.appendChild(t)),t},setup:function(){var e=t.ensureViewportElement();e&&(e.hasAttribute("content")||e.setAttribute("content","width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"))}};window.Viewport=t}();var Pi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return b(e,t),e}(function(){if("function"!=typeof HTMLElement){var t=function(){};return t.prototype=document.createElement("div"),t}return HTMLElement}()),Oi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(t.template=t.innerHTML;t.firstChild;)t.removeChild(t.firstChild);return t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.parentNode&&this.parentNode!==document.body&&Q.warn("ons-template (id = "+this.getAttribute("id")+") must be located just under document.body"+(this.parentNode.outerHTML?":\n\n"+this.parentNode.outerHTML:"."));var t=new CustomEvent("_templateloaded",{bubbles:!0,cancelable:!0});t.template=this.template,t.templateId=this.getAttribute("id"),this.dispatchEvent(t)}}]),e}();c.Template=Oi,customElements.define("ons-template",Oi);var xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){if(null!==C._getSelectedPlatform())t._platformUpdate();else if(!t._isAllowedPlatform()){for(;t.childNodes[0];)t.childNodes[0].remove();t._platformUpdate()}}),t._onOrientationChange(),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Ot.on("change",this._onOrientationChange.bind(this))}},{key:"attributeChangedCallback",value:function(t){"orientation"===t&&this._onOrientationChange()}},{key:"disconnectedCallback",value:function(){Ot.off("change",this._onOrientationChange)}},{key:"_platformUpdate",value:function(){this.style.display=this._isAllowedPlatform()?"":"none"}},{key:"_isAllowedPlatform",value:function(){return!this.getAttribute("platform")||this.getAttribute("platform").split(/\s+/).indexOf(C.getMobileOS())>=0}},{key:"_onOrientationChange",value:function(){if(this.hasAttribute("orientation")&&this._isAllowedPlatform()){var t=this.getAttribute("orientation").toLowerCase(),e=Ot.isPortrait()?"portrait":"landscape";this.style.display=t===e?"":"none"}}}],[{key:"observedAttributes",get:function(){return["orientation"]}}]),e}();c.If=xi,customElements.define("ons-if",xi);var Ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.timing=e.timing||"linear",this.duration=e.duration||0,this.delay=e.delay||0,this.def={timing:this.timing,duration:this.duration,delay:this.delay}}return g(t,null,[{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=function(){e.apply(this,arguments),Q.extend(this,t)};return n.prototype=this.prototype,n}}]),t}(),Li={};Li.isIPhoneXPortraitPatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-portrait")&&window.innerWidth<window.innerHeight},Li.isIPhoneXLandscapePatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-landscape")&&window.innerWidth>=window.innerHeight},Li.getSafeAreaLengths=function(){return Li.isIPhoneXPortraitPatchActive()?{top:44,right:0,bottom:34,left:0}:Li.isIPhoneXLandscapePatchActive()?{top:0,right:44,bottom:21,left:44}:{top:0,right:0,bottom:0,left:0}},Li.getSafeAreaDOMRect=function(){var t=void 0;return t=Li.isIPhoneXPortraitPatchActive()?{x:0,y:44,width:window.innerWidth,height:window.innerHeight-78}:Li.isIPhoneXLandscapePatchActive()?{x:44,y:0,width:window.innerWidth-88,height:window.innerHeight-21}:{x:0,y:0,width:window.innerWidth,height:window.innerHeight},_({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})};var Mi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Di=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 80%, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, 80%, 0)",opacity:0}).queue(function(t){e&&e(),t()}))}}]),e}(),Ii=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 48px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 33px)":l.liftAmount=document.body.clientHeight/2-1+"px",l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.liftAmount+", 0)"}).queue(function(t){e&&e(),t()}))}}]),e}(),Ni=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),t._visible=!1,t._doorLock=new Nt,t._cancel=t._cancel.bind(t),t._selfCamelName=Q.camelize(t.tagName.slice(4)),t._defaultDBB=function(e){return t.cancelable?t._cancel():e.callParentHandler()},t._animatorFactory=t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"_updateAnimatorFactory",value:function(){Q.throwMember()}},{key:"_toggleStyle",value:function(t){this.style.display=t?"block":"none"}},{key:"_scheme",get:function(){Q.throwMember()}}]),g(e,[{key:"_cancel",value:function(){var t=this;this.cancelable&&!this._running&&(this._running=!0,this.hide().then(function(){t._running=!1,Q.triggerElementEvent(t,"dialog-cancel")},function(){return t._running=!1}))}},{key:"show",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!0].concat(e))}},{key:"hide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!1].concat(e))}},{key:"toggle",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!this.visible].concat(e))}},{key:"_setVisible",value:function(t){var e,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"show":"hide";(o=_({},o)).animationOptions=Q.extend(o.animationOptions||{},O.parseAnimationOptionsString(this.getAttribute("animation-options")));var a=!1;return Q.triggerElementEvent(this,"pre"+r,(e={},m(e,this._selfCamelName,this),m(e,"cancel",function(){return a=!0}),e)),a?Promise.reject("Canceled in pre"+r+" event."):new Promise(function(e){i._doorLock.waitUnlock(function(){var a=i._doorLock.lock(),s=i._animatorFactory.newAnimator(o);t&&i._toggleStyle(!0,o),i._visible=t,Q.iosPageScrollFix(t),n(i,function(){s[r](i,function(){!t&&i._toggleStyle(!1,o),a(),Q.propagateAction(i,"_"+r),Q.triggerElementEvent(i,"post"+r,m({},i._selfCamelName,i)),o.callback instanceof Function&&o.callback(i),e(i)})})})})}},{key:"_updateMask",value:function(){var t=this;n(this,function(){t._mask&&t.getAttribute("mask-color")&&(t._mask.style.backgroundColor=t.getAttribute("mask-color"))})}},{key:"connectedCallback",value:function(){var t=this;this.onDeviceBackButton=this._defaultDBB.bind(this),n(this,function(){t._mask&&(t._mask.addEventListener("click",t._cancel,!1),Q.iosMaskScrollFix(t._mask,!0))})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._mask&&(this._mask.removeEventListener("click",this._cancel,!1),Q.iosMaskScrollFix(this._mask,!1))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"animation":this._animatorFactory=this._updateAnimatorFactory();break;case"mask-color":this._updateMask()}}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"visible",get:function(){return this._visible}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"cancelable",set:function(t){return Q.toggleAttribute(this,"cancelable",t)},get:function(){return this.hasAttribute("cancelable")}}],[{key:"observedAttributes",get:function(){return["modifier","animation","mask-color"]}},{key:"events",get:function(){return["preshow","postshow","prehide","posthide","dialog-cancel"]}}]),e}(),Bi={".action-sheet":"action-sheet--*",".action-sheet-mask":"action-sheet-mask--*",".action-sheet-title":"action-sheet-title--*"},ji={default:function(){return C.isAndroid()?Di:Ii},none:Mi},Hi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:ji,baseClass:Mi,baseClassName:"ActionSheetAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._sheet){var t=document.createElement("div");for(t.classList.add("action-sheet");this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}if(!this._title&&this.hasAttribute("title")){var e=document.createElement("div");e.innerHTML=this.getAttribute("title"),e.classList.add("action-sheet-title"),this._sheet.insertBefore(e,this._sheet.firstChild)}if(!this._mask){var n=document.createElement("div");n.classList.add("action-sheet-mask"),this.insertBefore(n,this.firstChild)}this._sheet.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_updateTitle",value:function(){this._title&&(this._title.innerHTML=this.getAttribute("title"))}},{key:"attributeChangedCallback",value:function(t,n,i){"title"===t?this._updateTitle():v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Bi}},{key:"_mask",get:function(){return Q.findChild(this,".action-sheet-mask")}},{key:"_sheet",get:function(){return Q.findChild(this,".action-sheet")}},{key:"_title",get:function(){return this.querySelector(".action-sheet-title")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Mi||Q.throwAnimator("ActionSheet"),ji[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["title"])}},{key:"animators",get:function(){return ji}},{key:"ActionSheetAnimator",get:function(){return Mi}}]),e}();c.ActionSheet=Hi,customElements.define("ons-action-sheet",Hi);var Ri=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_scheme",get:function(){Q.throwMember()}},{key:"_defaultClassName",get:function(){Q.throwMember()}},{key:"_rippleOpt",get:function(){return[this]}}]),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add(this._defaultClassName),!this._icon&&this.hasAttribute("icon")){Q.checkMissingImport("Icon");var t=Q.createElement('<ons-icon icon="'+this.getAttribute("icon")+'"></ons-icon>');t.classList.add(this._defaultClassName.replace("button","icon")),this.insertBefore(t,this.firstChild)}this._updateRipple(),B.initModifier(this,this._scheme)}},{key:"_updateIcon",value:function(){this._icon&&this._icon.setAttribute("icon",this.getAttribute("icon"))}},{key:"_updateRipple",value:function(){this._rippleOpt&&Q.updateRipple.apply(Q,w(this._rippleOpt))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,this._defaultClassName,this._scheme);break;case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"icon":this._updateIcon();break;case"ripple":this.classList.contains(this._defaultClassName)&&this._updateRipple()}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"_icon",get:function(){return Q.findChild(this,"ons-icon")}}],[{key:"observedAttributes",get:function(){return["modifier","class","icon","ripple"]}}]),e}(),Fi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"action-sheet-button--*",".action-sheet-icon":"action-sheet-icon--*"}}},{key:"_defaultClassName",get:function(){return"action-sheet-button"}},{key:"_rippleOpt",get:function(){}}]),e}();c.ActionSheetButton=Fi,customElements.define("ons-action-sheet-button",Fi);var qi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),zi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1},{transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Vi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1.3, 1.3, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Wi={".alert-dialog":"alert-dialog--*",".alert-dialog-container":"alert-dialog-container--*",".alert-dialog-title":"alert-dialog-title--*",".alert-dialog-content":"alert-dialog-content--*",".alert-dialog-footer":"alert-dialog-footer--*",".alert-dialog-footer--rowfooter":"alert-dialog-footer--rowfooter--*",".alert-dialog-button--rowfooter":"alert-dialog-button--rowfooter--*",".alert-dialog-button--primal":"alert-dialog-button--primal--*",".alert-dialog-button":"alert-dialog-button--*","ons-alert-dialog-button":"alert-dialog-button--*",".alert-dialog-mask":"alert-dialog-mask--*",".text-input":"text-input--*"},Ui={none:qi,default:function(){return C.isAndroid()?zi:Vi},fade:function(){return C.isAndroid()?zi:Vi}},Xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Ui,baseClass:qi,baseClassName:"AlertDialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=10001;var t=document.createDocumentFragment();if(!this._mask&&!this._dialog)for(;this.firstChild;)t.appendChild(this.firstChild);if(!this._mask){var e=document.createElement("div");e.classList.add("alert-dialog-mask"),this.insertBefore(e,this.children[0])}if(!this._dialog){var n=document.createElement("div");n.classList.add("alert-dialog"),this.insertBefore(n,null)}if(!Q.findChild(this._dialog,".alert-dialog-container")){var i=document.createElement("div");i.classList.add("alert-dialog-container"),this._dialog.appendChild(i)}this._dialog.children[0].appendChild(t),this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Wi}},{key:"_mask",get:function(){return Q.findChild(this,".alert-dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".alert-dialog")}},{key:"_titleElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-title")}},{key:"_contentElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-content")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof qi||Q.throwAnimator("AlertDialog"),Ui[t]=e}},{key:"animators",get:function(){return Ui}},{key:"AlertDialogAnimator",get:function(){return qi}}]),e}();c.AlertDialog=Xi,customElements.define("ons-alert-dialog",Xi);var Yi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"alert-dialog-button--*"}}},{key:"_defaultClassName",get:function(){return"alert-dialog-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{modifier:"light-gray"}]}}]),e}();c.AlertDialogButton=Yi,customElements.define("ons-alert-dialog-button",Yi);var Gi={"":"back-button--*",".back-button__icon":"back-button--*__icon",".back-button__label":"back-button--*__label"},$i=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._options={},t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_updateIcon",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.findChild(this,".back-button__icon")).innerHTML="android"===N.getPlatform(this)||Q.hasModifier(this,"material")?'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>md-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="android" transform="translate(-32.000000, -32.000000)" fill-rule="nonzero">\n            <polygon id="md-back-button-icon" points="48 39 35.83 39 41.42 33.41 40 32 32 40 40 48 41.41 46.59 35.83 41 48 41"></polygon>\n        </g>\n    </g>\n</svg>\n':'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="13px" height="21px" viewBox="0 0 13 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ios-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="ios" transform="translate(-34.000000, -30.000000)">\n            <polygon id="ios-back-button-icon" points="34 40.5 44.5 30 46.5 32 38 40.5 46.5 49 44.5 51"></polygon>\n        </g>\n    </g>\n</svg>\n'}},{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("back-button"),!Q.findChild(this,".back-button__label")){for(var t=Q.create("span.back-button__label");this.childNodes[0];)t.appendChild(this.childNodes[0]);this.appendChild(t)}if(!Q.findChild(this,".back-button__icon")){var e=Q.create("span.back-button__icon");this._updateIcon(e),this.insertBefore(e,this.children[0])}Q.updateRipple(this,void 0,{center:"",size:"contain",background:"transparent"}),B.initModifier(this,Gi)}},{key:"_onClick",value:function(){if(this.onClick)this.onClick.apply(this);else{var t=Q.findParent(this,"ons-navigator");t&&t.popPage(this.options)}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"back-button",Gi);break;case"modifier":B.onModifierChanged(e,n,this,Gi)&&this._updateIcon()}}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"show",value:function(){this.style.display="inline-block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BackButton=$i,customElements.define("ons-back-button",$i);var Ki="bottom-bar",Qi={"":"bottom-bar--*"},Ji=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.classList.add(Ki),B.initModifier(t,Qi),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-page")&&this.parentNode.classList.add("page-with-bottom-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,Ki,Qi);break;case"modifier":B.onModifierChanged(e,n,this,Qi)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BottomToolbar=Ji,customElements.define("ons-bottom-toolbar",Ji);var Zi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"button--*"}}},{key:"_defaultClassName",get:function(){return"button"}}]),e}();c.Button=Zi,customElements.define("ons-button",Zi);var to={"":"card--*",".card__title":"card--*__title",".card__content":"card--*__content"},eo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.classList.contains("title")?e.classList.add("card__title"):e.classList.contains("content")&&e.classList.add("card__content")}N.prepare(this),this.classList.add("card"),B.initModifier(this,to)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"card",to);break;case"modifier":B.onModifierChanged(e,n,this,to)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Card=eo,customElements.define("ons-card",eo);var no={"":"carousel-item--*"},io=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.style.width="100%",B.initModifier(t,no),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t)return B.onModifierChanged(e,n,this,no)}}],[{key:"observedAttributes",get:function(){return["modifier"]}}]),e}();c.CarouselItem=io,customElements.define("ons-carousel-item",io);var oo={vertical:{axis:"Y",size:"Height",dir:["up","down"],t3d:["0px, ","px, 0px"]},horizontal:{axis:"X",size:"Width",dir:["left","right"],t3d:["","px, 0px, 0px"]}},ro=function(){function t(e){var n=this;p(this,t);"getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered\n    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook".split(/\s+/).forEach(function(t){return n[t]=e[t]||function(){return!1}}),this.getElement=e.getElement,this.scrollHook=e.scrollHook,this.itemSize=e.itemSize||"100%",this.getAutoScrollRatio=function(){var t=e.getAutoScrollRatio&&e.getAutoScrollRatio.apply(e,arguments);return((t="number"==typeof t&&t==t?t:.5)<0||t>1)&&Q.throw("Invalid auto-scroll-ratio "+t+". Must be between 0 and 1"),t},this.shouldBlock="other"===Q.globals.actualMobileOS,this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onResize=this.onResize.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.swipeable,i=e.autoRefresh;this.initialized=!0,this.target=this.getElement().children[0],this.blocker=this.getElement().children[1],this.target&&this.blocker||Q.throw('Expected "target" and "blocker" elements to exist before initializing Swiper'),this.shouldBlock||(this.blocker.style.display="none"),this.getElement().classList.add("ons-swiper"),this.target.classList.add("ons-swiper-target"),this.blocker.classList.add("ons-swiper-blocker"),this._gestureDetector=new st(this.getElement(),{dragMinDistance:1,dragLockToAxis:!0,passive:!this._shouldFixScroll}),this._mutationObserver=new MutationObserver(function(){return t.refresh()}),this.updateSwipeable(n),this.updateAutoRefresh(i),this._scroll=this._offset=this._lastActiveIndex=0,this._updateLayout(),this._setupInitialIndex(),setImmediate(function(){return t.initialized&&t._setupInitialIndex()}),window===window.parent&&0!==this.offsetHeight||window.requestAnimationFrame(function(){return t.initialized&&t.onResize()})}},{key:"dispose",value:function(){this.initialized=!1,this.updateSwipeable(!1),this.updateAutoRefresh(!1),this._gestureDetector&&this._gestureDetector.dispose(),this.target=this.blocker=this._gestureDetector=this._mutationObserver=null,this.setupResize(!1)}},{key:"onResize",value:function(){var t=this._scroll/this.targetSize;this._reset(),this.setActiveIndex(t),this.refresh()}},{key:"_calculateItemSize",value:function(){var t=this.itemSize.match(/^(\d+)(px|%)/);t||Q.throw("Invalid state: swiper's size unit must be '%' or 'px'");var e=parseInt(t[1],10);return"%"===t[2]?Math.round(e/100*this.targetSize):e}},{key:"_setupInitialIndex",value:function(){this._reset(),this._lastActiveIndex=Math.max(Math.min(Number(this.getInitialIndex()),this.itemCount),0),this._scroll=this._offset+this.itemNumSize*this._lastActiveIndex,this._scrollTo(this._scroll)}},{key:"_setSwiping",value:function(t){this.target.classList.toggle("swiping",t)}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._setSwiping(!0),t=Math.max(0,Math.min(t,this.itemCount-1));var i=Math.max(0,Math.min(this.maxScroll,this._offset+this.itemNumSize*t));if(C.isUIWebView()){var o=function(t){return Array.prototype.concat.apply([],t)}(Q.arrayFrom(this.target.children).map(function(t){return Q.arrayFrom(t.children).filter(function(t){return t.classList.contains("page__content")})})),r=new Map;return new Promise(function(t){o.forEach(function(t){r.set(t,t.getAttribute("class")),t.classList.add("page__content--suppress-layer-creation")}),requestAnimationFrame(t)}).then(function(){return e._changeTo(i,n)}).then(function(){return new Promise(function(t){o.forEach(function(t){t.setAttribute("class",r.get(t))}),requestAnimationFrame(t)})})}return this._changeTo(i,n)}},{key:"getActiveIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scroll;t-=this._offset;var e=this.itemCount,n=this.itemNumSize;if(0===this.itemNumSize||!Q.isInteger(t))return this._lastActiveIndex;if(t<=0)return 0;for(var i=0;i<e;i++)if(n*i<=t&&n*(i+1)>t)return i;return e-1}},{key:"setupResize",value:function(t){window[(t?"add":"remove")+"EventListener"]("resize",this.onResize,!0)}},{key:"show",value:function(){var t=this;this.setupResize(!0),this.onResize(),setTimeout(function(){return t.target&&t.target.classList.add("active")},1e3/60)}},{key:"hide",value:function(){this.setupResize(!1),this.target.classList.remove("active")}},{key:"updateSwipeable",value:function(t){if(this._gestureDetector){var e=t?"on":"off";this._gestureDetector[e]("drag",this.onDrag),this._gestureDetector[e]("dragstart",this.onDragStart),this._gestureDetector[e]("dragend",this.onDragEnd)}}},{key:"updateAutoRefresh",value:function(t){this._mutationObserver&&(t?this._mutationObserver.observe(this.target,{childList:!0}):this._mutationObserver.disconnect())}},{key:"updateItemSize",value:function(t){this.itemSize=t||"100%",this.refresh()}},{key:"toggleBlocker",value:function(t){this.blocker.style.pointerEvents=t?"auto":"none"}},{key:"_canConsumeGesture",value:function(t){var e=t.direction,n=0===this._scroll&&!this.isOverScrollable(),i=this._scroll===this.maxScroll&&!this.isOverScrollable();return this.isVertical()?"down"===e&&!n||"up"===e&&!i:"right"===e&&!n||"left"===e&&!i}},{key:"onDragStart",value:function(t){var e=this;if(this._ignoreDrag=t.consumed||!Q.isValidGesture(t),!this._ignoreDrag){var n=t.consume;if(t.consume=function(){n&&n(),e._ignoreDrag=!0},this._canConsumeGesture(t.gesture)){var i=t.gesture.center&&t.gesture.center.clientX||0,o=this.getBubbleWidth()||0,r=function(){n&&n(),t.consumed=!0,e._started=!0,e.shouldBlock&&e.toggleBlocker(!0),e._setSwiping(!0),Q.iosPreventScroll(e._gestureDetector)};i<o||i>this.targetSize-o?setImmediate(function(){return!e._ignoreDrag&&r()}):r()}}}},{key:"onDrag",value:function(t){t.gesture&&!this._ignoreDrag&&this._started&&(this._continued=!0,t.stopPropagation(),this._scrollTo(this._scroll-this._getDelta(t),{throttle:!0}))}},{key:"onDragEnd",value:function(t){if(this._started=!1,t.gesture&&!this._ignoreDrag&&this._continued){this._continued=!1,t.stopPropagation();var e=this._scroll-this._getDelta(t),n=this._normalizeScroll(e);e===n?this._startMomentumScroll(e,t):this._killOverScroll(n),this.shouldBlock&&this.toggleBlocker(!1)}else this._ignoreDrag=!0}},{key:"_startMomentumScroll",value:function(t,e){var n=this._getVelocity(e),i=e.gesture.interimDirection===this.dM.dir[this._getDelta(e)<0?0:1],o=this._getAutoScroll(t,n,i),r=Math.abs(o-t)/(n+.01)/1e3;r=Math.min(.25,Math.max(.1,r)),this._changeTo(o,{swipe:!0,animationOptions:{duration:r,timing:"cubic-bezier(.4, .7, .5, 1)"}})}},{key:"_killOverScroll",value:function(t){var e=this;this._scroll=t;var n=this.dM.dir[Number(t>0)],i=function(){return e._changeTo(t,{animationOptions:{duration:.4,timing:"cubic-bezier(.1, .4, .1, 1)"}})};this.overScrollHook({direction:n,killOverScroll:i})||i()}},{key:"_changeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={activeIndex:this.getActiveIndex(t),lastActiveIndex:this._lastActiveIndex,swipe:n.swipe||!1},o=i.activeIndex!==i.lastActiveIndex,r=!!o&&this.preChangeHook(i);return this._scroll=r?this._offset+i.lastActiveIndex*this.itemNumSize:t,this._lastActiveIndex=r?i.lastActiveIndex:i.activeIndex,this._scrollTo(this._scroll,n).then(function(){if(t!==e._scroll||r){if(n.reject)return e._setSwiping(!1),Promise.reject("Canceled")}else e._setSwiping(!1),o&&e.postChangeHook(i)})}},{key:"_scrollTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.throttle){if(t<0)t=this.isOverScrollable()?Math.round(.35*t):0;else{var i=this.maxScroll;i<t&&(t=this.isOverScrollable()?i+Math.round(.35*(t-i)):i)}}var o="none"===n.animation?{}:n.animationOptions;return this.scrollHook&&this.itemNumSize>0&&this.scrollHook((t/this.itemNumSize).toFixed(2),n.animationOptions||{}),new Promise(function(n){return nt(e.target).queue({transform:e._getTransform(t)},o).play(n)})}},{key:"_getAutoScroll",value:function(t,e,n){var i=this.maxScroll,o=this._offset,r=this.itemNumSize;if(!this.isAutoScrollable())return Math.max(0,Math.min(i,t));for(var a=[],s=o;s<i;s+=r)a.push(s);a.push(i);var l=(a=a.sort(function(e,n){return Math.abs(e-t)-Math.abs(n-t)}).filter(function(t,e){return!e||t!==a[e-1]}))[0],u=this._lastActiveIndex*r+o,c=Math.abs(t-u)/r;return c<=this.getAutoScrollRatio(n,e,r)?l=u:c<1&&a[0]===u&&a.length>1&&(l=a[1]),Math.max(0,Math.min(i,l))}},{key:"_reset",value:function(){this._targetSize=this._itemNumSize=void 0}},{key:"_normalizeScroll",value:function(t){return Math.max(Math.min(t,this.maxScroll),0)}},{key:"refresh",value:function(){if(this._reset(),this._updateLayout(),Q.isInteger(this._scroll)){var t=this._normalizeScroll(this._scroll);t!==this._scroll?this._killOverScroll(t):this._changeTo(t)}else this._setupInitialIndex();this.refreshHook()}},{key:"_getDelta",value:function(t){return t.gesture["delta"+this.dM.axis]}},{key:"_getVelocity",value:function(t){return t.gesture["velocity"+this.dM.axis]}},{key:"_getTransform",value:function(t){return"translate3d("+this.dM.t3d[0]+-t+this.dM.t3d[1]+")"}},{key:"_updateLayout",value:function(){this.dM=oo[this.isVertical()?"vertical":"horizontal"],this.target.classList.toggle("ons-swiper-target--vertical",this.isVertical());for(var t=this.target.children[0];t;t=t.nextElementSibling)t.style[this.dM.size.toLowerCase()]=this.itemSize;this.isCentered()&&(this._offset=(this.targetSize-this.itemNumSize)/-2||0)}},{key:"itemCount",get:function(){return this.target.children.length}},{key:"itemNumSize",get:function(){return"number"==typeof this._itemNumSize&&this._itemNumSize==this._itemNumSize||(this._itemNumSize=this._calculateItemSize()),this._itemNumSize}},{key:"maxScroll",get:function(){var t=this.itemCount*this.itemNumSize-this.targetSize;return Math.ceil(t<0?0:t)}},{key:"targetSize",get:function(){return this._targetSize||(this._targetSize=this.target["offset"+this.dM.size]),this._targetSize}}]),t}(),ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this.children[0]&&"ONS-CAROUSEL-ITEM"!==this.children[0].tagName&&this.children[0]||document.createElement("div");if(!t.parentNode){for(;this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}!this.children[1]&&this.appendChild(document.createElement("div")),this.appendChild=this.appendChild.bind(t),this.insertBefore=this.insertBefore.bind(t)}},{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t},getInitialIndex:function(){return t.getAttribute("initial-index")},getAutoScrollRatio:function(){return t.autoScrollRatio},isVertical:function(){return t.vertical},isOverScrollable:function(){return t.overscrollable},isCentered:function(){return t.centered},isAutoScrollable:function(){return t.autoScroll},itemSize:this.itemSize,overScrollHook:this._onOverScroll.bind(this),preChangeHook:this._onChange.bind(this,"prechange"),postChangeHook:this._onChange.bind(this,"postchange"),refreshHook:this._onRefresh.bind(this),scrollHook:function(){return t._onSwipe&&t._onSwipe.apply(t,arguments)}}),n(this,function(){return t._swiper.init({swipeable:t.hasAttribute("swipeable"),autoRefresh:t.hasAttribute("auto-refresh")})}))}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null)}},{key:"attributeChangedCallback",value:function(t,e,n){if(this._swiper)switch(t){case"swipeable":this._swiper.updateSwipeable(this.hasAttribute("swipeable"));break;case"auto-refresh":this._swiper.updateAutoRefresh(this.hasAttribute("auto-refresh"));break;case"item-height":this.vertical&&this._swiper.updateItemSize(this.itemSize);break;case"item-width":this.vertical||this._swiper.updateItemSize(this.itemSize);break;case"direction":this._swiper.refresh()}}},{key:"_show",value:function(){this._swiper.show()}},{key:"_hide",value:function(){this._swiper.hide()}},{key:"_onOverScroll",value:function(t){var e=t.direction,n=t.killOverScroll,i=!1;return Q.triggerElementEvent(this,"overscroll",{carousel:this,activeIndex:this.getActiveIndex(),direction:e,waitToReturn:function(t){i=!0,t.then(n)}}),i}},{key:"_onChange",value:function(t,e){var n=e.activeIndex,i=e.lastActiveIndex;Q.triggerElementEvent(this,t,{carousel:this,activeIndex:n,lastActiveIndex:i})}},{key:"_onRefresh",value:function(){Q.triggerElementEvent(this,"refresh",{carousel:this})}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=_({animation:this.getAttribute("animation"),animationOptions:this.hasAttribute("animation-options")?Q.animationOptionsParse(this.getAttribute("animation-options")):{duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"}},n),this._swiper.setActiveIndex(t,n).then(function(){return n.callback instanceof Function&&n.callback(e),Promise.resolve(e)})}},{key:"getActiveIndex",value:function(){return this._swiper.getActiveIndex()}},{key:"next",value:function(t){return this.setActiveIndex(this.getActiveIndex()+1,t)}},{key:"prev",value:function(t){return this.setActiveIndex(this.getActiveIndex()-1,t)}},{key:"first",value:function(t){return this.setActiveIndex(0,t)}},{key:"last",value:function(t){this.setActiveIndex(Math.max(this.itemCount-1,0),t)}},{key:"refresh",value:function(){this._swiper.refresh()}},{key:"itemCount",get:function(){return this._swiper.itemCount}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"autoScroll",get:function(){return this.hasAttribute("auto-scroll")},set:function(t){return Q.toggleAttribute(this,"auto-scroll",t)}},{key:"vertical",get:function(){return"vertical"===this.getAttribute("direction")}},{key:"itemSize",get:function(){var t=(this.getAttribute("item-"+(this.vertical?"height":"width"))||"").trim();return t.match(/^\d+(px|%)$/)?t:"100%"}},{key:"autoScrollRatio",get:function(){return parseFloat(this.getAttribute("auto-scroll-ratio"))},set:function(t){this.setAttribute("auto-scroll-ratio",t)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(t){return Q.toggleAttribute(this,"disabled",t)}},{key:"overscrollable",get:function(){return this.hasAttribute("overscrollable")},set:function(t){return Q.toggleAttribute(this,"overscrollable",t)}},{key:"centered",get:function(){return this.hasAttribute("centered")},set:function(t){return Q.toggleAttribute(this,"centered",t)}}],[{key:"observedAttributes",get:function(){return["swipeable","auto-refresh","direction","item-height","item-width"]}},{key:"events",get:function(){return["postchange","refresh","overscroll"]}}]),e}();c.Carousel=ao,customElements.define("ons-carousel",ao);var so=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.getAttribute("width")&&t._updateWidth(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"width"===t&&this._updateWidth()}},{key:"_updateWidth",value:function(){var t=this.getAttribute("width");t?(t=t.trim().match(/^\d+$/)?t+"%":t,d(this,{flex:"0 0 "+t,maxWidth:t})):d.clear(this,"flex maxWidth")}}],[{key:"observedAttributes",get:function(){return["width"]}}]),e}();c.Col=so,customElements.define("ons-col",so);var lo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -60%, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)",opacity:1},{transform:"translate3d(-50%, -60%, 0)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),co=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),ho={".dialog":"dialog--*",".dialog-container":"dialog-container--*",".dialog-mask":"dialog-mask--*"},fo={default:function(){return C.isAndroid()?uo:co},slide:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),none:lo},po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:fo,baseClass:lo,baseClassName:"DialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._dialog){var t=document.createElement("div");t.classList.add("dialog");var e=document.createElement("div");for(e.classList.add("dialog-container");this.firstChild;)e.appendChild(this.firstChild);t.appendChild(e),this.appendChild(t)}if(!this._mask){var n=document.createElement("div");n.classList.add("dialog-mask"),this.insertBefore(n,this.firstChild)}this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,this.setAttribute("status-bar-fill",""),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return ho}},{key:"_mask",get:function(){return Q.findChild(this,".dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".dialog")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof lo||Q.throwAnimator("Dialog"),fo[t]=e}},{key:"animators",get:function(){return fo}},{key:"DialogAnimator",get:function(){return lo}}]),e}();c.Dialog=po,customElements.define("ons-dialog",po);var go="fab",mo={"":"fab--*",".fab__icon":"fab--*__icon"},_o=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.hide(),t.classList.add(go),n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),!Q.findChild(this,".fab__icon")){var t=document.createElement("span");t.classList.add("fab__icon"),Q.arrayFrom(this.childNodes).forEach(function(e){e.tagName&&"ons-ripple"===e.tagName.toLowerCase()||t.appendChild(e)}),this.appendChild(t)}this._updateRipple(),B.initModifier(this,mo),this._updatePosition()}},{key:"connectedCallback",value:function(){var t=this;setImmediate(function(){return t.show()})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,go,mo);break;case"modifier":B.onModifierChanged(e,n,this,mo);break;case"ripple":this._updateRipple();break;case"position":this._updatePosition()}}},{key:"_show",value:function(){this.show()}},{key:"_hide",value:function(){var t=this;setImmediate(function(){return t.hide()})}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible,e=(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px)":"";d(this,{transform:e+" scale("+Number(t)+")"})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"visible",get:function(){return-1===this.style.transform.indexOf("scale(0)")&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","position","class"]}}]),e}();c.Fab=_o,customElements.define("ons-fab",_o);var vo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._gestureDetector=new st(t,{passive:!0}),t}return b(e,Pi),e}();c.GestureDetector=vo,customElements.define("ons-gesture-detector",vo);var bo="fa",yo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){this._cleanClassAttribute("icon"===t?e:this.getAttribute("icon"),"modifier"===t?e:void 0),this._update()}},{key:"_compile",value:function(){N.prepare(this),this._update()}},{key:"_update",value:function(){var t=this,e=this._buildClassAndStyle(this._parseAttr("icon"),this._parseAttr("size")),n=e.classList,i=e.style;Q.extend(this.style,i),n.forEach(function(e){return t.classList.add(e)})}},{key:"_parseAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAttribute("modifier")||"",n=(this.getAttribute(t)||t||"").split(/\s*,\s*/),i=n[0],o=n[1];return o=(o||"").split(/\s*:\s*/),(e&&RegExp("(^|\\s+)"+o[0]+"($|\\s+)","i").test(e)?o[1]:i)||""}},{key:"_cleanClassAttribute",value:function(t,e){var n=this,i=this._prefixIcon(this._parseAttr(t,e)),o=i.className,r=i.prefix,a=o!==r?"|"+r+"$|"+r+"-":"|"+o+"$"||"",s=new RegExp("^(fa$|fa-|ion-|zmdi$|zmdi-|ons-icon--"+a+")");Q.arrayFrom(this.classList).filter(function(t){return s.test(t)}).forEach(function(t){return n.classList.remove(t)})}},{key:"_prefixIcon",value:function(t){var e=bo+(bo?"-":"")+t;return{className:e,prefix:e.split("-")[0]}}},{key:"_buildClassAndStyle",value:function(t,e){var n=["ons-icon"],i={};if(0===t.indexOf("ion-"))n.push(t),n.push("ons-icon--ion");else if(0===t.indexOf("fa-"))n.push(t),n.push("fa");else if(0===t.indexOf("md-"))n.push("zmdi"),n.push("zmdi-"+t.split(/-(.+)?/)[1]);else{var o=this._prefixIcon(t),r=o.className,a=o.prefix;a&&n.push(a),r&&n.push(r)}return e.match(/^[1-5]x|lg$/)?(n.push("ons-icon--"+e),this.style.removeProperty("font-size")):i.fontSize=e,{classList:n,style:i}}}],[{key:"setAutoPrefix",value:function(t){bo=t?"string"==typeof t&&t||"fa":""}},{key:"observedAttributes",get:function(){return["icon","size","modifier","class"]}}]),e}();c.Icon=yo,customElements.define("ons-icon",yo);var ko=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p(this,t),"object"===(void 0===e?"undefined":f(e))&&null!==e||Q.throw('"delegate" parameter must be an object'),this._userDelegate=e,n instanceof Element||null===n||Q.throw('"templateElement" parameter must be an instance of Element or null'),this._templateElement=n}return g(t,[{key:"hasRenderFunction",value:function(){return this._userDelegate._render instanceof Function}},{key:"_render",value:function(){this._userDelegate._render.apply(this._userDelegate,arguments)}},{key:"loadItemElement",value:function(t,e){if(this._userDelegate.loadItemElement instanceof Function)this._userDelegate.loadItemElement(t,e);else{var n=this._userDelegate.createItemContent(t,this._templateElement);n instanceof Element||Q.throw('"createItemContent" must return an instance of Element'),e({element:n})}}},{key:"countItems",value:function(){var t=this._userDelegate.countItems();return"number"!=typeof t&&Q.throw('"countItems" must return a number'),t}},{key:"updateItem",value:function(t,e){this._userDelegate.updateItemContent instanceof Function&&this._userDelegate.updateItemContent(t,e)}},{key:"calculateItemHeight",value:function(t){if(this._userDelegate.calculateItemHeight instanceof Function){var e=this._userDelegate.calculateItemHeight(t);return"number"!=typeof e&&Q.throw('"calculateItemHeight" must return a number'),e}return 0}},{key:"destroyItem",value:function(t,e){this._userDelegate.destroyItem instanceof Function&&this._userDelegate.destroyItem(t,e)}},{key:"destroy",value:function(){this._userDelegate.destroy instanceof Function&&this._userDelegate.destroy(),this._userDelegate=this._templateElement=null}},{key:"itemHeight",get:function(){return this._userDelegate.itemHeight}}]),t}(),wo=function(){function t(e,n){p(this,t),n instanceof ko||Q.throw('"delegate" parameter must be an instance of LazyRepeatDelegate'),this._wrapperElement=e,this._delegate=n,this._insertIndex=this._wrapperElement.children[0]&&"ONS-LAZY-REPEAT"===this._wrapperElement.children[0].tagName?1:0,"ons-list"===e.tagName.toLowerCase()&&e.classList.add("lazy-list"),this._pageContent=this._findPageContentElement(e),this._pageContent||Q.throw("LazyRepeat must be descendant of a Page element"),this.lastScrollTop=this._pageContent.scrollTop,this.padding=0,this._topPositions=[0],this._renderedItems={},this._delegate.itemHeight||this._delegate.calculateItemHeight(0)||(this._unknownItemHeight=!0),this._addEventListeners(),this._onChange()}return g(t,[{key:"_findPageContentElement",value:function(t){var e=Q.findParent(t,".page__content");if(e)return e;var n=Q.findParent(t,"ons-page");if(n){var i=Q.findChild(n,".content");if(i)return i}return null}},{key:"_checkItemHeight",value:function(t){var e=this;this._delegate.loadItemElement(0,function(n){e._unknownItemHeight||Q.throw("Invalid state"),e._wrapperElement.appendChild(n.element);var i=function(){e._delegate.destroyItem(0,n),n.element&&n.element.remove(),delete e._unknownItemHeight,t()};e._itemHeight=n.element.offsetHeight,e._itemHeight>0?i():(e._wrapperElement.style.visibility="hidden",n.element.style.visibility="hidden",setImmediate(function(){e._itemHeight=n.element.offsetHeight,0==e._itemHeight&&Q.throw('Invalid state: "itemHeight" must be greater than zero'),e._wrapperElement.style.visibility="",i()}))})}},{key:"_countItems",value:function(){return this._delegate.countItems()}},{key:"_getItemHeight",value:function(t){return this._renderedItems.hasOwnProperty(t)?(this._renderedItems[t].hasOwnProperty("height")||(this._renderedItems[t].height=this._renderedItems[t].element.offsetHeight),this._renderedItems[t].height):this._topPositions[t+1]&&this._topPositions[t]?this._topPositions[t+1]-this._topPositions[t]:this.staticItemHeight||this._delegate.calculateItemHeight(t)}},{key:"_calculateRenderedHeight",value:function(){var t=this;return Object.keys(this._renderedItems).reduce(function(e,n){return e+t._getItemHeight(+n)},0)}},{key:"_onChange",value:function(){this._render()}},{key:"_lastItemRendered",value:function(){return Math.max.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"_firstItemRendered",value:function(){return Math.min.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"refresh",value:function(){var t={forceScrollDown:!0},e=Math.min(this._lastItemRendered(),this._countItems()-1),n=this._firstItemRendered();Q.isInteger(e)&&(t.forceLastIndex=e),Q.isInteger(n)&&(this._wrapperElement.style.height=this._topPositions[n]+this._calculateRenderedHeight()+"px",this.padding=this._topPositions[n],t.forceFirstIndex=n),this._removeAllElements(),this._render(t),this._wrapperElement.style.height="inherit"}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.forceScrollDown,i=void 0!==n&&n,o=e.forceFirstIndex,r=e.forceLastIndex;if(this._unknownItemHeight)return this._checkItemHeight(this._render.bind(this,arguments[0]));var a=!i&&this.lastScrollTop>this._pageContent.scrollTop;this.lastScrollTop=this._pageContent.scrollTop;for(var s={},l=this._wrapperElement.getBoundingClientRect().top,u=4*window.innerHeight-l,c=this._countItems(),h=o||Math.max(0,this._calculateStartIndex(l)-30),d=h,f=this._topPositions[d];d<c&&f<u;d++)d>=this._topPositions.length&&(this._topPositions.length+=100),this._topPositions[d]=f,f+=this._getItemHeight(d);if(this._delegate.hasRenderFunction&&this._delegate.hasRenderFunction())return this._delegate._render(h,d,function(){t.padding=t._topPositions[h]});if(a)for(var p=d-1;p>=h;p--)s[p]=!0,this._renderElement(p,a);else for(var g=r||Math.max.apply(Math,[d-1].concat(w(Object.keys(this._renderedItems)))),m=h;m<=g;m++)s[m]=!0,this._renderElement(m,a);Object.keys(this._renderedItems).forEach(function(e){return s[e]||t._removeElement(e,a)})}},{key:"_renderElement",value:function(t,e){var n=this,i=this._renderedItems[t];i?this._delegate.updateItem(t,i):this._delegate.loadItemElement(t,function(i){e?(n._wrapperElement.insertBefore(i.element,n._wrapperElement.children[n._insertIndex]),n.padding=n._topPositions[t],i.height=n._topPositions[t+1]-n._topPositions[t]):n._wrapperElement.appendChild(i.element),n._renderedItems[t]=i})}},{key:"_removeElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=+t;var n=this._renderedItems[t];this._delegate.destroyItem(t,n),e?this._topPositions[t+1]=void 0:this.padding=this.padding+this._getItemHeight(t),n.element.parentElement&&n.element.parentElement.removeChild(n.element),delete this._renderedItems[t]}},{key:"_removeAllElements",value:function(){var t=this;Object.keys(this._renderedItems).forEach(function(e){return t._removeElement(e)})}},{key:"_recalculateTopPositions",value:function(t,e){for(var n=t;n<=e;n++)this._topPositions[n+1]=this._topPositions[n]+this._getItemHeight(n)}},{key:"_calculateStartIndex",value:function(t){var e=this._firstItemRendered(),n=this._lastItemRendered();this._recalculateTopPositions(e,n);for(var i=0,o=this._countItems()-1;;){var r=Math.floor((i+o)/2),a=t+this._topPositions[r];if(o<i)return 0;if(a<=0&&a+this._getItemHeight(r)>0)return r;isNaN(a)||a>=0?o=r-1:i=r+1}}},{key:"_debounce",value:function(t,e,n){var i=void 0;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),a?t.apply(this,arguments):i=setTimeout(function(){i=null,t.apply(o,r)},e)}}},{key:"_doubleFireOnTouchend",value:function(){this._render(),this._debounce(this._render.bind(this),100)}},{key:"_addEventListeners",value:function(){Q.bindListeners(this,["_onChange","_doubleFireOnTouchend"]),C.isIOS()&&(this._boundOnChange=this._debounce(this._boundOnChange,30)),this._pageContent.addEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.addEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.addEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.addEventListener("resize",this._boundOnChange,!0)}},{key:"_removeEventListeners",value:function(){this._pageContent.removeEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.removeEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.removeEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.removeEventListener("resize",this._boundOnChange,!0)}},{key:"destroy",value:function(){this._removeAllElements(),this._delegate.destroy(),this._parentElement=this._delegate=this._renderedItems=null,this._removeEventListeners()}},{key:"padding",get:function(){return parseInt(this._wrapperElement.style.paddingTop,10)},set:function(t){this._wrapperElement.style.paddingTop=t+"px"}},{key:"staticItemHeight",get:function(){return this._delegate.itemHeight||this._itemHeight}}]),t}(),Eo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.hasAttribute("delegate")&&(this.delegate=window[this.getAttribute("delegate")])}},{key:"refresh",value:function(){this._lazyRepeatProvider&&this._lazyRepeatProvider.refresh()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"disconnectedCallback",value:function(){this._lazyRepeatProvider&&(this._lazyRepeatProvider.destroy(),this._lazyRepeatProvider=null)}},{key:"delegate",set:function(t){this._lazyRepeatProvider&&this._lazyRepeatProvider.destroy(),!this._templateElement&&this.children[0]&&(this._templateElement=this.removeChild(this.children[0]));var e=new ko(t,this._templateElement||null);this._lazyRepeatProvider=new wo(this.parentElement,e)},get:function(){Q.throw("No delegate getter")}}]),e}();P.LazyRepeatDelegate=ko,P.LazyRepeatProvider=wo,c.LazyRepeat=Eo,customElements.define("ons-lazy-repeat",Eo);var Co={"":"list-header--*"},Ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-header"),B.initModifier(this,Co)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-header",Co);break;case"modifier":B.onModifierChanged(e,n,this,Co)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListHeader=Ao,customElements.define("ons-list-header",Ao);var So={"":"list-title--*"},Po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-title"),B.initModifier(this,So)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-title",So);break;case"modifier":B.onModifierChanged(e,n,this,So)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListTitle=Po,customElements.define("ons-list-title",Po);var Oo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"showExpansion",value:function(t,e){e()}},{key:"hideExpansion",value:function(t,e){e()}}]),e}(),xo={".list-item":"list-item--*",".list-item__left":"list-item--*__left",".list-item__center":"list-item--*__center",".list-item__right":"list-item--*__right",".list-item__label":"list-item--*__label",".list-item__title":"list-item--*__title",".list-item__subtitle":"list-item--*__subtitle",".list-item__thumbnail":"list-item--*__thumbnail",".list-item__icon":"list-item--*__icon"},To={default:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Oo),g(e,[{key:"showExpansion",value:function(t,e){this._animateExpansion(t,!0,e)}},{key:"hideExpansion",value:function(t,e){this._animateExpansion(t,!1,e)}},{key:"_animateExpansion",value:function(t,e,n){var i,o=t.expandableContent.style.height,r=t.expandableContent.style.display;t.expandableContent.style.height="auto",t.expandableContent.style.display="block";var a=window.getComputedStyle(t.expandableContent),s=[{height:0,paddingTop:0,paddingBottom:0},{height:a.height,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom}],l=[{transform:"rotate(45deg)"},{transform:"rotate(225deg)"}];if(t.expandableContent.style.height=o,(i=nt(t.expandableContent,{duration:this.duration,property:"height padding-top padding-bottom"})).default.apply(i,w(e?s:s.reverse())).play(function(){t.expandableContent.style.display=r,n&&n()}),t.expandChevron){var u;(u=nt(t.expandChevron,{duration:this.duration,property:"transform"})).default.apply(u,w(e?l:l.reverse())).play()}}}]),e}(),none:Oo},Lo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._animatorFactory=t._updateAnimatorFactory(),t.toggleExpansion=t.toggleExpansion.bind(t);var i=/^ons-(?!col$|row$|if$)/i;return t._shouldIgnoreTap=function(t){return t.hasAttribute("prevent-tap")||i.test(t.tagName)},t.show=t.showExpansion,t.hide=t.hideExpansion,n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-item"),this.hasAttribute("expandable")&&this.classList.add("list-item--expandable");for(var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,r=Q.getAllChildNodes(this),a=0;a<r.length;a++){var s=r[a];s.classList.contains("left")?(s.classList.add("list-item__left"),t=s):s.classList.contains("center")?e=s:s.classList.contains("right")?(s.classList.add("list-item__right"),n=s):s.classList.contains("top")?(s.classList.add("list-item__top"),i=s):s.classList.contains("expandable-content")&&(s.classList.add("list-item__expandable-content"),o=s)}if(!n&&this.hasAttribute("expandable")){(n=document.createElement("div")).classList.add("list-item__right","right");var l=document.createElement("span");l.classList.add("list-item__expand-chevron"),n.appendChild(l)}if(!e){if(e=document.createElement("div"),t||n||o)for(var u=this.childNodes.length-1;u>=0;u--){var c=this.childNodes[u];c!==t&&c!==n&&c!==o&&"ONS-RIPPLE"!==c.tagName&&e.insertBefore(c,e.firstChild)}else for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);o||this.insertBefore(e,n||null)}e.classList.add("center","list-item__center"),o&&(this._top=i||document.createElement("div"),this._top.classList.add("top","list-item__top"),this.appendChild(this._top),this._top.appendChild(e),t&&this._top.appendChild(t),n&&this._top.appendChild(n)),Q.updateRipple(this),B.initModifier(this,xo)}},{key:"showExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!0,this._expanding=!0;this._animatorFactory.newAnimator().showExpansion(this,function(){t.classList.add("expanded"),t._expanding=!1})}}},{key:"hideExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!1,this._expanding=!0;this._animatorFactory.newAnimator().hideExpansion(this,function(){t.classList.remove("expanded"),t._expanding=!1})}}},{key:"toggleExpansion",value:function(){this.classList.contains("expanded")?this.hideExpansion():this.showExpansion()}},{key:"_updateAnimatorFactory",value:function(){return new O({animators:To,baseClass:Oo,baseClassName:"ListItemAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-item",xo);break;case"modifier":B.onModifierChanged(e,n,this,xo);break;case"ripple":Q.updateRipple(this);break;case"animation":this._animatorFactory=this._updateAnimatorFactory()}}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._setupListeners(!0),t._originalBackgroundColor=t.style.backgroundColor,t.tapped=!1})}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouch,{passive:!0}),Q[e](this,"touchmove",this._onRelease,{passive:!0}),this[e]("touchcancel",this._onRelease),this[e]("touchend",this._onRelease),this[e]("touchleave",this._onRelease),this[e]("drag",this._onDrag),this[e]("mousedown",this._onTouch),this[e]("mouseup",this._onRelease),this[e]("mouseout",this._onRelease),this._top&&this._top[e]("click",this.toggleExpansion)}},{key:"_onDrag",value:function(t){var e=t.gesture;this.hasAttribute("lock-on-drag")&&["left","right"].indexOf(e.direction)>-1&&e.preventDefault()}},{key:"_onTouch",value:function(t){var e=this;if(!(this.tapped||this!==t.target&&(this._shouldIgnoreTap(t.target)||Q.findParent(t.target,this._shouldIgnoreTap,function(t){return t===e})))){this.tapped=!0;var n={transition:"background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s"};this.hasAttribute("tappable")&&(this.style.backgroundColor&&(this._originalBackgroundColor=this.style.backgroundColor),n.backgroundColor=this.getAttribute("tap-background-color")||"#d9d9d9",n.boxShadow="0px -1px 0px 0px "+n.backgroundColor),d(this,n)}}},{key:"_onRelease",value:function(){this.tapped=!1,this.style.backgroundColor=this._originalBackgroundColor||"",d.clear(this,"transition boxShadow")}},{key:"expandableContent",get:function(){return this.querySelector(".list-item__expandable-content")}},{key:"expandChevron",get:function(){return this.querySelector(".list-item__expand-chevron")}}],[{key:"observedAttributes",get:function(){return["modifier","class","ripple","animation"]}}]),e}();c.ListItem=Lo,customElements.define("ons-list-item",Lo);var Mo={"":"list--*"},Do=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list"),B.initModifier(this,Mo)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list",Mo);break;case"modifier":B.onModifierChanged(e,n,this,Mo)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.List=Do,customElements.define("ons-list",Do);var Io=["autocapitalize","autocomplete","autocorrect","autofocus","disabled","inputmode","max","maxlength","min","minlength","name","pattern","placeholder","readonly","required","size","step","validator","value"],No=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t._boundDelegateEvent=t._delegateEvent.bind(t),t}return b(e,Pi),g(e,[{key:"_update",value:function(){}},{key:"_scheme",get:function(){Q.throwMember()}},{key:"_template",get:function(){Q.throwMember()}},{key:"type",get:function(){Q.throwMember()}}]),g(e,[{key:"_compile",value:function(){N.prepare(this),this._defaultClassName&&this.classList.add(this._defaultClassName),0===this.children.length&&(this.appendChild(Q.createFragment(this._template)),this._setInputId(),this._updateBoundAttributes(),B.initModifier(this,this._scheme))}},{key:"_updateBoundAttributes",value:function(){var t=this;Io.forEach(function(e){t.hasAttribute(e)?t._input.setAttribute(e,t.getAttribute(e)):t._input.removeAttribute(e)}),this._update()}},{key:"_delegateEvent",value:function(t){var e=new CustomEvent(t.type,{bubbles:!1,cancelable:!0});return this.dispatchEvent(e)}},{key:"_setInputId",value:function(){this.hasAttribute("input-id")&&(this._input.id=this.getAttribute("input-id"))}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("focus",t._boundDelegateEvent),t._input.addEventListener("blur",t._boundDelegateEvent)})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("focus",t._boundDelegateEvent),t._input.removeEventListener("blur",t._boundDelegateEvent)})}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,o._scheme)});break;case"input-id":n(this,function(){return o._setInputId()});break;case"class":Q.restoreClass(this,this._defaultClassName,this._scheme)}Io.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_defaultClassName",get:function(){return""}},{key:"_input",get:function(){return this.querySelector("input")}},{key:"value",get:function(){return null===this._input?this.getAttribute("value"):this._input.value},set:function(t){var e=this;n(this,function(){t instanceof Date&&(t=t.toISOString().substring(0,10)),e._input.value=t,e._update()})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["modifier","input-id","class"].concat(Io)}}]),e}(),Bo={".text-input":"text-input--*",".text-input__label":"text-input--*__label"},jo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnInput=t._update.bind(t),t._boundOnFocusin=t._update.bind(t),t}return b(e,No),g(e,[{key:"_update",value:function(){this._updateLabel(),this._updateLabelClass()}},{key:"_updateLabel",value:function(){var t=this.getAttribute("placeholder")||"";void 0!==this._helper.textContent?this._helper.textContent=t:this._helper.innerText=t}},{key:"_updateLabelClass",value:function(){""===this.value?this._helper.classList.remove("text-input--material__label--active"):this._helper.classList.add("text-input--material__label--active")}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),n(this,function(){t._input.addEventListener("input",t._boundOnInput),t._input.addEventListener("focusin",t._boundOnFocusin)});var i=this.getAttribute("type");["checkbox","radio"].indexOf(i)>=0&&Q.warn('Warn: <ons-input type="'+i+'"> is deprecated since v2.4.0. Use <ons-'+i+"> instead.")}},{key:"disconnectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),n(this,function(){t._input.removeEventListener("input",t._boundOnInput),t._input.removeEventListener("focusin",t._boundOnFocusin)})}},{key:"attributeChangedCallback",value:function(t,i,o){var r=this;switch(t){case"type":n(this,function(){return r._input.setAttribute("type",r.type)});break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,i,o)}}},{key:"_scheme",get:function(){return Bo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="text-input">\n      <span class="text-input__label"></span>\n    '}},{key:"type",get:function(){var t=this.getAttribute("type");return["checkbox","radio"].indexOf(t)<0&&t||"text"}},{key:"_helper",get:function(){return this.querySelector("span")}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["type"])}}]),e}();c.Input=jo,customElements.define("ons-input",jo);var Ho=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&util.throwAbstract(),n(t,function(){t.attributeChangedCallback("checked",null,t.getAttribute("checked"))}),t}return b(e,No),g(e,[{key:"attributeChangedCallback",value:function(t,n,i){switch(t){case"checked":this.checked=null!==i;break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <span class="'+this._defaultClassName+'__checkmark"></span>\n    '}},{key:"_helper",get:function(){return this.querySelector("span")}},{key:"checked",get:function(){return this._input.checked},set:function(t){var e=this;n(this,function(){e._input.checked=t})}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["checked"])}}]),e}(),Ro={".checkbox":"checkbox--*",".checkbox__input":"checkbox--*__input",".checkbox__checkmark":"checkbox--*__checkmark"},Fo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return Ro}},{key:"_defaultClassName",get:function(){return"checkbox"}},{key:"type",get:function(){return"checkbox"}}]),e}();c.Checkbox=Fo,customElements.define("ons-checkbox",Fo);var qo={".radio-button":"radio-button--*",".radio-button__input":"radio-button--*__input",".radio-button__checkmark":"radio-button--*__checkmark"},zo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return qo}},{key:"_defaultClassName",get:function(){return"radio-button"}},{key:"type",get:function(){return"radio"}}]),e}();c.Radio=zo,customElements.define("ons-radio",zo);var Vo={".search-input":"search-input--*"},Wo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,No),g(e,[{key:"_scheme",get:function(){return Vo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="search-input">\n    '}},{key:"type",get:function(){return"search"}}]),e}();c.SearchInput=Wo,customElements.define("ons-search-input",Wo);var Uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Xo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),Yo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier( .1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}).queue(function(t){e(),t()}).play()}}]),e}(),Go={"":"modal--*",modal__content:"modal--*__content"},$o={default:Uo,fade:Xo,lift:Yo,none:Uo},Ko=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(){},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:$o,baseClass:Uo,baseClassName:"ModalAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(this.style.display="none",this.style.zIndex=10001,this.classList.add("modal"),!Q.findChild(this,".modal__content")){var t=document.createElement("div");for(t.classList.add("modal__content");this.childNodes[0];){var e=this.childNodes[0];this.removeChild(e),t.insertBefore(e,null)}this.appendChild(t)}B.initModifier(this,this._scheme)}},{key:"_toggleStyle",value:function(t){this.style.display=t?"table":"none"}},{key:"connectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,n,i){"class"===t?Q.restoreClass(this,"modal",Go):v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Go}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Uo||Q.throwAnimator("Modal"),$o[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["class"])}},{key:"animators",get:function(){return $o}},{key:"ModalAnimator",get:function(){return Uo}}]),e}();c.Modal=Ko,customElements.define("ons-modal",Ko);var Qo=function(){function t(e){var n=this;p(this,t),"element ignoreSwipe isInitialState onDragCallback swipeMax swipeMin swipeMid".split(/\s+/).forEach(function(t){return n[t]=e[t]}),this.elementHandler=e.elementHandler||e.element,this.getThreshold=e.getThreshold||function(){return.5},this.getSide=e.getSide||function(){return"left"},this.handleGesture=this.handleGesture.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.hasAttribute("swipeable");this.gestureDetector||(this.gestureDetector=new st(this.elementHandler,{dragMinDistance:1,passive:!this._shouldFixScroll}));var e=t?"on":"off";this.gestureDetector[e]("drag dragstart dragend",this.handleGesture)}},{key:"handleGesture",value:function(t){t.gesture&&("dragstart"===t.type?this.onDragStart(t):this._ignoreDrag||("dragend"===t.type?this.onDragEnd(t):this.onDrag(t)))}},{key:"onDragStart",value:function(t){var e=this;this._ignoreDrag=t.consumed||!Q.isValidGesture(t)||this.ignoreSwipe(t,"left"===e.getSide()?t.gesture.center.clientX:window.innerWidth-t.gesture.center.clientX),this._ignoreDrag||(t.consume&&t.consume(),t.consumed=!0,this._width=function(t){var e=[parseInt(t,10),/px/.test(t)],n=e[0];return e[1]?n:Math.round(document.body.offsetWidth*n/100)}(this.element.style.width||"100%"),this._startDistance=this._distance=this.isInitialState instanceof Function&&!this.isInitialState()?this._width:0,Q.iosPreventScroll(this.gestureDetector))}},{key:"onDrag",value:function(t){t.stopPropagation();var e="left"===this.getSide()?t.gesture.deltaX:-t.gesture.deltaX,n=Math.max(0,Math.min(this._width,this._startDistance+e));n!==this._distance&&(this._distance=n,this.swipeMid(this._distance,this._width))}},{key:"onDragEnd",value:function(t){t.stopPropagation();var e=t.gesture.interimDirection;this.getSide()!==e&&this._distance>this._width*this.getThreshold()?this.swipeMax():this.swipeMin()}},{key:"dispose",value:function(){this.gestureDetector&&this.gestureDetector.dispose(),this.gestureDetector=this.element=this.elementHandler=null}}]),t}(),Jo=function(t){function e(t){return p(this,e),t=Q.extend({timing:"linear",duration:"0.4",delay:"0"},t||{}),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Ti),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}},{key:"block",value:function(t){var e=Q.createElement('\n      <div style="position: absolute; background-color: transparent; width: 100%; height: 100%; z-index: 100000"></div>\n    ');return t.parentNode.appendChild(e),function(){return e.remove()}}}]),e}(),Zo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.durationRestore,i=void 0===n?.1:n,o=t.durationSwipe,r=void 0===o?.15:o,a=t.timingSwipe,s=void 0===a?"linear":a,l=y(t,["durationRestore","durationSwipe","timingSwipe"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({},l)));return u.constructor===e&&Q.throwAbstract(),u.durationRestore=i,u.durationSwipe=r,u.timingSwipe=s,u.optSwipe={timing:s,duration:r},u.optRestore={timing:s,duration:i},u.swipeShadow=Q.createElement('<div style="position: absolute; height: 100%; width: 12px; right: 100%; top: 0; bottom: 0; z-index: -1;background: linear-gradient(to right, transparent 0, rgba(0,0,0,.04) 40%, rgba(0,0,0,.12) 80%, rgba(0,0,0,.16) 100%);"></div>'),u.isDragStart=!0,u}return b(e,Jo),g(e,null,[{key:"swipeable",get:function(){return!0}}]),g(e,[{key:"_decompose",value:function(){Q.throwMember()}},{key:"_shouldAnimateToolbar",value:function(){Q.throwMember()}},{key:"_calculateDelta",value:function(){Q.throwMember()}},{key:"_dragStartSetup",value:function(t,n){this.isDragStart=!1,this.unblock=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,n),t.parentElement.insertBefore(this.backgroundMask,t),this.target={enter:Q.findToolbarPage(t)||t,leave:Q.findToolbarPage(n)||n},this.decomp={enter:this._decompose(this.target.enter),leave:this._decompose(this.target.leave)},this.delta=this._calculateDelta(n,this.decomp.leave),this.shouldAnimateToolbar=this._shouldAnimateToolbar(this.target.enter,this.target.leave),this.shouldAnimateToolbar?(this.swipeShadow.style.top=this.decomp.leave.toolbar.offsetHeight+"px",this.target.leave.appendChild(this.swipeShadow),this._saveStyle(this.target.enter,this.target.leave)):(n.appendChild(this.swipeShadow),this._saveStyle(t,n)),n.classList.add("overflow-visible"),this.overflowElement=n,this.decomp.leave.content.classList.add("content-swiping")}},{key:"translate",value:function(t,e,n,i){this.isSwiping=!0,"none"===n.style.display&&(n.style.display=""),this.isDragStart&&(this.maxWidth=e,this._dragStartSetup(n,i));var o=(t-e)/e;this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d("+this.delta.title*o+"px, 0, 0)",opacity:1+o}),nt(this.decomp.enter.backButtonLabel).queue({opacity:1+10*o/100,transform:"translate3d("+this.delta.label*o+"px, 0, 0)"}),nt(this.decomp.enter.other).queue({opacity:1+o}),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(this.decomp.leave.toolbar).queue({opacity:-1*o}),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d("+125*(1+o)+"%, 0, 0)"}),nt(this.decomp.leave.backButtonLabel).queue({opacity:-1*o,transform:"translate3d("+this.delta.title*(1+o)+"px, 0, 0)"}),nt(this.swipeShadow).queue({opacity:-1*o})):nt.runAll(nt(i).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(n).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.swipeShadow).queue({opacity:-1*o}))}},{key:"restore",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(-25%, 0, 0)",opacity:.9},this.optRestore),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(-"+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe,opacity:0}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(-"+this.delta.label+"px, 0, 0)"},this.optRestore),nt(this.decomp.enter.other).queue({opacity:0},this.optRestore),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.toolbar).queue({opacity:1},this.optRestore),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.backButtonLabel).queue({opacity:1,transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0},this.optRestore).queue(function(e){i._reset(i.target.enter,i.target.leave),t.style.display="none",n&&n(),e()})):nt.runAll(nt(t).queue({transform:"translate3D(-25%, 0, 0)",opacity:.9},this.optRestore),nt(e).queue({transform:"translate3D(0, 0, 0)"},this.optRestore).queue(function(o){i._reset(t,e),t.style.display="none",n&&n(),o()})))}},{key:"popSwipe",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(0, 0, 0)",opacity:1},this.optSwipe),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe,opacity:1}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(0, 0, 0)"},this.optSwipe),nt(this.decomp.enter.other).queue({opacity:1},this.optSwipe),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background]).queue({transform:"translate3d(100%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.toolbar).queue({opacity:0},this.optSwipe),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(125%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.backButtonLabel).queue({opacity:0,transform:"translate3d("+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0,transform:"translate3d("+this.maxWidth+"px, 0, 0)"},this.optSwipe).queue(function(t){i._reset(i.target.enter,i.target.leave),n&&n(),t()})):nt.runAll(nt(t).queue({transform:"translate3D(0, 0, 0)",opacity:1},this.optSwipe),nt(e).queue({transform:"translate3D(100%, 0, 0)"},this.optSwipe).queue(function(o){i._reset(t,e),n&&n(),o()})))}},{key:"_saveStyle",value:function(){var t=this;this._savedStyle=new WeakMap;for(var e=function(e){return t._savedStyle.set(e,e.getAttribute("style"))},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_restoreStyle",value:function(){for(var t=this,e=function(e){null===t._savedStyle.get(e)?e.removeAttribute("style"):e.setAttribute("style",t._savedStyle.get(e)),t._savedStyle.delete(e)},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_reset",value:function(){this.isSwiping=!1,this._savedStyle&&this._restoreStyle.apply(this,arguments),this.unblock&&this.unblock(),this.swipeShadow.remove(),this.backgroundMask.remove(),this.overflowElement.classList.remove("overflow-visible"),this.decomp.leave.content.classList.remove("content-swiping"),this.decomp=this.target=this.overflowElement=this._savedStyle=null,this.isDragStart=!0}}]),e}(),tr=function(){return"translate3d("+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+", "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+")"},er=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.3, .4, 0, .9)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a,l=y(t,["timing","delay","duration"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({timing:i,delay:r,duration:s},l)));return u.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black; z-index: 2"></div>'),u}return b(e,Zo),g(e,[{key:"_decompose",value:function(t){var e=t._getToolbarElement(),n=e._getToolbarLeftItemsElement(),i=e._getToolbarRightItemsElement(),o=function(t){for(var e=[],n=0;n<t.length;n++)"ons-back-button"!==t[n].nodeName.toLowerCase()&&e.push(t[n]);return e},r=[].concat(0===n.children.length?n:o(n.children)).concat(0===i.children.length?i:o(i.children));return{toolbarCenter:e._getToolbarCenterItemsElement(),backButtonIcon:e._getToolbarBackButtonIconElement(),backButtonLabel:e._getToolbarBackButtonLabelElement(),other:r,content:t._getContentElement(),background:t._getBackgroundElement(),toolbar:e,bottomToolbar:t._getBottomToolbarElement()}}},{key:"_shouldAnimateToolbar",value:function(t,e){var n=t._canAnimateToolbar()&&e._canAnimateToolbar(),i=t._getToolbarElement(),o=e._getToolbarElement(),r=i.hasAttribute("static")||o.hasAttribute("static"),a=Q.hasModifier(i,"material")||Q.hasModifier(o,"material"),s=Q.hasModifier(i,"transparent")||Q.hasModifier(o,"transparent");return n&&!r&&!a&&!s}},{key:"_calculateDelta",value:function(t,e){var n=void 0,i=void 0,o=t.getBoundingClientRect();if(e.backButtonLabel.classList.contains("back-button__label")){var r=e.backButtonLabel.getBoundingClientRect();n=Math.round(o.width/2-r.width/2-r.left)}else n=Math.round(o.width/2*.6);return e.backButtonIcon.classList.contains("back-button__icon")&&(i=e.backButtonIcon.getBoundingClientRect().right-2),{title:n,label:i}}},{key:"push",value:function(t,i,o){var r=this;this.backgroundMask.remove(),i.parentNode.insertBefore(this.backgroundMask,i);var a=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);n(t,function(){var e=Q.findToolbarPage(t)||t,n=Q.findToolbarPage(i)||i,s=r._decompose(e),l=r._decompose(n),u=r._calculateDelta(i,s);r._shouldAnimateToolbar(e,n)?nt.runAll(nt([s.content,s.bottomToolbar,s.background],r.def).default({transform:tr("100%")},{transform:tr()}),nt(s.toolbar,r.def).default({opacity:0},{opacity:1}),nt(s.toolbarCenter,r.def).default({transform:tr("125%"),opacity:1},{transform:tr(),opacity:1}),nt(s.backButtonLabel,r.def).default({transform:tr(u.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(s.other,r.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([l.content,l.bottomToolbar,l.background],r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}),nt(l.toolbarCenter,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.title+"px"),opacity:0,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(l.backButtonLabel,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.label+"px"),opacity:0}),nt(l.other,r.def).default({opacity:1},{css:{opacity:0},timing:"linear"})):nt.runAll(nt(t,r.def).default({transform:tr("100%")},{transform:tr()}),nt(i,r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}))})}},{key:"pop",value:function(t,n,i){var o=this;if(this.isSwiping)return this.popSwipe(t,n,i);this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=Q.findToolbarPage(t)||t,s=Q.findToolbarPage(n)||n,l=this._decompose(a),u=this._decompose(s),c=this._calculateDelta(n,u);this._shouldAnimateToolbar(a,s)?nt.runAll(nt([l.content,l.bottomToolbar,l.background],this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(l.toolbarCenter,this.def).default({transform:tr("-"+c.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing}),nt(l.backButtonLabel,this.def).default({transform:tr("-"+c.label+"px")},{transform:tr()}),nt(l.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([u.content,u.bottomToolbar,u.background],this.def).default({transform:tr()},{transform:tr("100%")}).wait(0).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(u.toolbar,this.def).default({opacity:1},{opacity:0}),nt(u.toolbarCenter,this.def).default({transform:tr()},{transform:tr("125%")}),nt(u.backButtonLabel,this.def).default({transform:tr(),opacity:1},{transform:tr(c.title+"px"),opacity:0,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing})):nt.runAll(nt(t,this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(n,this.def).default({transform:tr()},{transform:tr("100%")}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}}]),e}(),nr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background: linear-gradient(black, white);"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 100%, 0)"},{transform:"translate3D(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, -10%, 0)",opacity:.9}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, -43px, 0)",opacity:.9},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)"},{transform:"translate3D(0, 100%, 0)"}))}}]),e}(),ir="translate3d(0, 0, 0)",or=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:ir,opacity:0},{transform:ir,opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:ir,opacity:1},{transform:ir,opacity:0}).queue(function(t){o(),i(),t()}))}}]),e}(),rr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.blackMaskOpacity=.4,l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%; z-index: 2;background-color: black; opacity: 0;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentElement.insertBefore(this.backgroundMask,n.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:0},{opacity:this.blackMaskOpacity}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(100%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-45%, 0, 0)"}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:this.blackMaskOpacity},{opacity:0}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(-45%, 0, 0)",opacity:.9},{transform:"translate3d(0, 0, 0)",opacity:1}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(100%, 0, 0)"}).queue(function(t){r(),i(),t()}))}}]),e}(),ar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?.05:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()});nt.runAll(a,nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({opacity:1},{opacity:.4}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({opacity:.4},{opacity:1}).queue(function(t){r(),i(),t()}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}))}}]),e}(),sr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.4, 0, 0.2, 1)":n,o=t.timingPop,r=void 0===o?"cubic-bezier(0.4, 0, 1, 1)":o,a=t.delay,s=void 0===a?0:a,l=t.duration,u=void 0===l?.2:l;p(this,e);var c=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:s,duration:u}));return c.timingPop=r,c}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 42px, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{css:{transform:"translate3D(0, 38px, 0)",opacity:0},timing:this.timingPop}).queue(function(t){o(),i(),t()}))}}]),e}(),lr=function(t){function e(t){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Jo),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}}]),e}(),ur={default:function(){return C.isAndroid()?sr:er},slide:function(){return C.isAndroid()?rr:er},lift:function(){return C.isAndroid()?ar:nr},fade:function(){return C.isAndroid()?sr:or},"slide-ios":er,"slide-md":rr,"lift-ios":nr,"lift-md":ar,"fade-ios":or,"fade-md":sr,none:lr},cr={ready:function(t,e){e()}},hr=function(t){return"ONS-PAGE"!==t.nodeName&&Q.throw("Only page elements can be children of navigator")},dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._isRunning=!1,t._initialized=!1,t._pageLoader=jt,t._pageMap=new WeakMap,t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"animatorFactory",get:function(){return this._animatorFactory}}]),g(e,[{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"connectedCallback",value:function(){var t=this;if(this.onDeviceBackButton=this._onDeviceBackButton.bind(this),!C.isAndroid()||"force"===this.getAttribute("swipeable")){var e=void 0;this._swipe=new Qo({element:this,getThreshold:function(){return Math.max(.2,parseFloat(t.getAttribute("swipe-threshold"))||0)},swipeMax:function(){t._onSwipe&&t._onSwipe(1,{duration:e.durationSwipe,timing:e.timingSwipe}),t[t.swipeMax?"swipeMax":"popPage"]({animator:e}),e=null},swipeMid:function(n,i){t._onSwipe&&t._onSwipe(n/i),e.translate(n,i,t.topPage.previousElementSibling,t.topPage)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,{duration:e.durationRestore,timing:e.timingSwipe}),e.restore(t.topPage.previousElementSibling,t.topPage),e=null},ignoreSwipe:function(n,i){if(!t._isRunning&&t.children.length>1){var o=parseInt(t.getAttribute("swipe-target-width")||25,10);if("right"===n.gesture.direction&&o>i){var r=function(t){return/ons-back-button/i.test(t.tagName)};if(!r(n.target)&&!Q.findParent(n.target,r,function(t){return/ons-page/i.test(t.tagName)})){var a=(t.topPage.pushedOptions||{}).animation||t.animatorFactory._animation,s=ur[a]instanceof Function?ur[a].call():ur[a];if(void 0!==s&&s.swipeable)return e=new s,!1}}}return!0}}),this.attributeChangedCallback("swipeable")}if(!this._initialized){this._initialized=!0;var i=Q.defer();this.loaded=i.promise,cr.ready(this,function(){var e=!Q.hasAnyComponentAsParent(t),o={animation:"none",show:e};if(0===t.pages.length&&t._getPageTarget())t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()});else if(t.pages.length>0){for(var r=0;r<t.pages.length;r++)hr(t.pages[r]);t.topPage&&n(t.topPage,function(){return setTimeout(function(){i.resolve(),e&&t.topPage._show(),t._updateLastPageBackButton()},0)})}else n(t,function(){0===t.pages.length&&t._getPageTarget()?t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()}):i.resolve()})})}}},{key:"_updateAnimatorFactory",value:function(){this._animatorFactory=new O({animators:ur,baseClass:Jo,baseClassName:"NavigatorAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._swipe&&this._swipe.dispose(),this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"animation":this._updateAnimatorFactory();break;case"swipeable":this._swipe&&this._swipe.update()}}},{key:"popPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this._preparePageAndOptions(null,e).options,Q.isInteger(e.times)&&e.times>1&&this._removePages(e.times);return this._popPage(e,function(){return new Promise(function(e){t._pageLoader.unload(t.pages[t.pages.length-1]),e()})})}},{key:"_popPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("popPage is already running.");if(this.pages.length<=1)return Promise.reject("ons-navigator's page stack is empty.");if(this._emitPrePopEvent())return Promise.reject("Canceled in prepop event.");var i=this.pages.length;return this._isRunning=!0,this.pages[i-2].updateBackButton(i-2>0),new Promise(function(o){var r=e.pages[i-1],a=e.pages[i-2];(t=Q.extend({},e.options||{},r.pushedOptions||{},t)).data&&(a.data=Q.extend({},a.data||{},t.data||{}));r._hide(),a.style.display="";(t.animator||e._animatorFactory.newAnimator(t)).pop(e.pages[i-2],e.pages[i-1],function(){n().then(function(){e._isRunning=!1,a._show(),Q.triggerElementEvent(e,"postpop",{leavePage:r,enterPage:a,navigator:e}),t.callback&&t.callback(a),o(a)})})}).catch(function(){return e._isRunning=!1})}},{key:"pushPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);t=i.page;var o=function(i){hr(i),e._pageMap.set(i,t),(i=Q.extend(i,{data:n.data})).style.visibility="hidden"};return(n=i.options).pageHTML?this._pushPage(n,function(){return new Promise(function(t){Ht.load({page:n.pageHTML,parent:e,params:n.data},function(e){o(e),t()})})}):this._pushPage(n,function(){return new Promise(function(i){e._pageLoader.load({page:t,parent:e,params:n.data},function(t){o(t),i()})})})}},{key:"_pushPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("pushPage is already running.");if(this._emitPrePushEvent())return Promise.reject("Canceled in prepush event.");this._isRunning=!0;var i=O.parseAnimationOptionsString(this.getAttribute("animation-options"));e=Q.extend({},this.options||{},{animationOptions:i},e);var o=this._animatorFactory.newAnimator(e);return n().then(function(){var n=t.pages.length,i=t.pages[n-1],r=e.leavePage||t.pages[n-2];return hr(i),i.updateBackButton(n>(e._replacePage?2:1)),i.pushedOptions=Q.extend({},i.pushedOptions||{},e||{}),i.data=Q.extend({},i.data||{},e.data||{}),i.unload=i.unload||e.unload,new Promise(function(n){var a=function(){t._isRunning=!1,!1!==e.show&&setImmediate(function(){return i._show()}),Q.triggerElementEvent(t,"postpush",{leavePage:r,enterPage:i,navigator:t}),r&&(r.style.display="none"),e.callback&&e.callback(i),n(i)};i.style.visibility="",r?(r._hide(),o.push(i,r,a)):a()})}).catch(function(e){throw t._isRunning=!1,e})}},{key:"replacePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pushPage(t,n).then(function(t){return e.pages.length>1&&e._pageLoader.unload(e.pages[e.pages.length-2]),e._updateLastPageBackButton(),Promise.resolve(t)})}},{key:"insertPage",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._preparePageAndOptions(e,i);if(e=o.page,i=o.options,(t=this._normalizeIndex(t))>=this.pages.length)return this.pushPage(e,i);e="string"==typeof i.pageHTML?i.pageHTML:e;var r="string"==typeof i.pageHTML?Ht:this._pageLoader;return new Promise(function(o){r.load({page:e,parent:n},function(r){hr(r),n._pageMap.set(r,e),r=Q.extend(r,{data:i.data,pushedOptions:i}),i.animationOptions=Q.extend({},O.parseAnimationOptionsString(n.getAttribute("animation-options")),i.animationOptions||{}),r.style.display="none",n.insertBefore(r,n.pages[t]),n.topPage.updateBackButton(!0),setTimeout(function(){r=null,o(n.pages[t])},1e3/60)})})}},{key:"removePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this._normalizeIndex(t))<this.pages.length-1?new Promise(function(n){var i=e.pages[t],o=e.topPage;e._pageMap.delete(i),e._pageLoader.unload(i),1===e.pages.length&&e.topPage.updateBackButton(!1),n(o)}):this.popPage(n)}},{key:"resetToPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);if(t=i.page,(n=i.options).animator||n.animation||n.pop||(n.animation="none"),n.page||n.pageHTML||!this._getPageTarget()||(t=n.page=this._getPageTarget()),n.pop)return this._removePages(),this.insertPage(0,t,{data:n.data}).then(function(){return e.popPage(n)});var o=n.callback;return n.callback=function(t){e._removePages(),t.updateBackButton(!1),o&&o(t)},this.pushPage(t,n)}},{key:"bringPageTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===["number","string"].indexOf(void 0===t?"undefined":f(t))&&Q.throw("First argument must be a page name or the index of an existing page. You supplied "+t);var n="number"==typeof t?this._normalizeIndex(t):this._lastIndexOfPage(t),i=this.pages[n];if(n<0)return this.pushPage(t,e);return e=this._preparePageAndOptions(i,e).options,n===this.pages.length-1?Promise.resolve(i):(i||Q.throw("Failed to find item "+t),this._isRunning?Promise.reject("pushPage is already running."):this._emitPrePushEvent()?Promise.reject("Canceled in prepush event."):(i.style.display="",i.style.visibility="hidden",i.parentNode.appendChild(i),this._pushPage(e)))}},{key:"_preparePageAndOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"!=(void 0===e?"undefined":f(e))&&Q.throw("options must be an object. You supplied "+e),null!==t&&void 0!==t||!e.page||(t=e.page),e=Q.extend({},this.options||{},e,{page:t}),{page:t,options:e}}},{key:"_removePages",value:function(t){var e=this.pages,n=void 0===t?0:e.length-t;n=n<0?1:n;for(var i=e.length-2;i>=n;i--)this._pageMap.delete(e[i]),this._pageLoader.unload(e[i])}},{key:"_updateLastPageBackButton",value:function(){var t=this.pages.length-1;t>=0&&this.pages[t].updateBackButton(t>0)}},{key:"_normalizeIndex",value:function(t){return t>=0?t:Math.abs(this.pages.length+t)%this.pages.length}},{key:"_onDeviceBackButton",value:function(t){this.pages.length>1?this.popPage():t.callParentHandler()}},{key:"_lastIndexOfPage",value:function(t){var e=void 0;for(e=this.pages.length-1;e>=0&&(this._pageMap.has(this.pages[e])||Q.throw("Incorrect state of pageMap"),t!==this._pageMap.get(this.pages[e]));e--);return e}},{key:"_emitPreEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return Q.triggerElementEvent(this,"pre"+t,Q.extend({navigator:this,currentPage:this.pages[this.pages.length-1],cancel:function(){return n=!0}},e)),n}},{key:"_emitPrePushEvent",value:function(){return this._emitPreEvent("push")}},{key:"_emitPrePopEvent",value:function(){var t=this.pages.length;return this._emitPreEvent("pop",{leavePage:this.pages[t-1],enterPage:this.pages[t-2]})}},{key:"_createPageElement",value:function(t){var e=Q.createElement(P.normalizePageHTML(t));return hr(e),e}},{key:"_show",value:function(){var t=this;this.loaded.then(function(){return t.topPage&&t.topPage._show()})}},{key:"_hide",value:function(){this.topPage&&this.topPage._hide()}},{key:"_destroy",value:function(){for(var t=this.pages.length-1;t>=0;t--)this._pageLoader.unload(this.pages[t]);this.remove()}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"topPage",get:function(){for(var t=this.lastElementChild;t&&"ONS-PAGE"!==t.tagName;)t=t.previousElementSibling;return t}},{key:"pages",get:function(){return Q.arrayFrom(this.children).filter(function(t){return"ONS-PAGE"===t.tagName})}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"_isRunning",set:function(t){this.setAttribute("_is-running",t?"true":"false")},get:function(){return JSON.parse(this.getAttribute("_is-running"))}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Jo||Q.throwAnimator("Navigator"),ur[t]=e}},{key:"observedAttributes",get:function(){return["animation","swipeable"]}},{key:"animators",get:function(){return ur}},{key:"NavigatorAnimator",get:function(){return Jo}},{key:"events",get:function(){return["prepush","postpush","prepop","postpop"]}},{key:"rewritables",get:function(){return cr}}]),e}();c.Navigator=dr,customElements.define("ons-navigator",dr);var fr={"":"toolbar--*",".toolbar__left":"toolbar--*__left",".toolbar__center":"toolbar--*__center",".toolbar__right":"toolbar--*__right"},pr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"toolbar",fr);break;case"modifier":B.onModifierChanged(e,n,this,fr)}}},{key:"_getToolbarLeftItemsElement",value:function(){return this.querySelector(".left")||P.nullElement}},{key:"_getToolbarCenterItemsElement",value:function(){return this.querySelector(".center")||P.nullElement}},{key:"_getToolbarRightItemsElement",value:function(){return this.querySelector(".right")||P.nullElement}},{key:"_getToolbarBackButtonLabelElement",value:function(){return this.querySelector("ons-back-button .back-button__label")||P.nullElement}},{key:"_getToolbarBackButtonIconElement",value:function(){return this.querySelector("ons-back-button .back-button__icon")||P.nullElement}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("toolbar"),this._ensureToolbarItemElements(),B.initModifier(this,fr)}},{key:"_ensureToolbarItemElements",value:function(){for(var t=this.childNodes.length-1;t>=0;t--)1!=this.childNodes[t].nodeType&&this.removeChild(this.childNodes[t]);var e=this._ensureToolbarElement("center");if(e.classList.add("toolbar__title"),1!==this.children.length||!this.children[0].classList.contains("center")){var n=this._ensureToolbarElement("left"),i=this._ensureToolbarElement("right");this.children[0]===n&&this.children[1]===e&&this.children[2]===i||(this.appendChild(n),this.appendChild(e),this.appendChild(i))}}},{key:"_ensureToolbarElement",value:function(t){if(Q.findChild(this,".toolbar__"+t)){var e=Q.findChild(this,".toolbar__"+t);return e.classList.add(t),e}var n=Q.findChild(this,"."+t)||Q.create("."+t);return n.classList.add("toolbar__"+t),n}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Toolbar=pr,customElements.define("ons-toolbar",pr);var gr="page",mr={"":"page--*",".page__content":"page--*__content",".page__background":"page--*__background"},_r=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._deriveHooks(),t._defaultClassName=gr,t.classList.add(gr),t._initialized=!1,n(t,function(){t._compile(),t._isShown=!1,t._contentElement=t._getContentElement(),t._backgroundElement=t._getBackgroundElement()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this;N.prepare(this);var e=Q.findChild(this,"ons-toolbar"),n=Q.findChild(this,".page__background")||Q.findChild(this,".background")||document.createElement("div");n.classList.add("page__background"),this.insertBefore(n,!e&&this.firstChild||e&&e.nextSibling);var i=Q.findChild(this,".page__content")||Q.findChild(this,".content")||document.createElement("div");i.classList.add("page__content"),i.parentElement||Q.arrayFrom(this.childNodes).forEach(function(e){(1!==e.nodeType||t._elementShouldBeMoved(e))&&i.appendChild(e)}),this._tryToFillStatusBar(i),this.insertBefore(i,n.nextSibling),e&&Q.hasModifier(e,"transparent")||1!==i.children.length||!Q.isPageControl(i.children[0])||(this._defaultClassName+=" page--wrapper",this.attributeChangedCallback("class")),B.initModifier(this,mr)}},{key:"_elementShouldBeMoved",value:function(t){if(t.classList.contains("page__background"))return!1;var e=t.tagName.toLowerCase();if("ons-fab"===e)return!t.hasAttribute("position");return t.hasAttribute("inline")||-1===["script","ons-toolbar","ons-bottom-toolbar","ons-modal","ons-speed-dial","ons-dialog","ons-alert-dialog","ons-popover","ons-action-sheet"].indexOf(e)}},{key:"_tryToFillStatusBar",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;P.autoStatusBarFill(function(){Q.toggleAttribute(t,"status-bar-fill",!Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")})&&(t._canAnimateToolbar(e)||!Q.findChild(e,Q.isPageControl)))})}},{key:"_canAnimateToolbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;return!!Q.findChild(this,"ons-toolbar")||!!Q.findChild(t,function(t){return Q.match(t,"ons-toolbar")&&!t.hasAttribute("inline")})}},{key:"connectedCallback",value:function(){var t=this;Q.isAttached(this)&&n(this,function(){t._tryToFillStatusBar(),t.hasAttribute("on-infinite-scroll")&&t.attributeChangedCallback("on-infinite-scroll",null,t.getAttribute("on-infinite-scroll")),t._initialized||(t._initialized=!0,setImmediate(function(){t.onInit&&t.onInit(),Q.triggerElementEvent(t,"init")}),Q.hasAnyComponentAsParent(t)||setImmediate(function(){return t._show()}))})}},{key:"updateBackButton",value:function(t){this.backButton&&(t?this.backButton.show():this.backButton.hide())}},{key:"_onScroll",value:function(){var t=this,e=this._contentElement,n=(e.scrollTop+e.clientHeight)/e.scrollHeight>=this._infiniteScrollLimit;this._onInfiniteScroll&&!this._loadingContent&&n&&(this._loadingContent=!0,this._onInfiniteScroll(function(){return t._loadingContent=!1}))}},{key:"_getContentElement",value:function(){var t=Q.findChild(this,".page__content");if(t)return t;Q.throw('Fail to get ".page__content" element')}},{key:"_getBackgroundElement",value:function(){var t=Q.findChild(this,".page__background");if(t)return t;Q.throw('Fail to get ".page__background" element')}},{key:"_getBottomToolbarElement",value:function(){return Q.findChild(this,"ons-bottom-toolbar")||P.nullElement}},{key:"_getToolbarElement",value:function(){return Q.findChild(this,"ons-toolbar")||document.createElement("ons-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this;switch(t){case"class":Q.restoreClass(this,this._defaultClassName,mr);break;case"modifier":B.onModifierChanged(e,n,this,mr);break;case"on-infinite-scroll":this.onInfiniteScroll=null===n?null:function(t){var e=Q.findFromPath(n);i.onInfiniteScroll=e,e(t)}}}},{key:"_show",value:function(){!this._isShown&&Q.isAttached(this)&&(this._isShown=!0,this.setAttribute("shown",""),this.onShow&&this.onShow(),Q.triggerElementEvent(this,"show"),Q.propagateAction(this,"_show"))}},{key:"_hide",value:function(){this._isShown&&(this._isShown=!1,this.removeAttribute("shown"),this.onHide&&this.onHide(),Q.triggerElementEvent(this,"hide"),Q.propagateAction(this,"_hide"))}},{key:"_destroy",value:function(){this._hide(),this.onDestroy&&this.onDestroy(),Q.triggerElementEvent(this,"destroy"),this.onDeviceBackButton&&this.onDeviceBackButton.destroy(),Q.propagateAction(this,"_destroy"),this.remove()}},{key:"_deriveHooks",value:function(){var t=this;this.constructor.events.forEach(function(e){var n="on"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return t["_"+n]},set:function(e){e instanceof Function||Q.throw('"'+n+'" hook must be a function'),t["_"+n]=e.bind(t)}})})}},{key:"name",set:function(t){this.setAttribute("name",t)},get:function(){return this.getAttribute("name")}},{key:"backButton",get:function(){return this.querySelector("ons-back-button")}},{key:"onInfiniteScroll",set:function(t){var e=this;!t||t instanceof Function||Q.throw('"onInfiniteScroll" must be function or null'),n(this,function(){t?e._onInfiniteScroll||(e._infiniteScrollLimit=.9,e._boundOnScroll=e._onScroll.bind(e),setImmediate(function(){return e._contentElement.addEventListener("scroll",e._boundOnScroll)})):e._contentElement.removeEventListener("scroll",e._boundOnScroll),e._onInfiniteScroll=t})},get:function(){return this._onInfiniteScroll}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"scrollTop",get:function(){return this._contentElement.scrollTop},set:function(t){this._contentElement.scrollTop=t}}],[{key:"observedAttributes",get:function(){return["modifier","on-infinite-scroll","class"]}},{key:"events",get:function(){return["init","show","hide","destroy"]}}]),e}();c.Page=_r,customElements.define("ons-page",_r);var vr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}},{key:"_animate",value:function(t,e){var n=e.from,i=e.to,o=e.options,r=e.callback,a=e.restore,s=void 0!==a&&a,l=e.animation;return o=Q.extend({},this.options,o),l&&(n=l.from,i=l.to),l=nt(t),s&&(l=l.saveStyle()),l=l.queue(n).wait(this.delay).queue({css:i,duration:this.duration,timing:this.timing}),s&&(l=l.restoreStyle()),r&&(l=l.queue(function(t){r(),t()})),l}},{key:"_animateAll",value:function(t,e){var n=this;Object.keys(e).forEach(function(i){return n._animate(t[i],e[i]).play()})}}]),e}(),br={out:{from:{opacity:1},to:{opacity:0}},in:{from:{opacity:0},to:{opacity:1}}},yr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,vr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{animation:br.in,restore:!0,callback:e}})}},{key:"hide",value:function(t,e){this._animateAll(t,{_mask:br.out,_popover:{animation:br.out,restore:!0,callback:e}})}}]),e}(),kr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,yr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{from:{transform:"scale3d(1.3, 1.3, 1.0)",opacity:0},to:{transform:"scale3d(1.0, 1.0,  1.0)",opacity:1},restore:!0,callback:e}})}}]),e}(),wr={".popover":"popover--*",".popover-mask":"popover-mask--*",".popover__content":"popover--*__content",".popover__arrow":"popover--*__arrow"},Er={default:function(){return C.isAndroid()?yr:kr},none:vr,"fade-ios":kr,"fade-md":yr},Cr={up:"bottom",left:"right",down:"top",right:"left"},Ar=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnChange=t._onChange.bind(t),n(t,function(){t._compile(),t.style.display="none"}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Er,baseClass:vr,baseClassName:"PopoverAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"_toggleStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?(this.style.display="block",this._currentTarget=e.target,this._positionPopover(e.target)):(this.style.display="none",this._clearStyles())}},{key:"_positionPopover",value:function(t){var e=this._radius,n=this._content,i=this._margin,o=Li.getSafeAreaLengths(),r=Li.getSafeAreaDOMRect(),a=t.getBoundingClientRect(),s=Q.hasModifier(this,"material"),l=s&&this.hasAttribute("cover-target"),u=(Q.findParent(this,"ons-page")||document.body).getBoundingClientRect(),c={top:Math.max(u.top,r.top),left:Math.max(u.left,r.left),bottom:Math.min(u.bottom,r.bottom),right:Math.min(u.right,r.right)},h={top:a.top-(c.top+i),left:a.left-(c.left+i),bottom:c.bottom-i-a.bottom,right:c.right-i-a.right},d={top:a.top+Math.round(a.height/2)-(c.top+i),left:a.left+Math.round(a.width/2)-(c.left+i),bottom:c.bottom-i-a.bottom+Math.round(a.height/2),right:c.right-i-a.right+Math.round(a.width/2)},f=this._calculateDirections(h),p=f.vertical,g=f.primary,m=f.secondary;this._currentDirection=g,Q.addModifier(this,g);var _=p?"width":"height",v=function(t){return{width:parseInt(t.getPropertyValue("width"),10),height:parseInt(t.getPropertyValue("height"),10)}}(window.getComputedStyle(n)),b=l?0:(p?a.height:a.width)+(s?0:14),y=Math.max(o[g]+i,o[g]+i+h[g]+b),k=Math.max(o[m]+i,o[m]+i+d[m]-v[_]/2);this._popover.style[g]=y+"px",this._popover.style[m]=k+"px",this._arrow.style[m]=Math.max(e,o[m]+i+d[m]-k)+"px"}},{key:"_calculateDirections",value:function(t){var e=(this.getAttribute("direction")||"up down left right").split(/\s+/).map(function(t){return Cr[t]}).sort(function(e,n){return t[e]-t[n]})[0],n="top"==e||"bottom"==e,i=void 0;return i=n?t.left<t.right?"left":"right":t.top<t.bottom?"top":"bottom",{vertical:n,primary:e,secondary:i}}},{key:"_clearStyles",value:function(){var t=this;this._currentDirection=null,["top","bottom","left","right"].forEach(function(e){t._arrow.style[e]=t._content.style[e]=t._popover.style[e]="",Q.removeModifier(t,e)})}},{key:"_onChange",value:function(){var t=this;setImmediate(function(){t._currentTarget&&t._positionPopover(t._currentTarget)})}},{key:"_compile",value:function(){if(N.prepare(this),!this._popover||!this._mask){if(this._popover&&this._content){if(!this._mask){var t=document.createElement("div");t.classList.add("popover-mask"),this.insertBefore(t,this.firstChild)}if(!this._arrow){var e=document.createElement("div");e.classList.add("popover__arrow"),this._popover.appendChild(e)}}else{for(var n=Q.createFragment('\n        <div class="popover-mask"></div>\n        <div class="popover">\n          <div class="popover__content"></div>\n          <div class="popover__arrow"></div>\n        </div>\n      '),i=n.querySelector(".popover__content");this.childNodes[0];)i.appendChild(this.childNodes[0]);this.appendChild(n)}this.hasAttribute("style")&&(this._popover.setAttribute("style",this.getAttribute("style")),this.removeAttribute("style")),B.initModifier(this,this._scheme)}}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof(n=!t||"object"!==(void 0===t?"undefined":f(t))||t instanceof Event||t instanceof HTMLElement?_({},n,{target:t}):_({},t)).target?n.target=document.querySelector(n.target):n.target instanceof Event&&(n.target=n.target.target),n.target instanceof HTMLElement||Q.throw("Invalid target type or undefined"),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,n)}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._boundOnChange,!1),this._margin=this._margin||parseInt(window.getComputedStyle(this).getPropertyValue("top")),this._margin=this._margin||6,n(this,function(){t._radius=parseInt(window.getComputedStyle(t._content).getPropertyValue("border-top-left-radius"))})}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._boundOnChange,!1)}},{key:"attributeChangedCallback",value:function(t,n,i){if("direction"===t)return this._boundOnChange();"modifier"===t&&this._currentDirection&&Q.addModifier(this,this._currentDirection),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return wr}},{key:"_mask",get:function(){return Q.findChild(this,".popover-mask")}},{key:"_popover",get:function(){return Q.findChild(this,".popover")}},{key:"_content",get:function(){return Q.findChild(this._popover,".popover__content")}},{key:"_arrow",get:function(){return Q.findChild(this._popover,".popover__arrow")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof vr||Q.throwAnimator("Popover"),Er[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["direction"])}},{key:"animators",get:function(){return Er}},{key:"PopoverAnimator",get:function(){return vr}}]),e}();c.Popover=Ar,customElements.define("ons-popover",Ar);var Sr={".progress-bar":"progress-bar--*",".progress-bar__primary":"progress-bar--*__primary",".progress-bar__secondary":"progress-bar--*__secondary"},Pr=Q.createElement('\n  <div class="progress-bar">\n    <div class="progress-bar__secondary"></div>\n    <div class="progress-bar__primary"></div>\n  </div>\n'),Or="indeterminate",xr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-bar"):this._template=Pr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-bar__primary"),this._secondary=Q.findChild(this._template,".progress-bar__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Sr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-bar"))return!1;var t=Q.findChild(this,".progress-bar");return!!Q.findChild(t,".progress-bar__secondary")&&!!Q.findChild(t,".progress-bar__primary")}},{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Sr),this.hasAttribute(Or)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Or&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Or,{force:t.hasAttribute(Or)})})}},{key:"_updateValue",value:function(){var t=this;n(this,function(){t._primary.style.width=t.hasAttribute("value")?t.getAttribute("value")+"%":"0%",t._secondary.style.width=t.hasAttribute("secondary-value")?t.getAttribute("secondary-value")+"%":"0%"})}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Or,""):this.removeAttribute(Or)},get:function(){return this.hasAttribute(Or)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Or]}}]),e}();c.ProgressBar=xr,customElements.define("ons-progress-bar",xr);var Tr={".progress-circular":"progress-circular--*",".progress-circular__background":"progress-circular--*__background",".progress-circular__primary":"progress-circular--*__primary",".progress-circular__secondary":"progress-circular--*__secondary"},Lr=Q.createElement('\n  <svg class="progress-circular">\n    <circle class="progress-circular__background" />\n    <circle class="progress-circular__secondary" cx="50%" cy="50%" r="40%" />\n    <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" />\n  </svg>\n'),Mr="indeterminate",Dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Tr),this.hasAttribute(Mr)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Mr&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Mr,{force:t.hasAttribute(Mr)})})}},{key:"_updateValue",value:function(){var t=this;this.hasAttribute("value")&&n(this,function(){var e=Math.ceil(251.32*t.getAttribute("value")*.01);t._primary.style["stroke-dasharray"]=e+"%, 251.32%"}),this.hasAttribute("secondary-value")?n(this,function(){var e=Math.ceil(251.32*t.getAttribute("secondary-value")*.01);t._secondary.style.display=null,t._secondary.style["stroke-dasharray"]=e+"%, 251.32%"}):n(this,function(){t._secondary.style.display="none"})}},{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-circular"):this._template=Lr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-circular__primary"),this._secondary=Q.findChild(this._template,".progress-circular__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Tr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-circular"))return!1;var t=Q.findChild(this,".progress-circular");return!!Q.findChild(t,".progress-circular__secondary")&&!!Q.findChild(t,".progress-circular__primary")}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Mr,""):this.removeAttribute(Mr)},get:function(){return this.hasAttribute(Mr)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Mr]}}]),e}();c.ProgressCircular=Dr,customElements.define("ons-progress-circular",Dr);var Ir="initial",Nr=function(t,e){return Q.throw('"'+t+'" must be '+e)},Br=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._shouldFixScroll=Q.globals.isUIWebView,t._onDrag=t._onDrag.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onDragEnd=t._onDragEnd.bind(t),t._onScroll=t._onScroll.bind(t),t._setState(Ir,!0),t._hide(),t}return b(e,Pi),g(e,[{key:"_setStyle",value:function(){var t=this.height+"px";d(this,{height:t,lineHeight:t}),""===this.style.display&&this._show()}},{key:"_onScroll",value:function(t){var e=this._pageElement;e.scrollTop<0&&(e.scrollTop=0)}},{key:"_canConsumeGesture",value:function(t){return"up"===t.direction||"down"===t.direction}},{key:"_onDragStart",value:function(t){var e=this;if(t.gesture&&!this.disabled){var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight,o=this._shouldFixScroll?.8:1;if(this._ignoreDrag=t.consumed||n>i*o,!this._ignoreDrag){var r=t.consume;t.consume=function(){r&&r(),e._ignoreDrag=!0,e._hide()},this._canConsumeGesture(t.gesture)&&(r&&r(),t.consumed=!0,this._show())}this._startScroll=this._pageElement.scrollTop}}},{key:"_onDrag",value:function(t){var e=this;if(t.gesture&&!this.disabled&&!this._ignoreDrag&&this._canConsumeGesture(t.gesture)){"none"===this.style.display&&this._show(),t.stopPropagation();var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight;this._shouldFixScroll&&(this._pageElement.scrollTop=this._startScroll-t.gesture.deltaY,("up"!==t.gesture.interimDirection||n<=.5*i)&&t.gesture.preventDefault());var o=Math.max(t.gesture.deltaY-this._startScroll,0);if(o!==this._currentTranslation){var r=this.thresholdHeight;r>0&&o>=r?(t.gesture.stopDetect(),setImmediate(function(){return e._finish()})):o>=this.height?this._setState("preaction"):this._setState(Ir),this._translateTo(o)}}}},{key:"_onDragEnd",value:function(t){if(t.gesture&&!this.disabled&&!this._ignoreDrag&&(t.stopPropagation(),this._currentTranslation>0)){this._currentTranslation>this.height?this._finish():this._translateTo(0,{animate:!0})}}},{key:"_finish",value:function(){var t=this;this._setState("action"),this._translateTo(this.height,{animate:!0});(this.onAction||function(t){return t()})(function(){t._translateTo(0,{animate:!0}),t._setState(Ir)})}},{key:"_setState",value:function(t,e){var n=this.state;this.setAttribute("state",t),e||n===this.state||Q.triggerElementEvent(this,"changestate",{pullHook:this,state:t,lastState:n})}},{key:"_show",value:function(){var t=this;setImmediate(function(){t.style.display="",t._pageElement&&(t._pageElement.style.marginTop="-"+t.height+"px")})}},{key:"_hide",value:function(){this.style.display="none",this._pageElement&&(this._pageElement.style.marginTop="")}},{key:"_translateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!=this._currentTranslation||0!=t){this._currentTranslation=t;var n=e.animate?{duration:.3,timing:"cubic-bezier(.1, .7, .1, 1)"}:{};this._onPull&&this._onPull((t/this.height).toFixed(2),n);var i=this.hasAttribute("fixed-content")?this:this._pageElement;nt(i).queue({transform:"translate3d(0px, "+t+"px, 0px)"},n).play(function(){0===t&&d.clear(i,"transition transform"),e.callback instanceof Function&&e.callback()})}}},{key:"_disableDragLock",value:function(){this._dragLockDisabled=!0,this._setupListeners(!0)}},{key:"_setupListeners",value:function(t){var e=this,n=function(t){return e._pageElement[t+"EventListener"]("scroll",e._onScroll,!1)},i=function(t){var n={passive:!0};e._gestureDetector[t]("drag",e._onDrag,n),e._gestureDetector[t]("dragstart",e._onDragStart,n),e._gestureDetector[t]("dragend",e._onDragEnd,n)};this._gestureDetector&&(i("off"),this._gestureDetector.dispose(),this._gestureDetector=null),n("remove"),t&&(this._gestureDetector=new st(this._pageElement,{dragMinDistance:1,dragDistanceCorrection:!1,dragLockToAxis:!this._dragLockDisabled,passive:!this._shouldFixScroll}),i("on"),n("add"))}},{key:"connectedCallback",value:function(){this._currentTranslation=0,this._pageElement=this.parentNode,this._setupListeners(!0),this._setStyle()}},{key:"disconnectedCallback",value:function(){this._hide(),this._setupListeners(!1)}},{key:"attributeChangedCallback",value:function(t,e,n){"height"===t&&this._pageElement&&this._setStyle()}},{key:"onAction",get:function(){return this._onAction},set:function(t){!t||t instanceof Function||Nr("onAction","function or null"),this._onAction=t}},{key:"onPull",get:function(){return this._onPull},set:function(t){!t||t instanceof Function||Nr("onPull","function or null"),this._onPull=t}},{key:"height",set:function(t){Q.isInteger(t)||Nr("height","integer"),this.setAttribute("height",t+"px")},get:function(){return parseInt(this.getAttribute("height")||"64",10)}},{key:"thresholdHeight",set:function(t){Q.isInteger(t)||Nr("thresholdHeight","integer"),this.setAttribute("threshold-height",t+"px")},get:function(){return parseInt(this.getAttribute("threshold-height")||"96",10)}},{key:"state",get:function(){return this.getAttribute("state")}},{key:"pullDistance",get:function(){return this._currentTranslation}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["height"]}},{key:"events",get:function(){return["changestate"]}}]),e}();c.PullHook=Br,customElements.define("ons-pull-hook",Br);var jr={"":"range--*",".range__input":"range--*__input",".range__focus-ring":"range--*__focus-ring"},Hr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onMouseDown=t._onMouseDown.bind(t),t._onMouseUp=t._onMouseUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onInput=t._update.bind(t),t._onDragstart=t._onDragstart.bind(t),t._onDragend=t._onDragend.bind(t),t}return b(e,No),g(e,[{key:"_compile",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_compile",this).call(this),this._updateDisabled(this.hasAttribute("disabled"))}},{key:"_update",value:function(){var t=this._input,e=this._focusRing;t.style.backgroundSize=100*this._ratio+"% 2px",e.value=this.value,""===t.min&&"0"===t.value||t.min===t.value?t.setAttribute("_zero",""):t.removeAttribute("_zero"),["min","max"].forEach(function(n){return e[n]=t[n]})}},{key:"_onMouseDown",value:function(t){var e=this;this._input.classList.add("range__input--active"),setImmediate(function(){return e._input.focus()})}},{key:"_onTouchStart",value:function(t){this._onMouseDown()}},{key:"_onMouseUp",value:function(t){this._input.classList.remove("range__input--active")}},{key:"_onTouchEnd",value:function(t){this._onMouseUp(t)}},{key:"_onDragstart",value:function(t){t.consumed=!0,t.gesture.stopPropagation(),this._input.classList.add("range__input--active"),this.addEventListener("drag",this._onDrag)}},{key:"_onDrag",value:function(t){t.stopPropagation()}},{key:"_onDragend",value:function(t){this._input.classList.remove("range__input--active"),this.removeEventListener("drag",this._onDrag)}},{key:"attributeChangedCallback",value:function(t,n,i){"disabled"===t&&this._updateDisabled(i),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_updateDisabled",value:function(t){t?this.classList.add("range--disabled"):this.classList.remove("range--disabled")}},{key:"connectedCallback",value:function(){this._setupListeners(!0)}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouchStart,{passive:!0}),this[e]("mousedown",this._onMouseDown),this[e]("mouseup",this._onMouseUp),this[e]("touchend",this._onTouchEnd),this[e]("dragstart",this._onDragstart),this[e]("dragend",this._onDragend),this[e]("input",this._onInput)}},{key:"_scheme",get:function(){return jr}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <input type="range" class="range__focus-ring" tabIndex="-1">\n    '}},{key:"_defaultClassName",get:function(){return"range"}},{key:"type",get:function(){return"range"}},{key:"_focusRing",get:function(){return this.children[1]}},{key:"_ratio",get:function(){var t=""===this._input.min?0:parseInt(this._input.min),e=""===this._input.max?100:parseInt(this._input.max);return(this.value-t)/(e-t)}}],[{key:"observedAttributes",get:function(){return["disabled"].concat(w(No.observedAttributes))}}]),e}();c.Range=Hr,customElements.define("ons-range",Hr);var Rr=function(){function t(){p(this,t),this._queue=[],this._index=0}return g(t,[{key:"animate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=(new Date).getTime(),o={},r=!1,a=!1,s=!1,l=Object.keys(e),u={stop:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&clearTimeout(s);var h=Math.min(1,((new Date).getTime()-i)/n);return l.forEach(function(n){t.style[n]=(1-h)*o[n]+h*e[n]+("opacity"==n?"":"px")}),t.style.transitionDuration="0s",c.stopNext?a=!1:r||(r=!0,a&&a()),u},then:function(t){return a=t,r&&a&&a(),u},speed:function(a){if(P.config.animationsDisabled&&(a=0),!r){s&&clearTimeout(s);var c=((new Date).getTime()-i)/n,h=a*(1-c);l.forEach(function(n){t.style[n]=(1-c)*o[n]+c*e[n]+("opacity"==n?"":"px")}),function(){var e=window.getComputedStyle(t);l.forEach(e.getPropertyValue.bind(e)),e=t.offsetHeight}(),i=t.speedUpTime,n=h,t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")}),s=setTimeout(u.stop,h)}return u},finish:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=((new Date).getTime()-i)/n;return u.speed(t/(1-e)),u}};if(t.hasAttribute("disabled")||r||P.config.animationsDisabled)return u;var c=window.getComputedStyle(t);return l.forEach(function(t){var e=parseFloat(c.getPropertyValue(t));o[t]=isNaN(e)?0:e}),r||(t.style.transitionProperty=l.join(","),t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")})),s=setTimeout(u.stop,n),this._onStopAnimations(t,u.stop),u}}]),g(t,[{key:"_onStopAnimations",value:function(t,e){var n=this._queue,i=this._index++;n[t]=n[t]||[],n[t][i]=function(o){return delete n[t][i],n[t]&&0==n[t].length&&delete n[t],e(o)}}},{key:"stopAnimations",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t))return t.forEach(function(t){e.stopAnimations(t,n)});(this._queue[t]||[]).forEach(function(t){t(n||{})})}},{key:"stopAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stopAnimations(Object.keys(this._queue),t)}},{key:"fade",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.animate(t,{opacity:0},e)}}]),t}(),Fr={"":"ripple--*",".ripple__wave":"ripple--*__wave",".ripple__background":"ripple--*__background"},qr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onTap=t._onTap.bind(t),t._onHold=t._onHold.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onRelease=t._onRelease.bind(t),n(t,function(){return t._compile()}),t._animator=new Rr,["color","center","start-radius","background","modifier"].forEach(function(e){t.attributeChangedCallback(e,null,t.getAttribute(e))}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("ripple"),this._wave=this.getElementsByClassName("ripple__wave")[0],this._background=this.getElementsByClassName("ripple__background")[0],this._background&&this._wave||(this._wave=Q.create(".ripple__wave"),this._background=Q.create(".ripple__background"),this.appendChild(this._wave),this.appendChild(this._background)),B.initModifier(this,Fr)}},{key:"_getEffectSize",value:function(){if(this.hasAttribute("size")){var t=this.getAttribute("size");if(-1!==["cover","contain"].indexOf(t))return t}return"cover"}},{key:"_calculateCoords",value:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=this.getBoundingClientRect(),s=this._getEffectSize(),l=function(){return Q.throw("Ripple invalid state")};return this._center?(e=a.width/2,n=a.height/2,"cover"===s?r=Math.sqrt(e*e+n*n):"contain"===s?r=Math.min(e,n):l()):(e=("number"==typeof t.clientX?t.clientX:t.changedTouches[0].clientX)-a.left,n=("number"==typeof t.clientY?t.clientY:t.changedTouches[0].clientY)-a.top,i=Math.max(n,a.height-n),o=Math.max(e,a.width-e),"cover"===s?r=Math.sqrt(i*i+o*o):"contain"===s?r=Math.min(Math.round(i/2),Math.round(o/2)):l()),{x:e,y:n,r:r}}},{key:"_rippleAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=this._animator,i=this._wave,o=this._background,r=this._minR,a=this._calculateCoords(t),s=a.x,l=a.y,u=a.r;return n.stopAll({stopNext:1}),n.animate(o,{opacity:1},e),Q.extend(i.style,{opacity:1,top:l-r+"px",left:s-r+"px",width:2*r+"px",height:2*r+"px"}),n.animate(i,{top:l-u,left:s-u,height:2*u,width:2*u},e)}},{key:"_updateParent",value:function(){if(!this._parentUpdated&&this.parentNode){"static"===window.getComputedStyle(this.parentNode).getPropertyValue("position")&&(this.parentNode.style.position="relative"),this._parentUpdated=!0}}},{key:"_onTap",value:function(t){var e=this;this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._rippleAnimation(t.gesture.srcEvent).then(function(){e._animator.fade(e._wave),e._animator.fade(e._background)}))}},{key:"_onHold",value:function(t){this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._holding=this._rippleAnimation(t.gesture.srcEvent,2e3),document.addEventListener("release",this._onRelease))}},{key:"_onRelease",value:function(t){var e=this;this._holding&&!t.ripple&&(t.ripple=!0,this._holding.speed(300).then(function(){e._animator.stopAll({stopNext:!0}),e._animator.fade(e._wave),e._animator.fade(e._background)}),this._holding=!1),document.removeEventListener("release",this._onRelease)}},{key:"_onDragStart",value:function(t){if(this._holding)return this._onRelease(t);-1!=["left","right"].indexOf(t.gesture.direction)&&this._onTap(t)}},{key:"connectedCallback",value:function(){this._parentNode=this.parentNode,P.config.animationsDisabled?this.disabled=!0:(this._parentNode.addEventListener("tap",this._onTap),this._parentNode.addEventListener("hold",this._onHold),this._parentNode.addEventListener("dragstart",this._onDragStart))}},{key:"disconnectedCallback",value:function(){var t=this._parentNode||this.parentNode;t.removeEventListener("tap",this._onTap),t.removeEventListener("hold",this._onHold),t.removeEventListener("dragstart",this._onDragStart)}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"ripple",Fr);break;case"modifier":B.onModifierChanged(e,i,this,Fr);break;case"start-radius":this._minR=Math.max(0,parseFloat(i)||0);break;case"color":i&&n(this,function(){o._wave.style.background=i,o.hasAttribute("background")||(o._background.style.background=i)});break;case"background":(i||e)&&("none"===i?n(this,function(){o._background.setAttribute("disabled","disabled"),o._background.style.background="transparent"}):n(this,function(){o._background.hasAttribute("disabled")&&o._background.removeAttribute("disabled"),o._background.style.background=i}));break;case"center":"center"===t&&(this._center=null!=i&&"false"!=i)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["start-radius","color","background","center","class","modifier"]}}]),e}();c.Ripple=qr,customElements.define("ons-ripple",qr);var zr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),e}();c.Row=zr,customElements.define("ons-row",zr);var Vr={"":"segment--*",".segment__item":"segment--*__item",".segment__input":"segment--*__input",".segment__button":"segment--*__button"},Wr=function(){var t=0;return function(){return"ons-segment-gen-"+t++}}(),Ur=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._segmentId=Wr(),t._tabbar=null,t._onChange=t._onChange.bind(t),t._onTabbarPreChange=t._onTabbarPreChange.bind(t),n(t,function(){t._compile(),setImmediate(function(){return t._lastActiveIndex=t._tabbar?t._tabbar.getActiveTabIndex():t.getActiveButtonIndex()})}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("segment");for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e.classList.add("segment__item");var n=Q.findChild(e,".segment__input")||Q.create("input.segment__input");n.type="radio",n.value=t,n.name=n.name||this._segmentId,n.checked=!this.hasAttribute("tabbar-id")&&t===(parseInt(this.getAttribute("active-index"))||0);var i=Q.findChild(e,".segment__button")||Q.create(".segment__button");if(i.parentElement!==e)for(;e.firstChild;)i.appendChild(e.firstChild);e.appendChild(n),e.appendChild(i)}B.initModifier(this,Vr)}},{key:"connectedCallback",value:function(){var t=this;this.hasAttribute("tabbar-id")&&n(this,function(){var e=Q.findParent(t,"ons-page");t._tabbar=e&&e.querySelector("#"+t.getAttribute("tabbar-id")),t._tabbar&&"ONS-TABBAR"===t._tabbar.tagName||Q.throw("No tabbar with id "+t.getAttribute("tabbar-id")+" was found."),t._tabbar.setAttribute("hide-tabs",""),setImmediate(function(){return t._setChecked(t._tabbar.getActiveTabIndex())}),t._tabbar.addEventListener("prechange",t._onTabbarPreChange)}),this.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._tabbar&&(t._tabbar.removeEventListener("prechange",t._onTabbarPreChange),t._tabbar=null)}),this.removeEventListener("change",this._onChange)}},{key:"_setChecked",value:function(t){this.children[t].firstElementChild.checked=!0}},{key:"setActiveButton",value:function(t,e){return this._tabbar?this._tabbar.setActiveTab(t,e):(this._setChecked(t),this._postChange(t),Promise.resolve(t))}},{key:"getActiveButtonIndex",value:function(){for(var t=this.children.length-1;t>=0;t--)if(this.children[t].firstElementChild.checked)return t;return-1}},{key:"_onChange",value:function(t){t.stopPropagation(),this._tabbar?this._tabbar.setActiveTab(this.getActiveButtonIndex(),{reject:!1}):this._postChange(this.getActiveButtonIndex())}},{key:"_onTabbarPreChange",value:function(t){var e=this;setImmediate(function(){t.detail.canceled||(e._setChecked(t.index),e._postChange(t.index))})}},{key:"_postChange",value:function(t){Q.triggerElementEvent(this,"postchange",{index:t,activeIndex:t,lastActiveIndex:this._lastActiveIndex,segmentItem:this.children[t]}),this._lastActiveIndex=t}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"segment",Vr);break;case"modifier":B.onModifierChanged(e,n,this,Vr)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["class","modifier"]}},{key:"events",get:function(){return["postchange"]}}]),e}();c.Segment=Ur,customElements.define("ons-segment",Ur);var Xr={"":"select-* select--*",".select-input":"select-input--*"},Yr=["autofocus","disabled","form","multiple","name","required","size"],Gr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t._deriveGetters(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"select",Xr);break;case"modifier":B.onModifierChanged(e,i,this,Xr)}Yr.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_updateBoundAttributes",value:function(){var t=this;Yr.forEach(function(e){t.hasAttribute(e)?t._select.setAttribute(e,t.getAttribute(e)):t._select.removeAttribute(e)})}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("select");var t=this._select||document.createElement("select");!t.id&&this.hasAttribute("select-id")&&(t.id=this.getAttribute("select-id")),t.classList.add("select-input"),this._select||(Q.arrayFrom(this.childNodes).forEach(function(e){return t.appendChild(e)}),this.appendChild(t)),B.initModifier(this,Xr)}},{key:"_deriveGetters",value:function(){var t=this;["disabled","length","multiple","name","options","selectedIndex","size","value","form","type"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._select[e]},set:-1===["form","type"].indexOf(e)?function(i){return n(t,function(){return t._select[e]=i})}:void 0})})}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._select.add(t,e)}},{key:"remove",value:function(t){this._select.remove(t)}},{key:"_select",get:function(){return this.querySelector("select")}}],[{key:"observedAttributes",get:function(){return["modifier","class"].concat(Yr)}}]),e}();c.Select=Gr,customElements.define("ons-select",Gr);var $r={"":"fab--* speed-dial__item--*"},Kr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"fab fab--mini speed-dial__item",$r);break;case"modifier":B.onModifierChanged(e,n,this,$r),Q.addModifier(this,"mini");break;case"ripple":this._updateRipple()}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_onClick",value:function(t){t.stopPropagation()}},{key:"_compile",value:function(){var t=this;N.prepare(this),"fab fab--mini speed-dial__item".split(/\s+/).forEach(function(e){return t.classList.add(e)}),Q.addModifier(this,"mini"),this._updateRipple(),B.initModifier(this,$r)}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","class"]}}]),e}();c.SpeedDialItem=Kr,customElements.define("ons-speed-dial-item",Kr);var Qr={"":"speed-dial--*"},Jr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._itemShown=!1,t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("speed-dial"),N.prepare(this),this._updateRipple(),B.initModifier(this,Qr),this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"),this._updatePosition()}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"speed-dial",Qr);break;case"modifier":B.onModifierChanged(e,i,this,Qr);break;case"ripple":n(this,function(){return o._updateRipple()});break;case"direction":n(this,function(){return o._updateDirection(i)});break;case"position":n(this,function(){return o._updatePosition()})}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_onClick",value:function(t){return this.onClick?(this.onClick.apply(this),Promise.resolve()):!this.disabled&&this.visible?this.toggleItems():void 0}},{key:"_show",value:function(){return this.inline?Promise.resolve():this.show()}},{key:"_hide",value:function(){var t=this;return new Promise(function(e){t.inline?e():setImmediate(function(){return t.hide().then(e)})})}},{key:"_updateRipple",value:function(){this._fab&&(this.hasAttribute("ripple")?this._fab.setAttribute("ripple",""):this._fab.removeAttribute("ripple"))}},{key:"_updateDirection",value:function(t){for(var e=this.items,n=0;n<e.length;n++)d(e[n],{transitionDelay:25*n+"ms",bottom:"auto",right:"auto",top:"auto",left:"auto"});switch(t){case"up":for(var i=0;i<e.length;i++)e[i].style.bottom=72+56*i+"px",e[i].style.right="8px";break;case"down":for(var o=0;o<e.length;o++)e[o].style.top=72+56*o+"px",e[o].style.left="8px";break;case"left":for(var r=0;r<e.length;r++)e[r].style.top="8px",e[r].style.right=72+56*r+"px";break;case"right":for(var a=0;a<e.length;a++)e[a].style.top="8px",e[a].style.left=72+56*a+"px";break;default:Q.throw("Argument must be one of up, down, left or right.")}}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"_getTranslate",value:function(){return(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px) ":""}},{key:"show",value:function(){return this._fab.show(),d(this,{transform:this._getTranslate}),Promise.resolve()}},{key:"hide",value:function(){var t=this;return this.hideItems().then(function(){return t._fab.hide()})}},{key:"showItems",value:function(){this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up");var t=0;if(!this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*n;t+=i,d(e[n],{transform:"scale(1)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!0,Q.triggerElementEvent(this,"open")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"hideItems",value:function(){var t=0;if(this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*(e.length-n);t+=i,d(e[n],{transform:"scale(0)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!1,Q.triggerElementEvent(this,"close")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"isOpen",value:function(){return this._itemShown}},{key:"toggle",value:function(){return this.visible?this.hide():this.show()}},{key:"toggleItems",value:function(){return this.isOpen()?this.hideItems():this.showItems()}},{key:"items",get:function(){return Q.arrayFrom(this.querySelectorAll("ons-speed-dial-item"))}},{key:"_fab",get:function(){return Q.findChild(this,"ons-fab")}},{key:"disabled",set:function(t){return t&&this.hideItems(),Q.arrayFrom(this.children).forEach(function(e){Q.match(e,".fab")&&Q.toggleAttribute(e,"disabled",t)}),Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"inline",get:function(){return this.hasAttribute("inline")}},{key:"visible",get:function(){return this._fab.visible&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["class","modifier","ripple","direction","position"]}},{key:"events",get:function(){return["open","close"]}}]),e}();c.SpeedDial=Jr,customElements.define("ons-speed-dial",Jr);var Zr={ready:function(t,e){setImmediate(e)}},ta=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._pageLoader=jt,n(t,function(){Zr.ready(t,function(){var e=t._getPageTarget();e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-splitter")||Q.throw('"ons-splitter-content" must have "ons-splitter" as parent')}},{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}}],[{key:"observedAttributes",get:function(){return[]}},{key:"rewritables",get:function(){return Zr}}]),e}();c.SplitterContent=ta,customElements.define("ons-splitter-content",ta);var ea=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnClick=t._onClick.bind(t),n(t,function(){t.parentNode._sides.every(function(t){return"split"===t.mode})&&t.setAttribute("style","display: none !important")}),t}return b(e,Pi),g(e,[{key:"_onClick",value:function(t){this.onClick instanceof Function?this.onClick():Q.match(this.parentNode,"ons-splitter")&&this.parentNode._sides.forEach(function(t){return t.close("left").catch(function(){})}),t.stopPropagation()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!0)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!1)}}],[{key:"observedAttributes",get:function(){return[]}}]),e}();c.SplitterMask=ea,customElements.define("ons-splitter-mask",ea);var na=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.duration,r=void 0===o?.3:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,duration:r,delay:s}))}return b(e,Ti),g(e,[{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q.extend(this,{timing:this.timing,duration:this.duration,delay:this.delay},t)}},{key:"activate",value:function(t){var e=this,i=t.parentNode;n(i,function(){e._side=t,e._oppositeSide=i.right!==t&&i.right||i.left!==t&&i.left,e._content=i.content,e._mask=i.mask})}},{key:"deactivate",value:function(){this.clearTransition(),this._mask&&this.clearMask(),this._content=this._side=this._oppositeSide=this._mask=null}},{key:"clearTransition",value:function(){var t=this;"side mask content".split(/\s+/).forEach(function(e){return t["_"+e]&&d.clear(t["_"+e],"transform transition")})}},{key:"clearMask",value:function(){this._oppositeSide&&"split"!==this._oppositeSide.mode&&this._oppositeSide.isOpen||(this._mask.style.opacity="",this._mask.style.display="none")}},{key:"translate",value:function(t){}},{key:"open",value:function(t){t()}},{key:"close",value:function(t){t()}},{key:"minus",get:function(){return"right"===this._side.side?"-":""}}]),e}(),ia=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"translate",value:function(t){this._mask.style.display="block",nt(this._side).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d("+this.minus+"100%, 0, 0)"},this.def).queue(function(e){e(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}).queue({opacity:"1"},{duration:this.duration,timing:"linear"}))}},{key:"close",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(e){t&&t(),e()}),nt(this._mask).wait(this.delay).queue({opacity:"0"},{duration:this.duration,timing:"linear"}).queue({display:"none"}))}}]),e}(),oa={default:ia,overlay:ia,push:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._side,this._content];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"translate",value:function(t){this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){var e=this,n=this._side.offsetWidth;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d("+(this.minus+n)+"px, 0, 0)"},this.def).queue(function(n){e._slidingElements=null,n(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}))}},{key:"close",value:function(t){var n=this;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(i){n._slidingElements=null,v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clearTransition",n).call(n),t&&t(),i()}),nt(this._mask).wait(this.delay).queue({display:"none"}))}}]),e}(),reveal:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._content,this._mask];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"activate",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",this).call(this,t),"collapse"===t.mode&&this._setStyles(t)}},{key:"deactivate",value:function(){this._side&&this._unsetStyles(this._side),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deactivate",this).call(this)}},{key:"_setStyles",value:function(t){d(t,{left:"right"===t.side?"auto":0,right:"right"===t.side?0:"auto",zIndex:0,backgroundColor:"black",transform:this._generateBehindPageStyle(0).container.transform,display:"none"});var e=t.parentElement;n(e,function(){return e.content&&d(e.content,{boxShadow:"0 0 12px 0 rgba(0, 0, 0, 0.2)"})})}},{key:"_unsetStyles",value:function(t){d.clear(t,"left right zIndex backgroundColor display"),t._content&&(t._content.style.opacity=""),this._oppositeSide&&"split"!==this._oppositeSide.mode||t.parentElement.content&&d.clear(t.parentElement.content,"boxShadow")}},{key:"_generateBehindPageStyle",value:function(t){var e=this.maxWidth,n=(t-e)/e*10;return{content:{opacity:1+(n=isNaN(n)?0:Math.max(Math.min(n,0),-10))/100},container:{transform:"translate3d("+(this.minus?-1:1)*n+"%, 0, 0)"}}}},{key:"translate",value:function(t){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var e=this._generateBehindPageStyle(Math.min(t,this.maxWidth));this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt.runAll(nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}),nt(this._side._content).queue(e.content),nt(this._side).queue(e.container))}},{key:"open",value:function(t){var e=this;this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var n=this._generateBehindPageStyle(this.maxWidth);this._slidingElements=this._getSlidingElements(),setTimeout(function(){nt.runAll(nt(e._slidingElements).wait(e.delay).queue({transform:"translate3d("+(e.minus+e.maxWidth)+"px, 0, 0)"},e.def),nt(e._mask).wait(e.delay).queue({display:"block"}),nt(e._side._content).wait(e.delay).queue(n.content,e.def),nt(e._side).wait(e.delay).queue(n.container,e.def).queue(function(n){e._slidingElements=null,n(),t&&t()}))},1e3/60)}},{key:"close",value:function(t){var e=this,n=this._generateBehindPageStyle(0);this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def),nt(this._mask).wait(this.delay).queue({display:"none"}),nt(this._side._content).wait(this.delay).queue(n.content,this.def),nt(this._side).wait(this.delay).queue(n.container,this.def).queue(function(n){e._slidingElements=null,e._side.style.zIndex=0,e._side.style.display="none",e._side._content.style.opacity="",t&&t(),n()}))}},{key:"_getMaxWidth",value:function(){return this._side.offsetWidth}}]),e}()},ra=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onModeChange=t._onModeChange.bind(t),n(t,function(){!t.mask&&t.appendChild(document.createElement("ons-splitter-mask")),t._layout()}),t}return b(e,Pi),g(e,[{key:"_getSide",value:function(t){return Q.findChild(this,function(e){return Q.match(e,"ons-splitter-side")&&e.getAttribute("side")===t})}},{key:"_onDeviceBackButton",value:function(t){this._sides.some(function(t){return!!t.isOpen&&t.close()})||t.callParentHandler()}},{key:"_onModeChange",value:function(t){var e=this;t.target.parentNode&&n(this,function(){e._layout()})}},{key:"_layout",value:function(){var t=this;this._sides.forEach(function(e){t.content&&(t.content.style[e.side]="split"===e.mode?e.style.width:0)})}},{key:"left",get:function(){return this._getSide("left")}},{key:"right",get:function(){return this._getSide("right")}},{key:"side",get:function(){return Q.findChild(this,"ons-splitter-side")}},{key:"_sides",get:function(){return[this.left,this.right].filter(function(t){return t})}},{key:"content",get:function(){return Q.findChild(this,"ons-splitter-content")}},{key:"topPage",get:function(){return this.content._content}},{key:"mask",get:function(){return Q.findChild(this,"ons-splitter-mask")}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}}]),g(e,[{key:"connectedCallback",value:function(){this.onDeviceBackButton=this._onDeviceBackButton.bind(this),this.addEventListener("modechange",this._onModeChange,!1)}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this.removeEventListener("modechange",this._onModeChange,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"_show",value:function(){Q.propagateAction(this,"_show")}},{key:"_hide",value:function(){Q.propagateAction(this,"_hide")}},{key:"_destroy",value:function(){Q.propagateAction(this,"_destroy"),this.remove()}}],[{key:"registerAnimator",value:function(t,e){e instanceof SplitterAnimator||Q.throwAnimator("Splitter"),oa[t]=e}},{key:"SplitterAnimator",get:function(){return SplitterAnimator}},{key:"animators",get:function(){return oa}}]),e}();c.Splitter=ra,customElements.define("ons-splitter",ra);var aa="closed",sa={ready:function(t,e){setImmediate(e)}},la=function(){function t(e,n){p(this,t),this._element=e,this._onChange=this._onChange.bind(this),n&&this.changeTarget(n)}return g(t,[{key:"changeTarget",value:function(t){this.disable(),this._target=t,t&&(this._orientation=-1!==["portrait","landscape"].indexOf(t),this.activate())}},{key:"_match",value:function(t){return this._orientation?this._target===(t.isPortrait?"portrait":"landscape"):t.matches}},{key:"_onChange",value:function(t){this._element._updateMode(this._match(t)?"collapse":"split")}},{key:"activate",value:function(){this._orientation?(Ot.on("change",this._onChange),this._onChange({isPortrait:Ot.isPortrait()})):(this._queryResult=window.matchMedia(this._target),this._queryResult.addListener(this._onChange),this._onChange(this._queryResult))}},{key:"disable",value:function(){this._orientation?Ot.off("change",this._onChange):this._queryResult&&(this._queryResult.removeListener(this._onChange),this._queryResult=null)}}]),t}(),ua=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._state=aa,t._lock=new Nt,t._pageLoader=jt,t._collapseDetection=new la(t),t._animatorFactory=new O({animators:ra.animators,baseClass:na,baseClassName:"SplitterAnimator",defaultAnimation:t.getAttribute("animation")}),n(t,function(){t.attributeChangedCallback("width"),t.hasAttribute("side")||t.setAttribute("side","left"),sa.ready(t,function(){var e=t._page||t.getAttribute("page");e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;Q.match(this.parentNode,"ons-splitter")||Q.throw("Parent must be an ons-splitter element"),this._swipe=new Qo({element:this,elementHandler:this.parentElement,swipeMax:function(){t._onSwipe&&t._onSwipe(1,t._animationOpt),t.open()},swipeMid:function(e,n){t._onSwipe&&t._onSwipe(e/n),t._animator.translate(e)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,t._animationOpt),t.close()},getThreshold:function(){return Math.max(0,Math.min(1,parseFloat(t.getAttribute("open-threshold"))||.3))},getSide:function(){return t.side},isInitialState:function(){var e=t._state===aa;return t._state="changing",e},ignoreSwipe:function(e,n){var i=t.isOpen,o=Math.max(0,parseInt(t.getAttribute("swipe-target-width"),10)||0);return"split"===t._mode||t._lock.isLocked()||t._isOtherSideOpen()||!function(e){return"left"===t.side?"left"===e&&i||"right"===e&&!i:"left"===e&&!i||"right"===e&&i}(e.gesture.direction)||!i&&0!==o&&n>o}}),this.attributeChangedCallback("swipeable"),n(this,function(){t.constructor.observedAttributes.forEach(function(e){return t.attributeChangedCallback(e,null,t.getAttribute(e))})})}},{key:"disconnectedCallback",value:function(){this._swipe&&this._swipe.dispose(),this._animator=this._animationOpt=this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"swipeable":this._swipe&&this._swipe.update();break;case"width":n=this.getAttribute("width"),this.style.width=/^\d+(px|%)$/.test(n)?n:"80%";break;default:this[Q.camelize("_update-"+t)](n)}}},{key:"_emitEvent",value:function(t){if("pre"!==t.slice(0,3))return Q.triggerElementEvent(this,t,{side:this});var e=!1;return Q.triggerElementEvent(this,t,{side:this,cancel:function(){return e=!0}}),e}},{key:"_isOtherSideOpen",value:function(){var t=this;return!!Q.findChild(this.parentElement,function(e){return e instanceof t.constructor&&e!==t&&"collapse"===e._mode&&e.isOpen})}},{key:"_updateCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("collapse");return null===t||"split"===t?(this._collapseDetection.disable(),this._updateMode("split")):""===t||"collapse"===t?(this._collapseDetection.disable(),this._updateMode("collapse")):void this._collapseDetection.changeTarget(t)}},{key:"_updateMode",value:function(t){t!==this._mode&&(this._mode=t,this.setAttribute("mode",t),"split"===t?(this._animator&&this._animator.deactivate(),this._state=aa):(this._animator&&this._animator.activate(this),"open"===this._state&&this._animator.open()),Q.triggerElementEvent(this,"modechange",{side:this,mode:t}))}},{key:"_updateAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation");this.parentNode&&(this._animator&&this._animator.deactivate(),this._animator=this._animatorFactory.newAnimator({animation:t}),this._animator.activate(this),this._animationOpt={timing:this._animator.duration,duration:this._animator.duration})}},{key:"_updateAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation-options");this._animator.updateOptions(O.parseAnimationOptionsString(t))}},{key:"open",value:function(t){return this.toggle(t,!0)}},{key:"close",value:function(t){return this.toggle(t,!1)}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i="boolean"==typeof n?n:!this.isOpen,o=i?"open":"close",r=i?"open":aa;if("split"===this._mode)return Promise.resolve(!1);if(this._state===r)return Promise.resolve(this);if(this._lock.isLocked())return Promise.reject("Another splitter-side action is already running.");if(i&&this._isOtherSideOpen())return Promise.reject("Another menu is already open.");if(this._emitEvent("pre"+o))return Promise.reject("Canceled in pre"+o+" event.");var a=this._lock.lock();return this._state="changing",new Promise(function(n){t._animator[o](function(){Q.iosPageScrollFix(i),t._state=r,a(),t._emitEvent("post"+o),e.callback instanceof Function&&e.callback(t),n(t)})})}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"side",get:function(){return"right"===this.getAttribute("side")?"right":"left"}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"mode",get:function(){return this._mode}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"isOpen",get:function(){return"collapse"===this._mode&&this._state!==aa}}],[{key:"observedAttributes",get:function(){return["animation","width","collapse","swipeable","animation-options"]}},{key:"events",get:function(){return["preopen","postopen","preclose","postclose","modechange"]}},{key:"rewritables",get:function(){return sa}}]),e}();c.SplitterSide=ua,customElements.define("ons-splitter-side",ua);var ca={"":"switch--*",".switch__input":"switch--*__input",".switch__handle":"switch--*__handle",".switch__toggle":"switch--*__toggle"},ha={ios:[1,21],material:[0,16]},da=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t.attributeChangedCallback("modifier",null,t.getAttribute("modifier"))}),t._onChange=t._onChange.bind(t),t._onRelease=t._onRelease.bind(t),t._lastTimeStamp=0,t}return b(e,Ho),g(e,[{key:"_getPosition",value:function(t){var e=this._locations;return Math.min(e[1],Math.max(e[0],this._startX+t.gesture.deltaX))}},{key:"_emitChangeEvent",value:function(){Q.triggerElementEvent(this,"change",{value:this.checked,switch:this,isInteractive:!0})}},{key:"_onChange",value:function(t){t&&t.stopPropagation&&t.stopPropagation(),this._emitChangeEvent()}},{key:"_onClick",value:function(t){(t.target.classList.contains(this.defaultElementClass+"__touch")||t.timeStamp-this._lastTimeStamp<50)&&t.preventDefault(),this._lastTimeStamp=t.timeStamp}},{key:"_onHold",value:function(t){this.disabled||(B.addModifier(this,"active"),document.addEventListener("release",this._onRelease))}},{key:"_onDragStart",value:function(t){this.disabled||-1===["left","right"].indexOf(t.gesture.direction)?B.removeModifier(this,"active"):(t.consumed=!0,B.addModifier(this,"active"),this._startX=this._locations[this.checked?1:0],this.addEventListener("drag",this._onDrag),document.addEventListener("release",this._onRelease))}},{key:"_onDrag",value:function(t){t.stopPropagation(),this._handle.style.left=this._getPosition(t)+"px"}},{key:"_onRelease",value:function(t){var e=this._locations,n=this._getPosition(t),i=this.checked;this.checked=n>=(e[0]+e[1])/2,this.checked!==i&&this._emitChangeEvent(),this.removeEventListener("drag",this._onDrag),document.removeEventListener("release",this._onRelease),this._handle.style.left="",B.removeModifier(this,"active")}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disabled||(this.checked=!this.checked,this._emitChangeEvent(),this._lastTimeStamp=t.timeStamp||0)}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("change",t._onChange)}),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("hold",this._onHold),this.addEventListener("tap",this.click),this.addEventListener("click",this._onClick),this._gestureDetector=new st(this,{dragMinDistance:1,holdTimeout:251,passive:!0})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("change",t._onChange)}),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("hold",this._onHold),this.removeEventListener("tap",this.click),this.removeEventListener("click",this._onClick),this._gestureDetector&&this._gestureDetector.dispose()}},{key:"attributeChangedCallback",value:function(t,n,i){if("modifier"===t){var o=-1!==(i||"").indexOf("material");this._locations=ha[o?"material":"ios"]}v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return ca}},{key:"_defaultClassName",get:function(){return"switch"}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <div class="'+this._defaultClassName+'__toggle">\n        <div class="'+this._defaultClassName+'__handle">\n          <div class="'+this._defaultClassName+'__touch"></div>\n        </div>\n      </div>\n    '}},{key:"type",get:function(){return"checkbox"}},{key:"_handle",get:function(){return this.querySelector("."+this._defaultClassName+"__handle")}},{key:"checkbox",get:function(){return this._input}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["modifier"])}}]),e}();c.Switch=da,customElements.define("ons-switch",da);var fa={".tabbar__content":"tabbar--*__content",".tabbar__border":"tabbar--*__border",".tabbar":"tabbar--*"},pa={ready:function(t,e){e()}},ga=function(t,e,n){return(1-n)*t+n*e},ma=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._loadInactive=Q.defer(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t._contentElement},getInitialIndex:function(){return t.getAttribute("activeIndex")||t.getAttribute("active-index")},getAutoScrollRatio:this._getAutoScrollRatio.bind(this),getBubbleWidth:function(){return parseInt(t.getAttribute("ignore-edge-width")||25,10)},isAutoScrollable:function(){return!0},preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:this._onScroll.bind(this)}),n(this,function(){t._tabbarBorder=Q.findChild(t._tabbarElement,".tabbar__border"),t._swiper.init({swipeable:t.hasAttribute("swipeable")})})),n(this,function(){t._updatePosition(),Q.findParent(t,"ons-page",function(t){return t===document.body})||t._show()})}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null,this._tabbarBorder=null,this._tabsRect=null)}},{key:"_normalizeEvent",value:function(t){return _({},t,{index:t.activeIndex,tabItem:this.tabs[t.activeIndex]})}},{key:"_onPostChange",value:function(t){t=this._normalizeEvent(t),Q.triggerElementEvent(this,"postchange",t);var e=t.tabItem.pageElement;e&&e._show()}},{key:"_onPreChange",value:function(t){if(t=this._normalizeEvent(t),t.cancel=function(){return t.canceled=!0},Q.triggerElementEvent(this,"prechange",t),!t.canceled){var e=t,n=e.activeIndex,i=e.lastActiveIndex,o=this.tabs;if(o[n].setActive(!0),i>=0){var r=o[i];r.setActive(!1),r.pageElement&&r.pageElement._hide()}}return t.canceled}},{key:"_onScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._tabbarBorder)if(this._tabbarBorder.style.transition="all "+(e.duration||0)+"s "+(e.timing||""),this._autogrow&&this._tabsRect.length>0){var n=Math.floor(t),i=Math.ceil(t),o=t%1;this._tabbarBorder.style.width=ga(this._tabsRect[n].width,this._tabsRect[i].width,o)+"px",this._tabbarBorder.style.transform="translate3d("+ga(this._tabsRect[n].left,this._tabsRect[i].left,o)+"px, 0, 0)"}else this._tabbarBorder.style.transform="translate3d("+100*t+"%, 0, 0)";this._onSwipe&&this._onSwipe(t,e)}},{key:"_onRefresh",value:function(){if(this._autogrow=Q.hasModifier(this,"autogrow"),this._tabsRect=this.tabs.map(function(t){return t.getBoundingClientRect()}),this._tabbarBorder){this._tabbarBorder.style.display=this.hasAttribute("tab-border")||Q.hasModifier(this,"material")?"block":"none";var t=this.getActiveTabIndex();this._tabsRect.length>0&&t>=0&&(this._tabbarBorder.style.width=this._tabsRect[t].width+"px")}}},{key:"_getAutoScrollRatio",value:function(t,e,n){var i=n/300*(t?-1:1);return Math.min(1,Math.max(0,.6+e*i))}},{key:"_compile",value:function(){N.prepare(this);var t=this._contentElement||Q.create(".tabbar__content");t.classList.add("ons-tabbar__content");var e=this._tabbarElement||Q.create(".tabbar");if(e.classList.add("ons-tabbar__footer"),!e.parentNode)for(;this.firstChild;)e.appendChild(this.firstChild);var n=Number(this.getAttribute("activeIndex"));e.children.length>n&&!Q.findChild(e,"[active]")&&e.children[n].setAttribute("active",""),this._tabbarBorder=Q.findChild(e,".tabbar__border")||Q.create(".tabbar__border"),e.appendChild(this._tabbarBorder),e.classList.add("ons-swiper-tabbar"),!t.children[0]&&t.appendChild(document.createElement("div")),!t.children[1]&&t.appendChild(document.createElement("div")),t.appendChild=t.appendChild.bind(t.children[0]),t.insertBefore=t.insertBefore.bind(t.children[0]),this.appendChild(t),this.appendChild(e),B.initModifier(this,fa)}},{key:"_updatePosition",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("position"),i=this._top="top"===e||"auto"===e&&Q.hasModifier(this,"material"),o=i?Q.addModifier:Q.removeModifier;o(this,"top");var r=Q.findParent(this,"ons-page");r&&n(r,function(){var e=0;r.children[0]&&Q.match(r.children[0],"ons-toolbar")&&(o(r.children[0],"noshadow"),e=1);var n=r._getContentElement(),a=window.getComputedStyle(r._getContentElement(),null);t.style.top=i?parseInt(a.getPropertyValue("padding-top"),10)-e+"px":"",n.style.top=a.top,n.style.top=""}),P.autoStatusBarFill(function(){var e=Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")});Q.toggleAttribute(t,"status-bar-fill",i&&!e)})}},{key:"setActiveTab",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getActiveTabIndex(),o=this.tabs[i],r=this.tabs[t];if(!r)return Promise.reject("Specified index does not match any tab.");if(t===i)return Q.triggerElementEvent(this,"reactive",{index:t,activeIndex:t,tabItem:r}),Promise.resolve(r.pageElement);var a=r.pageElement;return(a?Promise.resolve(a):r.loaded).then(function(i){return e._swiper.setActiveIndex(t,_({reject:!0},n,{animation:o&&i?n.animation||e.getAttribute("animation"):"none",animationOptions:Q.extend({duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},e.hasAttribute("animation-options")?Q.animationOptionsParse(e.getAttribute("animation-options")):{},n.animationOptions||{})})).then(function(){return n.callback instanceof Function&&n.callback(i),i})})}},{key:"setTabbarVisibility",value:function(t){var e=this;n(this,function(){e._contentElement.style[e._top?"top":"bottom"]=t?"":"0px",e._tabbarElement.style.display=t?"":"none",t&&e._onRefresh()})}},{key:"show",value:function(){this.setTabbarVisibility(!0)}},{key:"hide",value:function(){this.setTabbarVisibility(!1)}},{key:"getActiveTabIndex",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tabs,e=0;e<t.length;e++)if(t[e]&&"ONS-TAB"===t[e].tagName&&t[e].isActive())return e;return-1}},{key:"_show",value:function(){var t=this;this._swiper.show(),setImmediate(function(){var e=t.tabs,n=t.getActiveTabIndex(e);t._loadInactive.resolve(),e.length>0&&n>=0&&e[n].loaded.then(function(t){return t&&setImmediate(function(){return t._show()})})})}},{key:"_hide",value:function(){this._swiper.hide();var t=this.topPage;t&&t._hide()}},{key:"_destroy",value:function(){this.tabs.forEach(function(t){return t.remove()}),this.remove()}},{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t){B.onModifierChanged(e,n,this,fa);var i=function(t){return/(^|\s+)top($|\s+)/i.test(t)};i(e)!==i(n)&&this._updatePosition()}else"position"===t?Q.isAttached(this)&&this._updatePosition():"swipeable"===t?this._swiper&&this._swiper.updateSwipeable(this.hasAttribute("swipeable")):"hide-tabs"===t&&this.setTabbarVisibility(!this.hasAttribute("hide-tabs")||"false"===n)}},{key:"_tabbarElement",get:function(){return Q.findChild(this,".tabbar")}},{key:"_contentElement",get:function(){return Q.findChild(this,".tabbar__content")}},{key:"_targetElement",get:function(){var t=this._contentElement;return t&&t.children[0]||null}},{key:"topPage",get:function(){var t=this.tabs,e=this.getActiveTabIndex();return t[e]?t[e].pageElement||this.pages[0]||null:null}},{key:"pages",get:function(){return Q.arrayFrom(this._targetElement.children)}},{key:"tabs",get:function(){return Array.prototype.filter.call(this._tabbarElement.children,function(t){return"ONS-TAB"===t.tagName})}},{key:"visible",get:function(){return"none"!==this._tabbarElement.style.display}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}}],[{key:"observedAttributes",get:function(){return["modifier","position","swipeable","tab-border","hide-tabs"]}},{key:"rewritables",get:function(){return pa}},{key:"events",get:function(){return["prechange","postchange","reactive"]}}]),e}();c.Tabbar=ma,customElements.define("ons-tabbar",ma);var _a={"":"tabbar--*__item",".tabbar__button":"tabbar--*__button"},va=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return["label","icon","badge"].some(t.hasAttribute.bind(t))?t._compile():n(t,function(){return t._compile()}),t._pageLoader=jt,t._onClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("tabbar__item"),!this._button){for(var t=Q.create("button.tabbar__button");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.create("input",{display:"none"});e.type="radio",this.appendChild(e),this.appendChild(t),this._updateButtonContent(),B.initModifier(this,_a),this._updateRipple()}}},{key:"_updateRipple",value:function(){this._button&&Q.updateRipple(this._button,this.hasAttribute("ripple"))}},{key:"_updateButtonContent",value:function(){var t=this,e=this._button,n=this._icon;if(this.hasAttribute("icon")){var i=(n=n||Q.createElement('<div class="tabbar__icon"><ons-icon></ons-icon></div>')).children[0],o=function(e){return function(){return i.attributeChangedCallback("icon",e,t.getAttribute("icon"))}}(i.getAttribute("icon"));i.setAttribute("icon",this.getAttribute("icon")),n.parentElement!==e&&e.insertBefore(n,e.firstChild),i.attributeChangedCallback instanceof Function?o():setImmediate(function(){return i.attributeChangedCallback instanceof Function&&o()})}else n&&n.remove();["label","badge"].forEach(function(n,i){var o=t.querySelector(".tabbar__"+n);t.hasAttribute(n)?((o=o||Q.create(".tabbar__"+n+("badge"===n?" notification":""))).textContent=t.getAttribute(n),o.parentElement!==e&&e.appendChild(o)):o&&o.remove()})}},{key:"_onClick",value:function(){this.onClick instanceof Function?this.onClick():this._tabbar.setActiveTab(this.index,{reject:!1})}},{key:"setActive",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._input.checked=t,this.classList.toggle("active",t),Q.toggleAttribute(this,"active",t),this.hasAttribute("icon")&&this.hasAttribute("active-icon")&&this._icon.children[0].setAttribute("icon",this.getAttribute(t?"active-icon":"icon"))}},{key:"_loadPageElement",value:function(t,e){var n=this;return this._hasLoaded=!0,new Promise(function(i){n._pageLoader.load({parent:t,page:e},function(e){t.replaceChild(e,t.children[n.index]),n._loadedPage=e,i(e)})})}},{key:"isActive",value:function(){return this.classList.contains("active")}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._onClick,!1),this._loadedPage&&(this._pageLoader.unload(this._loadedPage),this._loadedPage=null,this._hasLoaded=!1,this.loaded=null)}},{key:"connectedCallback",value:function(){var t=this;if(this.addEventListener("click",this._onClick,!1),Q.isAttached(this)&&!this.loaded){var e=Q.defer();this.loaded=e.promise,n(this,function(){var n=t.index,i=t._tabbar;i||Q.throw("Tab elements must be children of Tabbar"),i.hasAttribute("modifier")&&Q.addModifier(t,i.getAttribute("modifier")),t._hasLoaded||(t.hasAttribute("active")&&(t.setActive(!0),i.setAttribute("activeIndex",n)),n===i.tabs.length-1&&(i._onRefresh(),setImmediate(function(){return i._onRefresh()})),ma.rewritables.ready(i,function(){var o=t.page||t.getAttribute("page");if(!t.pageElement&&o){var r=i._targetElement,a=Q.create("div",{height:"100%",width:"100%",visibility:"hidden"});r.insertBefore(a,r.children[n]);var s=function(){return t._loadPageElement(r,o).then(e.resolve)};return t.isActive()?s():i._loadInactive.promise.then(s)}return e.resolve(t.pageElement)}))})}}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"tabbar__item",_a);break;case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,_a)});break;case"ripple":n(this,function(){return o._updateRipple()});break;case"icon":case"label":case"badge":n(this,function(){return o._updateButtonContent()});break;case"page":this.page=i||""}}},{key:"pageLoader",set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t},get:function(){return this._pageLoader}},{key:"_input",get:function(){return Q.findChild(this,"input")}},{key:"_button",get:function(){return Q.findChild(this,".tabbar__button")}},{key:"_icon",get:function(){return this.querySelector(".tabbar__icon")}},{key:"_tabbar",get:function(){return Q.findParent(this,"ons-tabbar")}},{key:"index",get:function(){return Array.prototype.indexOf.call(this.parentElement.children,this)}},{key:"pageElement",get:function(){if(this._loadedPage)return this._loadedPage;var t=this._tabbar;return t.pages.length===t.tabs.length?t.pages[this.index]:null}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","icon","label","page","badge","class"]}}]),e}();c.Tab=va,customElements.define("ons-tab",va);var ba=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),ya=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,ba),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),ka=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.25:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.messageDelay=.4*l.duration+l.delay,C.isAndroid()?l.ascension=48:Li.isIPhoneXPortraitPatchActive()?l.ascension=98:Li.isIPhoneXLandscapePatchActive()?l.ascension=85:l.ascension=64,l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,Q.globals.fabOffset=this.ascension,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.ascension+"px, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs()).wait(this.delay).queue({transform:"translate3d(0, -"+this.ascension+"px, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:0},{opacity:1}))}},{key:"hide",value:function(t,e){t=t._toast,Q.globals.fabOffset=0,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.ascension+"px, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs(),this.def).wait(this.delay).queue({transform:"translate3d(0, 0, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:1},{opacity:0}))}},{key:"_getFabs",value:function(){return Q.arrayFrom(document.querySelectorAll("ons-fab[position~=bottom], ons-speed-dial[position~=bottom]")).filter(function(t){return t.visible})}}]),e}(),wa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 34px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 21px)":l.liftAmount="100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0}).queue(function(t){e&&e(),t()}))}},{key:"_updatePosition",value:function(t){0===parseInt(t.style.top,10)&&(t.style.top=t.style.bottom="")}}]),e}(),Ea=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return Li.isIPhoneXPortraitPatchActive()?l.fallAmount="calc(-100% - 44px)":l.fallAmount="-100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){var n=this;t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0}).queue(function(i){n._updatePosition(t,!0),e&&e(),i()}))}},{key:"_updatePosition",value:function(t,e){var n=void 0;n=Li.isIPhoneXPortraitPatchActive()?"44px":"0",t.style.top!==n&&(t.style.top=n,t.style.bottom="initial")}}]),e}(),Ca={".toast":"toast--*",".toast__message":"toast--*__message",".toast__button":"toast--*__button"},Aa={default:C.isAndroid()?ka:wa,fade:ya,ascend:ka,lift:wa,fall:Ea,none:ba},Sa=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(t){return t.callParentHandler()},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return this._toast&&(this._toast.style.top=this._toast.style.bottom=""),new O({animators:Aa,baseClass:ba,baseClassName:"ToastAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=1e4;var t=Q.findChild(this,".toast");if(!t)for((t=document.createElement("div")).classList.add("toast");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.findChild(t,".toast__button");if(e||(e=Q.findChild(t,function(t){return Q.match(t,".button")||Q.match(t,"button")}))&&(e.classList.remove("button"),e.classList.add("toast__button"),t.appendChild(e)),!Q.findChild(t,".toast__message")){var n=Q.findChild(t,".message");if(!n){n=document.createElement("div");for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]!==e&&n.insertBefore(t.childNodes[i],n.firstChild)}n.classList.add("toast__message"),t.insertBefore(n,t.firstChild)}t.parentNode!==this&&this.appendChild(t),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Ca}},{key:"_toast",get:function(){return Q.findChild(this,".toast")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof ba||Q.throw('"Animator" param must inherit OnsToastElement.ToastAnimator'),Aa[t]=e}},{key:"animators",get:function(){return Aa}},{key:"ToastAnimator",get:function(){return ba}}]),e}();c.Toast=Sa,customElements.define("ons-toast",Sa);var Pa=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"toolbar-button--*"}}},{key:"_defaultClassName",get:function(){return"toolbar-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{center:"",size:"contain",background:"transparent"}]}}]),e}();return c.ToolbarButton=Pa,customElements.define("ons-toolbar-button",Pa),function(t){window._onsLoaded&&t._util.warn("Onsen UI is loaded more than once."),window._onsLoaded=!0,window.addEventListener("load",function(){t.fastClick=zt.attach(document.body);var e="touch-action"in document.body.style;t.platform._runOnActualPlatform(function(){t.platform.isAndroid()?t.fastClick.destroy():t.platform.isIOS()&&e&&(t.platform.isIOSSafari()||t.platform.isWKWebView())&&t.fastClick.destroy()})},!1),t.ready(function(){t.enableDeviceBackButtonHandler(),t._defaultDeviceBackButtonHandler=t._internal.dbbDispatcher.createHandler(window.document.body,function(){Object.hasOwnProperty.call(navigator,"app")?navigator.app.exitApp():console.warn("Could not close the app. Is 'cordova.js' included?\nError: 'window.navigator.app' is undefined.")}),document.body._gestureDetector=new t.GestureDetector(document.body,{passive:!0}),t.platform.isWebView()||document.body.addEventListener("keydown",function(e){27===e.keyCode&&t.fireDeviceBackButtonEvent()}),t._setupLoadingPlaceHolders()}),Viewport.setup()}(Rt),window._superSecretOns=Rt,Rt});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.timeago=e()}(this,function(){"use strict";var t="second_minute_hour_day_week_month_year".split("_"),e="______".split("_"),n=[60,60,24,7,365/7/12,12],r={en:function(e,n){if(0===n)return["just now","right now"];var r=t[parseInt(n/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]},zh_CN:function(t,n){if(0===n)return["",""];var r=e[parseInt(n/2)];return[t+" "+r+"",t+" "+r+""]}},a=function(t){return parseInt(t)},i=function(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(a(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t))},o=function(t,e,i){e=r[e]?e:r[i]?i:"en";for(var o=0,u=t<0?1:0,c=t=Math.abs(t);t>=n[o]&&o<n.length;o++)t/=n[o];return(t=a(t))>(0===(o*=2)?9:1)&&(o+=1),r[e](t,o,c)[u].replace("%s",t)},u=function(t,e){return((e=e?i(e):new Date)-i(t))/1e3},c=function(t,e){return t.getAttribute?t.getAttribute(e):t.attr?t.attr(e):void 0},f=function(t){return c(t,"data-timeago")||c(t,"datetime")},d=[],l=function(t){t&&(clearTimeout(t),delete d[t])},s=function(t){if(t)l(c(t,"data-tid"));else for(var e in d)l(e)},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nowDate=e,this.defaultLocale=n||"en"}return h(t,[{key:"setLocale",value:function(t){this.defaultLocale=t}},{key:"doRender",value:function(t,e,r){var a=this,i=u(e,this.nowDate);t.innerHTML=o(i,r,this.defaultLocale);var c=function(t,e){var n=setTimeout(function(){l(n),t()},e);return d[n]=0,n}(function(){a.doRender(t,e,r)},Math.min(1e3*function(t){for(var e=1,r=0,a=Math.abs(t);t>=n[r]&&r<n.length;r++)t/=n[r],e*=n[r];return a=(a%=e)?e-a:e,Math.ceil(a)}(i),2147483647));!function(t,e){t.setAttribute?t.setAttribute("data-tid",e):t.attr&&t.attr("data-tid",e)}(t,c)}},{key:"render",value:function(t,e){void 0===t.length&&(t=[t]);for(var n=void 0,r=0,a=t.length;r<a;r++)n=t[r],s(n),this.doRender(n,f(n),e)}},{key:"format",value:function(t,e){return o(u(t,this.nowDate),e,this.defaultLocale)}}]),t}(),v=function(t,e){return new p(t,e)};return v.register=function(t,e){r[t]=e},v.cancel=s,v});

var instance = timeago();
timeago = instance.format.bind(instance);

function debounce(func, wait, immediate) {
	var timeout;
	return function () {
		var context = this, args = arguments;
		var later = function () {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

function excerpt(str, maxlen) {
	if (str.length > maxlen) return str.slice(0, maxlen).trimRight() + '...';
	else return str;
}

function setDefaultFeeds() {
	if (!localStorage.getItem('feeds')) {
		var feedsToAdd = {};
		var recommendedFeeds = _app_feedrecommandations[_app_userLang];

		for (var i = 0; i < recommendedFeeds.length; i++) {
			if (recommendedFeeds[i].default) feedsToAdd[recommendedFeeds[i].url] = recommendedFeeds[i];
		}

		localStorage.setItem('feeds', JSON.stringify(feedsToAdd));
	}
}

function escapeRegExp(string) {
	return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
}

var feedsRefetchValidityCounter = 0; // MIN_SAFE_INTEGER
function feedsRefetch() {
	var validityInteger = ++feedsRefetchValidityCounter;
	feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
	var feedsArr = [];
	for (var url in feeds) feedsArr.push(feeds[url]);
	var i = feedsArr.length;
	var result = [];
	var err = [];

	if (i === 0) return done(null, result);
	parseFeedContent(feedsArr, function (feed) {
		result.push(feed)
		if (--i === 0) done(null, result);
		var event = new CustomEvent("feedsrefetchprogress", {detail: { progress: 100 - i * 100 / feedsArr.length }});
		document.dispatchEvent(event);
	}, function (error, feed) {
		err.push((feed.title ? feed.title + ': ' : '') + error.error || 'Unknown error');
		if (--i === 0) done(null, result);
		var event = new CustomEvent("feedsrefetchprogress", {detail: { progress: 100 - i * 100 / feedsArr.length }});
		document.dispatchEvent(event);
	});
	function done(_err, result) {
		if (err.length) {
			var msg = '';
			for (var i = 0; i < err.length; i++) msg += err[i] + '<br>';
			// ons.notification.toast(msg, { timeout: 5000 });
			console.warn(msg);
		}
		if (validityInteger !== feedsRefetchValidityCounter) 
			// return console.warn('a new refresh was already started'); //a new refresh was already started
		for (var i = 0; i < result.length; i++) {
			var feed = result[i];
			var url = feed.url;
			feeds[url] = feed;
		}
		localStorage.setItem('feeds', JSON.stringify(feeds));

		var event = document.createEvent('Event');
		event.initEvent('feedsrefetch', true, true);
		document.dispatchEvent(event);
	}
}




var _app_maxListItems = 200;

var _app_maxLazyListItems = 700;



var _app_userLang = (navigator.language || navigator.userLanguage).slice(0, 2);
if (_app_userLang !== 'nl' && _app_userLang !== 'en') _app_userLang = 'en';
_app_userLang = 'en';

var _app_localization = {
    noConnection: {
        nl: 'Je bent niet verbonden met de server. Je kunt de app nog steeds gebruiken maar de feeds zijn mogelijk verouderd.',
        en: 'You are not connected to the server. You can still use the app but the feeds may be outdated.'
    },
};

var _app_feedrecommandations = {
    nl: [
        {
            title: 'P2000 Politie',
            url: 'https://alarmeringen.nl/feeds/discipline/politie.rss',
            site: 'https://alarmeringen.nl/webfeeds.html',
            type: 'rss',
            items: [],
        },
        {
            title: 'P2000 Brandweer',
            url: 'https://alarmeringen.nl/feeds/discipline/brandweer.rss',
            site: 'https://alarmeringen.nl/webfeeds.html',
            type: 'rss',
            items: [],
        },
        {
            title: 'P2000 Ambulance',
            url: 'https://alarmeringen.nl/feeds/discipline/ambulance.rss',
            site: 'https://alarmeringen.nl/webfeeds.html',
            type: 'rss',
            items: [],
        },
        {
            title: 'P2000 Traumaheli',
            url: 'https://alarmeringen.nl/feeds/discipline/trauma.rss',
            site: 'https://alarmeringen.nl/webfeeds.html',
            type: 'rss',
            items: [],
        },
        {
            title: 'Developer on Reddit',
            url: 'https://www.reddit.com/user/Afirus/.rss',
            site: 'https://www.reddit.com/user/Afirus',
            type: 'atom',
            items: [],
        },
        {
            title: 'nu.nl',
            url: 'https://www.nu.nl/rss',
            site: 'https://www.nu.nl',
            type: 'rss',
            items: [],
        },
        {
            title: 'NOS',
            url: 'http://feeds.feedburner.com/nos/zBPL?format=xml',
            site: 'https://nos.nl/',
            type: 'rss',
            default: true,
            items: [],
        },
        {
            title: 'weer.nl',
            url: 'http://www.weer.nl/rss.xml',
            site: 'http://www.weer.nl/',
            type: 'rss',
            default: true,
            items: [],
        },
        {
            title: 'AD',
            url: 'https://www.ad.nl/home/rss.xml',
            site: 'https://www.ad.nl',
            type: 'rss',
            items: [],
        },
        {
            title: 'NRC',
            url: 'https://www.nrc.nl/rss/',
            site: 'https://www.ad.nl',
            type: 'rss',
            items: [],
        },
        {
            title: 'Volkskrant',
            url: 'https://www.volkskrant.nl/voorpagina/rss.xml',
            site: 'https://www.volkskrant.nl',
            type: 'rss',
            items: [],
        },
        {
            title: 'Tweakers',
            url: 'http://feeds.feedburner.com/tweakers/mixed',
            site: 'https://tweakers.net/',
            type: 'rss',
            items: [],
        },
        {
            title: 'Developer Blog',
            url: 'https://esstudio.site/feed',
            site: 'https://esstudio.site',
            type: 'atom',
            items: [],
        }
    ],
    en: [
        {
            title: 'CNN',
            url: 'http://rss.cnn.com/rss/edition.rss',
            site: 'https://edition.cnn.com/',
            type: 'rss',
            items: [],
            default: true,
        },
        {
            title: 'BBC',
            url: 'http://feeds.bbci.co.uk/news/rss.xml?edition=int#',
            site: 'http://www.bbc.com/',
            type: 'rss',
            items: [],
            default: true,
        },
        {
            title: 'JRE',
            url: 'http://podcasts.joerogan.net/feed',
            site: 'http://podcasts.joerogan.net/',
            type: 'rss',
            items: [],
        },
        {
            title: 'Developer on Reddit',
            url: 'https://www.reddit.com/user/Afirus/.rss',
            site: 'https://www.reddit.com/user/Afirus',
            type: 'atom',
            items: [],
        },
        {
            title: 'Developer Blog',
            url: 'https://esstudio.site/feed',
            site: 'https://esstudio.site',
            type: 'atom',
            items: [],
        }
    ]
}

var _app_recommandedfeedsources = {
    nl: [
        {
            title: 'Alarmeringen (P2000)',
            url: 'https://alarmeringen.nl/webfeeds.html'
        },
        {
            title: 'Reddit Feeds Uitgelegd',
            url: 'https://www.reddit.com/wiki/rss',
        }
    ],
    en: [
        {
            title: 'All CNN RSS Feeds',
            url: 'http://edition.cnn.com/services/rss/',
        },
        {
            title: 'Reddit Feeds Explained',
            url: 'https://www.reddit.com/wiki/rss',
        }
    ]
}

for (var key in _app_feedrecommandations) {
    var recommandedFeeds = _app_feedrecommandations[key];
    for(var i = 0; i < recommandedFeeds.length; i++) {
        recommandedFeeds[i].url = removeTrailingSlash(recommandedFeeds[i].url);
        recommandedFeeds[i].site = removeTrailingSlash(recommandedFeeds[i].site);
    }
}

function removeTrailingSlash(url) {
    return url.replace(/\/+$/, '');
}



var proxy = 'https://cors-anywhere.herokuapp.com/';

var getContent = function (item, child) {
    var elem = item.getElementsByTagName(child)[0];
    return (elem && elem.textContent || '').trim();
}

var getContentAttr = function (item, child, attr) {
    var elem = item.getElementsByTagName(child)[0];
    return (elem && elem.getAttribute(attr) || '').trim();
}

function parseRssFeed(url, xml, text) {
    var items = Array.prototype.slice.call(xml.getElementsByTagName('item'), 0);

    for (var i = 0; i < items.length; i++) {
        var title = getContent(items[i], 'title');
        var link = getContent(items[i], 'link');
        var description = getContent(items[i], 'description');
        var author = getContent(items[i], 'author');
        var category = getContent(items[i], 'category');
        var comments = getContent(items[i], 'comments');
        var date = getContent(items[i], 'pubDate');
        items[i] = {
            title: title,
            link: link,
            description: description,
            author: author,
            content: '',
            category: category,
            comments: comments,
            date: date,
            xml_len: description.length,
        };
    }

    var site = getContent(xml, 'link');
    if (!isBaseUrl(site)) site = normalizeUrl(url, site);

    var urlSplit = site.split('/');
    var icon = urlSplit[0].replace('http:', 'https:') + '//' + urlSplit[2] + '/favicon.ico';

    return {
        type: 'rss',
        url: url,
        date: getContent(xml, 'lastBuildDate'),
        site: site,
        title: getContent(xml, 'title'),
        description: getContent(xml, 'description'),
        items: items,
        icon: icon,
        xml_len: text.length
    }
}

function parseAtomFeed(url, xml, text) {
    var items = Array.prototype.slice.call(xml.getElementsByTagName('entry'), 0);

    for (var i = 0; i < items.length; i++) {
        var title = getContent(items[i], 'title');
        var link = getContent(items[i], 'link') || getContentAttr(items[i], 'link', 'href');
        var description = getContent(items[i], 'summary') || excerpt(getContent(items[i], 'content'), 150);
        var content = getContent(items[i], 'content');
        var author = getContent(items[i], 'author');
        var category = getContent(items[i], 'category') || getContentAttr(items[i], 'category', 'term');
        var comments = getContent(items[i], 'comments');
        var date = getContent(items[i], 'published') || getContent(items[i], 'updated');
        items[i] = {
            title: title,
            link: link,
            description: description,
            author: author,
            content: content,
            contentBase: getContentAttr(items[i], 'content', 'xml:base'),
            category: category,
            comments: comments,
            date: date,
            xml_len: description.length,
        };
    }

    var site = getContent(xml, 'link') || getContentAttr(xml, 'link') || normalizeUrl(url, '/');
    if (!isBaseUrl(site)) site = normalizeUrl(url, site);

    var urlSplit = site.split('/');
    var icon = urlSplit[0].replace('http:', 'https:') + '//' + urlSplit[2] + '/favicon.ico';

    return {
        type: 'atom',
        url: url,
        date: getContent(xml, 'updated'),
        site: site,
        title: getContent(xml, 'title'),
        description: getContent(xml, 'subtitle'),
        items: items,
        icon: icon,
        xml_len: text.length
    }
}

function getFeedsContent(cb) {
    var feedsSet = JSON.parse(localStorage.getItem('feeds') || '{}');
    var feeds = [];
    for (var url in feedsSet) feeds.push(feedsSet[url]);
    var i = feeds.length;
    var result = [];

    if (i === 0) return cb(null, result);
    parseFeedContent(feeds, function (feed) {
        result.push(feed)
        if (--i === 0) cb(null, result)
    }, function (error, feed) {
        if (--i === 0) cb(null, result);
    });
}

function parseFeedContent(feeds, onFeed, onError) {
    var parsers = {
        atom: parseAtomFeed,
        rss: parseRssFeed,
        items: [],
    };

    for (var i = 0; i < feeds.length; i++) {
        (function (feed) {
            var parser = parsers[feed.type];
            fetchFeed(feed.url, function (error, xml, text) {
                if (error) return onError(error, feed);
                var item = parser(feed.url, xml, text);
                onFeed(item);
            });
        })(feeds[i]);
    }
}

function fetchFeed(url, cb) {
    var xhr = new XMLHttpRequest();
    xhr.timeout = 15 * 1000; // 15 seconds
    xhr.onreadystatechange = function () {
        if (this.readyState === 4) {
            if (this.status === 200) {
                if (this.responseXML) cb(null, this.responseXML, this.responseText);
                else cb({
                    type: 'network',
                    error: 'Feed is not returning valid XML'
                });
            } else cb({
                type: 'network',
                error: this.responseText,
            });
        }
    };
    xhr.open("GET", proxy + url, true);
    xhr.setRequestHeader("Accept", "application/rss+xml");
    xhr.send();
}

function findFeed(url, cb) {
    
    if (url.indexOf('http://') !== 0 && url.indexOf('https://') !== 0) {
        url = 'http://' + url;
    }

    var xhttp = new XMLHttpRequest();
    xhttp.timeout = 15 * 1000; // 15 seconds
    xhttp.onreadystatechange = function () {
        if (this.readyState === 4) {
            if (this.status === 200) {

                // check atom
                var atomMatch1 = this.responseText.match(/<link.*?type=['"]application\/atom\+xml['"].*?>/mi);
                if (atomMatch1) {
                    var atomFeedUrl = atomMatch1[0].match(/href=[^<](.*?)['"]/);
                    if (atomFeedUrl) {
                        return cb(null, {
                            type: 'atom',
                            url: normalizeUrl(url, atomFeedUrl[1])
                        });
                    }
                }
                var rssMatch1 = this.responseText.match(/<link[^<]*?type=['"]application\/rss\+xml['"].*?>/mi);
                if (rssMatch1) {
                    var rssFeedUrl = rssMatch1[0].match(/href=['"](.*?)['"]/);
                    if (rssFeedUrl) {
                        return cb(null, {
                            type: 'rss',
                            url: normalizeUrl(url, rssFeedUrl[1])
                        });
                    }
                }

                if (this.responseXML) {
                    if (this.responseXML.documentElement.tagName === 'rss') {
                        return cb(null, { type: 'rss', url: url })
                    }
                    if (this.responseXML.documentElement.tagName === 'feed') {
                        return cb(null, { type: 'atom', url: url })
                    }
                }
                var urlSplit = url.split('/');
                var baseUrl = urlSplit[0] + '//' + urlSplit[2];
                tryToGuessRssUrls(url, function () {
                    if (baseUrl !== url) {
                        // try the base url
                        tryToGuessRssUrls(baseUrl, function () {
                            cb({
                                type: 'notfound',
                                error: 'Unable to find feed on the page'
                            });
                        });
                    } else {
                        cb({
                            type: 'notfound',
                            error: 'Unable to find feed on the page'
                        });
                    }
                });
            } else {
                var urlSplit = url.split('/');
                var baseUrl = urlSplit[0] + '//' + urlSplit[2];
                tryToGuessRssUrls(url, function () {
                    if (baseUrl !== url) {
                        // try the base url
                        tryToGuessRssUrls(baseUrl, function () {
                            cb({
                                type: 'network',
                                error: this.responseText
                            });
                        });
                    } else {
                        cb({
                            type: 'network',
                            error: this.responseText
                        });
                    }
                });
            }
        }
    };
    xhttp.open("GET", proxy + url, true);
    xhttp.send();

    function tryToGuessRssUrls(url, errCb) {
        var guessCounter = 0;
        testForValidFeed(url + '/rss.xml');
        testForValidFeed(url + '/feed');
        testForValidFeed(url + '/.rss');
        testForValidFeed(url + '/rss');

        function testForValidFeed(guessUrl) {
            fetchFeed(guessUrl, function (err, xml, text) {
                if (guessCounter === -1) return;
                guessCounter++;
                if (!err) {
                    if (xml) {
                        if (xml.documentElement.tagName === 'rss') {
                            guessCounter = -1;
                            return cb(null, { type: 'rss', url: guessUrl });
                        }
                        if (xml.documentElement.tagName === 'feed') {
                            guessCounter = -1;
                            return cb(null, { type: 'atom', url: guessUrl });
                        }
                    }
                }
                if (guessCounter >= 4) {
                    guessCounter = -1;
                    errCb();
                }
            });
        }
    }
}

function normalizeUrl(baseUrl, foreignUrl) {
    if (foreignUrl.indexOf('http://') === 0 || foreignUrl.indexOf('https://') === 0) {
        // absolute
        return foreignUrl;
    } else if (foreignUrl[0] === '/') {
        var urlSplit = baseUrl.split('/');
        return urlSplit[0] + '//' + urlSplit[2] + foreignUrl;
    } else {
        // relative
        return concatAndResolveUrl(baseUrl, foreignUrl);
    }
}

function concatAndResolveUrl(url, concat) {
    var url1 = url.split('/');
    var url2 = concat.split('/');
    var url3 = [];
    if (concat.trim() === '/') return url1[0] + '//' + url1[2];
    for (var i = 0, l = url1.length; i < l; i++) {
        if (url1[i] === '..') {
            url3.pop();
        } else if (url1[i] === '.' || url1[i] === '') {
            continue;
        } else {
            url3.push(url1[i]);
        }
    }
    for (var i = 0, l = url2.length; i < l; i++) {
        if (url2[i] === '..') {
            url3.pop();
        } else if (url2[i] === '.' || url2[i] === '') {
            continue;
        } else {
            url3.push(url2[i]);
        }
    }
    return url3.join('/');
}

function isBaseUrl(url) {
    return url.indexOf('http://') === 0 || url.indexOf('https://') === 0;
}





function recommendedFeedsPageInit(page) {

    var recommandedFeeds = _app_feedrecommandations[_app_userLang];
    var recommandedSites = _app_recommandedfeedsources[_app_userLang];

    var recommendedFeedsItems = document.getElementById('recommended-feeds-items');
    var recommendedSitesItems = document.getElementById('recommended-sites-items');

    var persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');

    page.addEventListener('hide', feedsRefetch);

    for (var i = 0; i < recommandedFeeds.length; i++) {
        (function (feed) {
            var siteUrlParts = feed.site.split('/');
            var icon = siteUrlParts[0].replace('http:', 'https:') + '//' + siteUrlParts[2] + '/favicon.ico';
            var checked = !!persistFeeds[feed.url];

            var div = document.createElement('div');

            div.innerHTML = '<ons-list-item>\
            <div class="left">\
            <img onerror="this.src=\'images/iconnotfound.png\'" src="' + icon + '" class="list-item__thumbnail">\
            </div>\
            <div class="center">\
            <span class="list-item__title">' + feed.title + '</span>\
            <span class="list-item__subtitle">' + feed.site + '<span>\
            </div>\
            <div class="right"><ons-switch ' + (checked ? 'checked' : '') + ' class="recommended-feed-switch"></ons-switch></div>\
            </ons-list-item>';

            var elem = div.firstChild;
            var onsSwitch = elem.getElementsByClassName('recommended-feed-switch')[0];
            onsSwitch.addEventListener('change', function (e) {
                persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');
                if (e.target.checked && !persistFeeds[feed.url]) {
                    persistFeeds[feed.url] = feed;
                } else if (!e.target.checked && persistFeeds[feed.url]) {
                    delete persistFeeds[feed.url];
                }
                localStorage.setItem('feeds', JSON.stringify(persistFeeds));
            });
            recommendedFeedsItems.appendChild(elem);
        })(recommandedFeeds[i]);
    }

    for (var i = 0; i < recommandedSites.length; i++) {
        (function (site) {
            var siteUrlParts = site.url.split('/');
            var icon = siteUrlParts[0].replace('http:', 'https:') + '//' + siteUrlParts[2] + '/favicon.ico';

            var div = document.createElement('div');

            div.innerHTML = '<ons-list-item tappable \
            onclick="window.open(\'' + site.url + '\', \'_system\')" modifier="chevron">\
            <div class="left">\
            <img onerror="this.src=\'images/iconnotfound.png\'" src="' + icon + '" class="list-item__thumbnail">\
            </div>\
            <div class="center">' + site.title + '</div>\
            </ons-list-item>';

            var elem = div.firstChild;
            recommendedSitesItems.appendChild(elem);
        })(recommandedSites[i]);
    }

}



function addFeedPageInit(page) {
    var url = page.data.url;
    var addFeedPageContent = document.getElementById('add-feed-page-content');
    var addFeedPageTitle = document.getElementById('add-feed-page-title');
    var addFeedPageDescription = document.getElementById('add-feed-page-description');
    var addFeedPageSite = document.getElementById('add-feed-page-site');
    var addFeedPageIcon = document.getElementById('add-feed-page-icon');
    var addFeedProgress = document.getElementById('add-feed-page-progress');
    var addFeedPageItems = document.getElementById('add-feed-page-items');
    var addFeedPageLoader = document.getElementById('add-feed-page-progress-circular');
    var subscribeFeed1 = document.getElementById('add-feed-page-subscribe-btn');
    var subscribeFeed2 = document.getElementById('add-feed-page-subscribe-btn2');
    var addFeedPageNotfoundContent = document.getElementById('add-feed-page-notfound-content');
    var addFeedPageUrlNotFoundUrl = document.getElementById('add-feed-page-url-not-found-url');
    var addFeedPageUrlNotFoundRss = document.getElementById('add-feed-page-url-not-found-rss');
    var addFeedPageUrlNotFoundFindFeed = document.getElementById('add-feed-page-url-not-found-find-feed');
    var addFeedPageUrlNotFoundImg = document.getElementById('add-feed-page-notfound-content-img');
    var addFeedPageInitialContent = document.getElementById('add-feed-page-initial-content');
    var addFeedPageUrlRss = document.getElementById('add-feed-page-url-rss');
    var addFeedPageUrlFindFeed = document.getElementById('add-feed-page-url-find-feed');
    var addFeedPageUrlFindFeedForm = document.getElementById('add-feed-page-url-find-feed-form');
    var addFeedPageUrlNotFoundFindFeedForm = document.getElementById('add-feed-page-url-not-found-find-feed-form');

    var pop = fn.navigator.popPage.bind(fn.navigator, {});

    if (url) addFeedPageInitSearchUrl();
    else addFeedPageInitSearchInitial();

    function stopFeedPageLoading() {
        addFeedProgress.setAttribute('value', '100');
        addFeedPageLoader.setAttribute('style', 'display: none');
    }

    function addFeedPageInitSearchInitial() {
        stopFeedPageLoading();

        addFeedPageInitialContent.style.display = 'block';
        addFeedPageUrlFindFeedForm.addEventListener('submit', function (e) {
            e.preventDefault();
            var searchUrl = addFeedPageUrlRss.value;
            fn.navigator.popPage({ animation: 'none' })
                .then(function () {
                    fn.navigator.pushPage('views/add-feed.html', {
                        data: {
                            url: searchUrl,
                        }
                    });
                });
        });
    }

    function addFeedPageInitSearchUrl() {
        findFeed(url, function (err, feed) {
            if (err) {
                if (err.type === 'network') ons.notification.alert('Could not get your news source :(, network error')
                    .then(pop);
                else if (err.type === 'notfound') {
                    stopFeedPageLoading();
                    addFeedPageInitialContent.setAttribute('style', 'display: none');
                    addFeedPageNotfoundContent.setAttribute('style', '');
                    addFeedPageUrlNotFoundUrl.innerText = url;

                    addFeedPageUrlNotFoundFindFeedForm.addEventListener('submit', function (e) {
                        e.preventDefault();
                        var url = addFeedPageUrlNotFoundRss.value;
                        fn.navigator.popPage({ animation: 'none' })
                            .then(function () {
                                fn.navigator.pushPage('views/add-feed.html', {
                                    data: {
                                        url: url,
                                    }
                                });
                            });
                    });
                }
                else {
                    // console.error('Unknown error', err);
                    ons.notification.alert('Unknown error')
                        .then(pop);
                }
                return;
            }
            addFeedProgress.setAttribute('value', 66);
            parseFeedContent([feed], function (parsedFeed) {
                addFeedPageContent.setAttribute('style', '');
                stopFeedPageLoading();
                addFeedPageTitle.innerText = parsedFeed.title;
                addFeedPageDescription.innerText = parsedFeed.description;
                addFeedPageSite.innerText = parsedFeed.site;

                var urlSplit = parsedFeed.site.split('/');
                addFeedPageIcon.src = urlSplit[0].replace('http:', 'https:') + '//' + urlSplit[2] + '/favicon.ico';

                for (var i = 0; i < parsedFeed.items.length; i++) {
                    (function (item) {
                        var div = document.createElement('div');
                        var html = '<ons-list-item tappable modifier="chevron">\
                            <div class="left">\
                            <img onerror="this.src=\'images/iconnotfound.png\'" src="' + urlSplit[0].replace('http:', 'https:') + '//' + urlSplit[2] + '/favicon.ico' + '" class="list-item__thumbnail">\
                            </div>\
                            <div class="center">\
                            <span class="list-item__title">' + item.title + '</span>\
                            <span class="list-item__subtitle">' + item.description + '<br><small>' + timeago(item.date) + '</small></span>\
                            </div>\
                            </ons-list-item>';
                        div.innerHTML = html;
                        var listItem = addFeedPageItems.appendChild(div.firstChild);
                        listItem.addEventListener('click', function (e) {
                            fn.navigator.pushPage('views/specific-news-item.html', { data: { feed: parsedFeed, item: item } });
                        });
                    })(parsedFeed.items[i]);
                }
                subscribeFeed1.onclick = subscribeFeed2.onclick = handleSubscribeClick;

                function handleSubscribeClick() {
                    var feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
                    feeds[parsedFeed.url] = parsedFeed;
                    localStorage.setItem('feeds', JSON.stringify(feeds));
                    feedsRefetch();
                    fn.navigator.popPage();
                }
            }, function (err) {
                if (err.type === 'network') ons.notification.alert('Could not get your news source :(, network error')
                    .then(pop);
                else ons.notification.alert('Unknown error')
                    .then(pop);
            });
        });
    }

}


function feedsPageInit(page) {
    var feedsList = document.getElementById('feeds-list');
    var addFeedFab = document.getElementById('add-feed-btn-feeds-page');
    var feedSearch = document.getElementById('search-feeds-items');

    var recommandedFeeds = _app_feedrecommandations[_app_userLang];
    var recommandedSites = _app_recommandedfeedsources[_app_userLang];

    var recommandedFeedsSet = {};

    var recommendedFeedsItems = document.getElementById('recommended-feeds-items');
    var recommendedSitesItems = document.getElementById('recommended-sites-items');

    var persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');

    page.addEventListener('hide', feedsRefetch);

    addFeedFab.addEventListener('click', function (e) {
        window.fn.navigator.pushPage('views/add-feed.html');
    });

    feedSearch.addEventListener('input', function () {
        persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        render();
    });

    function handleFeedsRefetch() {
        persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        render();
        renderRecommanded();
    }

    document.addEventListener('feedsrefetch', handleFeedsRefetch);

    page.addEventListener('destroy', function () {
        document.removeEventListener('feedsrefetch', handleFeedsRefetch);
    });

    page.addEventListener('show', function () {
        persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        render();
    });
    renderRecommanded();

    function renderRecommanded() {
        while (recommendedFeedsItems.firstChild) recommendedFeedsItems.removeChild(recommendedFeedsItems.firstChild);

        for (var i = 0; i < recommandedFeeds.length; i++) {
            (function (feed) {
                recommandedFeedsSet[feed.url] = true;
                var siteUrlParts = feed.site.split('/');
                var icon = siteUrlParts[0].replace('http:', 'https:') + '//' + siteUrlParts[2] + '/favicon.ico';
                var checked = !!persistFeeds[feed.url];

                var div = document.createElement('div');

                div.innerHTML = '<ons-list-item>\
                <div class="left">\
                <img onerror="this.src=\'images/iconnotfound.png\'" src="' + icon + '" class="list-item__thumbnail">\
                </div>\
                <div class="center">\
                <span class="list-item__title">' + feed.title + '</span>\
                <span class="list-item__subtitle">' + feed.site + '<span>\
                </div>\
                <div class="right"><ons-switch ' + (checked ? 'checked' : '') + ' class="recommended-feed-switch"></ons-switch></div>\
                </ons-list-item>';

                var elem = div.firstChild;
                var onsSwitch = elem.getElementsByClassName('recommended-feed-switch')[0];
                onsSwitch.addEventListener('change', function (e) {
                    persistFeeds = JSON.parse(localStorage.getItem('feeds') || '{}');
                    if (e.target.checked && !persistFeeds[feed.url]) {
                        persistFeeds[feed.url] = feed;
                    } else if (!e.target.checked && persistFeeds[feed.url]) {
                        delete persistFeeds[feed.url];
                    }
                    localStorage.setItem('feeds', JSON.stringify(persistFeeds));
                });
                recommendedFeedsItems.appendChild(elem);
            })(recommandedFeeds[i]);
        }

        while (recommendedSitesItems.firstChild) recommendedSitesItems.removeChild(recommendedSitesItems.firstChild);

        for (var i = 0; i < recommandedSites.length; i++) {
            (function (site) {
                var siteUrlParts = site.url.split('/');
                var icon = siteUrlParts[0].replace('http:', 'https:') + '//' + siteUrlParts[2] + '/favicon.ico';

                var div = document.createElement('div');

                div.innerHTML = '<ons-list-item tappable \
                onclick="window.open(\'' + site.url + '\', \'_system\')" modifier="chevron">\
                <div class="left">\
                <img onerror="this.src=\'images/iconnotfound.png\'" src="' + icon + '" class="list-item__thumbnail">\
                </div>\
                <div class="center">' + site.title + '</div>\
                </ons-list-item>';

                var elem = div.firstChild;
                recommendedSitesItems.appendChild(elem);
            })(recommandedSites[i]);
        }

    }

    function render() {

        while (feedsList.firstChild) feedsList.removeChild(feedsList.firstChild);

        var term = feedSearch.value.trim();
        var shouldFilterByName = term.length > 2;
        var regex = new RegExp('.*?' + escapeRegExp(term) + '.*', 'im');

        var feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        for (var url in feeds) {
            (function (url) {
                if (recommandedFeedsSet[url]) return; // skip because it's already in the recommanded feeds section
                var feed = feeds[url];
                var div = document.createElement('div');
                if (shouldFilterByName && !regex.test(feed.title) && !regex.test(feed.description)) return;
                div.innerHTML = '<ons-list-item tappable modifier="chevron">\
                    <div class="left">\
                    <img onerror="this.src=\'images/iconnotfound.png\'" src="' + (feed.icon || 'images/feediconnotfound.png') + '" class="list-item__thumbnail">\
                    </div>\
                    <div class="center">\
                    <span class="list-item__title">' + feed.title + '</span>\
                    <span class="list-item__subtitle">' + (feed.description || '') + '</span>\
                    </div>\
                    </ons-list-item>';
                var elem = div.firstChild;
                elem.addEventListener('click', function () {
                    fn.navigator.pushPage('views/specific-feed.html', {
                        data: {
                            url: url,
                        }
                    })
                });
                feedsList.appendChild(elem);
            })(url);
        }
    }
}

function newsPageInit(page) {
    var addFeedBtn = document.getElementById('add-feed-btn');
    var feedList = document.getElementById('news-list');
    var newsSearchInput = document.getElementById('search-feeds-news-list-items');
    var newsPageProgress = document.getElementById('news-page-progress');

    addFeedBtn.addEventListener('click', function (e) {
        window.fn.navigator.pushPage('views/add-feed.html');
    });

    var dirty = false;
    newsSearchInput.addEventListener('input', function () {
        var term = newsSearchInput.value.trim();
        render();
    });

    var feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
    var ultimateList = [];
    var height = 100;

    feedList.delegate = {
        createItemContent: function (i) {
            return ultimateList[i].elem;
        },
        countItems: function () {
            return Math.min(_app_maxLazyListItems, ultimateList.length);
        },
        calculateItemHeight: function (index) {
            return height;
        },
    };

    var renderDebounced = debounce(render, 300);
    window.addEventListener('orientationchange', renderDebounced);
    window.addEventListener('resize', renderDebounced);

    var feedsListItems = {};
    for (var url in feeds) {
        var feed = feeds[url];
        var items = {};
        for (var j = 0; j < feed.items.length; j++) {
            items[feed.items[j].link] = {
                item: feed.items[j],
                elem: createListItem(feed, feed.items[j])
            };
        }
        feedsListItems[url] = items;
    }

    render();
    var interval = setInterval(feedsRefetch, 120 * 1000);

    document.addEventListener('feedsrefetch', handleFeedsRefetch);
    document.addEventListener('feedsrefetchprogress', handleFeedsRefetchProgress);

    page.addEventListener('destroy', function () {
        document.removeEventListener('feedsrefetch', handleFeedsRefetch);
        document.removeEventListener('feedsrefetchprogress', handleFeedsRefetchProgress);
        clearInterval(interval);
    });

    function handleFeedsRefetch() {
        feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        var feedsArr = [];
        for (var url in feeds) feedsArr.push(feeds[url]);

        for (var i = 0; i < feedsArr.length; i++) {
            var feed = feedsArr[i];
            var url = feed.url;
            var items = {};
            var oldFeedListItems = feedsListItems[url];

            if (oldFeedListItems) {
                for (var j = 0; j < feed.items.length; j++) {
                    var newItem = feed.items[j];
                    items[newItem.link] = (oldFeedListItems[newItem.link] && oldFeedListItems[newItem.link].item.xml_len === newItem.xml_len)
                        ? oldFeedListItems[newItem.link]
                        : {
                            item: newItem,
                            elem: createListItem(feed, newItem)
                        };
                }
            } else {
                for (var j = 0; j < feed.items.length; j++) {
                    var newItem = feed.items[j];
                    items[newItem.link] = {
                        item: newItem,
                        elem: createListItem(feed, newItem)
                    };
                }
            }
            feedsListItems[url] = items;
        }
        setTimeout(render, 0);
    }

    function handleFeedsRefetchProgress(e) {
        newsPageProgress.value = e.detail.progress;
    }

    function createListItem(feed, item) {
        var urlSplit = feed.site.split('/');
        var div = document.createElement('div');
        var listItem = document.createElement('ons-list-item');
        listItem.setAttribute('tappable', '');
        listItem.setAttribute('modifier', 'chevron');
        var left = document.createElement('div');
        left.setAttribute('class', 'left');
        listItem.appendChild(left);
        var thumbnail = document.createElement('img');
        thumbnail.onerror = function () { this.src = 'images/iconnotfound.png'; }
        thumbnail.src = urlSplit[0].replace('http:', 'https:') + '//' + urlSplit[2] + '/favicon.ico';
        thumbnail.setAttribute('class', 'list-item__thumbnail');
        left.appendChild(thumbnail);

        var center = document.createElement('div');
        center.setAttribute('class', 'center');
        center.style.width = '100%';
        listItem.appendChild(center);

        var listItemTitle = document.createElement('span');
        listItemTitle.setAttribute('class', 'list-item__title overflow-ellipsis');
        listItemTitle.style.paddingRight = '50px';
        listItemTitle.innerText = excerpt(item.title, 300);
        center.appendChild(listItemTitle);

        var listItemSubtitle = document.createElement('span');
        listItemSubtitle.setAttribute('class', 'list-item__subtitle');
        listItemSubtitle.style.width = '100%';
        listItemSubtitle.innerText = excerpt(feed.title, 150);

        var subtitleDescription = document.createElement('div');
        subtitleDescription.setAttribute('class', 'subtitle-description overflow-ellipsis');
        subtitleDescription.innerHTML = excerpt(item.description, 150);

        listItemSubtitle.appendChild(subtitleDescription);
        listItemSubtitle.appendChild(document.createTextNode(timeago(item.date)));

        center.appendChild(listItemSubtitle);

        listItem.addEventListener('click', function (e) {
            fn.navigator.pushPage('views/specific-news-item.html', { data: { feed: feed, item: item } });
        });
        return listItem;
    }

    function render() {
        ultimateList = [];
        feedList.refresh();
        var c = 0;

        var term = newsSearchInput.value.trim();
        var shouldFilterByName = term.length > 2;
        var regex = new RegExp('.*?' + escapeRegExp(term) + '.*', 'im');

        (function () {
            for (var url in feedsListItems) {
                var feedItems = feedsListItems[url];
                var feed = feeds[url];

                var searchMatchesFeed = regex.test(feed.title) || regex.test(feed.description);

                for (var link in feedItems) {
                    var entry = feedItems[link];
                    if (shouldFilterByName
                        && !searchMatchesFeed
                        && !regex.test(entry.item.title)
                        && !regex.test(entry.item.description))
                        continue;

                    ultimateList.push(entry);
                    if (c++ > _app_maxLazyListItems) return;
                }
            }
        })();

        ultimateList.sort(function (a, b) {
            return new Date(b.item.date) - new Date(a.item.date);
        });

        feedList.refresh();
    }

}


function initSpecificFeedPage(page) {
    var url = page.data.url;
    var feeds = JSON.parse(localStorage.getItem('feeds') || '{}');

    var specificFeedPage = document.getElementById('specific-feed-page');
    var specificFeedPageContent = document.getElementById('specific-feed-page-content');
    var specificFeedPageItems = document.getElementById('specific-feed-page-items');
    var specificFeedPageIcon = document.getElementById('specific-feed-page-icon');
    var specificFeedPageTitle = document.getElementById('specific-feed-page-title');
    var specificFeedPageDescription = document.getElementById('specific-feed-page-description');
    var specificFeedPageSite = document.getElementById('specific-feed-page-site');
    var specificFeedPageUnsubscribe = document.getElementById('specific-feed-page-unsubscribe');
    var specificFeedPageLinkFab = document.getElementById('specific-feed-page-link-fab');
    var specificFeedPageToolbarTitle = document.getElementById('specific-feed-page-toolbar-feed-title');

    var feed = feeds[url];
    if (!feed) {
        ons.notification.alert('Could not find feed :(')
            .then(function () {
                fn.navigator.popPage();
            });
        return;
    }

    specificFeedPageLinkFab.addEventListener('click', function () {
        window.open(feed.site, '_system');
    });

    specificFeedPageUnsubscribe.addEventListener('click', function () {
        feeds = JSON.parse(localStorage.getItem('feeds') || '{}');
        delete feeds[url];
        localStorage.setItem('feeds', JSON.stringify(feeds));
        fn.navigator.popPage();
    });

    render();
    document.addEventListener('feedsrefetch', render);
    page.addEventListener('destroy', function() {
        document.removeEventListener('feedsrefetch', render);
    });

    function render() {
        specificFeedPageIcon.onerror = function() { this.src = 'images/iconnotfound.png' };
        specificFeedPageIcon.src = feed.icon;
        specificFeedPageTitle.innerHTML = feed.title;
        specificFeedPageToolbarTitle.innerHTML = feed.title;
        specificFeedPageDescription.innerHTML = feed.description;

        while(specificFeedPageItems.firstChild) specificFeedPageItems.removeChild(specificFeedPageItems.firstChild);

        var len = Math.min(feed.items.length, _app_maxListItems);
        for (var i = 0; i < len; i++) {
            var div = document.createElement('div');
            var item = feed.items[i];
            var html = '<ons-list-item tappable modifier="chevron">\
                <div class="left">\
                <img onerror="this.src=\'images/iconnotfound.png\'" src="' + feed.icon + '" class="list-item__thumbnail">\
                </div>\
                <div class="center">\
                <span class="list-item__title">' + item.title + '</span>\
                <span class="list-item__subtitle">' + item.description + '<br><small>' + timeago(item.date) + '</small></span>\
                </div>\
                </ons-list-item>';
            div.innerHTML = html;
            var listItem = div.firstChild;
            listItem.addEventListener('click', function (e) {
                fn.navigator.pushPage('views/specific-news-item.html', { data: { feed: feed, item: item } });
            });
            specificFeedPageItems.appendChild(listItem);
        }
    }
}




function initSpecificNewsItemPage(page) {
    var specificNewsItemPage = document.getElementById('specific-news-item-page');
    var specificNewsItemPageToolbarTitle = document.getElementById('specific-news-item-page-toolbar-title');
    var specificNewsItemPageFeedTitle = document.getElementById('specific-news-item-page-feed-title');
    var specificNewsItemPageIcon = document.getElementById('specific-news-item-page-icon');
    var specificNewsItemPageTitle = document.getElementById('specific-news-item-page-title');
    var specificNewsItemPageDescription = document.getElementById('specific-news-item-page-description');
    var specificNewsItemPageLinkFab = document.getElementById('specific-news-item-page-link-fab');
    var specificNewsItemPageContent = document.getElementById('specific-news-item-page-content');
    var specificNewsItemPageDescription = document.getElementById('specific-news-item-page-description');
    var specificNewsItemPageAuthor = document.getElementById('specific-news-item-page-author');
    var specificNewsItemPageTime = document.getElementById('specific-news-item-page-time');

    var item = page.data.item;
    var feed = page.data.feed;

    specificNewsItemPageToolbarTitle.innerText = excerpt(item.title, 30) || 'News Item';
    specificNewsItemPageFeedTitle.innerText = excerpt(feed.title, 200);
    specificNewsItemPageTitle.textContent = excerpt(item.title, 500) || 'News Item';
    specificNewsItemPageIcon.onerror = function() { this.src = 'images/iconnotfound.png' };
    specificNewsItemPageIcon.src = feed.icon || 'images/iconnotfound.png';
    if (item.description && item.description.trim()) {
        specificNewsItemPageDescription.innerHTML = excerpt(item.description, 2000) || '';
    } else {
        specificNewsItemPageDescription.style.display = 'none';
    }
    specificNewsItemPageTime.innerText = timeago(item.date) + ' - ' + new Date(item.date).toLocaleString();
    specificNewsItemPageAuthor.innerText = item.author;
    specificNewsItemPageLinkFab.addEventListener('click', function() {
        window.open(item.link, '_system');
    });
    if (item.content) {
        var baseUrl = item.contentBase || feed.site;
        specificNewsItemPageContent.innerHTML = excerpt(item.content, 20000);
        var hrefAttrElems = specificNewsItemPageContent.querySelectorAll('[href]');
        var srcAttrElems = specificNewsItemPageContent.querySelectorAll('[src]');

        for(var i = 0; i < hrefAttrElems.length; i++) {
            hrefAttrElems[i].href = normalizeUrl(baseUrl, hrefAttrElems[i].getAttribute('href'));
        }
        for (var j = 0; j < srcAttrElems.length; j++) {
            srcAttrElems[j].src = normalizeUrl(baseUrl, srcAttrElems[j].getAttribute('src'));
        }

    } else if (item.link && item.link.trim()) {
        specificNewsItemPageContent.innerHTML = '\
        <a class="button" target="_system" href="' + item.link + '"><ons-icon icon="md-link"></ons-icon> View entire article </a>\
        ';
    }
}




var isOnline = function () {

}, isOffline = function () {
	window.ons.notification.alert({
		message: _app_localization.noConnection[_app_userLang],
	});
};

if (window.addEventListener) {
	window.addEventListener("online", isOnline, false);
	window.addEventListener("offline", isOffline, false);
}
else {
	document.body.ononline = isOnline;
	document.body.onoffline = isOffline;
}

document.addEventListener("resume", function () {
	if (navigator.onLine === false) {
		window.ons.notification.alert({
			message: _app_localization.noConnection[_app_userLang],
		});
	}
}, false);

if(!isFirstTimeAppOpening()) {
    feedsRefetch();
}

document.addEventListener('init', function (event) {
    var page = event.target;

    if (page.id === 'news-page') {
        isFirstTimeAppOpening() 
            ? firstTimeAppOpening()
            : newsPageInit(page);
    } else if (page.id === 'feeds-page') {
        isFirstTimeAppOpening()
            ? firstTimeAppOpening()
            : feedsPageInit(page);
    } else if (page.id === 'add-feed-page') {
        isFirstTimeAppOpening()
            ? firstTimeAppOpening()
            : addFeedPageInit(page);
    } else if (page.id === 'specific-feed-page') {
        isFirstTimeAppOpening() 
            ? firstTimeAppOpening()
            : initSpecificFeedPage(page);
    } else if (page.id === 'recommended-page') {
        isFirstTimeAppOpening()
            ? firstTimeAppOpening()
            : recommendedFeedsPageInit(page);
    } else if (page.id === 'specific-news-item-page') {
        isFirstTimeAppOpening()
            ? firstTimeAppOpening()
            : initSpecificNewsItemPage(page);
    }
});


document.addEventListener("deviceready", function () {
    if (cordova.platformId === 'browser') {
        document.body.appendChild(document.createElement('script')).src = './js/browser.js';
    } else {
        document.body.appendChild(document.createElement('script')).src = './js/admob.js';
    }
    if (navigator.onLine === false) {
        window.ons.notification.alert({
            message: _app_localization.noConnection[_app_userLang],
        });
    }
}, false);

window.ons.platform.select('android');
window.ons.disableAutoStatusBarFill();

window.fn = {};

window.fn.open = function () {
    var menu = document.getElementById('menu');
    menu.open();
};

window.fn.load = function (page) {
    var content = document.getElementById('content');
    var menu = document.getElementById('menu');
    content.load(page)
        .then(menu.close.bind(menu));
};

window.fn.navigator = document.getElementById('navigator');

function isFirstTimeAppOpening() {
    return !localStorage.getItem('feeds');
}

function firstTimeAppOpening() {
    setDefaultFeeds();
    window.fn.load('views/recommended.html');
    window.fn.open();
    feedsRefetch();
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9saWIvanMvb25zZW51aS5taW4uanMiLCJzcmMvbGliL2pzL3RpbWVhZ28ubWluLmpzIiwic3JjL2pzL3V0aWwuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2xvY2FsaXphdGlvbi5qcyIsInNyYy9qcy9mZWVkLmpzIiwic3JjL2pzL3JlY29tbWVuZGVkLWZlZWRzLXBhZ2UuanMiLCJzcmMvanMvYWRkLWZlZWQtcGFnZS5qcyIsInNyYy9qcy9mZWVkcy1wYWdlLmpzIiwic3JjL2pzL25ld3MtbGlzdC1wYWdlLmpzIiwic3JjL2pzL3NwZWNpZmljLWZlZWQtcGFnZS5qcyIsInNyYy9qcy9zcGVjaWZpYy1uZXdzLWl0ZW0uanMiLCJzcmMvanMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FDREE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogb25zZW51aSB2Mi4xMC4xIC0gMjAxOC0wNS0yOCAqL1xuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6dC5vbnM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtrdC5zZXQodCwhMCl9ZnVuY3Rpb24gZSh0KXt2YXIgZT13dC5nZXQodCxbXSl8fFtdO3d0LmRlbGV0ZSh0KSxlLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pfWZ1bmN0aW9uIG4obil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmZ1bmN0aW9uKCl7fTtpZih2b2lkIDA9PT1rdCYmKGt0PW5ldyBXZWFrTWFwLHd0PW5ldyBXZWFrTWFwKSxmdW5jdGlvbih0LGUpe3d0Lmhhcyh0KXx8d3Quc2V0KHQsW10pLHd0LmdldCh0KS5wdXNoKGUpfShuLGkpLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkTm9kZXMubGVuZ3RoPjAmJnQoZSksa3QuaGFzKGUpfShuKSllKG4pO2Vsc2V7bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oaSl7dChuKSxlKG4pfSkub2JzZXJ2ZShuLHtjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMH0pLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3QobiksZShuKX0pfX1mdW5jdGlvbiBpKHQpe3QuX2Rlc3Ryb3kgaW5zdGFuY2VvZiBGdW5jdGlvbj90Ll9kZXN0cm95KCk6dC5yZW1vdmUoKX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGU9e2V4cG9ydHM6e319LHQoZSxlLmV4cG9ydHMpLGUuZXhwb3J0c31mdW5jdGlvbiByKHQpe3ZhciBlPWdpLmhhcyh0KSxuPS9eW2Etel1bLjAtOV9hLXpdKi1bXFwtLjAtOV9hLXpdKiQvLnRlc3QodCk7cmV0dXJuIWUmJm59ZnVuY3Rpb24gYSh0KXt2YXIgZT10LmlzQ29ubmVjdGVkO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU7Zm9yKHZhciBuPXQ7biYmIShuLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8biBpbnN0YW5jZW9mIERvY3VtZW50KTspbj1uLnBhcmVudE5vZGV8fCh3aW5kb3cuU2hhZG93Um9vdCYmbiBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q/bi5ob3N0OnZvaWQgMCk7cmV0dXJuISghbnx8IShuLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8biBpbnN0YW5jZW9mIERvY3VtZW50KSl9ZnVuY3Rpb24gcyh0LGUpe2Zvcih2YXIgbj1lO24mJm4hPT10JiYhbi5uZXh0U2libGluZzspbj1uLnBhcmVudE5vZGU7cmV0dXJuIG4mJm4hPT10P24ubmV4dFNpYmxpbmc6bnVsbH1mdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpuZXcgU2V0LGk9dDtpOyl7aWYoaS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgbz1pO2Uobyk7dmFyIHI9by5sb2NhbE5hbWU7aWYoXCJsaW5rXCI9PT1yJiZcImltcG9ydFwiPT09by5nZXRBdHRyaWJ1dGUoXCJyZWxcIikpe3ZhciBhPW8uaW1wb3J0O2lmKGEgaW5zdGFuY2VvZiBOb2RlJiYhbi5oYXMoYSkpe24uYWRkKGEpO2Zvcih2YXIgdT1hLmZpcnN0Q2hpbGQ7dTt1PXUubmV4dFNpYmxpbmcpbCh1LGUsbil9aT1zKHQsbyk7Y29udGludWV9aWYoXCJ0ZW1wbGF0ZVwiPT09cil7aT1zKHQsbyk7Y29udGludWV9dmFyIGM9by5fX0NFX3NoYWRvd1Jvb3Q7aWYoYylmb3IodmFyIGg9Yy5maXJzdENoaWxkO2g7aD1oLm5leHRTaWJsaW5nKWwoaCxlLG4pfWk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5maXJzdENoaWxkP2UuZmlyc3RDaGlsZDpzKHQsZSl9KHQsaSl9fWZ1bmN0aW9uIHUodCxlLG4pe3RbZV09bn12YXIgYz17fSxoPWZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiXCIpLGU9KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpLmpvaW4oXCJcIikubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLyl8fFwiXCI9PT10Lk9MaW5rJiZbXCJcIixcIm9cIl0pWzFdO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm5cIi1cIitlK1wiLVwiK1EuaHlwaGVuYXRlKHQpfX0oKSxkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7biBpbiB0LnN0eWxlP3Quc3R5bGVbbl09ZVtuXTpoKG4paW4gdC5zdHlsZT90LnN0eWxlW2gobildPWVbbl06US53YXJuKFwiTm8gc3VjaCBzdHlsZSBwcm9wZXJ0eTogXCIrbil9KSx0fTtkLmNsZWFyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0oYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiXCIpLnNwbGl0KC9cXHMrLykucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29uY2F0KFtRLmh5cGhlbmF0ZShlKSxoKGUpXSl9LFtdKSxuPVtdLGk9dC5zdHlsZS5sZW5ndGgtMTtpPj0wO2ktLSkhZnVuY3Rpb24oaSl7dmFyIG89dC5zdHlsZVtpXTsoMD09PWUubGVuZ3RofHxlLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT1vLmluZGV4T2YodCl9KSkmJm4ucHVzaChvKX0oaSk7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnN0eWxlW2VdPVwiXCJ9KSxcIlwiPT09dC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSYmdC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKX07dmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0scD1mdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9LGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxtPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW4sdH0sXz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBpIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJih0W2ldPW5baV0pfXJldHVybiB0fSx2PWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1yP3ZvaWQgMDp0KHIsbixpKX1pZihcInZhbHVlXCJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBhPW8uZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYj1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfSx5PWZ1bmN0aW9uKHQsZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQpZS5pbmRleE9mKGkpPj0wfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmKG5baV09dFtpXSk7cmV0dXJuIG59LGs9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX0sdz1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9LEU9d2luZG93LkhUTUxFbGVtZW50LEM9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9zZWxlY3RlZFBsYXRmb3JtPW51bGwsdGhpcy5faWdub3JlUGxhdGZvcm1TZWxlY3Q9ITF9cmV0dXJuIGcodCxbe2tleTpcInNlbGVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0JiYodGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybT10LnRyaW0oKS50b0xvd2VyQ2FzZSgpKX19LHtrZXk6XCJfZ2V0U2VsZWN0ZWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0P251bGw6dGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybX19LHtrZXk6XCJfcnVuT25BY3R1YWxQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSEwO3ZhciBlPXQoKTtyZXR1cm4gdGhpcy5faWdub3JlUGxhdGZvcm1TZWxlY3Q9ITEsZX19LHtrZXk6XCJpc1dlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe2lmKFwibG9hZGluZ1wiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8XCJ1bmluaXRpYWxpemVkXCI9PWRvY3VtZW50LnJlYWR5U3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiaXNXZWJWaWV3KCkgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBkb20gY29udGVudHMgbG9hZGVkLlwiKTtyZXR1cm4hISh3aW5kb3cuY29yZG92YXx8d2luZG93LnBob25lZ2FwfHx3aW5kb3cuUGhvbmVHYXApfX0se2tleTpcImlzSVBob25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vaVBob25lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lQaG9uZVhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzSVBob25lKCkmJigzNzU9PT13aW5kb3cuc2NyZWVuLndpZHRoJiY4MTI9PT13aW5kb3cuc2NyZWVuLmhlaWdodHx8ODEyPT09d2luZG93LnNjcmVlbi53aWR0aCYmMzc1PT09d2luZG93LnNjcmVlbi5oZWlnaHQpfX0se2tleTpcImlzSVBhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQYWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzSVBvZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzSU9TXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiaW9zXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9pT1MvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSl9fSx7a2V5OlwiaXNJT1M3YWJvdmVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSkmJiEvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKSlyZXR1cm4vaU9TL2kudGVzdChkZXZpY2UucGxhdGZvcm0pJiZwYXJzZUludChkZXZpY2UudmVyc2lvbi5zcGxpdChcIi5cIilbMF0pPj03O2lmKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7dmFyIHQ9KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1xcYlswLTldK19bMC05XSsoPzpfWzAtOV0rKT9cXGIvKXx8W1wiXCJdKVswXS5yZXBsYWNlKC9fL2csXCIuXCIpO3JldHVybiBwYXJzZUludCh0LnNwbGl0KFwiLlwiKVswXSk+PTd9cmV0dXJuITF9fSx7a2V5OlwiaXNJT1NTYWZhcmlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5uYXZpZ2F0b3IsZT10LnVzZXJBZ2VudDtyZXR1cm4hKCF0aGlzLmlzSU9TKCl8fC0xPT09ZS5pbmRleE9mKFwiU2FmYXJpXCIpfHwtMT09PWUuaW5kZXhPZihcIlZlcnNpb25cIil8fHQuc3RhbmRhbG9uZSl9fSx7a2V5OlwiaXNXS1dlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PS9jb25zdHJ1Y3Rvci9pLnRlc3QoRSk7cmV0dXJuISghKHRoaXMuaXNJT1MoKSYmd2luZG93LndlYmtpdCYmd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMmJndpbmRvdy5pbmRleGVkREIpfHx0KX19LHtrZXk6XCJpc1VJV2ViVmlld1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy5pc0lPUygpfHx0aGlzLmlzSU9TU2FmYXJpKCl8fHRoaXMuaXNXS1dlYlZpZXcoKSl9fSx7a2V5OlwiaXNBbmRyb2lkUGhvbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmL01vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNBbmRyb2lkVGFibGV0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiEvTW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0FuZHJvaWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJhbmRyb2lkXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6L0FuZHJvaWQvaS50ZXN0KFwib2JqZWN0XCIhPT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSl8fC9icm93c2VyL2kudGVzdChkZXZpY2UucGxhdGZvcm0pP25hdmlnYXRvci51c2VyQWdlbnQ6ZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc1dQXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wid3BcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT8vV2luZG93cyBQaG9uZXxJRU1vYmlsZXxXUERlc2t0b3AvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9XaW4zMk5UfFdpbkNFL2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzQmxhY2tCZXJyeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImJsYWNrYmVycnlcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT8vQmxhY2tCZXJyeXxSSU0gVGFibGV0IE9TfEJCMTAvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9CbGFja0JlcnJ5L2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzT3BlcmFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJvcGVyYVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOiEhd2luZG93Lm9wZXJhfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgT1BSL1wiKT49MH19LHtrZXk6XCJpc0ZpcmVmb3hcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJmaXJlZm94XCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEluc3RhbGxUcmlnZ2VyfX0se2tleTpcImlzU2FmYXJpXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wic2FmYXJpXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdy5IVE1MRWxlbWVudCkuaW5kZXhPZihcIkNvbnN0cnVjdG9yXCIpPjB8fFwiW29iamVjdCBTYWZhcmlSZW1vdGVOb3RpZmljYXRpb25dXCI9PT0oIXdpbmRvd1tcInNhZmFyaVwiXXx8c2FmYXJpLnB1c2hOb3RpZmljYXRpb24pLnRvU3RyaW5nKCl9fSx7a2V5OlwiaXNDaHJvbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJjaHJvbWVcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohKCF3aW5kb3cuY2hyb21lfHx3aW5kb3cub3BlcmF8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIiBPUFIvXCIpPj0wfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgRWRnZS9cIik+PTApfX0se2tleTpcImlzSUVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJpZVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOiEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlfX0se2tleTpcImlzRWRnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImVkZ2VcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgRWRnZS9cIik+PTB9fSx7a2V5OlwiZ2V0TW9iaWxlT1NcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQW5kcm9pZCgpP1wiYW5kcm9pZFwiOnRoaXMuaXNJT1MoKT9cImlvc1wiOnRoaXMuaXNXUCgpP1wid3BcIjpcIm90aGVyXCJ9fSx7a2V5OlwiZ2V0SU9TRGV2aWNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0lQaG9uZSgpP1wiaXBob25lXCI6dGhpcy5pc0lQYWQoKT9cImlwYWRcIjp0aGlzLmlzSVBvZCgpP1wiaXBvZFwiOlwibmFcIn19XSksdH0oKSksQT1mdW5jdGlvbih0KXtyZXR1cm4gUS50aHJvdyhcIkluIFBhZ2VBdHRyaWJ1dGVFeHByZXNzaW9uOiBcIit0KX0sUz17X3ZhcmlhYmxlczp7fSxkZWZpbmVWYXJpYWJsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07XCJzdHJpbmdcIiE9dHlwZW9mIHQ/QShcIlZhcmlhYmxlIG5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiKTpcInN0cmluZ1wiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT9BKFwiVmFyaWFibGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uXCIpOnRoaXMuX3ZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh0KSYmIW4mJkEoJ1wiJyt0KydcIiBpcyBhbHJlYWR5IGRlZmluZWQnKSx0aGlzLl92YXJpYWJsZXNbdF09ZX0sZ2V0VmFyaWFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh0KT90aGlzLl92YXJpYWJsZXNbdF06bnVsbH0scmVtb3ZlVmFyaWFibGU6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX3ZhcmlhYmxlc1t0XX0sZ2V0QWxsVmFyaWFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhcmlhYmxlc30sX3BhcnNlUGFydDpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDAsbj0hMSxpPTAsbz1bXTswPT09dC5sZW5ndGgmJkEoXCJVbmFibGUgdG8gcGFyc2UgZW1wdHkgc3RyaW5nXCIpO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKFwiJFwiPT09KGU9dC5jaGFyQXQocikpJiZcIntcIj09PXQuY2hhckF0KHIrMSkpe24mJkEoXCJOZXN0ZWQgaW50ZXJwb2xhdGlvbiBub3Qgc3VwcG9ydGVkXCIpO3Quc3Vic3RyaW5nKGkscikubGVuZ3RoPjAmJm8ucHVzaCh0LnN1YnN0cmluZyhpLHIpKSxpPXIsbj0hMH1lbHNlIGlmKFwifVwiPT09ZSl7bnx8QShcIn0gbXVzdCBiZSBwcmVjZWVkZWQgYnkgJHtcIik7dC5zdWJzdHJpbmcoaSxyKzEpLmxlbmd0aD4wJiZvLnB1c2godC5zdWJzdHJpbmcoaSxyKzEpKSxpPXIrMSxuPSExfXJldHVybiBuJiZBKFwiVW50ZXJtaW5hdGVkIGludGVycG9sYXRpb25cIiksby5wdXNoKHQuc3Vic3RyaW5nKGksdC5sZW5ndGgpKSxvfSxfcmVwbGFjZVRva2VuOmZ1bmN0aW9uKHQpe3ZhciBlPXQubWF0Y2goL15cXCR7KC4qPyl9JC8pO2lmKCFlKXJldHVybiB0O3ZhciBuPWVbMV0udHJpbSgpLGk9dGhpcy5nZXRWYXJpYWJsZShuKTtpZihudWxsIT09aSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkpcmV0dXJuIGk7dmFyIG89aSgpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBvJiZBKFwiTXVzdCByZXR1cm4gYSBzdHJpbmdcIiksb31BKCdWYXJpYWJsZSBcIicrbisnXCIgZG9lcyBub3QgZXhpc3QnKX0sX3JlcGxhY2VUb2tlbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFwKHRoaXMuX3JlcGxhY2VUb2tlbi5iaW5kKHRoaXMpKX0sX3BhcnNlRXhwcmVzc2lvbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX0pLm1hcCh0aGlzLl9wYXJzZVBhcnQuYmluZCh0aGlzKSkubWFwKHRoaXMuX3JlcGxhY2VUb2tlbnMuYmluZCh0aGlzKSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmpvaW4oXCJcIil9KX0sZXZhbHVhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dGhpcy5fcGFyc2VFeHByZXNzaW9uKHQpOltdfX07Uy5kZWZpbmVWYXJpYWJsZShcIm1vYmlsZU9TXCIsQy5nZXRNb2JpbGVPUygpKSxTLmRlZmluZVZhcmlhYmxlKFwiaU9TRGV2aWNlXCIsQy5nZXRJT1NEZXZpY2UoKSksUy5kZWZpbmVWYXJpYWJsZShcInJ1bnRpbWVcIixmdW5jdGlvbigpe3JldHVybiBDLmlzV2ViVmlldygpP1wiY29yZG92YVwiOlwiYnJvd3NlclwifSk7dmFyIFA9e307UC5jb25maWc9e2F1dG9TdGF0dXNCYXJGaWxsOiEwLGFuaW1hdGlvbnNEaXNhYmxlZDohMSx3YXJuaW5nc0Rpc2FibGVkOiExfSxQLm51bGxFbGVtZW50PXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFAuaXNFbmFibGVkQXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24oKXtyZXR1cm4hIVAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsfSxQLm5vcm1hbGl6ZVBhZ2VIVE1MPWZ1bmN0aW9uKHQpe3JldHVybihcIlwiK3QpLnRyaW0oKX0sUC53YWl0RE9NQ29udGVudExvYWRlZD1mdW5jdGlvbih0KXtpZihcImxvYWRpbmdcIj09PXdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlfHxcInVuaW5pdGlhbGl6ZWRcIj09d2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUpe3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uIGUoKXt0KCksd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZSl9KX1lbHNlIHNldEltbWVkaWF0ZSh0KX0sUC5hdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbiBlKCl7UC5zaG91bGRGaWxsU3RhdHVzQmFyKCkmJnQoKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixlKX07XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKT9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixlKTotMT09PVtcImNvbXBsZXRlXCIsXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpP1Aud2FpdERPTUNvbnRlbnRMb2FkZWQoZSk6ZSgpfSxQLnNob3VsZEZpbGxTdGF0dXNCYXI9ZnVuY3Rpb24oKXtyZXR1cm4gUC5pc0VuYWJsZWRBdXRvU3RhdHVzQmFyRmlsbCgpJiYoQy5pc1dlYlZpZXcoKSYmQy5pc0lPUzdhYm92ZSgpJiYhQy5pc0lQaG9uZVgoKXx8ZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiLm9ucy1zdGF0dXMtYmFyLW1vY2suaW9zXCIpKX0sUC50ZW1wbGF0ZVN0b3JlPXtfc3RvcmFnZTp7fSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFAudGVtcGxhdGVTdG9yZS5fc3RvcmFnZVt0XXx8bnVsbH0sc2V0OmZ1bmN0aW9uKHQsZSl7UC50ZW1wbGF0ZVN0b3JlLl9zdG9yYWdlW3RdPWV9fSx3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIl90ZW1wbGF0ZWxvYWRlZFwiLGZ1bmN0aW9uKHQpe1wib25zLXRlbXBsYXRlXCI9PT10LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZQLnRlbXBsYXRlU3RvcmUuc2V0KHQudGVtcGxhdGVJZCx0LnRlbXBsYXRlKX0sITEpLFAud2FpdERPTUNvbnRlbnRMb2FkZWQoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgZT13aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSxuPTA7bjxlLmxlbmd0aDtuKyspUC50ZW1wbGF0ZVN0b3JlLnNldChlW25dLmdldEF0dHJpYnV0ZShcImlkXCIpLGVbbl0udGV4dENvbnRlbnR8fGVbbl0uY29udGVudCl9dCgnc2NyaXB0W3R5cGU9XCJ0ZXh0L29ucy10ZW1wbGF0ZVwiXScpLHQoJ3NjcmlwdFt0eXBlPVwidGV4dC90ZW1wbGF0ZVwiXScpLHQoJ3NjcmlwdFt0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiXScpLHQoXCJ0ZW1wbGF0ZVwiKX0pLFAuZ2V0VGVtcGxhdGVIVE1MQXN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsbil7UC53YWl0RE9NQ29udGVudExvYWRlZChmdW5jdGlvbigpe3ZhciBpPVAudGVtcGxhdGVTdG9yZS5nZXQodCk7aWYoaSl7aWYoaSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGUoaSk7dmFyIG89XCJzdHJpbmdcIj09dHlwZW9mIGk/aTppWzFdO3JldHVybiBlKFAubm9ybWFsaXplUGFnZUhUTUwobykpfXZhciByPXdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KTtpZihyKXt2YXIgYT1yLnRleHRDb250ZW50fHxyLmNvbnRlbnQ7cmV0dXJuIGUoYSl9dmFyIHM9bmV3IFhNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIkdFVFwiLHQsITApLHMub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGk9cy5yZXNwb25zZVRleHQ7aWYocy5zdGF0dXM+PTQwMCYmcy5zdGF0dXM8NjAwKW4oaSk7ZWxzZXt2YXIgbz1RLmNyZWF0ZUZyYWdtZW50KGkpO1EuYXJyYXlGcm9tKG8ucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2UudHlwZT10LnR5cGV8fFwidGV4dC9qYXZhc2NyaXB0XCIsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0LnRleHR8fHQudGV4dENvbnRlbnR8fHQuaW5uZXJIVE1MKSksdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLHQpfSksUC50ZW1wbGF0ZVN0b3JlLnNldCh0LG8pLGUobyl9fSxzLm9uZXJyb3I9ZnVuY3Rpb24oKXtRLnRocm93KFwiUGFnZSB0ZW1wbGF0ZSBub3QgZm91bmQ6IFwiK3QpfSxzLnNlbmQobnVsbCl9KX0pfSxQLmdldFBhZ2VIVE1MQXN5bmM9ZnVuY3Rpb24odCl7dmFyIGU9Uy5ldmFsdWF0ZSh0KTtyZXR1cm4gZnVuY3Rpb24gdChuKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Ygbj9Qcm9taXNlLnJlamVjdChcIk11c3Qgc3BlY2lmeSBhIHBhZ2UuXCIpOlAuZ2V0VGVtcGxhdGVIVE1MQXN5bmMobikuY2F0Y2goZnVuY3Rpb24obil7cmV0dXJuIDA9PT1lLmxlbmd0aD9Qcm9taXNlLnJlamVjdChuKTp0KGUuc2hpZnQoKSl9KX0oZS5zaGlmdCgpKX07dmFyIE89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3AodGhpcyx0KSx0aGlzLl9hbmltYXRvcnM9ZS5hbmltYXRvcnMsdGhpcy5fYmFzZUNsYXNzPWUuYmFzZUNsYXNzLHRoaXMuX2Jhc2VDbGFzc05hbWU9ZS5iYXNlQ2xhc3NOYW1lfHxlLmJhc2VDbGFzcy5uYW1lLHRoaXMuX2FuaW1hdGlvbj1lLmRlZmF1bHRBbmltYXRpb258fFwiZGVmYXVsdFwiLHRoaXMuX2FuaW1hdGlvbk9wdGlvbnM9ZS5kZWZhdWx0QW5pbWF0aW9uT3B0aW9uc3x8e30sdGhpcy5fYW5pbWF0b3JzW3RoaXMuX2FuaW1hdGlvbl18fFEudGhyb3coXCJObyBzdWNoIGFuaW1hdGlvbjogXCIrdGhpcy5fYW5pbWF0aW9uKX1yZXR1cm4gZyh0LFt7a2V5Olwic2V0QW5pbWF0aW9uT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2FuaW1hdGlvbk9wdGlvbnM9dH19LHtrZXk6XCJuZXdBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGU9YXJndW1lbnRzWzFdLG49bnVsbDtpZih0LmFuaW1hdGlvbiBpbnN0YW5jZW9mIHRoaXMuX2Jhc2VDbGFzcylyZXR1cm4gdC5hbmltYXRpb247dmFyIGk9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgdC5hbmltYXRpb24mJihpPXRoaXMuX2FuaW1hdG9yc1t0LmFuaW1hdGlvbl0pLCFpJiZlKW49ZTtlbHNle2k9aXx8dGhpcy5fYW5pbWF0b3JzW3RoaXMuX2FuaW1hdGlvbl07dmFyIG89US5leHRlbmQoe30sdGhpcy5fYW5pbWF0aW9uT3B0aW9ucyx0LmFuaW1hdGlvbk9wdGlvbnN8fHt9LFAuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD97ZHVyYXRpb246MCxkZWxheTowfTp7fSk7XCJmdW5jdGlvblwiPT10eXBlb2Yobj1uZXcgaShvKSkmJihuPW5ldyBuKG8pKX1yZXR1cm4gbiBpbnN0YW5jZW9mIHRoaXMuX2Jhc2VDbGFzc3x8US50aHJvdygnXCJhbmltYXRvclwiIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiAnK3RoaXMuX2Jhc2VDbGFzc05hbWUpLG59fV0sW3trZXk6XCJwYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt0cnl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPVEuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKHQpO2lmKFwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZudWxsIT09ZSlyZXR1cm4gZTtjb25zb2xlLmVycm9yKCdcImFuaW1hdGlvbi1vcHRpb25zXCIgYXR0cmlidXRlIG11c3QgYmUgYSBKU09OIG9iamVjdCBzdHJpbmc6ICcrdCl9cmV0dXJue319Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1wiYW5pbWF0aW9uLW9wdGlvbnNcIiBhdHRyaWJ1dGUgbXVzdCBiZSBhIEpTT04gb2JqZWN0IHN0cmluZzogJyt0KSx7fX19fV0pLHR9KCkseD0hMCxUPXtxdWlldDpcIm1hdGVyaWFsLS1mbGF0XCIsbGlnaHQ6XCJtYXRlcmlhbC0tZmxhdFwiLG91dGxpbmU6XCJtYXRlcmlhbC0tZmxhdFwiLGN0YTpcIlwiLFwibGFyZ2UtLXF1aWV0XCI6XCJtYXRlcmlhbC0tZmxhdCBsYXJnZVwiLFwibGFyZ2UtLWN0YVwiOlwibGFyZ2VcIixub2JvcmRlcjpcIlwiLHRhcHBhYmxlOlwiXCJ9LEw9e307TC5hbmRyb2lkPWZ1bmN0aW9uKHQpe3ZhciBlPXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFRLmhhc01vZGlmaWVyKHQsXCJtYXRlcmlhbFwiKSl7dmFyIG49KHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpLnRyaW0oKS5zcGxpdCgvXFxzKy8pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gVC5oYXNPd25Qcm9wZXJ0eSh0KT9UW3RdOnR9KTtuLnVuc2hpZnQoXCJtYXRlcmlhbFwiKSx0LnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsbi5qb2luKFwiIFwiKS50cmltKCkpfS0xPT09W1wib25zLWFsZXJ0LWRpYWxvZy1idXR0b25cIixcIm9ucy10b29sYmFyLWJ1dHRvblwiLFwib25zLWJhY2stYnV0dG9uXCIsXCJvbnMtYnV0dG9uXCIsXCJvbnMtbGlzdC1pdGVtXCIsXCJvbnMtZmFiXCIsXCJvbnMtc3BlZWQtZGlhbFwiLFwib25zLXNwZWVkLWRpYWwtaXRlbVwiLFwib25zLXRhYlwiXS5pbmRleE9mKGUpfHx0Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKXx8dC5xdWVyeVNlbGVjdG9yKFwib25zLXJpcHBsZVwiKXx8KFwib25zLWxpc3QtaXRlbVwiPT09ZT90Lmhhc0F0dHJpYnV0ZShcInRhcHBhYmxlXCIpJiYodC5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInRhcHBhYmxlXCIpKTp0LnNldEF0dHJpYnV0ZShcInJpcHBsZVwiLFwiXCIpKX0sTC5pb3M9ZnVuY3Rpb24odCl7US5yZW1vdmVNb2RpZmllcih0LFwibWF0ZXJpYWxcIikmJihRLnJlbW92ZU1vZGlmaWVyKHQsXCJtYXRlcmlhbC0tZmxhdFwiKSYmUS5hZGRNb2RpZmllcih0LFEucmVtb3ZlTW9kaWZpZXIodCxcImxhcmdlXCIpP1wibGFyZ2UtLXF1aWV0XCI6XCJxdWlldFwiKSx0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpfHx0LnJlbW92ZUF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKSx0Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSYmKFwib25zLWxpc3QtaXRlbVwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQuc2V0QXR0cmlidXRlKFwidGFwcGFibGVcIixcIlwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInJpcHBsZVwiKSl9O3ZhciBNPXthbmRyb2lkOiEwfSxEPWZ1bmN0aW9uKHQsZSl7aWYoeCYmIXQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZS1hdXRvLXN0eWxpbmdcIikpe3ZhciBuPUMuZ2V0TW9iaWxlT1MoKTtpZihMLmhhc093blByb3BlcnR5KG4pJiYoTS5oYXNPd25Qcm9wZXJ0eShuKXx8ZSkpcmV0dXJuIG59cmV0dXJuIG51bGx9LEk9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBEKGUsbik/dC5zcGxpdCgvXFxzKy8pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gVC5oYXNPd25Qcm9wZXJ0eSh0KT9UW3RdOnR9KS5qb2luKFwiIFwiKTp0fSxOPXtpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4geH0sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHg9ITB9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4geD0hMX0scHJlcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPUQodCxlKTtuJiZMW25dKHQpfSxtYXBNb2RpZmllcjpJLGdldFBsYXRmb3JtOkQscmVzdG9yZU1vZGlmaWVyOmZ1bmN0aW9uKHQpe2lmKFwiYW5kcm9pZFwiPT09RCh0KSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIixuPUkoZSx0KTtpZigvKF58XFxzKyltYXRlcmlhbCgkfFxccyspL2kudGVzdChlKXx8KG49XCJtYXRlcmlhbCBcIituKSxuIT09ZSlyZXR1cm4gdC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4udHJpbSgpKSwhMH1yZXR1cm4hMX19LEI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpfXJldHVybiBnKHQsbnVsbCxbe2tleTpcImRpZmZcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGkoZSl7dmFyIG49e307cmV0dXJuIHQuc3BsaXQoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gblt0XT10fSksbn1lPWkoKFwiXCIrZSkudHJpbSgpKSxuPWkoKFwiXCIrbikudHJpbSgpKTt2YXIgbz1PYmplY3Qua2V5cyhlKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gbltlXXx8dC5wdXNoKGUpLHR9LFtdKTtyZXR1cm57YWRkZWQ6T2JqZWN0LmtleXMobikucmVkdWNlKGZ1bmN0aW9uKHQsbil7cmV0dXJuIGVbbl18fHQucHVzaChuKSx0fSxbXSkscmVtb3ZlZDpvfX19LHtrZXk6XCJhcHBseURpZmZUb0NsYXNzTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt0LmFkZGVkLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5yZXBsYWNlKC9cXCovZyx0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmFkZCh0KX0pfSksdC5yZW1vdmVkLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5yZXBsYWNlKC9cXCovZyx0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlbW92ZSh0KX0pfSl9fSx7a2V5OlwiYXBwbHlEaWZmVG9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkpe09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24obyl7Zm9yKHZhciByPSFvfHxRLm1hdGNoKG4sbyk/W25dOkFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChuLnF1ZXJ5U2VsZWN0b3JBbGwobyksZnVuY3Rpb24odCl7cmV0dXJuIVEuZmluZFBhcmVudCh0LG4udGFnTmFtZSxmdW5jdGlvbih0KXtyZXR1cm4gdD09PW59KX0pLGE9MDthPHIubGVuZ3RoO2ErKyl0LmFwcGx5RGlmZlRvQ2xhc3NMaXN0KGUsclthXS5jbGFzc0xpc3QsaVtvXSl9KX19LHtrZXk6XCJvbk1vZGlmaWVyQ2hhbmdlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpLG8pe3QuYXBwbHlEaWZmVG9FbGVtZW50KHQuZGlmZihlLG4pLGksbyksTi5yZXN0b3JlTW9kaWZpZXIoaSl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7dC5hcHBseURpZmZUb0VsZW1lbnQodC5kaWZmKFwiXCIsZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIiksZSxuKX19LHtrZXk6XCJpbml0TW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe3ZhciBpPWUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIik7XCJzdHJpbmdcIj09dHlwZW9mIGkmJnQuYXBwbHlEaWZmVG9FbGVtZW50KHtyZW1vdmVkOltdLGFkZGVkOnQuc3BsaXQoaSl9LGUsbil9fSx7a2V5Olwic3BsaXRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdD9bXTp0LnRyaW0oKS5zcGxpdCgvICsvKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJcIiE9PXR9KX19LHtrZXk6XCJhZGRNb2RpZmllclwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7aWYoZS5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSl7dmFyIGk9dC5zcGxpdChlLmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKTstMT09aS5pbmRleE9mKG4pJiYoaS5wdXNoKG4pLGUuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIixpLmpvaW4oXCIgXCIpKSl9ZWxzZSBlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsbil9fSx7a2V5OlwicmVtb3ZlTW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2lmKGUuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikpe3ZhciBpPXQuc3BsaXQoZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksbz1pLmluZGV4T2Yobik7LTEhPT1vJiYoaS5zcGxpY2UobywxKSxlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSkpfX19XSksdH0oKSxqPXtfcmVhZHk6ITEsX2RvbUNvbnRlbnRMb2FkZWQ6ITEsX29uRE9NQ29udGVudExvYWRlZDpmdW5jdGlvbigpe2ouX2RvbUNvbnRlbnRMb2FkZWQ9ITAsQy5pc1dlYlZpZXcoKT93aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZnVuY3Rpb24oKXtqLl9yZWFkeT0hMH0sITEpOmouX3JlYWR5PSEwfSxhZGRCYWNrQnV0dG9uTGlzdGVuZXI6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2RvbUNvbnRlbnRMb2FkZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGFmdGVyIERPTUNvbnRlbnRMb2FkZWRcIik7dGhpcy5fcmVhZHk/d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJiYWNrYnV0dG9uXCIsdCwhMSk6d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJiYWNrYnV0dG9uXCIsdCwhMSl9KX0scmVtb3ZlQmFja0J1dHRvbkxpc3RlbmVyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9kb21Db250ZW50TG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBET01Db250ZW50TG9hZGVkXCIpO3RoaXMuX3JlYWR5P3dpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpOndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpe3dpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpfSl9fTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe3JldHVybiBqLl9vbkRPTUNvbnRlbnRMb2FkZWQoKX0sITEpO3ZhciBIPXtfc3RvcmU6e30sX2dlbklkOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCsrfX0oKSxzZXQ6ZnVuY3Rpb24odCxlKXt0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCYmdGhpcy5yZW1vdmUodCk7dmFyIG49dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ9SC5fZ2VuSWQoKTt0aGlzLl9zdG9yZVtuXT1lfSxyZW1vdmU6ZnVuY3Rpb24odCl7dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQmJihkZWxldGUgdGhpcy5fc3RvcmVbdC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWRdLGRlbGV0ZSB0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCl9LGdldDpmdW5jdGlvbih0KXtpZih0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCl7dmFyIGU9dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ7aWYoIXRoaXMuX3N0b3JlW2VdKXRocm93IG5ldyBFcnJvcjtyZXR1cm4gdGhpcy5fc3RvcmVbZV19fSxoYXM6ZnVuY3Rpb24odCl7aWYoIXQuZGF0YXNldClyZXR1cm4hMTt2YXIgZT10LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZDtyZXR1cm4hIXRoaXMuX3N0b3JlW2VdfX0sUj1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMuX2lzRW5hYmxlZD0hMSx0aGlzLl9ib3VuZENhbGxiYWNrPXRoaXMuX2NhbGxiYWNrLmJpbmQodGhpcyl9cmV0dXJuIGcodCxbe2tleTpcImVuYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkfHwoai5hZGRCYWNrQnV0dG9uTGlzdGVuZXIodGhpcy5fYm91bmRDYWxsYmFjayksdGhpcy5faXNFbmFibGVkPSEwKX19LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0VuYWJsZWQmJihqLnJlbW92ZUJhY2tCdXR0b25MaXN0ZW5lcih0aGlzLl9ib3VuZENhbGxiYWNrKSx0aGlzLl9pc0VuYWJsZWQ9ITEpfX0se2tleTpcImZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7dC5pbml0RXZlbnQoXCJiYWNrYnV0dG9uXCIsITAsITApLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodCl9fSx7a2V5OlwiX2NhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9kaXNwYXRjaERldmljZUJhY2tCdXR0b25FdmVudCgpfX0se2tleTpcImNyZWF0ZUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSl0aHJvdyBuZXcgRXJyb3IoXCJlbGVtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgSFRNTEVsZW1lbnRcIik7aWYoIShlIGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRnVuY3Rpb25cIik7dmFyIG49e19jYWxsYmFjazplLF9lbGVtZW50OnQsZGlzYWJsZTpmdW5jdGlvbigpe0gucmVtb3ZlKHQpfSxzZXRMaXN0ZW5lcjpmdW5jdGlvbih0KXt0aGlzLl9jYWxsYmFjaz10fSxlbmFibGU6ZnVuY3Rpb24oKXtILnNldCh0LHRoaXMpfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gSC5nZXQodCk9PT10aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7SC5yZW1vdmUodCksdGhpcy5fY2FsbGJhY2s9dGhpcy5fZWxlbWVudD1udWxsfX07cmV0dXJuIG4uZW5hYmxlKCksbn19LHtrZXk6XCJfZGlzcGF0Y2hEZXZpY2VCYWNrQnV0dG9uRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cmV0dXJue19lbGVtZW50OmUsY2FsbFBhcmVudEhhbmRsZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlO2U7KXtpZihpPUguZ2V0KGUpKXJldHVybiBpLl9jYWxsYmFjayh0KGUpKTtlPWUucGFyZW50Tm9kZX19fX12YXIgZT10aGlzLl9jYXB0dXJlVHJlZSgpLG49dGhpcy5fZmluZEhhbmRsZXJMZWFmRWxlbWVudChlKSxpPUguZ2V0KG4pO2kuX2NhbGxiYWNrKHQobikpfX0se2tleTpcIl9jYXB0dXJlVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj17ZWxlbWVudDplLGNoaWxkcmVuOkFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyllLnB1c2godFtuXSk7cmV0dXJuIGV9KGUuY2hpbGRyZW4pLm1hcChmdW5jdGlvbihlKXtpZihcIm5vbmVcIj09PWUuc3R5bGUuZGlzcGxheXx8ITE9PT1lLl9pc1Nob3duKXJldHVybltdO2lmKDA9PT1lLmNoaWxkcmVuLmxlbmd0aCYmIUguaGFzKGUpKXJldHVybltdO3ZhciBuPXQoZSk7cmV0dXJuIDAhPT1uLmNoaWxkcmVuLmxlbmd0aHx8SC5oYXMobi5lbGVtZW50KT9bbl06W119KSl9O2lmKCFILmhhcyhuLmVsZW1lbnQpKWZvcih2YXIgaT0wO2k8bi5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgbz1uLmNoaWxkcmVuW2ldO2lmKEguaGFzKG8uZWxlbWVudCkpcmV0dXJuIG99cmV0dXJuIG59cmV0dXJuIHQoZG9jdW1lbnQuYm9keSl9fSx7a2V5OlwiX2ZpbmRIYW5kbGVyTGVhZkVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiAwPT09dC5jaGlsZHJlbi5sZW5ndGg/dC5lbGVtZW50OjE9PT10LmNoaWxkcmVuLmxlbmd0aD9lKHQuY2hpbGRyZW5bMF0pOnQuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVsZW1lbnR9KS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gZTt2YXIgbj1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LFwiXCIpLnpJbmRleCwxMCksaT1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLFwiXCIpLnpJbmRleCwxMCk7aWYoIWlzTmFOKG4pJiYhaXNOYU4oaSkpcmV0dXJuIG4+aT90OmU7dGhyb3cgbmV3IEVycm9yKFwiQ2FwdHVyaW5nIGJhY2tidXR0b24taGFuZGxlciBpcyBmYWlsdXJlLlwiKX0sbnVsbCl9cmV0dXJuIGUodCl9fV0pLHR9KCkpO1AuQW5pbWF0b3JGYWN0b3J5PU8sUC5Nb2RpZmllclV0aWw9QixQLmRiYkRpc3BhdGNoZXI9Ujt2YXIgRj1mdW5jdGlvbih0LGUpe3JldHVybiB0LnN1YnN0cigwLGUubGVuZ3RoKT09PWV9LHE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHIodC5sZW5ndGgtZS5sZW5ndGgsZS5sZW5ndGgpPT09ZX0sej1mdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZSgxLC0xKX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwie1wiKSYmcSh0LFwifVwiKX0sVz1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwiW1wiKSYmcSh0LFwiXVwiKX0sVT1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwiJ1wiKSYmcSh0LFwiJ1wiKXx8Rih0LCdcIicpJiZxKHQsJ1wiJyl9LFg9ZnVuY3Rpb24odCxlLG4pe3Rocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdG9rZW4gJ1wiK3QrXCInIGF0IHBvc2l0aW9uIFwiKyhuLmxlbmd0aC1lLmxlbmd0aC0xKStcIiBpbiBzdHJpbmc6ICdcIituK1wiJ1wiKX0sWT1mdW5jdGlvbih0LGUsbil7cmV0dXJuXCJ0cnVlXCI9PT10fHxcImZhbHNlXCI9PT10P1widHJ1ZVwiPT09dDpVKHQpP3oodCk6aXNOYU4odCk/Vih0KT8kKHoodCkpOlcodCk/Syh6KHQpKTp2b2lkIFgodCxlLG4pOit0fSxHPWZ1bmN0aW9uKHQpe3ZhciBlPSh0PXQudHJpbSgpKS5sZW5ndGg7aWYoXCI6XCI9PT10WzBdfHxcIixcIj09PXRbMF0pZT0xO2Vsc2UgaWYoXCJ7XCI9PT10WzBdfHxcIltcIj09PXRbMF0pe2Zvcih2YXIgbj10LmNoYXJDb2RlQXQoMCksaT0xLG89MTtvPHQubGVuZ3RoO28rKylpZih0LmNoYXJDb2RlQXQobyk9PT1uKWkrKztlbHNlIGlmKHQuY2hhckNvZGVBdChvKT09PW4rMiYmMD09LS1pKXtlPW8rMTticmVha319ZWxzZSBpZihcIidcIj09PXRbMF18fCdcIic9PT10WzBdKXtmb3IodmFyIHI9MTtyPHQubGVuZ3RoO3IrKylpZih0W3JdPT09dFswXSl7ZT1yKzE7YnJlYWt9fWVsc2UgZm9yKHZhciBhPTE7YTx0Lmxlbmd0aDthKyspaWYoLTEhPT1bXCIgXCIsXCIsXCIsXCI6XCJdLmluZGV4T2YodFthXSkpe2U9YTticmVha31yZXR1cm4gdC5zbGljZSgwLGUpfSwkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10PXQudHJpbSgpLG49e30saT0hMCxvPXZvaWQgMCxyPXZvaWQgMCxhPXZvaWQgMDt0Lmxlbmd0aD4wOylpZihyPWEsYT1HKHQpLHQ9dC5zbGljZShhLmxlbmd0aCx0Lmxlbmd0aCkudHJpbSgpLFwiOlwiPT09YSYmKCFpfHwhcnx8XCIsXCI9PT1yKXx8XCIsXCI9PT1hJiZpfHxcIjpcIiE9PWEmJlwiLFwiIT09YSYmciYmXCIsXCIhPT1yJiZcIjpcIiE9PXIpWChhLHQsZSk7ZWxzZSBpZihcIjpcIj09PWEmJmkmJnIpe2lmKHI9VShyKT96KHIpOnIsIWZ1bmN0aW9uKHQpe3JldHVybi9eW0EtWl8kXVtBLVowLTlfJF0qJC9pLnRlc3QodCl9KHIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQga2V5IHRva2VuICdcIityK1wiJyBhdCBwb3NpdGlvbiAwIGluIHN0cmluZzogJ1wiK2UrXCInXCIpO289cixpPSExfWVsc2VcIixcIj09PWEmJiFpJiZyJiYobltvXT1ZKHIsdCxlKSxpPSEwKTtyZXR1cm4gYSYmKG5bb109WShhLHQsZSkpLG59LEs9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQ9dC50cmltKCksbj1bXSxpPXZvaWQgMCxvPXZvaWQgMDt0Lmxlbmd0aD4wOylpPW8sbz1HKHQpLHQ9dC5zbGljZShvLmxlbmd0aCx0Lmxlbmd0aCkudHJpbSgpLFwiLFwiIT09b3x8aSYmXCIsXCIhPT1pP1wiLFwiPT09byYmbi5wdXNoKFkoaSx0LGUpKTpYKG8sdCxlKTtyZXR1cm4gbyYmKFwiLFwiIT09bz9uLnB1c2goWShvLHQsZSkpOlgobyx0LGUpKSxufSxRPXt9LEo9XCJbT25zZW4gVUldXCI7US5nbG9iYWxzPXtmYWJPZmZzZXQ6MCxlcnJvclByZWZpeDpKLHN1cHBvcnRzUGFzc2l2ZTohMX0sQy5fcnVuT25BY3R1YWxQbGF0Zm9ybShmdW5jdGlvbigpe1EuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUz1DLmdldE1vYmlsZU9TKCksUS5nbG9iYWxzLmlzVUlXZWJWaWV3PUMuaXNVSVdlYlZpZXcoKSxRLmdsb2JhbHMuaXNXS1dlYlZpZXc9Qy5pc1dLV2ViVmlldygpfSk7dHJ5e3ZhciBaPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7US5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT0hMH19KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsbnVsbCxaKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsbnVsbCxaKX1jYXRjaCh0KXt9US5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxuLGksbyl7dC5hZGRFdmVudExpc3RlbmVyKGUsbixRLmdsb2JhbHMuc3VwcG9ydHNQYXNzaXZlP2k6KGl8fHt9KS5jYXB0dXJlKX0sUS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxuLGksbyl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbixRLmdsb2JhbHMuc3VwcG9ydHNQYXNzaXZlP2k6KGl8fHt9KS5jYXB0dXJlKX0sUS5wcmVwYXJlUXVlcnk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90OmZ1bmN0aW9uKGUpe3JldHVybiBRLm1hdGNoKGUsdCl9fSxRLm1hdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9LFEuZmluZENoaWxkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVEucHJlcGFyZVF1ZXJ5KGUpLGk9MDtpPHQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgbz10LmNoaWxkTm9kZXNbaV07aWYoby5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFJiZuKG8pKXJldHVybiBvfXJldHVybiBudWxsfSxRLmZpbmRQYXJlbnQ9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1RLnByZXBhcmVRdWVyeShlKSxvPXQucGFyZW50Tm9kZTs7KXtpZighb3x8bz09PWRvY3VtZW50fHxvIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudHx8biYmbihvKSlyZXR1cm4gbnVsbDtpZihpKG8pKXJldHVybiBvO289by5wYXJlbnROb2RlfX0sUS5pc0F0dGFjaGVkPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHQpfSxRLmhhc0FueUNvbXBvbmVudEFzUGFyZW50PWZ1bmN0aW9uKHQpe2Zvcig7dCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IT09dDspaWYoKHQ9dC5wYXJlbnROb2RlKSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC8ob25zLW5hdmlnYXRvcnxvbnMtdGFiYmFyfG9ucy1tb2RhbCkvKSlyZXR1cm4hMDtyZXR1cm4hMX0sUS5nZXRBbGxDaGlsZE5vZGVzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybihlPVt0XSkuY29uY2F0LmFwcGx5KGUsdyhBcnJheS5mcm9tKHQuY2hpbGRyZW4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gUS5nZXRBbGxDaGlsZE5vZGVzKHQpfSkpKX0sUS5pc1BhZ2VDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm5vZGVOYW1lLm1hdGNoKC9eb25zLShuYXZpZ2F0b3J8c3BsaXR0ZXJ8dGFiYmFyfHBhZ2UpJC9pKX0sUS5wcm9wYWdhdGVBY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQuY2hpbGROb2Rlcy5sZW5ndGg7bisrKXt2YXIgaT10LmNoaWxkTm9kZXNbbl07aVtlXWluc3RhbmNlb2YgRnVuY3Rpb24/aVtlXSgpOlEucHJvcGFnYXRlQWN0aW9uKGksZSl9fSxRLmNhbWVsaXplPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbih0LGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KX0sUS5oeXBoZW5hdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvKFthLXpBLVpdKShbQS1aXSkvZyxcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCl9LFEuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwiXCIsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj10LnNwbGl0KFwiLlwiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobi5zaGlmdCgpfHxcImRpdlwiKTtyZXR1cm4gbi5sZW5ndGgmJihpLmNsYXNzTmFtZT1uLmpvaW4oXCIgXCIpKSxkKGksZSksaX0sUS5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQ/ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5pbXBvcnROb2RlKHQsITApKTplLmlubmVySFRNTD10LnRyaW0oKSxlLmNoaWxkcmVuLmxlbmd0aD4xJiZRLnRocm93KFwiSFRNTCB0ZW1wbGF0ZSBtdXN0IGNvbnRhaW4gYSBzaW5nbGUgcm9vdCBlbGVtZW50XCIpO3ZhciBuPWUuY2hpbGRyZW5bMF07cmV0dXJuIGUuY2hpbGRyZW5bMF0ucmVtb3ZlKCksbn0sUS5jcmVhdGVGcmFnbWVudD1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7cmV0dXJuIGUuaW5uZXJIVE1MPXQsZG9jdW1lbnQuaW1wb3J0Tm9kZShlLmNvbnRlbnQsITApfSxRLmV4dGVuZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKylpZihuW29dKWZvcih2YXIgcj1PYmplY3Qua2V5cyhuW29dKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBzPXJbYV07dFtzXT1uW29dW3NdfXJldHVybiB0fSxRLmFycmF5RnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KHQpfSxRLnBhcnNlSlNPTk9iamVjdFNhZmVseT1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307dHJ5e3ZhciBuPUpTT04ucGFyc2UoXCJcIit0KTtpZihcIm9iamVjdFwiPT09KHZvaWQgMD09PW4/XCJ1bmRlZmluZWRcIjpmKG4pKSYmbnVsbCE9PW4pcmV0dXJuIG59Y2F0Y2godCl7cmV0dXJuIGV9cmV0dXJuIGV9LFEuZmluZEZyb21QYXRoPWZ1bmN0aW9uKHQpe3Q9dC5zcGxpdChcIi5cIik7Zm9yKHZhciBlLG49d2luZG93O2U9dC5zaGlmdCgpOyluPW5bZV07cmV0dXJuIG59LFEuZ2V0VG9wUGFnZT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmKFwib25zLXBhZ2VcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP3Q6dC50b3BQYWdlKXx8bnVsbH0sUS5maW5kVG9vbGJhclBhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9US5nZXRUb3BQYWdlKHQpO2lmKGUpe2lmKGUuX2NhbkFuaW1hdGVUb29sYmFyKCkpcmV0dXJuIGU7Zm9yKHZhciBuPTA7bjxlLl9jb250ZW50RWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgaT1RLmdldFRvcFBhZ2UoZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW5bbl0pO2lmKGkmJiEvb25zLXRhYmJhci9pLnRlc3QoZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW5bbl0udGFnTmFtZSkpcmV0dXJuIFEuZmluZFRvb2xiYXJQYWdlKGkpfX1yZXR1cm4gbnVsbH0sUS50cmlnZ2VyRWxlbWVudEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LGk9bmV3IEN1c3RvbUV2ZW50KGUse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxkZXRhaWw6bn0pO3JldHVybiBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lbdF09blt0XX0pLHQuZGlzcGF0Y2hFdmVudChpKSxpfSxRLmhhc01vZGlmaWVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0Lmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpJiZSZWdFeHAoXCIoXnxcXFxccyspXCIrZStcIigkfFxcXFxzKylcIixcImlcIikudGVzdCh0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKX0sUS5hZGRNb2RpZmllcj1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtyZXR1cm4gbi5hdXRvU3R5bGUmJihlPU4ubWFwTW9kaWZpZXIoZSx0LG4uZm9yY2VBdXRvU3R5bGUpKSwhUS5oYXNNb2RpZmllcih0LGUpJiYodC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLCgodC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIikrXCIgXCIrZSkudHJpbSgpKSwhMCl9LFEucmVtb3ZlTW9kaWZpZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307aWYobi5hdXRvU3R5bGUmJihlPU4ubWFwTW9kaWZpZXIoZSx0LG4uZm9yY2VBdXRvU3R5bGUpKSwhdC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8IVEuaGFzTW9kaWZpZXIodCxlKSlyZXR1cm4hMTt2YXIgaT10LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpLnNwbGl0KC9cXHMrLykuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0IT09ZX0pO3JldHVybiBpLmxlbmd0aD90LnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSk6dC5yZW1vdmVBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSwhMH0sUS50b2dnbGVNb2RpZmllcj1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHMubGVuZ3RoPD0yP3ZvaWQgMDphcmd1bWVudHNbMl06e30sZT1cImJvb2xlYW5cIj09dHlwZW9mIHQ/dDp0LmZvcmNlOyhcImJvb2xlYW5cIj09dHlwZW9mIGU/ZTohUS5oYXNNb2RpZmllci5hcHBseShRLGFyZ3VtZW50cykpP1EuYWRkTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpOlEucmVtb3ZlTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpfSxRLnJlc3RvcmVDbGFzcz1mdW5jdGlvbih0LGUsbil7ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWUmJiF0LmNsYXNzTGlzdC5jb250YWlucyhlKSYmdC5jbGFzc0xpc3QuYWRkKGUpfSksdC5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmQi5yZWZyZXNoKHQsbil9LFEudXBkYXRlUGFyZW50UG9zaXRpb249ZnVuY3Rpb24odCl7IXQuX3BhcmVudFVwZGF0ZWQmJnQucGFyZW50RWxlbWVudCYmKFwic3RhdGljXCI9PT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LnBhcmVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoXCJwb3NpdGlvblwiKSYmKHQucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLHQuX3BhcmVudFVwZGF0ZWQ9ITApfSxRLnRvZ2dsZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUsbil7bj90LnNldEF0dHJpYnV0ZShlLFwiYm9vbGVhblwiPT10eXBlb2Ygbj9cIlwiOm4pOnQucmVtb3ZlQXR0cmlidXRlKGUpfSxRLmJpbmRMaXN0ZW5lcnM9ZnVuY3Rpb24odCxlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5yZXBsYWNlKC9eX1thLXpdLyxcIl9ib3VuZFwiK2VbMV0udG9VcHBlckNhc2UoKSk7dFtuXT10W25dfHx0W2VdLmJpbmQodCl9KX0sUS5lYWNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7cmV0dXJuIGUobix0W25dKX0pfSxRLnVwZGF0ZVJpcHBsZT1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTt2b2lkIDA9PT1lJiYoZT10Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSk7dmFyIGk9US5maW5kQ2hpbGQodCxcIm9ucy1yaXBwbGVcIik7aWYoZSl7aWYoIWkpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtcmlwcGxlXCIpO09iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG8uc2V0QXR0cmlidXRlKHQsblt0XSl9KSx0Lmluc2VydEJlZm9yZShvLHQuZmlyc3RDaGlsZCl9fWVsc2UgaSYmaS5yZW1vdmUoKX0sUS5hbmltYXRpb25PcHRpb25zUGFyc2U9ZnVuY3Rpb24odCl7aWYodD10LnRyaW0oKSxWKHQpKXJldHVybiAkKHoodCkpO2lmKFcodCkpcmV0dXJuIEsoeih0KSk7dGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZWQgc3RyaW5nIG11c3QgYmUgb2JqZWN0IG9yIGFycmF5IGxpa2U6IFwiK3QpfSxRLmlzSW50ZWdlcj1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaXNGaW5pdGUodCkmJk1hdGguZmxvb3IodCk9PT10fSxRLmRlZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihlLG4pe3QucmVzb2x2ZT1lLHQucmVqZWN0PW59KSx0fSxRLndhcm49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO2lmKCFQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkKXt2YXIgaTsoaT1jb25zb2xlKS53YXJuLmFwcGx5KGksW0pdLmNvbmNhdChlKSl9fSxRLnRocm93PWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihKK1wiIFwiK3QpfSxRLnRocm93QWJzdHJhY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gUS50aHJvdyhcIkNhbm5vdCBpbnN0YW50aWF0ZSBhYnN0cmFjdCBjbGFzc1wiKX0sUS50aHJvd01lbWJlcj1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiQ2xhc3MgbWVtYmVyIG11c3QgYmUgaW1wbGVtZW50ZWRcIil9LFEudGhyb3dQYWdlTG9hZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJGaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIGFuIGluc3RhbmNlIG9mIFBhZ2VMb2FkZXJcIil9LFEudGhyb3dBbmltYXRvcj1mdW5jdGlvbih0KXtyZXR1cm4gUS50aHJvdygnXCJBbmltYXRvclwiIHBhcmFtIG11c3QgaW5oZXJpdCAnK3QrXCJBbmltYXRvclwiKX07dmFyIHR0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKX07US5pb3NQcmV2ZW50U2Nyb2xsPWZ1bmN0aW9uKHQpe2lmKFwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1Mpe3Qub24oXCJ0b3VjaG1vdmVcIix0dCksdC5vbihcImRyYWdlbmRcIixmdW5jdGlvbiBlKG4pe3Qub2ZmKFwidG91Y2htb3ZlXCIsdHQpLHQub2ZmKFwiZHJhZ2VuZFwiLGUpfSl9fSxRLmlvc1BhZ2VTY3JvbGxGaXg9ZnVuY3Rpb24odCl7XCJpb3NcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUyYmKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1pb3Mtc2Nyb2xsXCIsdCksUS5nbG9iYWxzLmlzVUlXZWJWaWV3JiYhUC5jb25maWcuZm9yY2VVSVdlYlZpZXdTY3JvbGxGaXh8fGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1pb3Mtc2Nyb2xsLWZpeFwiLHQpKX0sUS5pb3NNYXNrU2Nyb2xsRml4PWZ1bmN0aW9uKHQsZSl7aWYoUS5nbG9iYWxzLmlzVUlXZWJWaWV3KXt0WyhlP1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCJdKFwidG91Y2htb3ZlXCIsdHQsITEpfX0sUS5pc1ZhbGlkR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dC5nZXN0dXJlJiYodC5nZXN0dXJlLmRpc3RhbmNlPD0xNXx8dC5nZXN0dXJlLmRlbHRhVGltZTw9MTAwKX0sUS5jaGVja01pc3NpbmdJbXBvcnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO2UuZm9yRWFjaChmdW5jdGlvbih0KXtjW3RdfHxRLnRocm93KFwiT25zXCIrdCtcIiBpcyByZXF1aXJlZCBidXQgd2FzIG5vdCBpbXBvcnRlZCAoQ3VzdG9tIEVsZW1lbnRzKVwiKX0pfTt2YXIgZXQ9e307ZXQuY2FwaXRhbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpfSxldC5idWlsZFRyYW5zaXRpb25WYWx1ZT1mdW5jdGlvbih0KXt0LnByb3BlcnR5PXQucHJvcGVydHl8fFwiYWxsXCIsdC5kdXJhdGlvbj10LmR1cmF0aW9ufHwuNCx0LnRpbWluZz10LnRpbWluZ3x8XCJsaW5lYXJcIjtyZXR1cm4gdC5wcm9wZXJ0eS5zcGxpdCgvICsvKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUrXCIgXCIrdC5kdXJhdGlvbitcInMgXCIrdC50aW1pbmd9KS5qb2luKFwiLCBcIil9LGV0Lm9uY2VPblRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gZnVuY3Rpb24oKXt9O3ZhciBuPWZ1bmN0aW9uKG4pe3Q9PW4udGFyZ2V0JiYobi5zdG9wUHJvcGFnYXRpb24oKSxpKCksZSgpKX0saT1mdW5jdGlvbigpe2V0Ll90cmFuc2l0aW9uRW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbiwhMSl9KX07cmV0dXJuIGV0Ll90cmFuc2l0aW9uRW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5hZGRFdmVudExpc3RlbmVyKGUsbiwhMSl9KSxpfSxldC5fdHJhbnNpdGlvbkVuZEV2ZW50cz1cIm9udHJhbnNpdGlvbmVuZFwiaW4gd2luZG93P1tcInRyYW5zaXRpb25lbmRcIl06XCJvbndlYmtpdHRyYW5zaXRpb25lbmRcImluIHdpbmRvdz9bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCJdOlwid2Via2l0XCI9PT1ldC52ZW5kb3JQcmVmaXh8fFwib1wiPT09ZXQudmVuZG9yUHJlZml4fHxcIm1velwiPT09ZXQudmVuZG9yUHJlZml4fHxcIm1zXCI9PT1ldC52ZW5kb3JQcmVmaXg/W2V0LnZlbmRvclByZWZpeCtcIlRyYW5zaXRpb25FbmRcIixcInRyYW5zaXRpb25lbmRcIl06W10sZXQuX2Nzc1Byb3BlcnR5RGljdD1mdW5jdGlvbigpe2Zvcih2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJcIiksZT17fSxuPVwiQVwiLmNoYXJDb2RlQXQoMCksaT1cInpcIi5jaGFyQ29kZUF0KDApLG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIHI9dFtvXS5yZXBsYWNlKC9eWy1dKy8sXCJcIikucmVwbGFjZSgvWy1dW2Etel0vZyxmdW5jdGlvbih0KXtyZXR1cm4gdC5zdWJzdHIoMSkudG9VcHBlckNhc2UoKX0pLnJlcGxhY2UoL15tb3ovLFwiTW96XCIpO248PXIuY2hhckNvZGVBdCgwKSYmaT49ci5jaGFyQ29kZUF0KDApJiZcImNzc1RleHRcIiE9PXImJlwicGFyZW50VGV4dFwiIT09ciYmKGVbcl09ITApfXJldHVybiBlfSgpLGV0Lmhhc0Nzc1Byb3BlcnR5PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluIGV0Ll9jc3NQcm9wZXJ0eURpY3R9LGV0LnZlbmRvclByZWZpeD1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcIlwiKTtyZXR1cm4oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkuam9pbihcIlwiKS5tYXRjaCgvLShtb3p8d2Via2l0fG1zKS0vKXx8XCJcIj09PXQuT0xpbmsmJltcIlwiLFwib1wiXSlbMV19KCksZXQuZm9yY2VMYXlvdXRBdE9uY2U9ZnVuY3Rpb24odCxlKXt0aGlzLmJhdGNoSW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Qub2Zmc2V0SGVpZ2h0fSksZSgpfSl9LGV0LmJhdGNoSW1tZWRpYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIGZ1bmN0aW9uKGUpezA9PT10Lmxlbmd0aCYmc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dmFyIGU9dC5zbGljZSgwKTt0PVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX0pLHQucHVzaChlKX19KCksZXQuYmF0Y2hBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciB0PVtdLGU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7c2V0VGltZW91dCh0LDFlMy82MCl9O3JldHVybiBmdW5jdGlvbihuKXswPT09dC5sZW5ndGgmJmUoZnVuY3Rpb24oKXt2YXIgZT10LnNsaWNlKDApO3Q9W10sZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoKX0pfSksdC5wdXNoKG4pfX0oKSxldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lPWZ1bmN0aW9uKCl7aWYoZXQuaGFzQ3NzUHJvcGVydHkoXCJ0cmFuc2l0aW9uRHVyYXRpb25cIikpcmV0dXJuXCJ0cmFuc2l0aW9uXCI7aWYoZXQuaGFzQ3NzUHJvcGVydHkoZXQudmVuZG9yUHJlZml4K1wiVHJhbnNpdGlvbkR1cmF0aW9uXCIpKXJldHVybiBldC52ZW5kb3JQcmVmaXgrXCJUcmFuc2l0aW9uXCI7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZVwiKX0oKTt2YXIgbnQ9ZnVuY3Rpb24gdChlLG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQpKXJldHVybiBuZXcgdChlLG4pO2lmKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl0aGlzLmVsZW1lbnRzPVtlXTtlbHNle2lmKFwiW29iamVjdCBBcnJheV1cIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIGFycmF5IG9yIGFuIGluc3RhbmNlIG9mIEhUTUxFbGVtZW50LlwiKTt0aGlzLmVsZW1lbnRzPWV9dGhpcy5kZWZhdWx0cz1uLHRoaXMudHJhbnNpdGlvblF1ZXVlPVtdLHRoaXMubGFzdFN0eWxlQXR0cmlidXRlRGljdD1bXX07bnQucHJvdG90eXBlPXt0cmFuc2l0aW9uUXVldWU6dm9pZCAwLGVsZW1lbnRzOnZvaWQgMCxkZWZhdWx0czp2b2lkIDAscGxheTpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKGUpe3QoKSxlKCl9KSx0aGlzLnN0YXJ0QW5pbWF0aW9uKCksdGhpc30sZGVmYXVsdDpmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIHZvaWQgMCE9PXQuZHVyYXRpb24mJihlPXQuZHVyYXRpb24pLHZvaWQgMCE9PXQudGltaW5nJiYobj10LnRpbWluZykse2Nzczp0LmNzc3x8dCxkdXJhdGlvbjplLHRpbWluZzpufX1yZXR1cm4gdGhpcy5zYXZlU3R5bGUoKS5xdWV1ZShpKHQsMCx0aGlzLmRlZmF1bHRzLnRpbWluZykpLndhaXQodm9pZCAwPT09bj90aGlzLmRlZmF1bHRzLmRlbGF5Om4pLnF1ZXVlKGkoZSx0aGlzLmRlZmF1bHRzLmR1cmF0aW9uLHRoaXMuZGVmYXVsdHMudGltaW5nKSkucmVzdG9yZVN0eWxlKCl9LHF1ZXVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy50cmFuc2l0aW9uUXVldWU7aWYodCYmZSYmKGUuY3NzPXQsdD1uZXcgbnQuVHJhbnNpdGlvbihlKSksdCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHx0IGluc3RhbmNlb2YgbnQuVHJhbnNpdGlvbnx8KHQ9bmV3IG50LlRyYW5zaXRpb24odC5jc3M/dDp7Y3NzOnR9KSksdCBpbnN0YW5jZW9mIEZ1bmN0aW9uKW4ucHVzaCh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIG50LlRyYW5zaXRpb24pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzXCIpO24ucHVzaCh0LmJ1aWxkKCkpfXJldHVybiB0aGlzfSx3YWl0OmZ1bmN0aW9uKHQpe3JldHVybiB0PjAmJnRoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDFlMyp0KX0pLHRoaXN9LHNhdmVTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbZV09e30saT0wO2k8dC5zdHlsZS5sZW5ndGg7aSsrKW5bdC5zdHlsZVtpXV09dC5zdHlsZVt0LnN0eWxlW2ldXX0uYmluZCh0aGlzKSksdCgpfS5iaW5kKHRoaXMpKSx0aGlzfSxyZXN0b3JlU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZigodD10fHx7fSkudHJhbnNpdGlvbiYmIXQuZHVyYXRpb24pdGhyb3cgbmV3IEVycm9yKCdcIm9wdGlvbnMuZHVyYXRpb25cIiBpcyByZXF1aXJlZCB3aGVuIFwib3B0aW9ucy50cmFuc2l0aW9uXCIgaXMgZW5hYmxlZC4nKTt2YXIgbj1ldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lO2lmKHQudHJhbnNpdGlvbnx8dC5kdXJhdGlvbiYmdC5kdXJhdGlvbj4wKXt2YXIgaT10LnRyYW5zaXRpb258fFwiYWxsIFwiK3QuZHVyYXRpb24rXCJzIFwiKyh0LnRpbWluZ3x8XCJsaW5lYXJcIik7dGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbihvKXt2YXIgcixhPXRoaXMuZWxlbWVudHMscz1mdW5jdGlvbigpe2EuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0eWxlW25dPVwiXCJ9KX0sbD1ldC5vbmNlT25UcmFuc2l0aW9uRW5kKGFbMF0sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocikscygpLG8oKX0pO3I9c2V0VGltZW91dChmdW5jdGlvbigpe2woKSxzKCksbygpfSwxZTMqdC5kdXJhdGlvbioxLjQpLGEuZm9yRWFjaChmdW5jdGlvbih0LG8pe3ZhciByPWUubGFzdFN0eWxlQXR0cmlidXRlRGljdFtvXTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJyZXN0b3JlU3R5bGUoKTogVGhlIHN0eWxlIGlzIG5vdCBzYXZlZC4gSW52b2tlIHNhdmVTdHlsZSgpIGJlZm9yZS5cIik7ZS5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W29dPXZvaWQgMDtmb3IodmFyIGEscz0wLGw9dC5zdHlsZS5sZW5ndGg7czxsO3MrKylhPXQuc3R5bGVbc10sdm9pZCAwPT09clthXSYmKHJbYV09XCJcIik7dC5zdHlsZVtuXT1pLE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24oZSl7ZSE9PW4mJih0LnN0eWxlW2VdPXJbZV0pfSksdC5zdHlsZVtuXT1pfSl9KX1lbHNlIHRoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24odCl7ZS5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dC5zdHlsZVtuXT1cIm5vbmVcIjt2YXIgbz1lLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbaV07aWYoIW8pdGhyb3cgbmV3IEVycm9yKFwicmVzdG9yZVN0eWxlKCk6IFRoZSBzdHlsZSBpcyBub3Qgc2F2ZWQuIEludm9rZSBzYXZlU3R5bGUoKSBiZWZvcmUuXCIpO2UubGFzdFN0eWxlQXR0cmlidXRlRGljdFtpXT12b2lkIDA7Zm9yKHZhciByPTA7cjx0LnN0eWxlLmxlbmd0aDtyKyspdC5zdHlsZVtyXSx2b2lkIDA9PT1vW3Quc3R5bGVbcl1dJiYob1t0LnN0eWxlW3JdXT1cIlwiKTtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Quc3R5bGVbZV09b1tlXX0pfSksdCgpfSk7cmV0dXJuIHRoaXN9LHN0YXJ0QW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlcXVldWVUcmFuc2l0aW9uKCksdGhpc30sX2RlcXVldWVUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50cmFuc2l0aW9uUXVldWUuc2hpZnQoKTtpZih0aGlzLl9jdXJyZW50VHJhbnNpdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJDdXJyZW50IHRyYW5zaXRpb24gZXhpc3RzLlwiKTt0aGlzLl9jdXJyZW50VHJhbnNpdGlvbj10O3ZhciBlPXRoaXMsbj0hMTt0JiZ0LmNhbGwodGhpcyxmdW5jdGlvbigpe2lmKG4pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZTogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgdHdpY2UuXCIpO249ITAsZS5fY3VycmVudFRyYW5zaXRpb249dm9pZCAwLGUuX2RlcXVldWVUcmFuc2l0aW9uKCl9KX19LG50LnJ1bkFsbD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspYXJndW1lbnRzW3RdLnBsYXkoKX0sKG50LlRyYW5zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPXR8fHt9LHRoaXMub3B0aW9ucy5kdXJhdGlvbj10aGlzLm9wdGlvbnMuZHVyYXRpb258fDAsdGhpcy5vcHRpb25zLnRpbWluZz10aGlzLm9wdGlvbnMudGltaW5nfHxcImxpbmVhclwiLHRoaXMub3B0aW9ucy5jc3M9dGhpcy5vcHRpb25zLmNzc3x8e30sdGhpcy5vcHRpb25zLnByb3BlcnR5PXRoaXMub3B0aW9ucy5wcm9wZXJ0eXx8XCJhbGxcIn0pLnByb3RvdHlwZT17YnVpbGQ6ZnVuY3Rpb24oKXtpZigwPT09T2JqZWN0LmtleXModGhpcy5vcHRpb25zLmNzcykubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm9wdGlvbnMuY3NzIGlzIHJlcXVpcmVkLlwiKTt2YXIgdD1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaT10W25dO2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KG4pKWVbbl09aTtlbHNle3ZhciBvPWV0LnZlbmRvclByZWZpeCtldC5jYXBpdGFsaXplKG4pO2V0Lmhhc0Nzc1Byb3BlcnR5KG8pP2Vbb109aTooZVtvXT1pLGVbbl09aSl9fSksZX0odGhpcy5vcHRpb25zLmNzcyk7aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uPjApe3ZhciBlPWV0LmJ1aWxkVHJhbnNpdGlvblZhbHVlKHRoaXMub3B0aW9ucyksbj10aGlzO3JldHVybiBmdW5jdGlvbihpKXt2YXIgbyxyPXRoaXMuZWxlbWVudHMsYT0xZTMqbi5vcHRpb25zLmR1cmF0aW9uKjEuNCxzPWV0Lm9uY2VPblRyYW5zaXRpb25FbmQoclswXSxmdW5jdGlvbigpe2NsZWFyVGltZW91dChvKSxpKCl9KTtvPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzKCksaSgpfSxhKSxyLmZvckVhY2goZnVuY3Rpb24obil7bi5zdHlsZVtldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lXT1lLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oZSl7bi5zdHlsZVtlXT10W2VdfSl9KX19aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uPD0wKXJldHVybiBmdW5jdGlvbihlKXt2YXIgbj10aGlzLmVsZW1lbnRzO24uZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0eWxlW2V0LnRyYW5zaXRpb25Qcm9wZXJ0eU5hbWVdPVwiXCIsT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXtlLnN0eWxlW25dPXRbbl19KX0pLG4ubGVuZ3RoPjA/ZXQuZm9yY2VMYXlvdXRBdE9uY2UobixmdW5jdGlvbigpe2V0LmJhdGNoQW5pbWF0aW9uRnJhbWUoZSl9KTpldC5iYXRjaEFuaW1hdGlvbkZyYW1lKGUpfX19O3ZhciBpdCxvdCxydCxhdCxzdD1mdW5jdGlvbiB0KGUsbil7cmV0dXJuIG5ldyB0Lkluc3RhbmNlKGUsbnx8e30pfTtzdC5kZWZhdWx0cz17YmVoYXZpb3I6e3RvdWNoQWN0aW9uOlwicGFuLXlcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fSxzdC5ET0NVTUVOVD1kb2N1bWVudCxzdC5IQVNfUE9JTlRFUkVWRU5UUz1uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWR8fG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLHN0LkhBU19UT1VDSEVWRU5UUz1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93LHN0LklTX01PQklMRT0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkfHNpbGsvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHN0Lk5PX01PVVNFRVZFTlRTPXN0LkhBU19UT1VDSEVWRU5UUyYmc3QuSVNfTU9CSUxFfHxzdC5IQVNfUE9JTlRFUkVWRU5UUyxzdC5DQUxDVUxBVEVfSU5URVJWQUw9MjU7dmFyIGx0PXt9LHV0PXN0LkRJUkVDVElPTl9ET1dOPVwiZG93blwiLGN0PXN0LkRJUkVDVElPTl9MRUZUPVwibGVmdFwiLGh0PXN0LkRJUkVDVElPTl9VUD1cInVwXCIsZHQ9c3QuRElSRUNUSU9OX1JJR0hUPVwicmlnaHRcIixmdD1zdC5QT0lOVEVSX01PVVNFPVwibW91c2VcIixwdD1zdC5QT0lOVEVSX1RPVUNIPVwidG91Y2hcIixndD1zdC5QT0lOVEVSX1BFTj1cInBlblwiLG10PXN0LkVWRU5UX1NUQVJUPVwic3RhcnRcIixfdD1zdC5FVkVOVF9NT1ZFPVwibW92ZVwiLHZ0PXN0LkVWRU5UX0VORD1cImVuZFwiLGJ0PXN0LkVWRU5UX1JFTEVBU0U9XCJyZWxlYXNlXCIseXQ9c3QuRVZFTlRfVE9VQ0g9XCJ0b3VjaFwiO3N0LlJFQURZPSExLHN0LnBsdWdpbnM9c3QucGx1Z2luc3x8e30sc3QuZ2VzdHVyZXM9c3QuZ2VzdHVyZXN8fHt9LG90PXN0LnV0aWxzPXtleHRlbmQ6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSBpbiBlKSFlLmhhc093blByb3BlcnR5KGkpfHx2b2lkIDAhPT10W2ldJiZufHwodFtpXT1lW2ldKTtyZXR1cm4gdH0sb246ZnVuY3Rpb24odCxlLG4saSl7US5hZGRFdmVudExpc3RlbmVyKHQsZSxuLGksITApfSxvZmY6ZnVuY3Rpb24odCxlLG4saSl7US5yZW1vdmVFdmVudExpc3RlbmVyKHQsZSxuLGksITApfSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvO2lmKFwiZm9yRWFjaFwiaW4gdCl0LmZvckVhY2goZSxuKTtlbHNlIGlmKHZvaWQgMCE9PXQubGVuZ3RoKXtmb3IoaT0wLG89dC5sZW5ndGg7aTxvO2krKylpZighMT09PWUuY2FsbChuLHRbaV0saSx0KSlyZXR1cm59ZWxzZSBmb3IoaSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoaSkmJiExPT09ZS5jYWxsKG4sdFtpXSxpLHQpKXJldHVybn0saW5TdHI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pbmRleE9mKGUpPi0xfSxpbkFycmF5OmZ1bmN0aW9uKHQsZSxuKXtpZihuKXtmb3IodmFyIGk9MCxvPXQubGVuZ3RoO2k8bztpKyspaWYoT2JqZWN0LmtleXMoZSkuZXZlcnkoZnVuY3Rpb24obil7cmV0dXJuIHRbaV1bbl09PT1lW25dfSkpcmV0dXJuIGk7cmV0dXJuLTF9aWYodC5pbmRleE9mKXJldHVybiB0LmluZGV4T2YoZSk7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKWlmKHRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfSx0b0FycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDApfSxoYXNQYXJlbnQ6ZnVuY3Rpb24odCxlKXtmb3IoO3Q7KXtpZih0PT1lKXJldHVybiEwO3Q9dC5wYXJlbnROb2RlfXJldHVybiExfSxnZXRDZW50ZXI6ZnVuY3Rpb24odCl7dmFyIGU9W10sbj1bXSxpPVtdLG89W10scj1NYXRoLm1pbixhPU1hdGgubWF4O3JldHVybiAxPT09dC5sZW5ndGg/e3BhZ2VYOnRbMF0ucGFnZVgscGFnZVk6dFswXS5wYWdlWSxjbGllbnRYOnRbMF0uY2xpZW50WCxjbGllbnRZOnRbMF0uY2xpZW50WX06KG90LmVhY2godCxmdW5jdGlvbih0KXtlLnB1c2godC5wYWdlWCksbi5wdXNoKHQucGFnZVkpLGkucHVzaCh0LmNsaWVudFgpLG8ucHVzaCh0LmNsaWVudFkpfSkse3BhZ2VYOihyLmFwcGx5KE1hdGgsZSkrYS5hcHBseShNYXRoLGUpKS8yLHBhZ2VZOihyLmFwcGx5KE1hdGgsbikrYS5hcHBseShNYXRoLG4pKS8yLGNsaWVudFg6KHIuYXBwbHkoTWF0aCxpKSthLmFwcGx5KE1hdGgsaSkpLzIsY2xpZW50WTooci5hcHBseShNYXRoLG8pK2EuYXBwbHkoTWF0aCxvKSkvMn0pfSxnZXRWZWxvY2l0eTpmdW5jdGlvbih0LGUsbil7cmV0dXJue3g6TWF0aC5hYnMoZS90KXx8MCx5Ok1hdGguYWJzKG4vdCl8fDB9fSxnZXRBbmdsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuY2xpZW50WC10LmNsaWVudFgsaT1lLmNsaWVudFktdC5jbGllbnRZO3JldHVybiAxODAqTWF0aC5hdGFuMihpLG4pL01hdGguUEl9LGdldERpcmVjdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyh0LmNsaWVudFgtZS5jbGllbnRYKT49TWF0aC5hYnModC5jbGllbnRZLWUuY2xpZW50WSk/dC5jbGllbnRYLWUuY2xpZW50WD4wP2N0OmR0OnQuY2xpZW50WS1lLmNsaWVudFk+MD9odDp1dH0sZ2V0RGlzdGFuY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmNsaWVudFgtdC5jbGllbnRYLGk9ZS5jbGllbnRZLXQuY2xpZW50WTtyZXR1cm4gTWF0aC5zcXJ0KG4qbitpKmkpfSxnZXRTY2FsZTpmdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD49MiYmZS5sZW5ndGg+PTI/dGhpcy5nZXREaXN0YW5jZShlWzBdLGVbMV0pL3RoaXMuZ2V0RGlzdGFuY2UodFswXSx0WzFdKToxfSxnZXRSb3RhdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD49MiYmZS5sZW5ndGg+PTI/dGhpcy5nZXRBbmdsZShlWzFdLGVbMF0pLXRoaXMuZ2V0QW5nbGUodFsxXSx0WzBdKTowfSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKHQpe3JldHVybiB0PT1odHx8dD09dXR9LHNldFByZWZpeGVkQ3NzOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPVtcIlwiLFwiV2Via2l0XCIsXCJNb3pcIixcIk9cIixcIm1zXCJdO2U9b3QudG9DYW1lbENhc2UoZSk7Zm9yKHZhciByPTA7cjxvLmxlbmd0aDtyKyspe3ZhciBhPWU7aWYob1tyXSYmKGE9b1tyXSthLnNsaWNlKDAsMSkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpKSxhIGluIHQuc3R5bGUpe3Quc3R5bGVbYV09KG51bGw9PT1pfHxpKSYmbnx8XCJcIjticmVha319fSx0b2dnbGVCZWhhdmlvcjpmdW5jdGlvbih0LGUsbil7aWYoZSYmdCYmdC5zdHlsZSl7b3QuZWFjaChlLGZ1bmN0aW9uKGUsaSl7b3Quc2V0UHJlZml4ZWRDc3ModCxpLGUsbil9KTt2YXIgaT1uJiZmdW5jdGlvbigpe3JldHVybiExfTtcIm5vbmVcIj09ZS51c2VyU2VsZWN0JiYodC5vbnNlbGVjdHN0YXJ0PWkpLFwibm9uZVwiPT1lLnVzZXJEcmFnJiYodC5vbmRyYWdzdGFydD1pKX19LHRvQ2FtZWxDYXNlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1tfLV0oW2Etel0pL2csZnVuY3Rpb24odCl7cmV0dXJuIHRbMV0udG9VcHBlckNhc2UoKX0pfX0saXQ9c3QuZXZlbnQ9e3ByZXZlbnRNb3VzZUV2ZW50czohMSxzdGFydGVkOiExLHNob3VsZERldGVjdDohMSxvbjpmdW5jdGlvbih0LGUsbixpLG8pe3ZhciByPWUuc3BsaXQoXCIgXCIpO290LmVhY2gocixmdW5jdGlvbihlKXtvdC5vbih0LGUsbixpKSxvJiZvKGUpfSl9LG9mZjpmdW5jdGlvbih0LGUsbixpLG8pe3ZhciByPWUuc3BsaXQoXCIgXCIpO290LmVhY2gocixmdW5jdGlvbihlKXtvdC5vZmYodCxlLG4saSksbyYmbyhlKX0pfSxvblRvdWNoOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMscj1mdW5jdGlvbihpKXt2YXIgcixhPWkudHlwZS50b0xvd2VyQ2FzZSgpLHM9c3QuSEFTX1BPSU5URVJFVkVOVFMsbD1vdC5pblN0cihhLFwibW91c2VcIik7bCYmby5wcmV2ZW50TW91c2VFdmVudHN8fChsJiZlPT1tdCYmMD09PWkuYnV0dG9uPyhvLnByZXZlbnRNb3VzZUV2ZW50cz0hMSxvLnNob3VsZERldGVjdD0hMCk6cyYmZT09bXQ/by5zaG91bGREZXRlY3Q9MT09PWkuYnV0dG9uc3x8YXQubWF0Y2hUeXBlKHB0LGkpOmx8fGUhPW10fHwoby5wcmV2ZW50TW91c2VFdmVudHM9ITAsby5zaG91bGREZXRlY3Q9ITApLHMmJmUhPXZ0JiZhdC51cGRhdGVQb2ludGVyKGUsaSksby5zaG91bGREZXRlY3QmJihyPW8uZG9EZXRlY3QuY2FsbChvLGksZSx0LG4pKSxyPT12dCYmKG8ucHJldmVudE1vdXNlRXZlbnRzPSExLG8uc2hvdWxkRGV0ZWN0PSExLGF0LnJlc2V0KCkpLHMmJmU9PXZ0JiZhdC51cGRhdGVQb2ludGVyKGUsaSkpfTtyZXR1cm4gdGhpcy5vbih0LGx0W2VdLHIsaSkscn0sZG9EZXRlY3Q6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5nZXRUb3VjaExpc3QodCxlKSxyPW8ubGVuZ3RoLGE9ZSxzPW8udHJpZ2dlcixsPXI7ZT09bXQ/cz15dDplPT12dCYmKHM9YnQsbD1vLmxlbmd0aC0odC5jaGFuZ2VkVG91Y2hlcz90LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDoxKSksbD4wJiZ0aGlzLnN0YXJ0ZWQmJihhPV90KSx0aGlzLnN0YXJ0ZWQ9ITA7dmFyIHU9dGhpcy5jb2xsZWN0RXZlbnREYXRhKG4sYSxvLHQpO3JldHVybiBlIT12dCYmaS5jYWxsKHJ0LHUpLHMmJih1LmNoYW5nZWRMZW5ndGg9bCx1LmV2ZW50VHlwZT1zLGkuY2FsbChydCx1KSx1LmV2ZW50VHlwZT1hLGRlbGV0ZSB1LmNoYW5nZWRMZW5ndGgpLGE9PXZ0JiYoaS5jYWxsKHJ0LHUpLHRoaXMuc3RhcnRlZD0hMSksYX0sZGV0ZXJtaW5lRXZlbnRUeXBlczpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PXN0LkhBU19QT0lOVEVSRVZFTlRTP3dpbmRvdy5Qb2ludGVyRXZlbnQ/W1wicG9pbnRlcmRvd25cIixcInBvaW50ZXJtb3ZlXCIsXCJwb2ludGVydXAgcG9pbnRlcmNhbmNlbCBsb3N0cG9pbnRlcmNhcHR1cmVcIl06W1wiTVNQb2ludGVyRG93blwiLFwiTVNQb2ludGVyTW92ZVwiLFwiTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsIE1TTG9zdFBvaW50ZXJDYXB0dXJlXCJdOnN0Lk5PX01PVVNFRVZFTlRTP1tcInRvdWNoc3RhcnRcIixcInRvdWNobW92ZVwiLFwidG91Y2hlbmQgdG91Y2hjYW5jZWxcIl06W1widG91Y2hzdGFydCBtb3VzZWRvd25cIixcInRvdWNobW92ZSBtb3VzZW1vdmVcIixcInRvdWNoZW5kIHRvdWNoY2FuY2VsIG1vdXNldXBcIl0sbHRbbXRdPXRbMF0sbHRbX3RdPXRbMV0sbHRbdnRdPXRbMl0sbHR9LGdldFRvdWNoTGlzdDpmdW5jdGlvbih0LGUpe2lmKHN0LkhBU19QT0lOVEVSRVZFTlRTKXJldHVybiBhdC5nZXRUb3VjaExpc3QoKTtpZih0LnRvdWNoZXMpe2lmKGU9PV90KXJldHVybiB0LnRvdWNoZXM7dmFyIG49W10saT1bXS5jb25jYXQob3QudG9BcnJheSh0LnRvdWNoZXMpLG90LnRvQXJyYXkodC5jaGFuZ2VkVG91Y2hlcykpLG89W107cmV0dXJuIG90LmVhY2goaSxmdW5jdGlvbih0KXstMT09PW90LmluQXJyYXkobix0LmlkZW50aWZpZXIpJiZvLnB1c2godCksbi5wdXNoKHQuaWRlbnRpZmllcil9KSxvfXJldHVybiB0LmlkZW50aWZpZXI9MSxbdF19LGNvbGxlY3RFdmVudERhdGE6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89cHQ7cmV0dXJuIG90LmluU3RyKGkudHlwZSxcIm1vdXNlXCIpfHxhdC5tYXRjaFR5cGUoZnQsaSk/bz1mdDphdC5tYXRjaFR5cGUoZ3QsaSkmJihvPWd0KSx7Y2VudGVyOm90LmdldENlbnRlcihuKSx0aW1lU3RhbXA6RGF0ZS5ub3coKSx0YXJnZXQ6aS50YXJnZXQsdG91Y2hlczpuLGV2ZW50VHlwZTplLHBvaW50ZXJUeXBlOm8sc3JjRXZlbnQ6aSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3JjRXZlbnQ7dC5wcmV2ZW50TWFuaXB1bGF0aW9uJiZ0LnByZXZlbnRNYW5pcHVsYXRpb24oKSx0LnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BEZXRlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gcnQuc3RvcERldGVjdCgpfX19fSxhdD1zdC5Qb2ludGVyRXZlbnQ9e3BvaW50ZXJzOnt9LGdldFRvdWNoTGlzdDpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiBvdC5lYWNoKHRoaXMucG9pbnRlcnMsZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSksdH0sdXBkYXRlUG9pbnRlcjpmdW5jdGlvbih0LGUpe3Q9PXZ0fHx0IT12dCYmMSE9PWUuYnV0dG9ucz9kZWxldGUgdGhpcy5wb2ludGVyc1tlLnBvaW50ZXJJZF06KGUuaWRlbnRpZmllcj1lLnBvaW50ZXJJZCx0aGlzLnBvaW50ZXJzW2UucG9pbnRlcklkXT1lKX0sbWF0Y2hUeXBlOmZ1bmN0aW9uKHQsZSl7aWYoIWUucG9pbnRlclR5cGUpcmV0dXJuITE7dmFyIG49ZS5wb2ludGVyVHlwZSxpPXt9O3JldHVybiBpW2Z0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fGZ0KSxpW3B0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfVE9VQ0h8fHB0KSxpW2d0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfUEVOfHxndCksaVt0XX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnBvaW50ZXJzPXt9fX0scnQ9c3QuZGV0ZWN0aW9uPXtnZXN0dXJlczpbXSxjdXJyZW50Om51bGwscHJldmlvdXM6bnVsbCxzdG9wcGVkOiExLHN0YXJ0RGV0ZWN0OmZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50fHwodGhpcy5zdG9wcGVkPSExLHRoaXMuY3VycmVudD17aW5zdDp0LHN0YXJ0RXZlbnQ6b3QuZXh0ZW5kKHt9LGUpLGxhc3RFdmVudDohMSxsYXN0Q2FsY0V2ZW50OiExLGZ1dHVyZUNhbGNFdmVudDohMSxsYXN0Q2FsY0RhdGE6e30sbmFtZTpcIlwifSx0aGlzLmRldGVjdChlKSl9LGRldGVjdDpmdW5jdGlvbih0KXtpZih0aGlzLmN1cnJlbnQmJiF0aGlzLnN0b3BwZWQpe3Q9dGhpcy5leHRlbmRFdmVudERhdGEodCk7dmFyIGU9dGhpcy5jdXJyZW50Lmluc3Qsbj1lLm9wdGlvbnM7cmV0dXJuIG90LmVhY2godGhpcy5nZXN0dXJlcyxmdW5jdGlvbihpKXshdGhpcy5zdG9wcGVkJiZlLmVuYWJsZWQmJm5baS5uYW1lXSYmaS5oYW5kbGVyLmNhbGwoaSx0LGUpfSx0aGlzKSx0aGlzLmN1cnJlbnQmJih0aGlzLmN1cnJlbnQubGFzdEV2ZW50PXQpLHQuZXZlbnRUeXBlPT12dCYmdGhpcy5zdG9wRGV0ZWN0KCksdH19LHN0b3BEZXRlY3Q6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPW90LmV4dGVuZCh7fSx0aGlzLmN1cnJlbnQpLHRoaXMuY3VycmVudD1udWxsLHRoaXMuc3RvcHBlZD0hMH0sZ2V0Q2FsY3VsYXRlZERhdGE6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj10aGlzLmN1cnJlbnQsYT0hMSxzPXIubGFzdENhbGNFdmVudCxsPXIubGFzdENhbGNEYXRhO3MmJnQudGltZVN0YW1wLXMudGltZVN0YW1wPnN0LkNBTENVTEFURV9JTlRFUlZBTCYmKGU9cy5jZW50ZXIsbj10LnRpbWVTdGFtcC1zLnRpbWVTdGFtcCxpPXQuY2VudGVyLmNsaWVudFgtcy5jZW50ZXIuY2xpZW50WCxvPXQuY2VudGVyLmNsaWVudFktcy5jZW50ZXIuY2xpZW50WSxhPSEwKSx0LmV2ZW50VHlwZSE9eXQmJnQuZXZlbnRUeXBlIT1idHx8KHIuZnV0dXJlQ2FsY0V2ZW50PXQpLHIubGFzdENhbGNFdmVudCYmIWF8fChsLnZlbG9jaXR5PW90LmdldFZlbG9jaXR5KG4saSxvKSxsLmFuZ2xlPW90LmdldEFuZ2xlKGUsdC5jZW50ZXIpLGwuZGlyZWN0aW9uPW90LmdldERpcmVjdGlvbihlLHQuY2VudGVyKSxyLmxhc3RDYWxjRXZlbnQ9ci5mdXR1cmVDYWxjRXZlbnR8fHQsci5mdXR1cmVDYWxjRXZlbnQ9dCksdC52ZWxvY2l0eVg9bC52ZWxvY2l0eS54LHQudmVsb2NpdHlZPWwudmVsb2NpdHkueSx0LmludGVyaW1BbmdsZT1sLmFuZ2xlLHQuaW50ZXJpbURpcmVjdGlvbj1sLmRpcmVjdGlvbn0sZXh0ZW5kRXZlbnREYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3VycmVudCxuPWUuc3RhcnRFdmVudCxpPWUubGFzdEV2ZW50fHxuO3QuZXZlbnRUeXBlIT15dCYmdC5ldmVudFR5cGUhPWJ0fHwobi50b3VjaGVzPVtdLG90LmVhY2godC50b3VjaGVzLGZ1bmN0aW9uKHQpe24udG91Y2hlcy5wdXNoKHtjbGllbnRYOnQuY2xpZW50WCxjbGllbnRZOnQuY2xpZW50WX0pfSkpO3ZhciBvPXQudGltZVN0YW1wLW4udGltZVN0YW1wLHI9dC5jZW50ZXIuY2xpZW50WC1uLmNlbnRlci5jbGllbnRYLGE9dC5jZW50ZXIuY2xpZW50WS1uLmNlbnRlci5jbGllbnRZO3JldHVybiB0aGlzLmdldENhbGN1bGF0ZWREYXRhKHQsaS5jZW50ZXIsbyxyLGEpLG90LmV4dGVuZCh0LHtzdGFydEV2ZW50Om4sZGVsdGFUaW1lOm8sZGVsdGFYOnIsZGVsdGFZOmEsZGlzdGFuY2U6b3QuZ2V0RGlzdGFuY2Uobi5jZW50ZXIsdC5jZW50ZXIpLGFuZ2xlOm90LmdldEFuZ2xlKG4uY2VudGVyLHQuY2VudGVyKSxkaXJlY3Rpb246b3QuZ2V0RGlyZWN0aW9uKG4uY2VudGVyLHQuY2VudGVyKSxzY2FsZTpvdC5nZXRTY2FsZShuLnRvdWNoZXMsdC50b3VjaGVzKSxyb3RhdGlvbjpvdC5nZXRSb3RhdGlvbihuLnRvdWNoZXMsdC50b3VjaGVzKX0pLHR9LHJlZ2lzdGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGVmYXVsdHN8fHt9O3JldHVybiB2b2lkIDA9PT1lW3QubmFtZV0mJihlW3QubmFtZV09ITApLG90LmV4dGVuZChzdC5kZWZhdWx0cyxlLCEwKSx0LmluZGV4PXQuaW5kZXh8fDFlMyx0aGlzLmdlc3R1cmVzLnB1c2godCksdGhpcy5nZXN0dXJlcy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5kZXg8ZS5pbmRleD8tMTp0LmluZGV4PmUuaW5kZXg/MTowfSksdGhpcy5nZXN0dXJlc319LHN0Lkluc3RhbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPWUmJmUucGFzc2l2ZT97cGFzc2l2ZTohMH06dm9pZCAwOyFmdW5jdGlvbih0KXtzdC5SRUFEWXx8KGl0LmRldGVybWluZUV2ZW50VHlwZXMoKSxvdC5lYWNoKHN0Lmdlc3R1cmVzLGZ1bmN0aW9uKHQpe3J0LnJlZ2lzdGVyKHQpfSksaXQub25Ub3VjaChzdC5ET0NVTUVOVCxfdCxydC5kZXRlY3QsdCksaXQub25Ub3VjaChzdC5ET0NVTUVOVCx2dCxydC5kZXRlY3QsdCksc3QuUkVBRFk9ITApfShpKSx0aGlzLmVsZW1lbnQ9dCx0aGlzLmVuYWJsZWQ9ITAsb3QuZWFjaChlLGZ1bmN0aW9uKHQsbil7ZGVsZXRlIGVbbl0sZVtvdC50b0NhbWVsQ2FzZShuKV09dH0pLHRoaXMub3B0aW9ucz1vdC5leHRlbmQob3QuZXh0ZW5kKHt9LHN0LmRlZmF1bHRzKSxlfHx7fSksdGhpcy5vcHRpb25zLmxpc3RlbmVyT3B0aW9ucz1pLHRoaXMub3B0aW9ucy5iZWhhdmlvciYmb3QudG9nZ2xlQmVoYXZpb3IodGhpcy5lbGVtZW50LHRoaXMub3B0aW9ucy5iZWhhdmlvciwhMCksdGhpcy5ldmVudFN0YXJ0SGFuZGxlcj1pdC5vblRvdWNoKHQsbXQsZnVuY3Rpb24odCl7bi5lbmFibGVkJiZ0LmV2ZW50VHlwZT09bXQ/cnQuc3RhcnREZXRlY3Qobix0KTp0LmV2ZW50VHlwZT09eXQmJnJ0LmRldGVjdCh0KX0saSksdGhpcy5ldmVudEhhbmRsZXJzPVtdfSxzdC5JbnN0YW5jZS5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3JldHVybiBpdC5vbihpLmVsZW1lbnQsdCxlLFEuZXh0ZW5kKHt9LGkub3B0aW9ucy5saXN0ZW5lck9wdGlvbnMsbiksZnVuY3Rpb24odCl7aS5ldmVudEhhbmRsZXJzLnB1c2goe2dlc3R1cmU6dCxoYW5kbGVyOmV9KX0pLGl9LG9mZjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztyZXR1cm4gaXQub2ZmKGkuZWxlbWVudCx0LGUsUS5leHRlbmQoe30saS5vcHRpb25zLmxpc3RlbmVyT3B0aW9ucyxuKSxmdW5jdGlvbih0KXt2YXIgbj1vdC5pbkFycmF5KGkuZXZlbnRIYW5kbGVycyx7Z2VzdHVyZTp0LGhhbmRsZXI6ZX0sITApO24+PTAmJmkuZXZlbnRIYW5kbGVycy5zcGxpY2UobiwxKX0pLGl9LHRyaWdnZXI6ZnVuY3Rpb24odCxlKXtlfHwoZT17fSk7dmFyIG49c3QuRE9DVU1FTlQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtuLmluaXRFdmVudCh0LCEwLCEwKSxuLmdlc3R1cmU9ZTt2YXIgaT10aGlzLmVsZW1lbnQ7cmV0dXJuIG90Lmhhc1BhcmVudChlLnRhcmdldCxpKSYmKGk9ZS50YXJnZXQpLGkuZGlzcGF0Y2hFdmVudChuKSx0aGlzfSxlbmFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5hYmxlZD10LHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdCxlO2ZvcihvdC50b2dnbGVCZWhhdmlvcih0aGlzLmVsZW1lbnQsdGhpcy5vcHRpb25zLmJlaGF2aW9yLCExKSx0PS0xO2U9dGhpcy5ldmVudEhhbmRsZXJzWysrdF07KW90Lm9mZih0aGlzLmVsZW1lbnQsZS5nZXN0dXJlLGUuaGFuZGxlcik7cmV0dXJuIHRoaXMuZXZlbnRIYW5kbGVycz1bXSxpdC5vZmYodGhpcy5lbGVtZW50LGx0W210XSx0aGlzLmV2ZW50U3RhcnRIYW5kbGVyKSxudWxsfX0sZnVuY3Rpb24odCl7dmFyIGU9ITE7c3QuZ2VzdHVyZXMuRHJhZz17bmFtZTp0LGluZGV4OjUwLGhhbmRsZXI6ZnVuY3Rpb24obixpKXt2YXIgbz1ydC5jdXJyZW50O2lmKCEoaS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzPjAmJm4udG91Y2hlcy5sZW5ndGg+aS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzKSlzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmlmKG4uZGlzdGFuY2U8aS5vcHRpb25zLmRyYWdNaW5EaXN0YW5jZSYmby5uYW1lIT10KXJldHVybjt2YXIgcj1vLnN0YXJ0RXZlbnQuY2VudGVyO2lmKG8ubmFtZSE9dCYmKG8ubmFtZT10LGkub3B0aW9ucy5kcmFnRGlzdGFuY2VDb3JyZWN0aW9uJiZuLmRpc3RhbmNlPjApKXt2YXIgYT1NYXRoLmFicyhpLm9wdGlvbnMuZHJhZ01pbkRpc3RhbmNlL24uZGlzdGFuY2UpO3IucGFnZVgrPW4uZGVsdGFYKmEsci5wYWdlWSs9bi5kZWx0YVkqYSxyLmNsaWVudFgrPW4uZGVsdGFYKmEsci5jbGllbnRZKz1uLmRlbHRhWSphLG49cnQuZXh0ZW5kRXZlbnREYXRhKG4pfShvLmxhc3RFdmVudC5kcmFnTG9ja1RvQXhpc3x8aS5vcHRpb25zLmRyYWdMb2NrVG9BeGlzJiZpLm9wdGlvbnMuZHJhZ0xvY2tNaW5EaXN0YW5jZTw9bi5kaXN0YW5jZSkmJihuLmRyYWdMb2NrVG9BeGlzPSEwKTt2YXIgcz1vLmxhc3RFdmVudC5kaXJlY3Rpb247bi5kcmFnTG9ja1RvQXhpcyYmcyE9PW4uZGlyZWN0aW9uJiYob3QuaXNWZXJ0aWNhbChzKT9uLmRpcmVjdGlvbj1uLmRlbHRhWTwwP2h0OnV0Om4uZGlyZWN0aW9uPW4uZGVsdGFYPDA/Y3Q6ZHQpLGV8fChpLnRyaWdnZXIodCtcInN0YXJ0XCIsbiksZT0hMCksaS50cmlnZ2VyKHQsbiksaS50cmlnZ2VyKHQrbi5kaXJlY3Rpb24sbik7dmFyIGw9b3QuaXNWZXJ0aWNhbChuLmRpcmVjdGlvbik7KGkub3B0aW9ucy5kcmFnQmxvY2tWZXJ0aWNhbCYmbHx8aS5vcHRpb25zLmRyYWdCbG9ja0hvcml6b250YWwmJiFsKSYmbi5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgYnQ6ZSYmbi5jaGFuZ2VkTGVuZ3RoPD1pLm9wdGlvbnMuZHJhZ01heFRvdWNoZXMmJihpLnRyaWdnZXIodCtcImVuZFwiLG4pLGU9ITEpO2JyZWFrO2Nhc2UgdnQ6ZT0hMX19LGRlZmF1bHRzOntkcmFnTWluRGlzdGFuY2U6MTAsZHJhZ0Rpc3RhbmNlQ29ycmVjdGlvbjohMCxkcmFnTWF4VG91Y2hlczoxLGRyYWdCbG9ja0hvcml6b250YWw6ITEsZHJhZ0Jsb2NrVmVydGljYWw6ITEsZHJhZ0xvY2tUb0F4aXM6ITEsZHJhZ0xvY2tNaW5EaXN0YW5jZToyNX19fShcImRyYWdcIiksc3QuZ2VzdHVyZXMuR2VzdHVyZT17bmFtZTpcImdlc3R1cmVcIixpbmRleDoxMzM3LGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtlLnRyaWdnZXIodGhpcy5uYW1lLHQpfX0sZnVuY3Rpb24odCl7dmFyIGU7c3QuZ2VzdHVyZXMuSG9sZD17bmFtZTp0LGluZGV4OjEwLGRlZmF1bHRzOntob2xkVGltZW91dDo1MDAsaG9sZFRocmVzaG9sZDoyfSxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG89aS5vcHRpb25zLHI9cnQuY3VycmVudDtzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6Y2xlYXJUaW1lb3V0KGUpLHIubmFtZT10LGU9c2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIubmFtZT09dCYmaS50cmlnZ2VyKHQsbil9LG8uaG9sZFRpbWVvdXQpO2JyZWFrO2Nhc2UgX3Q6bi5kaXN0YW5jZT5vLmhvbGRUaHJlc2hvbGQmJmNsZWFyVGltZW91dChlKTticmVhaztjYXNlIGJ0OmNsZWFyVGltZW91dChlKX19fX0oXCJob2xkXCIpLHN0Lmdlc3R1cmVzLlJlbGVhc2U9e25hbWU6XCJyZWxlYXNlXCIsaW5kZXg6MS8wLGhhbmRsZXI6ZnVuY3Rpb24odCxlKXt0LmV2ZW50VHlwZT09YnQmJmUudHJpZ2dlcih0aGlzLm5hbWUsdCl9fSxzdC5nZXN0dXJlcy5Td2lwZT17bmFtZTpcInN3aXBlXCIsaW5kZXg6NDAsZGVmYXVsdHM6e3N3aXBlTWluVG91Y2hlczoxLHN3aXBlTWF4VG91Y2hlczoxLHN3aXBlVmVsb2NpdHlYOi42LHN3aXBlVmVsb2NpdHlZOi42fSxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7aWYodC5ldmVudFR5cGU9PWJ0KXt2YXIgbj10LnRvdWNoZXMubGVuZ3RoLGk9ZS5vcHRpb25zO2lmKG48aS5zd2lwZU1pblRvdWNoZXN8fG4+aS5zd2lwZU1heFRvdWNoZXMpcmV0dXJuOyh0LnZlbG9jaXR5WD5pLnN3aXBlVmVsb2NpdHlYfHx0LnZlbG9jaXR5WT5pLnN3aXBlVmVsb2NpdHlZKSYmKGUudHJpZ2dlcih0aGlzLm5hbWUsdCksZS50cmlnZ2VyKHRoaXMubmFtZSt0LmRpcmVjdGlvbix0KSl9fX0sZnVuY3Rpb24odCl7dmFyIGU9ITE7c3QuZ2VzdHVyZXMuVGFwPXtuYW1lOnQsaW5kZXg6MTAwLGhhbmRsZXI6ZnVuY3Rpb24obixpKXt2YXIgbyxyLGE9aS5vcHRpb25zLHM9cnQuY3VycmVudCxsPXJ0LnByZXZpb3VzO3N3aXRjaChuLmV2ZW50VHlwZSl7Y2FzZSBtdDplPSExO2JyZWFrO2Nhc2UgX3Q6ZT1lfHxuLmRpc3RhbmNlPmEudGFwTWF4RGlzdGFuY2U7YnJlYWs7Y2FzZSB2dDohb3QuaW5TdHIobi5zcmNFdmVudC50eXBlLFwiY2FuY2VsXCIpJiZuLmRlbHRhVGltZTxhLnRhcE1heFRpbWUmJiFlJiYobz1sJiZsLmxhc3RFdmVudCYmbi50aW1lU3RhbXAtbC5sYXN0RXZlbnQudGltZVN0YW1wLHI9ITEsbCYmbC5uYW1lPT10JiZvJiZvPGEuZG91YmxlVGFwSW50ZXJ2YWwmJm4uZGlzdGFuY2U8YS5kb3VibGVUYXBEaXN0YW5jZSYmKGkudHJpZ2dlcihcImRvdWJsZXRhcFwiLG4pLHI9ITApLHImJiFhLnRhcEFsd2F5c3x8KHMubmFtZT10LGkudHJpZ2dlcihzLm5hbWUsbikpKX19LGRlZmF1bHRzOnt0YXBNYXhUaW1lOjI1MCx0YXBNYXhEaXN0YW5jZToxMCx0YXBBbHdheXM6ITAsZG91YmxlVGFwRGlzdGFuY2U6MjAsZG91YmxlVGFwSW50ZXJ2YWw6MzAwfX19KFwidGFwXCIpLHN0Lmdlc3R1cmVzLlRvdWNoPXtuYW1lOlwidG91Y2hcIixpbmRleDotMS8wLGRlZmF1bHRzOntwcmV2ZW50RGVmYXVsdDohMSxwcmV2ZW50TW91c2U6ITF9LGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtlLm9wdGlvbnMucHJldmVudE1vdXNlJiZ0LnBvaW50ZXJUeXBlPT1mdD90LnN0b3BEZXRlY3QoKTooZS5vcHRpb25zLnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCksdC5ldmVudFR5cGU9PXl0JiZlLnRyaWdnZXIoXCJ0b3VjaFwiLHQpKX19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLlRyYW5zZm9ybT17bmFtZTp0LGluZGV4OjQ1LGRlZmF1bHRzOnt0cmFuc2Zvcm1NaW5TY2FsZTouMDEsdHJhbnNmb3JtTWluUm90YXRpb246MX0saGFuZGxlcjpmdW5jdGlvbihuLGkpe3N3aXRjaChuLmV2ZW50VHlwZSl7Y2FzZSBtdDplPSExO2JyZWFrO2Nhc2UgX3Q6aWYobi50b3VjaGVzLmxlbmd0aDwyKXJldHVybjt2YXIgbz1NYXRoLmFicygxLW4uc2NhbGUpLHI9TWF0aC5hYnMobi5yb3RhdGlvbik7aWYobzxpLm9wdGlvbnMudHJhbnNmb3JtTWluU2NhbGUmJnI8aS5vcHRpb25zLnRyYW5zZm9ybU1pblJvdGF0aW9uKXJldHVybjtydC5jdXJyZW50Lm5hbWU9dCxlfHwoaS50cmlnZ2VyKHQrXCJzdGFydFwiLG4pLGU9ITApLGkudHJpZ2dlcih0LG4pLHI+aS5vcHRpb25zLnRyYW5zZm9ybU1pblJvdGF0aW9uJiZpLnRyaWdnZXIoXCJyb3RhdGVcIixuKSxvPmkub3B0aW9ucy50cmFuc2Zvcm1NaW5TY2FsZSYmKGkudHJpZ2dlcihcInBpbmNoXCIsbiksaS50cmlnZ2VyKFwicGluY2hcIisobi5zY2FsZTwxP1wiaW5cIjpcIm91dFwiKSxuKSk7YnJlYWs7Y2FzZSBidDplJiZuLmNoYW5nZWRMZW5ndGg8MiYmKGkudHJpZ2dlcih0K1wiZW5kXCIsbiksZT0hMSl9fX19KFwidHJhbnNmb3JtXCIpO3ZhciBrdD12b2lkIDAsd3Q9dm9pZCAwLEV0PW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5xdWV1ZT1bXX1yZXR1cm4gZyh0LFt7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMucXVldWUucHVzaCh0KSwxPT09dGhpcy5xdWV1ZS5sZW5ndGgmJnNldEltbWVkaWF0ZSh0aGlzLnF1ZXVlWzBdKSxlLnRoZW4oZnVuY3Rpb24oKXtuLnF1ZXVlLnNoaWZ0KCksbi5xdWV1ZS5sZW5ndGg+MCYmc2V0VGltZW91dChuLnF1ZXVlWzBdLDFlMy8zMCl9KX19XSksdH0oKSksQ3Q9ZnVuY3Rpb24odCxlKXtbXCJpZFwiLFwiY2xhc3NcIixcImFuaW1hdGlvblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlLmhhc093blByb3BlcnR5KG4pJiZ0LnNldEF0dHJpYnV0ZShuLGVbbl0pfSksZS5tb2RpZmllciYmUS5hZGRNb2RpZmllcih0LGUubW9kaWZpZXIpfSxBdD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIGU9Xyh7fSxlKSxcInN0cmluZ1wiPT10eXBlb2YgdD9lLm1lc3NhZ2U9dDplPXQsZSYmKGUubWVzc2FnZXx8ZS5tZXNzYWdlSFRNTCl8fFEudGhyb3coXCJOb3RpZmljYXRpb25zIG11c3QgY29udGFpbiBhIG1lc3NhZ2VcIiksKGUuaGFzT3duUHJvcGVydHkoXCJidXR0b25MYWJlbHNcIil8fGUuaGFzT3duUHJvcGVydHkoXCJidXR0b25MYWJlbFwiKSkmJihlLmJ1dHRvbkxhYmVscz1lLmJ1dHRvbkxhYmVsc3x8ZS5idXR0b25MYWJlbCxBcnJheS5pc0FycmF5KGUuYnV0dG9uTGFiZWxzKXx8KGUuYnV0dG9uTGFiZWxzPVtlLmJ1dHRvbkxhYmVsc3x8XCJcIl0pKSxRLmV4dGVuZCh7Y29tcGlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sY2FsbGJhY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGFuaW1hdGlvbjpcImRlZmF1bHRcIixjYW5jZWxhYmxlOiExLHByaW1hcnlCdXR0b25JbmRleDooZS5idXR0b25MYWJlbHN8fG4uYnV0dG9uTGFiZWxzfHxbXSkubGVuZ3RoLTF9LG4sZSl9LFN0PXt9O1N0Ll9jcmVhdGVBbGVydERpYWxvZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT1hcmd1bWVudHNbaV07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBpPUF0LmFwcGx5KHZvaWQgMCxlKTtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIkFsZXJ0RGlhbG9nXCIsXCJBbGVydERpYWxvZ0J1dHRvblwiKTt2YXIgbz1cIlwiO2kuaXNQcm9tcHQmJihvPSdcXG4gICAgICA8aW5wdXRcXG4gICAgICAgIGNsYXNzPVwidGV4dC1pbnB1dCB0ZXh0LWlucHV0LS11bmRlcmJhclwiXFxuICAgICAgICB0eXBlPVwiJysoaS5pbnB1dFR5cGV8fFwidGV4dFwiKSsnXCJcXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiJysoaS5wbGFjZWhvbGRlcnx8XCJcIikrJ1wiXFxuICAgICAgICB2YWx1ZT1cIicrKGkuZGVmYXVsdFZhbHVlfHxcIlwiKSsnXCJcXG4gICAgICAgIHN0eWxlPVwid2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDEwcHg7XCJcXG4gICAgICAvPlxcbiAgICAnKTt2YXIgcj1cIlwiO2kuYnV0dG9uTGFiZWxzLmZvckVhY2goZnVuY3Rpb24odCxlKXtyKz0nXFxuICAgICAgPG9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXFxuICAgICAgICBjbGFzcz1cIlxcbiAgICAgICAgICAnKyhlPT09aS5wcmltYXJ5QnV0dG9uSW5kZXg/XCIgYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcHJpbWFsXCI6XCJcIikrXCJcXG4gICAgICAgICAgXCIrKGkuYnV0dG9uTGFiZWxzLmxlbmd0aDw9Mj9cIiBhbGVydC1kaWFsb2ctYnV0dG9uLS1yb3dmb290ZXJcIjpcIlwiKSsnXFxuICAgICAgICBcIlxcbiAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7XCI+XFxuICAgICAgICAnK3QrXCJcXG4gICAgICA8L29ucy1hbGVydC1kaWFsb2ctYnV0dG9uPlxcbiAgICBcIn0pO3ZhciBhPXt9LHM9ZnVuY3Rpb24oKXthLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCYmYS5kaWFsb2cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCksT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIGFbdF19KSxhPW51bGwsaS5kZXN0cm95IGluc3RhbmNlb2YgRnVuY3Rpb24mJmkuZGVzdHJveSgpfTthLmRpYWxvZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLWFsZXJ0LWRpYWxvZ1wiKSxhLmRpYWxvZy5pbm5lckhUTUw9J1xcbiAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLW1hc2tcIlxcbiAgICAgIHN0eWxlPVwiXFxuICAgICAgICAnKyhpLm1hc2tDb2xvcj9cImJhY2tncm91bmQtY29sb3I6IFwiK2kubWFza0NvbG9yOlwiXCIpKydcXG4gICAgICBcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZ1wiPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2ctY29udGFpbmVyXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLXRpdGxlXCI+XFxuICAgICAgICAgICcrKGkudGl0bGV8fFwiXCIpKydcXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy1jb250ZW50XCI+XFxuICAgICAgICAgICcrKGkubWVzc2FnZXx8aS5tZXNzYWdlSFRNTCkrXCJcXG4gICAgICAgICAgXCIrbysnXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJcXG4gICAgICAgICAgYWxlcnQtZGlhbG9nLWZvb3RlclxcbiAgICAgICAgICAnKyhpLmJ1dHRvbkxhYmVscy5sZW5ndGg8PTI/XCIgYWxlcnQtZGlhbG9nLWZvb3Rlci0tcm93Zm9vdGVyXCI6XCJcIikrJ1xcbiAgICAgICAgXCI+XFxuICAgICAgICAgICcrcitcIlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsbihhLmRpYWxvZyksQ3QoYS5kaWFsb2csaSksaS5pc1Byb21wdCYmaS5zdWJtaXRPbkVudGVyJiYoYS5pbnB1dD1hLmRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtaW5wdXRcIiksYS5pbnB1dC5vbmtleXByZXNzPWZ1bmN0aW9uKGUpezEzPT09ZS5rZXlDb2RlJiZhLmRpYWxvZy5oaWRlKCkudGhlbihmdW5jdGlvbigpe2lmKGEpe3ZhciBlPWEuaW5wdXQudmFsdWU7cygpLGkuY2FsbGJhY2soZSksdChlKX19KX0pLGEuZm9vdGVyPWEuZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCIuYWxlcnQtZGlhbG9nLWZvb3RlclwiKSxRLmFycmF5RnJvbShhLmRpYWxvZy5xdWVyeVNlbGVjdG9yQWxsKFwiLmFsZXJ0LWRpYWxvZy1idXR0b25cIikpLmZvckVhY2goZnVuY3Rpb24oZSxuKXtlLm9uY2xpY2s9ZnVuY3Rpb24oKXthLmRpYWxvZy5oaWRlKCkudGhlbihmdW5jdGlvbigpe2lmKGEpe3ZhciBlPW47aS5pc1Byb21wdCYmKGU9bj09PWkucHJpbWFyeUJ1dHRvbkluZGV4P2EuaW5wdXQudmFsdWU6bnVsbCksYS5kaWFsb2cucmVtb3ZlKCkscygpLGkuY2FsbGJhY2soZSksdChlKX19KX0sYS5mb290ZXIuYXBwZW5kQ2hpbGQoZSl9KSxpLmNhbmNlbGFibGUmJihhLmRpYWxvZy5jYW5jZWxhYmxlPSEwLGEuZGlhbG9nLm9uRGlhbG9nQ2FuY2VsPWZ1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7YS5kaWFsb2cucmVtb3ZlKCkscygpfSk7dmFyIGU9aS5pc1Byb21wdD9udWxsOi0xO2kuY2FsbGJhY2soZSksdChlKX0sYS5kaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCwhMSkpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYS5kaWFsb2cpLGkuY29tcGlsZShhLmRpYWxvZyksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7YS5kaWFsb2cuc2hvdygpLnRoZW4oZnVuY3Rpb24oKXtpZihhLmlucHV0JiZpLmlzUHJvbXB0JiZpLmF1dG9mb2N1cyl7dmFyIHQ9YS5pbnB1dC52YWx1ZS5sZW5ndGg7YS5pbnB1dC5mb2N1cygpLGEuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UodCx0KX19KX0pfSl9LFN0LmFsZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0Ll9jcmVhdGVBbGVydERpYWxvZyh0LGUse2J1dHRvbkxhYmVsczpbXCJPS1wiXSx0aXRsZTpcIkFsZXJ0XCJ9KX0sU3QuY29uZmlybT1mdW5jdGlvbih0LGUpe3JldHVybiBTdC5fY3JlYXRlQWxlcnREaWFsb2codCxlLHtidXR0b25MYWJlbHM6W1wiQ2FuY2VsXCIsXCJPS1wiXSx0aXRsZTpcIkNvbmZpcm1cIn0pfSxTdC5wcm9tcHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gU3QuX2NyZWF0ZUFsZXJ0RGlhbG9nKHQsZSx7YnV0dG9uTGFiZWxzOltcIk9LXCJdLHRpdGxlOlwiQWxlcnRcIixpc1Byb21wdDohMCxhdXRvZm9jdXM6ITAsc3VibWl0T25FbnRlcjohMH0pfSxTdC50b2FzdD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiVG9hc3RcIiksZT1BdCh0LGUse3RpbWVvdXQ6MCxmb3JjZTohMX0pO3ZhciBvPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICAgIDxvbnMtdG9hc3Q+XFxuICAgICAgICBcIitlLm1lc3NhZ2UrXCJcXG4gICAgICAgIFwiKyhlLmJ1dHRvbkxhYmVscz9cIjxidXR0b24+XCIrZS5idXR0b25MYWJlbHNbMF0rXCI8L2J1dHRvbj5cIjpcIlwiKStcIlxcbiAgICAgIDwvb25zLXRvYXN0PlxcbiAgICBcIik7Q3QobyxlKTt2YXIgcj1mdW5jdGlvbih0KXtvJiZvLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7byYmKG8ucmVtb3ZlKCksbz1udWxsLGUuY2FsbGJhY2sodCksaSh0KSl9KX07ZS5idXR0b25MYWJlbHMmJihRLmZpbmRDaGlsZChvLl90b2FzdCxcImJ1dHRvblwiKS5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHIoMCl9KSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pLGUuY29tcGlsZShvKTt2YXIgYT1mdW5jdGlvbigpe28ucGFyZW50RWxlbWVudCYmby5zaG93KGUpLnRoZW4oZnVuY3Rpb24oKXtlLnRpbWVvdXQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gcigtMSl9LGUudGltZW91dCl9KX07c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZm9yY2U/YSgpOkV0LmFkZChhLG4pfSl9KTtyZXR1cm4gbn07dmFyIFB0PWZ1bmN0aW9uKCl7fTtQdC5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fZXZlbnRzW3RdPXRoaXMuX2V2ZW50c1t0XXx8W10sdGhpcy5fZXZlbnRzW3RdLnB1c2goZSl9LG9uY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMub24odCxmdW5jdGlvbiBpKCl7cmV0dXJuIG4ub2ZmKHQsaSksZS5hcHBseShudWxsLGFyZ3VtZW50cyl9KX0sb2ZmOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdCBpbiB0aGlzLl9ldmVudHMhPSExJiYodGhpcy5fZXZlbnRzW3RdPXRoaXMuX2V2ZW50c1t0XS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuISFlJiZlIT09dH0pKX0sZW1pdDpmdW5jdGlvbih0KXtpZih0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0IGluIHRoaXMuX2V2ZW50cyE9ITEpZm9yKHZhciBlPTA7ZTx0aGlzLl9ldmVudHNbdF0ubGVuZ3RoO2UrKyl0aGlzLl9ldmVudHNbdF1bZV0uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfX0sUHQubWl4aW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtcIm9uXCIsXCJvbmNlXCIsXCJvZmZcIixcImVtaXRcIl0sbj0wO248ZS5sZW5ndGg7bisrKVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dC5wcm90b3R5cGVbZVtuXV09UHQucHJvdG90eXBlW2Vbbl1dOnRbZVtuXV09UHQucHJvdG90eXBlW2Vbbl1dfSx3aW5kb3cuTWljcm9FdmVudD1QdDt2YXIgT3Q9ZnVuY3Rpb24oKXt2YXIgdD17X2lzUG9ydHJhaXQ6ITEsaXNQb3J0cmFpdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BvcnRyYWl0KCl9LGlzTGFuZHNjYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNQb3J0cmFpdCgpfSxfaW5pdDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHRoaXMuX29uRE9NQ29udGVudExvYWRlZC5iaW5kKHRoaXMpLCExKSxcIm9yaWVudGF0aW9uXCJpbiB3aW5kb3c/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSwhMSk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpLCExKSx0aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodD53aW5kb3cuaW5uZXJXaWR0aH0sdGhpc30sX29uRE9NQ29udGVudExvYWRlZDpmdW5jdGlvbigpe3RoaXMuX2luc3RhbGxJc1BvcnRyYWl0SW1wbGVtZW50YXRpb24oKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDp0aGlzLmlzUG9ydHJhaXQoKX0pfSxfaW5zdGFsbElzUG9ydHJhaXRJbXBsZW1lbnRhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5pbm5lcldpZHRoPHdpbmRvdy5pbm5lckhlaWdodDtcIm9yaWVudGF0aW9uXCJpbiB3aW5kb3c/d2luZG93Lm9yaWVudGF0aW9uJTE4MD09MD90aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1NYXRoLmFicyh3aW5kb3cub3JpZW50YXRpb24lMTgwKT90OiF0fTp0aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIDkwPT09TWF0aC5hYnMod2luZG93Lm9yaWVudGF0aW9uJTE4MCk/dDohdH06dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ+d2luZG93LmlubmVyV2lkdGh9fSxfb25PcmllbnRhdGlvbkNoYW5nZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9pc1BvcnRyYWl0KCksbj0wLGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtuKys7dmFyIG89d2luZG93LmlubmVyV2lkdGgscj13aW5kb3cuaW5uZXJIZWlnaHQ7ZSYmbzw9cnx8IWUmJm8+PXI/KHQuZW1pdChcImNoYW5nZVwiLHtpc1BvcnRyYWl0OmV9KSxjbGVhckludGVydmFsKGkpKTo1MD09PW4mJih0LmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDplfSksY2xlYXJJbnRlcnZhbChpKSl9LDIwKX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6dGhpcy5pc1BvcnRyYWl0KCl9KX19O3JldHVybiBQdC5taXhpbih0KSx0fSgpLl9pbml0KCkseHQ9e2FkZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBRLmFkZE1vZGlmaWVyKHQsZSl9KX0scmVtb3ZlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49QXJyYXkoZT4xP2UtMTowKSxpPTE7aTxlO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIFEucmVtb3ZlTW9kaWZpZXIodCxlKX0pfSxjb250YWluczpRLmhhc01vZGlmaWVyLHRvZ2dsZTpRLnRvZ2dsZU1vZGlmaWVyfSxUdD1uZXcgUHQ7VHQuX3Zpc2libGU9ITE7dmFyIEx0PWZ1bmN0aW9uKCl7VHQuX3Zpc2libGU9ITAsVHQuZW1pdChcInNob3dcIil9LE10PWZ1bmN0aW9uKCl7VHQuX3Zpc2libGU9ITEsVHQuZW1pdChcImhpZGVcIil9LER0PWZ1bmN0aW9uKCl7US53YXJuKFwib25zLWtleWJvYXJkOiBDb3Jkb3ZhIEtleWJvYXJkIHBsdWdpbiBpcyBub3QgcHJlc2VudC5cIil9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBLZXlib2FyZD8oS2V5Ym9hcmQub25zaG93PUx0LEtleWJvYXJkLm9uaGlkZT1NdCxUdC5lbWl0KFwiaW5pdFwiLHt2aXNpYmxlOktleWJvYXJkLmlzVmlzaWJsZX0pLCEwKTp2b2lkIDAhPT1jb3Jkb3ZhLnBsdWdpbnMmJnZvaWQgMCE9PWNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCYmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibmF0aXZlLmtleWJvYXJkc2hvd1wiLEx0KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZGhpZGVcIixNdCksVHQuZW1pdChcImluaXRcIix7dmlzaWJsZTpjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaXNWaXNpYmxlfSksITApKXx8KChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW29ucy1rZXlib2FyZC1hY3RpdmVdXCIpfHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW29ucy1rZXlib2FyZC1pbmFjdGl2ZV1cIikpJiZEdCgpLFR0Lm9uPUR0KX0pO3ZhciBJdD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQrK319KCksTnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3AodGhpcyx0KSx0aGlzLl9sb2NrTGlzdD1bXSx0aGlzLl93YWl0TGlzdD1bXSx0aGlzLl9sb2c9ZS5sb2d8fGZ1bmN0aW9uKCl7fX1yZXR1cm4gZyh0LFt7a2V5OlwibG9ja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWZ1bmN0aW9uIGUoKXt0Ll91bmxvY2soZSl9O3JldHVybiBlLmlkPUl0KCksdGhpcy5fbG9ja0xpc3QucHVzaChlKSx0aGlzLl9sb2coXCJsb2NrOiBcIitlLmlkKSxlfX0se2tleTpcIl91bmxvY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sb2NrTGlzdC5pbmRleE9mKHQpO2lmKC0xPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGZ1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIGluIHRoZSBsb2NrIGxpc3QuXCIpO3RoaXMuX2xvY2tMaXN0LnNwbGljZShlLDEpLHRoaXMuX2xvZyhcInVubG9jazogXCIrdC5pZCksdGhpcy5fdHJ5VG9GcmVlV2FpdExpc3QoKX19LHtrZXk6XCJfdHJ5VG9GcmVlV2FpdExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcig7IXRoaXMuaXNMb2NrZWQoKSYmdGhpcy5fd2FpdExpc3QubGVuZ3RoPjA7KXRoaXMuX3dhaXRMaXN0LnNoaWZ0KCkoKX19LHtrZXk6XCJ3YWl0VW5sb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBFcnJvcihcIlRoZSBjYWxsYmFjayBwYXJhbSBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3RoaXMuaXNMb2NrZWQoKT90aGlzLl93YWl0TGlzdC5wdXNoKHQpOnQoKX19LHtrZXk6XCJpc0xvY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2tMaXN0Lmxlbmd0aD4wfX1dKSx0fSgpLEJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9sb2FkZXI9ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2U6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudDt0LnBhcmFtcyxQLmdldFBhZ2VIVE1MQXN5bmMobikudGhlbihmdW5jdGlvbih0KXt2YXIgbj1RLmNyZWF0ZUVsZW1lbnQodCk7aS5hcHBlbmRDaGlsZChuKSxlKG4pfSl9LHRoaXMuX3VubG9hZGVyPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uOml9cmV0dXJuIGcodCxbe2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQucGFnZSxpPXQucGFyZW50LG89dC5wYXJhbXMscj12b2lkIDA9PT1vP3t9Om87dGhpcy5fbG9hZGVyKHtwYWdlOm4scGFyZW50OmkscGFyYW1zOnJ9LGZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IEVycm9yKFwicGFnZUVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50LlwiKTtlKHQpfSl9fSx7a2V5OlwidW5sb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgRWxlbWVudCkpdGhyb3cgRXJyb3IoXCJwYWdlRWxlbWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEVsZW1lbnQuXCIpO3RoaXMuX3VubG9hZGVyKHQpfX0se2tleTpcImludGVybmFsTG9hZGVyXCIsc2V0OmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZ1bmN0aW9uXCIpO3RoaXMuX2xvYWRlcj10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGVyfX1dKSx0fSgpLGp0PW5ldyBCdCxIdD1uZXcgQnQoZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudCxvPSh0LnBhcmFtcyxRLmNyZWF0ZUVsZW1lbnQobi50cmltKCkpKTtpLmFwcGVuZENoaWxkKG8pLGUobyl9LGkpLFJ0PXthbmltaXQ6bnQsZGVmYXVsdFBhZ2VMb2FkZXI6anQsZWxlbWVudHM6YyxHZXN0dXJlRGV0ZWN0b3I6c3QsbW9kaWZpZXI6eHQsbm90aWZpY2F0aW9uOlN0LG9yaWVudGF0aW9uOk90LHBhZ2VBdHRyaWJ1dGVFeHByZXNzaW9uOlMsUGFnZUxvYWRlcjpCdCxwbGF0Zm9ybTpDLHNvZnR3YXJlS2V5Ym9hcmQ6VHQsX2F1dG9TdHlsZTpOLF9pbnRlcm5hbDpQLF9yZWFkeUxvY2s6bmV3IE50LF91dGlsOlF9O1J0LnBsYXRmb3JtLnNlbGVjdCgod2luZG93LmxvY2F0aW9uLnNlYXJjaC5tYXRjaCgvcGxhdGZvcm09KFtcXHctXSspLyl8fFtdKVsxXSksZnVuY3Rpb24oKXt2YXIgdD1SdC5fcmVhZHlMb2NrLmxvY2soKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe1J0LmlzV2ViVmlldygpP3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIix0LCExKTp0KCl9LCExKX0oKTt2YXIgRnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coXCJUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBcIisodD9cImFmdGVyXCI6XCJiZWZvcmVcIikrXCIgb25zLmlzUmVhZHkoKSBpcyB0cnVlXCIpfTtSdC5pc1JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIVJ0Ll9yZWFkeUxvY2suaXNMb2NrZWQoKX0sUnQuaXNXZWJWaWV3PVJ0LnBsYXRmb3JtLmlzV2ViVmlldyxSdC5yZWFkeT1mdW5jdGlvbih0KXtSdC5pc1JlYWR5KCk/dCgpOlJ0Ll9yZWFkeUxvY2sud2FpdFVubG9jayh0KX0sUnQuc2V0RGVmYXVsdERldmljZUJhY2tCdXR0b25MaXN0ZW5lcj1mdW5jdGlvbih0KXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxSdC5fZGVmYXVsdERldmljZUJhY2tCdXR0b25IYW5kbGVyLnNldExpc3RlbmVyKHQpfSxSdC5kaXNhYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxQLmRiYkRpc3BhdGNoZXIuZGlzYWJsZSgpfSxSdC5lbmFibGVEZXZpY2VCYWNrQnV0dG9uSGFuZGxlcj1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKXx8RnQoITApLFAuZGJiRGlzcGF0Y2hlci5lbmFibGUoKX0sUnQuZmlyZURldmljZUJhY2tCdXR0b25FdmVudD1mdW5jdGlvbigpe1AuZGJiRGlzcGF0Y2hlci5maXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50KCl9LFJ0LmVuYWJsZUF1dG9TdGF0dXNCYXJGaWxsPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpJiZGdCghMSksUC5jb25maWcuYXV0b1N0YXR1c0JhckZpbGw9ITB9LFJ0LmRpc2FibGVBdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpLFAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsPSExfSxSdC5tb2NrU3RhdHVzQmFyPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpJiZGdCghMSk7dmFyIHQ9ZnVuY3Rpb24oKXtpZighZG9jdW1lbnQuYm9keS5jaGlsZHJlblswXXx8IWRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKFwib25zLXN0YXR1cy1iYXItbW9ja1wiKSl7dmFyIHQ9Qy5pc0FuZHJvaWQoKSxlPWZ1bmN0aW9uKHQpe3JldHVybic8aSBjbGFzcz1cIicrdC5zcGxpdChcIi1cIilbMF0rXCIgXCIrdCsnXCI+PC9pPid9LG49dD9lKFwiem1kaS10d2l0dGVyXCIpK1wiIFwiK2UoXCJ6bWRpLWdvb2dsZS1wbGF5XCIpOlwiTm8gU0lNIFwiK2UoXCJmYS13aWZpXCIpLGk9dD9cIlwiOlwiMTI6MjggUE1cIixvPXQ/ZShcInptZGktbmV0d29ya1wiKStcIiBcIitlKFwiem1kaS13aWZpXCIpK1wiIFwiK2UoXCJ6bWRpLWJhdHRlcnlcIikrXCIgMTI6MjggUE1cIjpcIjgwJSBcIitlKFwiZmEtYmF0dGVyeS10aHJlZS1xdWFydGVyc1wiKTtkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShRLmNyZWF0ZUVsZW1lbnQoJzxkaXYgY2xhc3M9XCJvbnMtc3RhdHVzLWJhci1tb2NrICcrKHQ/XCJhbmRyb2lkXCI6XCJpb3NcIikrJ1wiPjxkaXY+JytuK1wiPC9kaXY+PGRpdj5cIitpK1wiPC9kaXY+PGRpdj5cIitvK1wiPC9kaXY+PC9kaXY+XCIpLGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCl9fTtkb2N1bWVudC5ib2R5P3QoKTpQLndhaXRET01Db250ZW50TG9hZGVkKHQpfSxSdC5kaXNhYmxlQW5pbWF0aW9ucz1mdW5jdGlvbigpe1AuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD0hMH0sUnQuZW5hYmxlQW5pbWF0aW9ucz1mdW5jdGlvbigpe1AuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD0hMX0sUnQuX2Rpc2FibGVXYXJuaW5ncz1mdW5jdGlvbigpe1AuY29uZmlnLndhcm5pbmdzRGlzYWJsZWQ9ITB9LFJ0Ll9lbmFibGVXYXJuaW5ncz1mdW5jdGlvbigpe1AuY29uZmlnLndhcm5pbmdzRGlzYWJsZWQ9ITF9LFJ0LmRpc2FibGVBdXRvU3R5bGluZz1OLmRpc2FibGUsUnQuZW5hYmxlQXV0b1N0eWxpbmc9Ti5lbmFibGUsUnQuZGlzYWJsZUljb25BdXRvUHJlZml4PWZ1bmN0aW9uKCl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJJY29uXCIpLGMuSWNvbi5zZXRBdXRvUHJlZml4KCExKX0sUnQuZm9yY2VVSVdlYlZpZXdTY3JvbGxGaXg9ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO1AuY29uZmlnLmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4PXR9LFJ0LmZvcmNlUGxhdGZvcm1TdHlsaW5nPWZ1bmN0aW9uKHQpe1J0LmVuYWJsZUF1dG9TdHlsaW5nKCksUnQucGxhdGZvcm0uc2VsZWN0KHR8fFwiaW9zXCIpLFJ0Ll91dGlsLmFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXtcIm9ucy1pZlwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk/dC5fcGxhdGZvcm1VcGRhdGUoKTp0LnRhZ05hbWUubWF0Y2goL15vbnMtL2kpJiYoTi5wcmVwYXJlKHQsITApLFwib25zLXRhYmJhclwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQuX3VwZGF0ZVBvc2l0aW9uKCkpfSl9LFJ0LnByZWxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107cmV0dXJuIFByb21pc2UuYWxsKCh0IGluc3RhbmNlb2YgQXJyYXk/dDpbdF0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdCYmUS50aHJvdyhcIkV4cGVjdGVkIHN0cmluZyBhcmd1bWVudHMgYnV0IGdvdCBcIisodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpKSxQLmdldFRlbXBsYXRlSFRNTEFzeW5jKHQpfSkpfSxSdC5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWZ1bmN0aW9uKHQpe3ZhciBuPVJ0Ll91dGlsLmNyZWF0ZUVsZW1lbnQodCk7aWYobi5yZW1vdmUoKSxlLmFwcGVuZCl7KGUuYXBwZW5kIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/ZS5hcHBlbmQ6ZG9jdW1lbnQuYm9keSkuaW5zZXJ0QmVmb3JlKG4sZS5pbnNlcnRCZWZvcmV8fG51bGwpLGUubGluayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmxpbmsobil9cmV0dXJuIG59O3JldHVyblwiPFwiPT09KHQ9dC50cmltKCkpLmNoYXJBdCgwKT9uKHQpOlAuZ2V0UGFnZUhUTUxBc3luYyh0KS50aGVuKG4pfSxSdC5jcmVhdGVQb3BvdmVyPVJ0LmNyZWF0ZURpYWxvZz1SdC5jcmVhdGVBbGVydERpYWxvZz1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIFJ0LmNyZWF0ZUVsZW1lbnQodCxfKHthcHBlbmQ6ITB9LGUpKX0sUnQub3BlbkFjdGlvblNoZWV0PWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIkFjdGlvblNoZWV0XCIpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIkZ1bmN0aW9uXCI7cmV0dXJuIFEudGhyb3coJ1wib3B0aW9ucy4nK3QrJ1wiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgJytlKX0sbj1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodCxlKX0saT1mdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06RnVuY3Rpb247cmV0dXJuIHRbZV1pbnN0YW5jZW9mIG59LG89XCJidXR0b25zXCIscj1cImNhbGxiYWNrXCIsYT1cImNvbXBpbGVcIixzPVwiZGVzdHJveVwiOyghbihvKXx8IWkobyxBcnJheSkpJiZlKG8sXCJBcnJheVwiKSxuKHIpJiYhaShyKSYmZShyKSxuKGEpJiYhaShhKSYmZShhKSxuKHMpJiYhaShzKSYmZShzKX0odCk7dmFyIG49US5jcmVhdGVFbGVtZW50KFwiXFxuICAgIDxvbnMtYWN0aW9uLXNoZWV0XFxuICAgICAgXCIrKHQudGl0bGU/J3RpdGxlPVwiJyt0LnRpdGxlKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5jYW5jZWxhYmxlP1wiY2FuY2VsYWJsZVwiOlwiXCIpK1wiXFxuICAgICAgXCIrKHQubW9kaWZpZXI/J21vZGlmaWVyPVwiJyt0Lm1vZGlmaWVyKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5tYXNrQ29sb3I/J21hc2stY29sb3I9XCInK3QubWFza0NvbG9yKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5pZD8naWQ9XCInK3QuaWQrJ1wiJzpcIlwiKStcIlxcbiAgICAgIFwiKyh0LmNsYXNzPydjbGFzcz1cIicrdC5jbGFzcysnXCInOlwiXCIpKydcXG4gICAgPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tc2hlZXRcIj48L2Rpdj5cXG4gICAgPC9vbnMtYWN0aW9uLXNoZWV0PlxcbiAgJyksaT1mdW5jdGlvbiBpKG8pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTotMTtuJiYodC5kZXN0cm95JiZ0LmRlc3Ryb3kobiksbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlhbG9nLWNhbmNlbFwiLGksITEpLG4ucmVtb3ZlKCksbj1udWxsLHQuY2FsbGJhY2smJnQuY2FsbGJhY2sociksZShyKSl9O24uYWRkRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixpLCExKTt2YXIgbz1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dC5idXR0b25zLmZvckVhY2goZnVuY3Rpb24oZSxyKXt2YXIgYT1cInN0cmluZ1wiPT10eXBlb2YgZT97bGFiZWw6ZX06Xyh7fSxlKTt0LmRlc3RydWN0aXZlPT09ciYmKGEubW9kaWZpZXI9KGEubW9kaWZpZXJ8fFwiXCIpK1wiIGRlc3RydWN0aXZlXCIpO3ZhciBzPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICAgIDxvbnMtYWN0aW9uLXNoZWV0LWJ1dHRvblxcbiAgICAgICAgXCIrKGEuaWNvbj8naWNvbj1cIicrYS5pY29uKydcIic6XCJcIikrXCJcXG4gICAgICAgIFwiKyhhLm1vZGlmaWVyPydtb2RpZmllcj1cIicrYS5tb2RpZmllcisnXCInOlwiXCIpK1wiXFxuICAgICAgPlxcbiAgICAgICAgXCIrYS5sYWJlbCtcIlxcbiAgICAgIDwvb25zLWFjdGlvbi1zaGVldC1idXR0b24+XFxuICAgIFwiKTtzLm9uY2xpY2s9ZnVuY3Rpb24odCl7cmV0dXJuIG4uaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaSh0LHIpfSl9LG8uYXBwZW5kQ2hpbGQocyl9KSxRLmZpbmRDaGlsZChuLFwiLmFjdGlvbi1zaGVldFwiKS5hcHBlbmRDaGlsZChvKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLHQuY29tcGlsZSYmdC5jb21waWxlKGVsLmRpYWxvZyksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIG4uc2hvdyh7YW5pbWF0aW9uOnQuYW5pbWF0aW9uLGFuaW1hdGlvbk9wdGlvbnM6dC5hbmltYXRpb25PcHRpb25zfSl9KX0pfSxSdC5yZXNvbHZlTG9hZGluZ1BsYWNlaG9sZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49UnQuX3V0aWwuYXJyYXlGcm9tKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW29ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXVwiKSk7MD09PW4ubGVuZ3RoJiZRLnRocm93KFwiTm8gb25zLWxvYWRpbmctcGxhY2Vob2xkZXIgZXhpc3RzXCIpLG4uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmdldEF0dHJpYnV0ZShcInBhZ2VcIil9KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uc2V0QXR0cmlidXRlKFwib25zLWxvYWRpbmctcGxhY2Vob2xkZXJcIix0KSxSdC5fcmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcihuLHQsZSl9KX0sUnQuX3NldHVwTG9hZGluZ1BsYWNlSG9sZGVycz1mdW5jdGlvbigpe1J0LnJlYWR5KGZ1bmN0aW9uKCl7UnQuX3V0aWwuYXJyYXlGcm9tKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW29ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXVwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LmdldEF0dHJpYnV0ZShcIm9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXCIpO1wic3RyaW5nXCI9PXR5cGVvZiBlJiZSdC5fcmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcih0LGUpfSl9KX0sUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSgpfTtlJiZSdC5jcmVhdGVFbGVtZW50KGUpLnRoZW4oZnVuY3Rpb24oZSl7ZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQuYXBwZW5kQ2hpbGQoZSksbihlLGZ1bmN0aW9uKCl7Zm9yKDt0LmZpcnN0Q2hpbGQmJnQuZmlyc3RDaGlsZCE9PWU7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKTtlLnN0eWxlLmRpc3BsYXk9XCJcIn0pfSkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIFByb21pc2UucmVqZWN0KFwiVW5hYmxlZCB0byByZXNvbHZlIHBsYWNlaG9sZGVyOiBcIit0KX0pfTt2YXIgcXQ9XCJjdXJyZW50U2NyaXB0XCJpbiBkb2N1bWVudD9mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0fTpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5zY3JpcHRzW2RvY3VtZW50LnNjcmlwdHMubGVuZ3RoLTFdfTtSdC5nZXRTY3JpcHRQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHF0KCkmJi9vbnMtcGFnZS9pLnRlc3QocXQoKS5wYXJlbnRFbGVtZW50LnRhZ05hbWUpJiZxdCgpLnBhcmVudEVsZW1lbnR8fG51bGx9O3ZhciB6dD1vKGZ1bmN0aW9uKHQpeyFmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXt2YXIgbztpZihuPW58fHt9LHRoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD0wLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudG91Y2hTdGFydFg9MCx0aGlzLnRvdWNoU3RhcnRZPTAsdGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyPTAsdGhpcy50b3VjaEJvdW5kYXJ5PW4udG91Y2hCb3VuZGFyeXx8MTAsdGhpcy5sYXllcj10LHRoaXMudGFwRGVsYXk9bi50YXBEZWxheXx8MjAwLHRoaXMudGFwVGltZW91dD1uLnRhcFRpbWVvdXR8fDcwMCwhZS5ub3ROZWVkZWQodCkpe2Zvcih2YXIgcj1bXCJvbk1vdXNlXCIsXCJvbkNsaWNrXCIsXCJvblRvdWNoU3RhcnRcIixcIm9uVG91Y2hNb3ZlXCIsXCJvblRvdWNoRW5kXCIsXCJvblRvdWNoQ2FuY2VsXCJdLGE9MCxzPXIubGVuZ3RoO2E8czthKyspdGhpc1tyW2FdXT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19KHRoaXNbclthXV0sdGhpcyk7aSYmKHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZSwhMCksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlLCEwKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlLCEwKSksdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2ssITApLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCwhMSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSwhMSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoQ2FuY2VsLCExKSxFdmVudC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9ufHwodC5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsbixpKXt2YXIgbz1Ob2RlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO1wiY2xpY2tcIj09PWU/by5jYWxsKHQsZSxuLmhpamFja2VkfHxuLGkpOm8uY2FsbCh0LGUsbixpKX0sdC5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsbixpKXt2YXIgbz1Ob2RlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO1wiY2xpY2tcIj09PWU/by5jYWxsKHQsZSxuLmhpamFja2VkfHwobi5oaWphY2tlZD1mdW5jdGlvbih0KXt0LnByb3BhZ2F0aW9uU3RvcHBlZHx8bih0KX0pLGkpOm8uY2FsbCh0LGUsbixpKX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQub25jbGljayYmKG89dC5vbmNsaWNrLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24odCl7byh0KX0sITEpLHQub25jbGljaz1udWxsKX19dmFyIG49bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luZG93cyBQaG9uZVwiKT49MCxpPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkFuZHJvaWRcIik+MCYmIW4sbz0vaVAoYWR8aG9uZXxvZCkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiFuLHI9byYmL09TIDRfXFxkKF9cXGQpPy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxhPW8mJi9PUyBbNi03XV9cXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscz1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJCQjEwXCIpPjAsbD1bXCJlbWFpbFwiLFwibnVtYmVyXCIsXCJwYXNzd29yZFwiLFwic2VhcmNoXCIsXCJ0ZWxcIixcInRleHRcIixcInVybFwiXTtlLnByb3RvdHlwZS5uZWVkc0NsaWNrPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImJ1dHRvblwiOmNhc2VcInNlbGVjdFwiOmNhc2VcInRleHRhcmVhXCI6aWYodC5kaXNhYmxlZClyZXR1cm4hMDticmVhaztjYXNlXCJpbnB1dFwiOmlmKG8mJlwiZmlsZVwiPT09dC50eXBlfHx0LmRpc2FibGVkKXJldHVybiEwO2JyZWFrO2Nhc2VcImxhYmVsXCI6Y2FzZVwiaWZyYW1lXCI6Y2FzZVwidmlkZW9cIjpyZXR1cm4hMH1yZXR1cm4vXFxibmVlZHNjbGlja1xcYi8udGVzdCh0LmNsYXNzTmFtZSl9LGUucHJvdG90eXBlLm5lZWRzRm9jdXM9ZnVuY3Rpb24odCl7c3dpdGNoKHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZVwidGV4dGFyZWFcIjpyZXR1cm4hMDtjYXNlXCJzZWxlY3RcIjpyZXR1cm4haTtjYXNlXCJpbnB1dFwiOnN3aXRjaCh0LnR5cGUpe2Nhc2VcImJ1dHRvblwiOmNhc2VcImNoZWNrYm94XCI6Y2FzZVwiZmlsZVwiOmNhc2VcImltYWdlXCI6Y2FzZVwicmFkaW9cIjpjYXNlXCJzdWJtaXRcIjpyZXR1cm4hMX1yZXR1cm4hdC5kaXNhYmxlZCYmIXQucmVhZE9ubHk7ZGVmYXVsdDpyZXR1cm4vXFxibmVlZHNmb2N1c1xcYi8udGVzdCh0LmNsYXNzTmFtZSl9fSxlLnByb3RvdHlwZS5zZW5kQ2xpY2s9ZnVuY3Rpb24odCxlKXt2YXIgbixpO2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT10JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSxpPWUuY2hhbmdlZFRvdWNoZXNbMF0sKG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKSkuaW5pdE1vdXNlRXZlbnQodGhpcy5kZXRlcm1pbmVFdmVudFR5cGUodCksITAsITAsd2luZG93LDEsaS5zY3JlZW5YLGkuc2NyZWVuWSxpLmNsaWVudFgsaS5jbGllbnRZLCExLCExLCExLCExLDAsbnVsbCksbi5mb3J3YXJkZWRUb3VjaEV2ZW50PSEwLHQuZGlzcGF0Y2hFdmVudChuKX0sZS5wcm90b3R5cGUuZGV0ZXJtaW5lRXZlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBpJiZcInNlbGVjdFwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk/XCJtb3VzZWRvd25cIjpcImNsaWNrXCJ9LGUucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKHQpe3ZhciBlO28mJnQuc2V0U2VsZWN0aW9uUmFuZ2UmJjAhPT10LnR5cGUuaW5kZXhPZihcImRhdGVcIikmJlwidGltZVwiIT09dC50eXBlJiZcIm1vbnRoXCIhPT10LnR5cGUmJlwiZW1haWxcIiE9PXQudHlwZSYmXCJudW1iZXJcIiE9PXQudHlwZT8oZT10LnZhbHVlLmxlbmd0aCx0LnNldFNlbGVjdGlvblJhbmdlKGUsZSkpOnQuZm9jdXMoKX0sZS5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUGFyZW50PWZ1bmN0aW9uKHQpe3ZhciBlLG47aWYoIShlPXQuZmFzdENsaWNrU2Nyb2xsUGFyZW50KXx8IWUuY29udGFpbnModCkpe249dDtkb3tpZihuLnNjcm9sbEhlaWdodD5uLm9mZnNldEhlaWdodCl7ZT1uLHQuZmFzdENsaWNrU2Nyb2xsUGFyZW50PW47YnJlYWt9bj1uLnBhcmVudEVsZW1lbnR9d2hpbGUobil9ZSYmKGUuZmFzdENsaWNrTGFzdFNjcm9sbFRvcD1lLnNjcm9sbFRvcCl9LGUucHJvdG90eXBlLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT90LnBhcmVudE5vZGU6dH0sZS5wcm90b3R5cGUuaXNUZXh0RmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJ0ZXh0YXJlYVwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fC0xIT09bC5pbmRleE9mKHQudHlwZSl9LGUucHJvdG90eXBlLm9uVG91Y2hTdGFydD1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQudGFyZ2V0VG91Y2hlcy5sZW5ndGg+MSlyZXR1cm4hMDtpZihlPXRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCh0LnRhcmdldCksbj10LnRhcmdldFRvdWNoZXNbMF0sZS5pc0NvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMDtpZihvKXtpZihlPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmdGhpcy5pc1RleHRGaWVsZChlKSlyZXR1cm4hMDtpZighcil7aWYobi5pZGVudGlmaWVyJiZuLmlkZW50aWZpZXI9PT10aGlzLmxhc3RUb3VjaElkZW50aWZpZXIpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSwhMTt0aGlzLmxhc3RUb3VjaElkZW50aWZpZXI9bi5pZGVudGlmaWVyLHRoaXMudXBkYXRlU2Nyb2xsUGFyZW50KGUpfX1yZXR1cm4gdGhpcy50cmFja2luZ0NsaWNrPSEwLHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PXQudGltZVN0YW1wLHRoaXMudGFyZ2V0RWxlbWVudD1lLHRoaXMudG91Y2hTdGFydFg9bi5wYWdlWCx0aGlzLnRvdWNoU3RhcnRZPW4ucGFnZVksdC50aW1lU3RhbXAtdGhpcy5sYXN0Q2xpY2tUaW1lPHRoaXMudGFwRGVsYXkmJnQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZT4tMSYmdC5wcmV2ZW50RGVmYXVsdCgpLCEwfSxlLnByb3RvdHlwZS50b3VjaEhhc01vdmVkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuY2hhbmdlZFRvdWNoZXNbMF0sbj10aGlzLnRvdWNoQm91bmRhcnk7cmV0dXJuIE1hdGguYWJzKGUucGFnZVgtdGhpcy50b3VjaFN0YXJ0WCk+bnx8TWF0aC5hYnMoZS5wYWdlWS10aGlzLnRvdWNoU3RhcnRZKT5ufSxlLnByb3RvdHlwZS5vblRvdWNoTW92ZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50cmFja2luZ0NsaWNrfHwoKHRoaXMudGFyZ2V0RWxlbWVudCE9PXRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCh0LnRhcmdldCl8fHRoaXMudG91Y2hIYXNNb3ZlZCh0KSkmJih0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50YXJnZXRFbGVtZW50PW51bGwpLCEwKX0sZS5wcm90b3R5cGUuZmluZENvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQuY29udHJvbD90LmNvbnRyb2w6dC5odG1sRm9yP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuaHRtbEZvcik6dC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uLCBpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSksIGtleWdlbiwgbWV0ZXIsIG91dHB1dCwgcHJvZ3Jlc3MsIHNlbGVjdCwgdGV4dGFyZWFcIil9LGUucHJvdG90eXBlLm9uVG91Y2hFbmQ9ZnVuY3Rpb24odCl7dmFyIGUsbixzLGwsdSxjPXRoaXMudGFyZ2V0RWxlbWVudDtpZighdGhpcy50cmFja2luZ0NsaWNrKXJldHVybiEwO2lmKHQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZTx0aGlzLnRhcERlbGF5JiZ0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU+LTEpcmV0dXJuIHRoaXMuY2FuY2VsTmV4dENsaWNrPSEwLCEwO2lmKHQudGltZVN0YW1wLXRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PnRoaXMudGFwVGltZW91dClyZXR1cm4hMDtpZih0aGlzLmNhbmNlbE5leHRDbGljaz0hMSx0aGlzLmxhc3RDbGlja1RpbWU9dC50aW1lU3RhbXAsbj10aGlzLnRyYWNraW5nQ2xpY2tTdGFydCx0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ9MCxhJiYodT10LmNoYW5nZWRUb3VjaGVzWzBdLChjPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodS5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQsdS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpfHxjKS5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQ9dGhpcy50YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudCksXCJsYWJlbFwiPT09KHM9Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKXtpZihlPXRoaXMuZmluZENvbnRyb2woYykpe2lmKHRoaXMuZm9jdXMoYyksaSlyZXR1cm4hMTtjPWV9fWVsc2UgaWYodGhpcy5uZWVkc0ZvY3VzKGMpKXJldHVybiB0LnRpbWVTdGFtcC1uPjEwMHx8byYmd2luZG93LnRvcCE9PXdpbmRvdyYmXCJpbnB1dFwiPT09cz8odGhpcy50YXJnZXRFbGVtZW50PW51bGwsITEpOih0aGlzLmZvY3VzKGMpLHRoaXMuc2VuZENsaWNrKGMsdCksciYmXCJzZWxlY3RcIj09PXN8fCh0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCx0LnByZXZlbnREZWZhdWx0KCkpLCExKTtyZXR1cm4hKCFvfHxyfHwhKGw9Yy5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQpfHxsLmZhc3RDbGlja0xhc3RTY3JvbGxUb3A9PT1sLnNjcm9sbFRvcCl8fCh0aGlzLm5lZWRzQ2xpY2soYyl8fCh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5zZW5kQ2xpY2soYyx0KSksITEpfSxlLnByb3RvdHlwZS5vblRvdWNoQ2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsfSxlLnByb3RvdHlwZS5vbk1vdXNlPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLnRhcmdldEVsZW1lbnR8fCghIXQuZm9yd2FyZGVkVG91Y2hFdmVudHx8KCF0LmNhbmNlbGFibGV8fCghKCF0aGlzLm5lZWRzQ2xpY2sodGhpcy50YXJnZXRFbGVtZW50KXx8dGhpcy5jYW5jZWxOZXh0Q2xpY2spfHwodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24/dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTp0LnByb3BhZ2F0aW9uU3RvcHBlZD0hMCx0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKSwhMSkpKSl9LGUucHJvdG90eXBlLm9uQ2xpY2s9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMudHJhY2tpbmdDbGljaz8odGhpcy50YXJnZXRFbGVtZW50PW51bGwsdGhpcy50cmFja2luZ0NsaWNrPSExLCEwKTpcInN1Ym1pdFwiPT09dC50YXJnZXQudHlwZSYmMD09PXQuZGV0YWlsfHwoKGU9dGhpcy5vbk1vdXNlKHQpKXx8KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsKSxlKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGF5ZXI7aSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZSwhMCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlLCEwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlLCEwKSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2ssITApLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoQ2FuY2VsLCExKX0sZS5ub3ROZWVkZWQ9ZnVuY3Rpb24odCl7dmFyIGUsbixvO2lmKHZvaWQgMD09PXdpbmRvdy5vbnRvdWNoc3RhcnQpcmV0dXJuITA7aWYobj0rKC9DaHJvbWVcXC8oWzAtOV0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WywwXSlbMV0pe2lmKCFpKXJldHVybiEwO2lmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpe2lmKC0xIT09ZS5jb250ZW50LmluZGV4T2YoXCJ1c2VyLXNjYWxhYmxlPW5vXCIpKXJldHVybiEwO2lmKG4+MzEmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDw9d2luZG93Lm91dGVyV2lkdGgpcmV0dXJuITB9fWlmKHMmJihvPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cXC8oWzAtOV0qKVxcLihbMC05XSopLykpWzFdPj0xMCYmb1syXT49MyYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpKXtpZigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKSlyZXR1cm4hMDtpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg8PXdpbmRvdy5vdXRlcldpZHRoKXJldHVybiEwfXJldHVyblwibm9uZVwiPT09dC5zdHlsZS5tc1RvdWNoQWN0aW9ufHxcIm1hbmlwdWxhdGlvblwiPT09dC5zdHlsZS50b3VjaEFjdGlvbnx8KCEhKCsoL0ZpcmVmb3hcXC8oWzAtOV0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WywwXSlbMV0+PTI3JiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPXZpZXdwb3J0XVwiKSkmJigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoPD13aW5kb3cub3V0ZXJXaWR0aCkpfHxcIm5vbmVcIj09PXQuc3R5bGUudG91Y2hBY3Rpb258fFwibWFuaXB1bGF0aW9uXCI9PT10LnN0eWxlLnRvdWNoQWN0aW9uKX0sZS5hdHRhY2g9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUodCxuKX0sdC5leHBvcnRzPyh0LmV4cG9ydHM9ZS5hdHRhY2gsdC5leHBvcnRzLkZhc3RDbGljaz1lKTp3aW5kb3cuRmFzdENsaWNrPWV9KCl9KS5GYXN0Q2xpY2s7d2luZG93LmN1c3RvbUVsZW1lbnRzJiYod2luZG93LmN1c3RvbUVsZW1lbnRzLmZvcmNlUG9seWZpbGw9ITApO3ZhciBWdD1vKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPWUpfSksV3Q9byhmdW5jdGlvbih0KXt2YXIgZT10LmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuMVwifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPWUpfSksVXQ9KFd0LnZlcnNpb24sZnVuY3Rpb24odCl7cmV0dXJuXCJvYmplY3RcIj09PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6Zih0KSk/bnVsbCE9PXQ6XCJmdW5jdGlvblwiPT10eXBlb2YgdH0pLFh0PWZ1bmN0aW9uKHQpe2lmKCFVdCh0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gdH0sWXQ9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKHQpe3JldHVybiEwfX0sR3Q9IVl0KGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pLCR0PVZ0LmRvY3VtZW50LEt0PVV0KCR0KSYmVXQoJHQuY3JlYXRlRWxlbWVudCksUXQ9ZnVuY3Rpb24odCl7cmV0dXJuIEt0PyR0LmNyZWF0ZUVsZW1lbnQodCk6e319LEp0PSFHdCYmIVl0KGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdChcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pLFp0PWZ1bmN0aW9uKHQsZSl7aWYoIVV0KHQpKXJldHVybiB0O3ZhciBuLGk7aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIVV0KGk9bi5jYWxsKHQpKSlyZXR1cm4gaTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7aWYoIWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfSx0ZT1PYmplY3QuZGVmaW5lUHJvcGVydHksZWU9e2Y6R3Q/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihYdCh0KSxlPVp0KGUsITApLFh0KG4pLEp0KXRyeXtyZXR1cm4gdGUodCxlLG4pfWNhdGNoKHQpe31pZihcImdldFwiaW4gbnx8XCJzZXRcImluIG4pdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhXCIpO3JldHVyblwidmFsdWVcImluIG4mJih0W2VdPW4udmFsdWUpLHR9fSxuZT1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX0saWU9R3Q/ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlZS5mKHQsZSxuZSgxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH0sb2U9e30uaGFzT3duUHJvcGVydHkscmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb2UuY2FsbCh0LGUpfSxhZT0wLHNlPU1hdGgucmFuZG9tKCksbGU9ZnVuY3Rpb24odCl7cmV0dXJuXCJTeW1ib2woXCIuY29uY2F0KHZvaWQgMD09PXQ/XCJcIjp0LFwiKV9cIiwoKythZStzZSkudG9TdHJpbmcoMzYpKX0sdWU9byhmdW5jdGlvbih0KXt2YXIgZT1sZShcInNyY1wiKSxuPUZ1bmN0aW9uLnRvU3RyaW5nLGk9KFwiXCIrbikuc3BsaXQoXCJ0b1N0cmluZ1wiKTtXdC5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCl9LCh0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLG8scil7dmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgbzthJiYocmUobyxcIm5hbWVcIil8fGllKG8sXCJuYW1lXCIsbikpLHRbbl0hPT1vJiYoYSYmKHJlKG8sZSl8fGllKG8sZSx0W25dP1wiXCIrdFtuXTppLmpvaW4oU3RyaW5nKG4pKSkpLHQ9PT1WdD90W25dPW86cj90W25dP3Rbbl09bzppZSh0LG4sbyk6KGRlbGV0ZSB0W25dLGllKHQsbixvKSkpfSkoRnVuY3Rpb24ucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMmJnRoaXNbZV18fG4uY2FsbCh0aGlzKX0pfSksY2U9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9LGhlPWZ1bmN0aW9uKHQsZSxuKXtpZihjZSh0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiB0LmNhbGwoZSxuLGkpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4saSxvKXtyZXR1cm4gdC5jYWxsKGUsbixpLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSxkZT1mdW5jdGlvbiB0KGUsbixpKXt2YXIgbyxyLGEscyxsPWUmdC5GLHU9ZSZ0LkcsYz1lJnQuUCxoPWUmdC5CLGQ9dT9WdDplJnQuUz9WdFtuXXx8KFZ0W25dPXt9KTooVnRbbl18fHt9KS5wcm90b3R5cGUsZj11P1d0Old0W25dfHwoV3Rbbl09e30pLHA9Zi5wcm90b3R5cGV8fChmLnByb3RvdHlwZT17fSk7dSYmKGk9bik7Zm9yKG8gaW4gaSlhPSgocj0hbCYmZCYmdm9pZCAwIT09ZFtvXSk/ZDppKVtvXSxzPWgmJnI/aGUoYSxWdCk6YyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYT9oZShGdW5jdGlvbi5jYWxsLGEpOmEsZCYmdWUoZCxvLGEsZSZ0LlUpLGZbb10hPWEmJmllKGYsbyxzKSxjJiZwW29dIT1hJiYocFtvXT1hKX07VnQuY29yZT1XdCxkZS5GPTEsZGUuRz0yLGRlLlM9NCxkZS5QPTgsZGUuQj0xNixkZS5XPTMyLGRlLlU9NjQsZGUuUj0xMjg7dmFyIGZlPWRlLHBlPXtmOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxnZT17fS50b1N0cmluZyxtZT1mdW5jdGlvbih0KXtyZXR1cm4gZ2UuY2FsbCh0KS5zbGljZSg4LC0xKX0sX2U9T2JqZWN0KFwielwiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuXCJTdHJpbmdcIj09bWUodCk/dC5zcGxpdChcIlwiKTpPYmplY3QodCl9LHZlPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09dCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrdCk7cmV0dXJuIHR9LGJlPWZ1bmN0aW9uKHQpe3JldHVybiBfZSh2ZSh0KSl9LHllPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isa2U9e2Y6R3Q/eWU6ZnVuY3Rpb24odCxlKXtpZih0PWJlKHQpLGU9WnQoZSwhMCksSnQpdHJ5e3JldHVybiB5ZSh0LGUpfWNhdGNoKHQpe31pZihyZSh0LGUpKXJldHVybiBuZSghcGUuZi5jYWxsKHQsZSksdFtlXSl9fSx3ZT1mdW5jdGlvbih0LGUpe2lmKFh0KHQpLCFVdChlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfSxFZT17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKHQsZSxuKXt0cnl7KG49aGUoRnVuY3Rpb24uY2FsbCxrZS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpKSh0LFtdKSxlPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaCh0KXtlPSEwfXJldHVybiBmdW5jdGlvbih0LGkpe3JldHVybiB3ZSh0LGkpLGU/dC5fX3Byb3RvX189aTpuKHQsaSksdH19KHt9LCExKTp2b2lkIDApLGNoZWNrOndlfTtmZShmZS5TLFwiT2JqZWN0XCIse3NldFByb3RvdHlwZU9mOkVlLnNldH0pO1d0Lk9iamVjdC5zZXRQcm90b3R5cGVPZjt2YXIgQ2U9VnRbXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fChWdFtcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSksQWU9ZnVuY3Rpb24odCl7cmV0dXJuIENlW3RdfHwoQ2VbdF09e30pfSxTZT1vKGZ1bmN0aW9uKHQpe3ZhciBlPUFlKFwid2tzXCIpLG49VnQuU3ltYm9sLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgbjsodC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfHwoZVt0XT1pJiZuW3RdfHwoaT9uOmxlKShcIlN5bWJvbC5cIit0KSl9KS5zdG9yZT1lfSksUGU9U2UoXCJ0b1N0cmluZ1RhZ1wiKSxPZT1cIkFyZ3VtZW50c1wiPT1tZShmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLHhlPWZ1bmN0aW9uKHQpe3ZhciBlLG4saTtyZXR1cm4gdm9pZCAwPT09dD9cIlVuZGVmaW5lZFwiOm51bGw9PT10P1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihuPWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKHQpe319KGU9T2JqZWN0KHQpLFBlKSk/bjpPZT9tZShlKTpcIk9iamVjdFwiPT0oaT1tZShlKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2FsbGVlP1wiQXJndW1lbnRzXCI6aX0sVGU9e307VGVbU2UoXCJ0b1N0cmluZ1RhZ1wiKV09XCJ6XCIsVGUrXCJcIiE9XCJbb2JqZWN0IHpdXCImJnVlKE9iamVjdC5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IFwiK3hlKHRoaXMpK1wiXVwifSwhMCk7dmFyIExlPU1hdGguY2VpbCxNZT1NYXRoLmZsb29yLERlPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/TWU6TGUpKHQpfSxJZT17fSxOZT1NYXRoLm1pbixCZT1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP05lKERlKHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9LGplPU1hdGgubWF4LEhlPU1hdGgubWluLFJlPUFlKFwia2V5c1wiKSxGZT1mdW5jdGlvbih0KXtyZXR1cm4gUmVbdF18fChSZVt0XT1sZSh0KSl9LHFlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7dmFyIG8scj1iZShlKSxhPUJlKHIubGVuZ3RoKSxzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQ9RGUodCkpPDA/amUodCtlLDApOkhlKHQsZSl9KGksYSk7aWYodCYmbiE9bil7Zm9yKDthPnM7KWlmKChvPXJbcysrXSkhPW8pcmV0dXJuITB9ZWxzZSBmb3IoO2E+cztzKyspaWYoKHR8fHMgaW4gcikmJnJbc109PT1uKXJldHVybiB0fHxzfHwwO3JldHVybiF0JiYtMX19KCExKSx6ZT1GZShcIklFX1BST1RPXCIpLFZlPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpLFdlPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixpPWJlKHQpLG89MCxyPVtdO2ZvcihuIGluIGkpbiE9emUmJnJlKGksbikmJnIucHVzaChuKTtmb3IoO2UubGVuZ3RoPm87KXJlKGksbj1lW28rK10pJiYofnFlKHIsbil8fHIucHVzaChuKSk7cmV0dXJuIHJ9KHQsVmUpfSxVZT1HdD9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe1h0KHQpO2Zvcih2YXIgbixpPVdlKGUpLG89aS5sZW5ndGgscj0wO28+cjspZWUuZih0LG49aVtyKytdLGVbbl0pO3JldHVybiB0fSxYZT1WdC5kb2N1bWVudCxZZT1YZSYmWGUuZG9jdW1lbnRFbGVtZW50LEdlPUZlKFwiSUVfUFJPVE9cIiksJGU9ZnVuY3Rpb24oKXt9LEtlPWZ1bmN0aW9uKCl7dmFyIHQsZT1RdChcImlmcmFtZVwiKSxuPVZlLmxlbmd0aDtmb3IoZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLFllLmFwcGVuZENoaWxkKGUpLGUuc3JjPVwiamF2YXNjcmlwdDpcIiwodD1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpLm9wZW4oKSx0LndyaXRlKFwiPHNjcmlwdD5kb2N1bWVudC5GPU9iamVjdDxcXC9zY3JpcHQ+XCIpLHQuY2xvc2UoKSxLZT10LkY7bi0tOylkZWxldGUgS2UucHJvdG90eXBlW1ZlW25dXTtyZXR1cm4gS2UoKX0sUWU9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbnVsbCE9PXQ/KCRlLnByb3RvdHlwZT1YdCh0KSxuPW5ldyAkZSwkZS5wcm90b3R5cGU9bnVsbCxuW0dlXT10KTpuPUtlKCksdm9pZCAwPT09ZT9uOlVlKG4sZSl9LEplPWVlLmYsWmU9U2UoXCJ0b1N0cmluZ1RhZ1wiKSx0bj1mdW5jdGlvbih0LGUsbil7dCYmIXJlKHQ9bj90OnQucHJvdG90eXBlLFplKSYmSmUodCxaZSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX0sZW49e307aWUoZW4sU2UoXCJpdGVyYXRvclwiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSk7dmFyIG5uPWZ1bmN0aW9uKHQsZSxuKXt0LnByb3RvdHlwZT1RZShlbix7bmV4dDpuZSgxLG4pfSksdG4odCxlK1wiIEl0ZXJhdG9yXCIpfSxvbj1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHZlKHQpKX0scm49RmUoXCJJRV9QUk9UT1wiKSxhbj1PYmplY3QucHJvdG90eXBlLHNuPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9b24odCkscmUodCxybik/dFtybl06XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD9hbjpudWxsfSxsbj1TZShcIml0ZXJhdG9yXCIpLHVuPSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSksY249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30saG49ZnVuY3Rpb24odCxlLG4saSxvLHIsYSl7bm4obixlLGkpO3ZhciBzLGwsdSxjPWZ1bmN0aW9uKHQpe2lmKCF1biYmdCBpbiBwKXJldHVybiBwW3RdO3N3aXRjaCh0KXtjYXNlXCJrZXlzXCI6Y2FzZVwidmFsdWVzXCI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX0saD1lK1wiIEl0ZXJhdG9yXCIsZD1cInZhbHVlc1wiPT1vLGY9ITEscD10LnByb3RvdHlwZSxnPXBbbG5dfHxwW1wiQEBpdGVyYXRvclwiXXx8byYmcFtvXSxtPWd8fGMobyksXz1vP2Q/YyhcImVudHJpZXNcIik6bTp2b2lkIDAsdj1cIkFycmF5XCI9PWU/cC5lbnRyaWVzfHxnOmc7aWYodiYmKHU9c24odi5jYWxsKG5ldyB0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmdS5uZXh0JiYodG4odSxoLCEwKSxyZSh1LGxuKXx8aWUodSxsbixjbikpLGQmJmcmJlwidmFsdWVzXCIhPT1nLm5hbWUmJihmPSEwLG09ZnVuY3Rpb24oKXtyZXR1cm4gZy5jYWxsKHRoaXMpfSksKHVufHxmfHwhcFtsbl0pJiZpZShwLGxuLG0pLEllW2VdPW0sSWVbaF09Y24sbylpZihzPXt2YWx1ZXM6ZD9tOmMoXCJ2YWx1ZXNcIiksa2V5czpyP206YyhcImtleXNcIiksZW50cmllczpffSxhKWZvcihsIGluIHMpbCBpbiBwfHx1ZShwLGwsc1tsXSk7ZWxzZSBmZShmZS5QK2ZlLkYqKHVufHxmKSxlLHMpO3JldHVybiBzfSxkbj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSxvLHI9U3RyaW5nKHZlKGUpKSxhPURlKG4pLHM9ci5sZW5ndGg7cmV0dXJuIGE8MHx8YT49cz90P1wiXCI6dm9pZCAwOihpPXIuY2hhckNvZGVBdChhKSk8NTUyOTZ8fGk+NTYzMTl8fGErMT09PXN8fChvPXIuY2hhckNvZGVBdChhKzEpKTw1NjMyMHx8bz41NzM0Mz90P3IuY2hhckF0KGEpOmk6dD9yLnNsaWNlKGEsYSsyKTpvLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzZ9fSghMCk7aG4oU3RyaW5nLFwiU3RyaW5nXCIsZnVuY3Rpb24odCl7dGhpcy5fdD1TdHJpbmcodCksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fdCxuPXRoaXMuX2k7cmV0dXJuIG4+PWUubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KHQ9ZG4oZSxuKSx0aGlzLl9pKz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KTt2YXIgZm49U2UoXCJ1bnNjb3BhYmxlc1wiKSxwbj1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1wbltmbl0mJmllKHBuLGZuLHt9KTt2YXIgZ249ZnVuY3Rpb24odCl7cG5bZm5dW3RdPSEwfSxtbj1mdW5jdGlvbih0LGUpe3JldHVybnt2YWx1ZTplLGRvbmU6ISF0fX0sX249aG4oQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD1iZSh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3QsZT10aGlzLl9rLG49dGhpcy5faSsrO3JldHVybiF0fHxuPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbW4oMSkpOlwia2V5c1wiPT1lP21uKDAsbik6XCJ2YWx1ZXNcIj09ZT9tbigwLHRbbl0pOm1uKDAsW24sdFtuXV0pfSxcInZhbHVlc1wiKTtJZS5Bcmd1bWVudHM9SWUuQXJyYXksZ24oXCJrZXlzXCIpLGduKFwidmFsdWVzXCIpLGduKFwiZW50cmllc1wiKTtmb3IodmFyIHZuPVNlKFwiaXRlcmF0b3JcIiksYm49U2UoXCJ0b1N0cmluZ1RhZ1wiKSx5bj1JZS5BcnJheSxrbj17Q1NTUnVsZUxpc3Q6ITAsQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCxNaW1lVHlwZUFycmF5OiExLE5hbWVkTm9kZU1hcDohMSxOb2RlTGlzdDohMCxQYWludFJlcXVlc3RMaXN0OiExLFBsdWdpbjohMSxQbHVnaW5BcnJheTohMSxTVkdMZW5ndGhMaXN0OiExLFNWR051bWJlckxpc3Q6ITEsU1ZHUGF0aFNlZ0xpc3Q6ITEsU1ZHUG9pbnRMaXN0OiExLFNWR1N0cmluZ0xpc3Q6ITEsU1ZHVHJhbnNmb3JtTGlzdDohMSxTb3VyY2VCdWZmZXJMaXN0OiExLFN0eWxlU2hlZXRMaXN0OiEwLFRleHRUcmFja0N1ZUxpc3Q6ITEsVGV4dFRyYWNrTGlzdDohMSxUb3VjaExpc3Q6ITF9LHduPVdlKGtuKSxFbj0wO0VuPHduLmxlbmd0aDtFbisrKXt2YXIgQ24sQW49d25bRW5dLFNuPWtuW0FuXSxQbj1WdFtBbl0sT249UG4mJlBuLnByb3RvdHlwZTtpZihPbiYmKE9uW3ZuXXx8aWUoT24sdm4seW4pLE9uW2JuXXx8aWUoT24sYm4sQW4pLEllW0FuXT15bixTbikpZm9yKENuIGluIF9uKU9uW0NuXXx8dWUoT24sQ24sX25bQ25dLCEwKX12YXIgeG49ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSBpbiBlKXVlKHQsaSxlW2ldLG4pO3JldHVybiB0fSxUbj1mdW5jdGlvbih0LGUsbixpKXtpZighKHQgaW5zdGFuY2VvZiBlKXx8dm9pZCAwIT09aSYmaSBpbiB0KXRocm93IFR5cGVFcnJvcihuK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIHR9LExuPWZ1bmN0aW9uKHQsZSxuLGkpe3RyeXtyZXR1cm4gaT9lKFh0KG4pWzBdLG5bMV0pOmUobil9Y2F0Y2goZSl7dmFyIG89dC5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmWHQoby5jYWxsKHQpKSxlfX0sTW49U2UoXCJpdGVyYXRvclwiKSxEbj1BcnJheS5wcm90b3R5cGUsSW49ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihJZS5BcnJheT09PXR8fERuW01uXT09PXQpfSxObj1TZShcIml0ZXJhdG9yXCIpLEJuPVd0LmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtObl18fHRbXCJAQGl0ZXJhdG9yXCJdfHxJZVt4ZSh0KV19LGpuPW8oZnVuY3Rpb24odCl7dmFyIGU9e30sbj17fSxpPXQuZXhwb3J0cz1mdW5jdGlvbih0LGksbyxyLGEpe3ZhciBzLGwsdSxjLGg9YT9mdW5jdGlvbigpe3JldHVybiB0fTpCbih0KSxkPWhlKG8scixpPzI6MSksZj0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGgpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihJbihoKSl7Zm9yKHM9QmUodC5sZW5ndGgpO3M+ZjtmKyspaWYoKGM9aT9kKFh0KGw9dFtmXSlbMF0sbFsxXSk6ZCh0W2ZdKSk9PT1lfHxjPT09bilyZXR1cm4gY31lbHNlIGZvcih1PWguY2FsbCh0KTshKGw9dS5uZXh0KCkpLmRvbmU7KWlmKChjPUxuKHUsZCxsLnZhbHVlLGkpKT09PWV8fGM9PT1uKXJldHVybiBjfTtpLkJSRUFLPWUsaS5SRVRVUk49bn0pLEhuPVNlKFwic3BlY2llc1wiKSxSbj1vKGZ1bmN0aW9uKHQpe3ZhciBlPWxlKFwibWV0YVwiKSxuPWVlLmYsaT0wLG89T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0scj0hWXQoZnVuY3Rpb24oKXtyZXR1cm4gbyhPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGE9ZnVuY3Rpb24odCl7bih0LGUse3ZhbHVlOntpOlwiT1wiKyArK2ksdzp7fX19KX0scz10LmV4cG9ydHM9e0tFWTplLE5FRUQ6ITEsZmFzdEtleTpmdW5jdGlvbih0LG4pe2lmKCFVdCh0KSlyZXR1cm5cInN5bWJvbFwiPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpP3Q6KFwic3RyaW5nXCI9PXR5cGVvZiB0P1wiU1wiOlwiUFwiKSt0O2lmKCFyZSh0LGUpKXtpZighbyh0KSlyZXR1cm5cIkZcIjtpZighbilyZXR1cm5cIkVcIjthKHQpfXJldHVybiB0W2VdLml9LGdldFdlYWs6ZnVuY3Rpb24odCxuKXtpZighcmUodCxlKSl7aWYoIW8odCkpcmV0dXJuITA7aWYoIW4pcmV0dXJuITE7YSh0KX1yZXR1cm4gdFtlXS53fSxvbkZyZWV6ZTpmdW5jdGlvbih0KXtyZXR1cm4gciYmcy5ORUVEJiZvKHQpJiYhcmUodCxlKSYmYSh0KSx0fX19KSxGbj0oUm4uS0VZLFJuLk5FRUQsUm4uZmFzdEtleSxSbi5nZXRXZWFrLFJuLm9uRnJlZXplLGZ1bmN0aW9uKHQsZSl7aWYoIVV0KHQpfHx0Ll90IT09ZSl0aHJvdyBUeXBlRXJyb3IoXCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsIFwiK2UrXCIgcmVxdWlyZWQhXCIpO3JldHVybiB0fSkscW49ZWUuZix6bj1Sbi5mYXN0S2V5LFZuPUd0P1wiX3NcIjpcInNpemVcIixXbj1mdW5jdGlvbih0LGUpe3ZhciBuLGk9em4oZSk7aWYoXCJGXCIhPT1pKXJldHVybiB0Ll9pW2ldO2ZvcihuPXQuX2Y7bjtuPW4ubilpZihuLms9PWUpcmV0dXJuIG59LFVuPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10KGZ1bmN0aW9uKHQscil7VG4odCxvLGUsXCJfaVwiKSx0Ll90PWUsdC5faT1RZShudWxsKSx0Ll9mPXZvaWQgMCx0Ll9sPXZvaWQgMCx0W1ZuXT0wLHZvaWQgMCE9ciYmam4ocixuLHRbaV0sdCl9KTtyZXR1cm4geG4oby5wcm90b3R5cGUse2NsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PUZuKHRoaXMsZSksbj10Ll9pLGk9dC5fZjtpO2k9aS5uKWkucj0hMCxpLnAmJihpLnA9aS5wLm49dm9pZCAwKSxkZWxldGUgbltpLmldO3QuX2Y9dC5fbD12b2lkIDAsdFtWbl09MH0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBuPUZuKHRoaXMsZSksaT1XbihuLHQpO2lmKGkpe3ZhciBvPWkubixyPWkucDtkZWxldGUgbi5faVtpLmldLGkucj0hMCxyJiYoci5uPW8pLG8mJihvLnA9ciksbi5fZj09aSYmKG4uX2Y9byksbi5fbD09aSYmKG4uX2w9ciksbltWbl0tLX1yZXR1cm4hIWl9LGZvckVhY2g6ZnVuY3Rpb24odCl7Rm4odGhpcyxlKTtmb3IodmFyIG4saT1oZSh0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpO249bj9uLm46dGhpcy5fZjspZm9yKGkobi52LG4uayx0aGlzKTtuJiZuLnI7KW49bi5wfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISFXbihGbih0aGlzLGUpLHQpfX0pLEd0JiZxbihvLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZuKHRoaXMsZSlbVm5dfX0pLG99LGRlZjpmdW5jdGlvbih0LGUsbil7dmFyIGksbyxyPVduKHQsZSk7cmV0dXJuIHI/ci52PW46KHQuX2w9cj17aTpvPXpuKGUsITApLGs6ZSx2Om4scDppPXQuX2wsbjp2b2lkIDAscjohMX0sdC5fZnx8KHQuX2Y9ciksaSYmKGkubj1yKSx0W1ZuXSsrLFwiRlwiIT09byYmKHQuX2lbb109cikpLHR9LGdldEVudHJ5OlduLHNldFN0cm9uZzpmdW5jdGlvbih0LGUsbil7aG4odCxlLGZ1bmN0aW9uKHQsbil7dGhpcy5fdD1Gbih0LGUpLHRoaXMuX2s9bix0aGlzLl9sPXZvaWQgMH0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fayxlPXRoaXMuX2w7ZSYmZS5yOyllPWUucDtyZXR1cm4gdGhpcy5fdCYmKHRoaXMuX2w9ZT1lP2Uubjp0aGlzLl90Ll9mKT9cImtleXNcIj09dD9tbigwLGUuayk6XCJ2YWx1ZXNcIj09dD9tbigwLGUudik6bW4oMCxbZS5rLGUudl0pOih0aGlzLl90PXZvaWQgMCxtbigxKSl9LG4/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhbiwhMCksZnVuY3Rpb24odCl7dmFyIGU9VnRbdF07R3QmJmUmJiFlW0huXSYmZWUuZihlLEhuLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9KGUpfX0sWG49U2UoXCJpdGVyYXRvclwiKSxZbj0hMTt0cnl7WzddW1huXSgpLnJldHVybj1mdW5jdGlvbigpe1luPSEwfX1jYXRjaCh0KXt9dmFyIEduPWZ1bmN0aW9uKHQsZSl7aWYoIWUmJiFZbilyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIGk9WzddLG89aVtYbl0oKTtvLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX0saVtYbl09ZnVuY3Rpb24oKXtyZXR1cm4gb30sdChpKX1jYXRjaCh0KXt9cmV0dXJuIG59LCRuPUVlLnNldCxLbj1mdW5jdGlvbih0LGUsbixpLG8scil7dmFyIGE9VnRbdF0scz1hLGw9bz9cInNldFwiOlwiYWRkXCIsdT1zJiZzLnByb3RvdHlwZSxjPXt9LGg9ZnVuY3Rpb24odCl7dmFyIGU9dVt0XTt1ZSh1LHQsXCJkZWxldGVcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4hKHImJiFVdCh0KSkmJmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiaGFzXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShyJiYhVXQodCkpJiZlLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImdldFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiByJiYhVXQodCk/dm9pZCAwOmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiYWRkXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIGUuY2FsbCh0aGlzLDA9PT10PzA6dCksdGhpc306ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHRoaXMsMD09PXQ/MDp0LG4pLHRoaXN9KX07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgcyYmKHJ8fHUuZm9yRWFjaCYmIVl0KGZ1bmN0aW9uKCl7KG5ldyBzKS5lbnRyaWVzKCkubmV4dCgpfSkpKXt2YXIgZD1uZXcgcyxmPWRbbF0ocj97fTotMCwxKSE9ZCxwPVl0KGZ1bmN0aW9uKCl7ZC5oYXMoMSl9KSxnPUduKGZ1bmN0aW9uKHQpe25ldyBzKHQpfSksbT0hciYmWXQoZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IHMsZT01O2UtLTspdFtsXShlLGUpO3JldHVybiF0LmhhcygtMCl9KTtnfHwoKHM9ZShmdW5jdGlvbihlLG4pe1RuKGUscyx0KTt2YXIgaT1mdW5jdGlvbih0LGUsbil7dmFyIGksbz1lLmNvbnN0cnVjdG9yO3JldHVybiBvIT09biYmXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKGk9by5wcm90b3R5cGUpIT09bi5wcm90b3R5cGUmJlV0KGkpJiYkbiYmJG4odCxpKSx0fShuZXcgYSxlLHMpO3JldHVybiB2b2lkIDAhPW4mJmpuKG4sbyxpW2xdLGkpLGl9KSkucHJvdG90eXBlPXUsdS5jb25zdHJ1Y3Rvcj1zKSwocHx8bSkmJihoKFwiZGVsZXRlXCIpLGgoXCJoYXNcIiksbyYmaChcImdldFwiKSksKG18fGYpJiZoKGwpLHImJnUuY2xlYXImJmRlbGV0ZSB1LmNsZWFyfWVsc2Ugcz1pLmdldENvbnN0cnVjdG9yKGUsdCxvLGwpLHhuKHMucHJvdG90eXBlLG4pLFJuLk5FRUQ9ITA7cmV0dXJuIHRuKHMsdCksY1t0XT1zLGZlKGZlLkcrZmUuVytmZS5GKihzIT1hKSxjKSxyfHxpLnNldFN0cm9uZyhzLHQsbyksc30sUW49KEtuKFwiU2V0XCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7YWRkOmZ1bmN0aW9uKHQpe3JldHVybiBVbi5kZWYoRm4odGhpcyxcIlNldFwiKSx0PTA9PT10PzA6dCx0KX19LFVuKSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZih4ZSh0aGlzKSE9dCl0aHJvdyBUeXBlRXJyb3IodCtcIiN0b0pTT04gaXNuJ3QgZ2VuZXJpY1wiKTtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtyZXR1cm4gam4odCwhMSxuLnB1c2gsbixlKSxufSh0aGlzKX19KTtmZShmZS5QK2ZlLlIsXCJTZXRcIix7dG9KU09OOlFuKFwiU2V0XCIpfSk7dmFyIEpuPWZ1bmN0aW9uKHQpe2ZlKGZlLlMsdCx7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpO3QtLTspZVt0XT1hcmd1bWVudHNbdF07cmV0dXJuIG5ldyB0aGlzKGUpfX0pfTtKbihcIlNldFwiKTt2YXIgWm49ZnVuY3Rpb24odCl7ZmUoZmUuUyx0LHtmcm9tOmZ1bmN0aW9uKHQpe3ZhciBlLG4saSxvLHI9YXJndW1lbnRzWzFdO3JldHVybiBjZSh0aGlzKSwoZT12b2lkIDAhPT1yKSYmY2Uociksdm9pZCAwPT10P25ldyB0aGlzOihuPVtdLGU/KGk9MCxvPWhlKHIsYXJndW1lbnRzWzJdLDIpLGpuKHQsITEsZnVuY3Rpb24odCl7bi5wdXNoKG8odCxpKyspKX0pKTpqbih0LCExLG4ucHVzaCxuKSxuZXcgdGhpcyhuKSl9fSl9O1puKFwiU2V0XCIpO1d0LlNldCxLbihcIk1hcFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2dldDpmdW5jdGlvbih0KXt2YXIgZT1Vbi5nZXRFbnRyeShGbih0aGlzLFwiTWFwXCIpLHQpO3JldHVybiBlJiZlLnZ9LHNldDpmdW5jdGlvbih0LGUpe3JldHVybiBVbi5kZWYoRm4odGhpcyxcIk1hcFwiKSwwPT09dD8wOnQsZSl9fSxVbiwhMCk7ZmUoZmUuUCtmZS5SLFwiTWFwXCIse3RvSlNPTjpRbihcIk1hcFwiKX0pLEpuKFwiTWFwXCIpLFpuKFwiTWFwXCIpO1d0Lk1hcDt2YXIgdGk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1tZSh0KX0sZWk9U2UoXCJzcGVjaWVzXCIpLG5pPWZ1bmN0aW9uKHQsZSl7dmFyIG49MT09dCxpPTI9PXQsbz0zPT10LHI9ND09dCxhPTY9PXQscz01PT10fHxhLGw9ZXx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3KGZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0aSh0KSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKGU9dC5jb25zdHJ1Y3Rvcil8fGUhPT1BcnJheSYmIXRpKGUucHJvdG90eXBlKXx8KGU9dm9pZCAwKSxVdChlKSYmbnVsbD09PShlPWVbZWldKSYmKGU9dm9pZCAwKSksdm9pZCAwPT09ZT9BcnJheTplfSh0KSkoZSl9O3JldHVybiBmdW5jdGlvbihlLHUsYyl7Zm9yKHZhciBoLGQsZj1vbihlKSxwPV9lKGYpLGc9aGUodSxjLDMpLG09QmUocC5sZW5ndGgpLF89MCx2PW4/bChlLG0pOmk/bChlLDApOnZvaWQgMDttPl87XysrKWlmKChzfHxfIGluIHApJiYoaD1wW19dLGQ9ZyhoLF8sZiksdCkpaWYobil2W19dPWQ7ZWxzZSBpZihkKXN3aXRjaCh0KXtjYXNlIDM6cmV0dXJuITA7Y2FzZSA1OnJldHVybiBoO2Nhc2UgNjpyZXR1cm4gXztjYXNlIDI6di5wdXNoKGgpfWVsc2UgaWYocilyZXR1cm4hMTtyZXR1cm4gYT8tMTpvfHxyP3I6dn19LGlpPXtmOk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LG9pPU9iamVjdC5hc3NpZ24scmk9IW9pfHxZdChmdW5jdGlvbigpe3ZhciB0PXt9LGU9e30sbj1TeW1ib2woKSxpPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIjtyZXR1cm4gdFtuXT03LGkuc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPXR9KSw3IT1vaSh7fSx0KVtuXXx8T2JqZWN0LmtleXMob2koe30sZSkpLmpvaW4oXCJcIikhPWl9KT9mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1vbih0KSxpPWFyZ3VtZW50cy5sZW5ndGgsbz0xLHI9aWkuZixhPXBlLmY7aT5vOylmb3IodmFyIHMsbD1fZShhcmd1bWVudHNbbysrXSksdT1yP1dlKGwpLmNvbmNhdChyKGwpKTpXZShsKSxjPXUubGVuZ3RoLGg9MDtjPmg7KWEuY2FsbChsLHM9dVtoKytdKSYmKG5bc109bFtzXSk7cmV0dXJuIG59Om9pLGFpPVJuLmdldFdlYWssc2k9bmkoNSksbGk9bmkoNiksdWk9MCxjaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5fbHx8KHQuX2w9bmV3IGhpKX0saGk9ZnVuY3Rpb24oKXt0aGlzLmE9W119LGRpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHNpKHQuYSxmdW5jdGlvbih0KXtyZXR1cm4gdFswXT09PWV9KX07aGkucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9ZGkodGhpcyx0KTtpZihlKXJldHVybiBlWzFdfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISFkaSh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1kaSh0aGlzLHQpO24/blsxXT1lOnRoaXMuYS5wdXNoKFt0LGVdKX0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBlPWxpKHRoaXMuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KTtyZXR1cm5+ZSYmdGhpcy5hLnNwbGljZShlLDEpLCEhfmV9fTt2YXIgZmk9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXQoZnVuY3Rpb24odCxyKXtUbih0LG8sZSxcIl9pXCIpLHQuX3Q9ZSx0Ll9pPXVpKyssdC5fbD12b2lkIDAsdm9pZCAwIT1yJiZqbihyLG4sdFtpXSx0KX0pO3JldHVybiB4bihvLnByb3RvdHlwZSx7ZGVsZXRlOmZ1bmN0aW9uKHQpe2lmKCFVdCh0KSlyZXR1cm4hMTt2YXIgbj1haSh0KTtyZXR1cm4hMD09PW4/Y2koRm4odGhpcyxlKSkuZGVsZXRlKHQpOm4mJnJlKG4sdGhpcy5faSkmJmRlbGV0ZSBuW3RoaXMuX2ldfSxoYXM6ZnVuY3Rpb24odCl7aWYoIVV0KHQpKXJldHVybiExO3ZhciBuPWFpKHQpO3JldHVybiEwPT09bj9jaShGbih0aGlzLGUpKS5oYXModCk6biYmcmUobix0aGlzLl9pKX19KSxvfSxkZWY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWFpKFh0KGUpLCEwKTtyZXR1cm4hMD09PWk/Y2kodCkuc2V0KGUsbik6aVt0Ll9pXT1uLHR9LHVmc3RvcmU6Y2l9O28oZnVuY3Rpb24odCl7dmFyIGUsbj1uaSgwKSxpPVJuLmdldFdlYWssbz1PYmplY3QuaXNFeHRlbnNpYmxlLHI9ZmkudWZzdG9yZSxhPXt9LHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSxsPXtnZXQ6ZnVuY3Rpb24odCl7aWYoVXQodCkpe3ZhciBlPWkodCk7cmV0dXJuITA9PT1lP3IoRm4odGhpcyxcIldlYWtNYXBcIikpLmdldCh0KTplP2VbdGhpcy5faV06dm9pZCAwfX0sc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZpLmRlZihGbih0aGlzLFwiV2Vha01hcFwiKSx0LGUpfX0sdT10LmV4cG9ydHM9S24oXCJXZWFrTWFwXCIscyxsLGZpLCEwLCEwKTtZdChmdW5jdGlvbigpe3JldHVybiA3IT0obmV3IHUpLnNldCgoT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KShhKSw3KS5nZXQoYSl9KSYmKGU9ZmkuZ2V0Q29uc3RydWN0b3IocyxcIldlYWtNYXBcIikscmkoZS5wcm90b3R5cGUsbCksUm4uTkVFRD0hMCxuKFtcImRlbGV0ZVwiLFwiaGFzXCIsXCJnZXRcIixcInNldFwiXSxmdW5jdGlvbih0KXt2YXIgbj11LnByb3RvdHlwZSxpPW5bdF07dWUobix0LGZ1bmN0aW9uKG4scil7aWYoVXQobikmJiFvKG4pKXt0aGlzLl9mfHwodGhpcy5fZj1uZXcgZSk7dmFyIGE9dGhpcy5fZlt0XShuLHIpO3JldHVyblwic2V0XCI9PXQ/dGhpczphfXJldHVybiBpLmNhbGwodGhpcyxuLHIpfSl9KSl9KTtKbihcIldlYWtNYXBcIiksWm4oXCJXZWFrTWFwXCIpO1d0LldlYWtNYXA7dmFyIHBpPWZ1bmN0aW9uKHQsZSxuKXtlIGluIHQ/ZWUuZih0LGUsbmUoMCxuKSk6dFtlXT1ufTtmZShmZS5TK2ZlLkYqIUduKGZ1bmN0aW9uKHQpe30pLFwiQXJyYXlcIix7ZnJvbTpmdW5jdGlvbih0KXt2YXIgZSxuLGksbyxyPW9uKHQpLGE9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHM9YXJndW1lbnRzLmxlbmd0aCxsPXM+MT9hcmd1bWVudHNbMV06dm9pZCAwLHU9dm9pZCAwIT09bCxjPTAsaD1CbihyKTtpZih1JiYobD1oZShsLHM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PWh8fGE9PUFycmF5JiZJbihoKSlmb3Iobj1uZXcgYShlPUJlKHIubGVuZ3RoKSk7ZT5jO2MrKylwaShuLGMsdT9sKHJbY10sYyk6cltjXSk7ZWxzZSBmb3Iobz1oLmNhbGwociksbj1uZXcgYTshKGk9by5uZXh0KCkpLmRvbmU7YysrKXBpKG4sYyx1P0xuKG8sbCxbaS52YWx1ZSxjXSwhMCk6aS52YWx1ZSk7cmV0dXJuIG4ubGVuZ3RoPWMsbn19KTtXdC5BcnJheS5mcm9tO3ZhciBnaT1uZXcgU2V0KFtcImFubm90YXRpb24teG1sXCIsXCJjb2xvci1wcm9maWxlXCIsXCJmb250LWZhY2VcIixcImZvbnQtZmFjZS1zcmNcIixcImZvbnQtZmFjZS11cmlcIixcImZvbnQtZmFjZS1mb3JtYXRcIixcImZvbnQtZmFjZS1uYW1lXCIsXCJtaXNzaW5nLWdseXBoXCJdKSxtaT17Y3VzdG9tOjEsZmFpbGVkOjJ9LF9pPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9sb2NhbE5hbWVUb0RlZmluaXRpb249bmV3IE1hcCx0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbj1uZXcgTWFwLHRoaXMuX3BhdGNoZXM9W10sdGhpcy5faGFzUGF0Y2hlcz0hMX1yZXR1cm4gZyh0LFt7a2V5Olwic2V0RGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uLnNldCh0LGUpLHRoaXMuX2NvbnN0cnVjdG9yVG9EZWZpbml0aW9uLnNldChlLmNvbnN0cnVjdG9yLGUpfX0se2tleTpcImxvY2FsTmFtZVRvRGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sb2NhbE5hbWVUb0RlZmluaXRpb24uZ2V0KHQpfX0se2tleTpcImNvbnN0cnVjdG9yVG9EZWZpbml0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbnN0cnVjdG9yVG9EZWZpbml0aW9uLmdldCh0KX19LHtrZXk6XCJhZGRQYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2hhc1BhdGNoZXM9ITAsdGhpcy5fcGF0Y2hlcy5wdXNoKHQpfX0se2tleTpcInBhdGNoVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faGFzUGF0Y2hlcyYmbCh0LGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhdGNoKHQpfSl9fSx7a2V5OlwicGF0Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9oYXNQYXRjaGVzJiYhdC5fX0NFX3BhdGNoZWQpe3QuX19DRV9wYXRjaGVkPSEwO2Zvcih2YXIgZT0wO2U8dGhpcy5fcGF0Y2hlcy5sZW5ndGg7ZSsrKXRoaXMuX3BhdGNoZXNbZV0odCl9fX0se2tleTpcImNvbm5lY3RUcmVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9W107bCh0LGZ1bmN0aW9uKHQpe3JldHVybiBlLnB1c2godCl9KTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLl9fQ0Vfc3RhdGU9PT1taS5jdXN0b20/YShpKSYmdGhpcy5jb25uZWN0ZWRDYWxsYmFjayhpKTp0aGlzLnVwZ3JhZGVFbGVtZW50KGkpfX19LHtrZXk6XCJkaXNjb25uZWN0VHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2wodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5fX0NFX3N0YXRlPT09bWkuY3VzdG9tJiZ0aGlzLmRpc2Nvbm5lY3RlZENhbGxiYWNrKGkpfX19LHtrZXk6XCJwYXRjaEFuZFVwZ3JhZGVUcmVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpuZXcgU2V0LGk9W107aWYobCh0LGZ1bmN0aW9uKHQpe2lmKFwibGlua1wiPT09dC5sb2NhbE5hbWUmJlwiaW1wb3J0XCI9PT10LmdldEF0dHJpYnV0ZShcInJlbFwiKSl7dmFyIG89dC5pbXBvcnQ7byBpbnN0YW5jZW9mIE5vZGUmJlwiY29tcGxldGVcIj09PW8ucmVhZHlTdGF0ZT8oby5fX0NFX2lzSW1wb3J0RG9jdW1lbnQ9ITAsby5fX0NFX2hhc1JlZ2lzdHJ5PSEwKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgaT10LmltcG9ydDtpLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZHx8KGkuX19DRV9kb2N1bWVudExvYWRIYW5kbGVkPSEwLGkuX19DRV9pc0ltcG9ydERvY3VtZW50PSEwLGkuX19DRV9oYXNSZWdpc3RyeT0hMCxuLmRlbGV0ZShpKSxlLnBhdGNoQW5kVXBncmFkZVRyZWUoaSxuKSl9KX1lbHNlIGkucHVzaCh0KX0sbiksdGhpcy5faGFzUGF0Y2hlcylmb3IodmFyIG89MDtvPGkubGVuZ3RoO28rKyl0aGlzLnBhdGNoKGlbb10pO2Zvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKXRoaXMudXBncmFkZUVsZW1lbnQoaVtyXSl9fSx7a2V5OlwidXBncmFkZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10Ll9fQ0Vfc3RhdGUpe3ZhciBlPXRoaXMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQubG9jYWxOYW1lKTtpZihlKXtlLmNvbnN0cnVjdGlvblN0YWNrLnB1c2godCk7dmFyIG49ZS5jb25zdHJ1Y3Rvcjt0cnl7dHJ5e2lmKG5ldyBuIT09dCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3IgZGlkIG5vdCBwcm9kdWNlIHRoZSBlbGVtZW50IGJlaW5nIHVwZ3JhZGVkLlwiKX1maW5hbGx5e2UuY29uc3RydWN0aW9uU3RhY2sucG9wKCl9fWNhdGNoKGUpe3Rocm93IHQuX19DRV9zdGF0ZT1taS5mYWlsZWQsZX1pZih0Ll9fQ0Vfc3RhdGU9bWkuY3VzdG9tLHQuX19DRV9kZWZpbml0aW9uPWUsZS5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2spZm9yKHZhciBpPWUub2JzZXJ2ZWRBdHRyaWJ1dGVzLG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIHI9aVtvXSxzPXQuZ2V0QXR0cmlidXRlKHIpO251bGwhPT1zJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0LHIsbnVsbCxzLG51bGwpfWEodCkmJnRoaXMuY29ubmVjdGVkQ2FsbGJhY2sodCl9fX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX19DRV9kZWZpbml0aW9uO2UuY29ubmVjdGVkQ2FsbGJhY2smJmUuY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0KSx0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZD0hMH19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuX19DRV9pc0Nvbm5lY3RlZENhbGxiYWNrQ2FsbGVkfHx0aGlzLmNvbm5lY3RlZENhbGxiYWNrKHQpO3ZhciBlPXQuX19DRV9kZWZpbml0aW9uO2UuZGlzY29ubmVjdGVkQ2FsbGJhY2smJmUuZGlzY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0KSx0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZD12b2lkIDB9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj10Ll9fQ0VfZGVmaW5pdGlvbjtyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmci5vYnNlcnZlZEF0dHJpYnV0ZXMuaW5kZXhPZihlKT4tMSYmci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2suY2FsbCh0LGUsbixpLG8pfX1dKSx0fSgpLHZpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9pbnRlcm5hbHM9ZSx0aGlzLl9kb2N1bWVudD1uLHRoaXMuX29ic2VydmVyPXZvaWQgMCx0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZSh0aGlzLl9kb2N1bWVudCksXCJsb2FkaW5nXCI9PT10aGlzLl9kb2N1bWVudC5yZWFkeVN0YXRlJiYodGhpcy5fb2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5faGFuZGxlTXV0YXRpb25zLmJpbmQodGhpcykpLHRoaXMuX29ic2VydmVyLm9ic2VydmUodGhpcy5fZG9jdW1lbnQse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSkpfXJldHVybiBnKHQsW3trZXk6XCJkaXNjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vYnNlcnZlciYmdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpfX0se2tleTpcIl9oYW5kbGVNdXRhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kb2N1bWVudC5yZWFkeVN0YXRlO1wiaW50ZXJhY3RpdmVcIiE9PWUmJlwiY29tcGxldGVcIiE9PWV8fHRoaXMuZGlzY29ubmVjdCgpO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWZvcih2YXIgaT10W25dLmFkZGVkTm9kZXMsbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcj1pW29dO3RoaXMuX2ludGVybmFscy5wYXRjaEFuZFVwZ3JhZGVUcmVlKHIpfX19XSksdH0oKSxiaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3AodGhpcyx0KSx0aGlzLl92YWx1ZT12b2lkIDAsdGhpcy5fcmVzb2x2ZT12b2lkIDAsdGhpcy5fcHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbih0KXtlLl9yZXNvbHZlPXQsZS5fdmFsdWUmJnQoZS5fdmFsdWUpfSl9cmV0dXJuIGcodCxbe2tleTpcInJlc29sdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl92YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlc29sdmVkLlwiKTt0aGlzLl92YWx1ZT10LHRoaXMuX3Jlc29sdmUmJnRoaXMuX3Jlc29sdmUodCl9fSx7a2V5OlwidG9Qcm9taXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvbWlzZX19XSksdH0oKSx5aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cCh0aGlzLHQpLHRoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSExLHRoaXMuX2ludGVybmFscz1lLHRoaXMuX3doZW5EZWZpbmVkRGVmZXJyZWQ9bmV3IE1hcCx0aGlzLl9mbHVzaENhbGxiYWNrPWZ1bmN0aW9uKHQpe3JldHVybiB0KCl9LHRoaXMuX2ZsdXNoUGVuZGluZz0hMSx0aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzPVtdLHRoaXMuX2RvY3VtZW50Q29uc3RydWN0aW9uT2JzZXJ2ZXI9bmV3IHZpKGUsZG9jdW1lbnQpfXJldHVybiBnKHQsW3trZXk6XCJkZWZpbmVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoIShlIGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvcnMgbXVzdCBiZSBmdW5jdGlvbnMuXCIpO2lmKCFyKHQpKXRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBlbGVtZW50IG5hbWUgJ1wiK3QrXCInIGlzIG5vdCB2YWxpZC5cIik7aWYodGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KSl0aHJvdyBuZXcgRXJyb3IoXCJBIGN1c3RvbSBlbGVtZW50IHdpdGggbmFtZSAnXCIrdCtcIicgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkLlwiKTtpZih0aGlzLl9lbGVtZW50RGVmaW5pdGlvbklzUnVubmluZyl0aHJvdyBuZXcgRXJyb3IoXCJBIGN1c3RvbSBlbGVtZW50IGlzIGFscmVhZHkgYmVpbmcgZGVmaW5lZC5cIik7dGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmc9ITA7dmFyIGk9dm9pZCAwLG89dm9pZCAwLGE9dm9pZCAwLHM9dm9pZCAwLGw9dm9pZCAwO3RyeXt2YXIgdT1mdW5jdGlvbih0KXt2YXIgZT1jW3RdO2lmKHZvaWQgMCE9PWUmJiEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgJ1wiK3QrXCInIGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7cmV0dXJuIGV9LGM9ZS5wcm90b3R5cGU7aWYoIShjIGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGN1c3RvbSBlbGVtZW50IGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBlIGlzIG5vdCBhbiBvYmplY3QuXCIpO2k9dShcImNvbm5lY3RlZENhbGxiYWNrXCIpLG89dShcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIpLGE9dShcImFkb3B0ZWRDYWxsYmFja1wiKSxzPXUoXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIiksbD1lLm9ic2VydmVkQXR0cmlidXRlc3x8W119Y2F0Y2godCl7cmV0dXJufWZpbmFsbHl7dGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmc9ITF9dmFyIGg9e2xvY2FsTmFtZTp0LGNvbnN0cnVjdG9yOmUsY29ubmVjdGVkQ2FsbGJhY2s6aSxkaXNjb25uZWN0ZWRDYWxsYmFjazpvLGFkb3B0ZWRDYWxsYmFjazphLGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpzLG9ic2VydmVkQXR0cmlidXRlczpsLGNvbnN0cnVjdGlvblN0YWNrOltdfTt0aGlzLl9pbnRlcm5hbHMuc2V0RGVmaW5pdGlvbih0LGgpLHRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMucHVzaCh0KSx0aGlzLl9mbHVzaFBlbmRpbmd8fCh0aGlzLl9mbHVzaFBlbmRpbmc9ITAsdGhpcy5fZmx1c2hDYWxsYmFjayhmdW5jdGlvbigpe3JldHVybiBuLl9mbHVzaCgpfSkpfX0se2tleTpcIl9mbHVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoITEhPT10aGlzLl9mbHVzaFBlbmRpbmcpZm9yKHRoaXMuX2ZsdXNoUGVuZGluZz0hMSx0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZShkb2N1bWVudCk7dGhpcy5fdW5mbHVzaGVkTG9jYWxOYW1lcy5sZW5ndGg+MDspe3ZhciB0PXRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMuc2hpZnQoKSxlPXRoaXMuX3doZW5EZWZpbmVkRGVmZXJyZWQuZ2V0KHQpO2UmJmUucmVzb2x2ZSh2b2lkIDApfX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pbnRlcm5hbHMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQpO2lmKGUpcmV0dXJuIGUuY29uc3RydWN0b3J9fSx7a2V5Olwid2hlbkRlZmluZWRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighcih0KSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFN5bnRheEVycm9yKFwiJ1wiK3QrXCInIGlzIG5vdCBhIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUuXCIpKTt2YXIgZT10aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLmdldCh0KTtpZihlKXJldHVybiBlLnRvUHJvbWlzZSgpO3ZhciBuPW5ldyBiaTt0aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLnNldCh0LG4pO3JldHVybiB0aGlzLl9pbnRlcm5hbHMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQpJiYtMT09PXRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMuaW5kZXhPZih0KSYmbi5yZXNvbHZlKHZvaWQgMCksbi50b1Byb21pc2UoKX19LHtrZXk6XCJwb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fZG9jdW1lbnRDb25zdHJ1Y3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7dmFyIGU9dGhpcy5fZmx1c2hDYWxsYmFjazt0aGlzLl9mbHVzaENhbGxiYWNrPWZ1bmN0aW9uKG4pe3JldHVybiB0KGZ1bmN0aW9uKCl7cmV0dXJuIGUobil9KX19fV0pLHR9KCk7d2luZG93LkN1c3RvbUVsZW1lbnRSZWdpc3RyeT15aSx5aS5wcm90b3R5cGUuZGVmaW5lPXlpLnByb3RvdHlwZS5kZWZpbmUseWkucHJvdG90eXBlLmdldD15aS5wcm90b3R5cGUuZ2V0LHlpLnByb3RvdHlwZS53aGVuRGVmaW5lZD15aS5wcm90b3R5cGUud2hlbkRlZmluZWQseWkucHJvdG90eXBlLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2s9eWkucHJvdG90eXBlLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2s7dmFyIGtpPXtEb2N1bWVudF9jcmVhdGVFbGVtZW50OndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCxEb2N1bWVudF9jcmVhdGVFbGVtZW50TlM6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50TlMsRG9jdW1lbnRfaW1wb3J0Tm9kZTp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUsRG9jdW1lbnRfcHJlcGVuZDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLnByZXBlbmQsRG9jdW1lbnRfYXBwZW5kOndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuYXBwZW5kLE5vZGVfY2xvbmVOb2RlOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsTm9kZV9hcHBlbmRDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsTm9kZV9pbnNlcnRCZWZvcmU6d2luZG93Lk5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZSxOb2RlX3JlbW92ZUNoaWxkOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCxOb2RlX3JlcGxhY2VDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkLE5vZGVfdGV4dENvbnRlbnQ6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuTm9kZS5wcm90b3R5cGUsXCJ0ZXh0Q29udGVudFwiKSxFbGVtZW50X2F0dGFjaFNoYWRvdzp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93LEVsZW1lbnRfaW5uZXJIVE1MOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkVsZW1lbnQucHJvdG90eXBlLFwiaW5uZXJIVE1MXCIpLEVsZW1lbnRfZ2V0QXR0cmlidXRlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUsRWxlbWVudF9zZXRBdHRyaWJ1dGU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZSxFbGVtZW50X3JlbW92ZUF0dHJpYnV0ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlLEVsZW1lbnRfZ2V0QXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZU5TLEVsZW1lbnRfc2V0QXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5TLEVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZU5TLEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50OndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQsRWxlbWVudF9wcmVwZW5kOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5wcmVwZW5kLEVsZW1lbnRfYXBwZW5kOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hcHBlbmQsRWxlbWVudF9iZWZvcmU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmJlZm9yZSxFbGVtZW50X2FmdGVyOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hZnRlcixFbGVtZW50X3JlcGxhY2VXaXRoOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZXBsYWNlV2l0aCxFbGVtZW50X3JlbW92ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlLEhUTUxFbGVtZW50OndpbmRvdy5IVE1MRWxlbWVudCxIVE1MRWxlbWVudF9pbm5lckhUTUw6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTEVsZW1lbnQucHJvdG90eXBlLFwiaW5uZXJIVE1MXCIpLEhUTUxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudDp3aW5kb3cuSFRNTEVsZW1lbnQucHJvdG90eXBlLmluc2VydEFkamFjZW50RWxlbWVudH0sd2k9bmV3IGZ1bmN0aW9uIHQoKXtwKHRoaXMsdCl9LEVpPWZ1bmN0aW9uKHQsZSxuKXtlLnByZXBlbmQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24ucHJlcGVuZC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUuYXBwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLmFwcGVuZC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19fSxDaT13aW5kb3cuY3VzdG9tRWxlbWVudHM7aWYoIUNpfHxDaS5mb3JjZVBvbHlmaWxsfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBDaS5kZWZpbmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIENpLmdldCl7dmFyIEFpPW5ldyBfaTshZnVuY3Rpb24odCl7d2luZG93LkhUTUxFbGVtZW50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXRoaXMuY29uc3RydWN0b3Isbj10LmNvbnN0cnVjdG9yVG9EZWZpbml0aW9uKGUpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIlRoZSBjdXN0b20gZWxlbWVudCBiZWluZyBjb25zdHJ1Y3RlZCB3YXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBgY3VzdG9tRWxlbWVudHNgLlwiKTt2YXIgaT1uLmNvbnN0cnVjdGlvblN0YWNrO2lmKDA9PT1pLmxlbmd0aCl7dmFyIG89a2kuRG9jdW1lbnRfY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LG4ubG9jYWxOYW1lKTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sZS5wcm90b3R5cGUpLG8uX19DRV9zdGF0ZT1taS5jdXN0b20sby5fX0NFX2RlZmluaXRpb249bix0LnBhdGNoKG8pLG99dmFyIHI9aS5sZW5ndGgtMSxhPWlbcl07aWYoYT09PXdpKXRocm93IG5ldyBFcnJvcihcIlRoZSBIVE1MRWxlbWVudCBjb25zdHJ1Y3RvciB3YXMgZWl0aGVyIGNhbGxlZCByZWVudHJhbnRseSBmb3IgdGhpcyBjb25zdHJ1Y3RvciBvciBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXCIpO3JldHVybiBpW3JdPXdpLE9iamVjdC5zZXRQcm90b3R5cGVPZihhLGUucHJvdG90eXBlKSx0LnBhdGNoKGEpLGF9cmV0dXJuIGUucHJvdG90eXBlPWtpLkhUTUxFbGVtZW50LnByb3RvdHlwZSxlfSgpfShBaSksZnVuY3Rpb24odCl7dShEb2N1bWVudC5wcm90b3R5cGUsXCJjcmVhdGVFbGVtZW50XCIsZnVuY3Rpb24oZSl7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5KXt2YXIgbj10LmxvY2FsTmFtZVRvRGVmaW5pdGlvbihlKTtpZihuKXJldHVybiBuZXcgbi5jb25zdHJ1Y3Rvcn12YXIgaT1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50LmNhbGwodGhpcyxlKTtyZXR1cm4gdC5wYXRjaChpKSxpfSksdShEb2N1bWVudC5wcm90b3R5cGUsXCJpbXBvcnROb2RlXCIsZnVuY3Rpb24oZSxuKXt2YXIgaT1raS5Eb2N1bWVudF9pbXBvcnROb2RlLmNhbGwodGhpcyxlLG4pO3JldHVybiB0aGlzLl9fQ0VfaGFzUmVnaXN0cnk/dC5wYXRjaEFuZFVwZ3JhZGVUcmVlKGkpOnQucGF0Y2hUcmVlKGkpLGl9KTt1KERvY3VtZW50LnByb3RvdHlwZSxcImNyZWF0ZUVsZW1lbnROU1wiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5JiYobnVsbD09PWV8fFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPT09ZSkpe3ZhciBpPXQubG9jYWxOYW1lVG9EZWZpbml0aW9uKG4pO2lmKGkpcmV0dXJuIG5ldyBpLmNvbnN0cnVjdG9yfXZhciBvPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnROUy5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gdC5wYXRjaChvKSxvfSksRWkodCxEb2N1bWVudC5wcm90b3R5cGUse3ByZXBlbmQ6a2kuRG9jdW1lbnRfcHJlcGVuZCxhcHBlbmQ6a2kuRG9jdW1lbnRfYXBwZW5kfSl9KEFpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJ0ZXh0Q29udGVudFwiLHtlbnVtZXJhYmxlOm4uZW51bWVyYWJsZSxjb25maWd1cmFibGU6ITAsZ2V0Om4uZ2V0LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREUpe3ZhciBpPXZvaWQgMDtpZih0aGlzLmZpcnN0Q2hpbGQpe3ZhciBvPXRoaXMuY2hpbGROb2RlcyxyPW8ubGVuZ3RoO2lmKHI+MCYmYSh0aGlzKSl7aT1uZXcgQXJyYXkocik7Zm9yKHZhciBzPTA7czxyO3MrKylpW3NdPW9bc119fWlmKG4uc2V0LmNhbGwodGhpcyxlKSxpKWZvcih2YXIgbD0wO2w8aS5sZW5ndGg7bCsrKXQuZGlzY29ubmVjdFRyZWUoaVtsXSl9ZWxzZSBuLnNldC5jYWxsKHRoaXMsZSl9fSl9dShOb2RlLnByb3RvdHlwZSxcImluc2VydEJlZm9yZVwiLGZ1bmN0aW9uKGUsbil7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLG89a2kuTm9kZV9pbnNlcnRCZWZvcmUuY2FsbCh0aGlzLGUsbik7aWYoYSh0aGlzKSlmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0LmNvbm5lY3RUcmVlKGlbcl0pO3JldHVybiBvfXZhciBzPWEoZSksbD1raS5Ob2RlX2luc2VydEJlZm9yZS5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gcyYmdC5kaXNjb25uZWN0VHJlZShlKSxhKHRoaXMpJiZ0LmNvbm5lY3RUcmVlKGUpLGx9KSx1KE5vZGUucHJvdG90eXBlLFwiYXBwZW5kQ2hpbGRcIixmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUuY2hpbGROb2RlcyksaT1raS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwodGhpcyxlKTtpZihhKHRoaXMpKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXQuY29ubmVjdFRyZWUobltvXSk7cmV0dXJuIGl9dmFyIHI9YShlKSxzPWtpLk5vZGVfYXBwZW5kQ2hpbGQuY2FsbCh0aGlzLGUpO3JldHVybiByJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLGEodGhpcykmJnQuY29ubmVjdFRyZWUoZSksc30pLHUoTm9kZS5wcm90b3R5cGUsXCJjbG9uZU5vZGVcIixmdW5jdGlvbihlKXt2YXIgbj1raS5Ob2RlX2Nsb25lTm9kZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZShuKTp0LnBhdGNoVHJlZShuKSxufSksdShOb2RlLnByb3RvdHlwZSxcInJlbW92ZUNoaWxkXCIsZnVuY3Rpb24oZSl7dmFyIG49YShlKSxpPWtpLk5vZGVfcmVtb3ZlQ2hpbGQuY2FsbCh0aGlzLGUpO3JldHVybiBuJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLGl9KSx1KE5vZGUucHJvdG90eXBlLFwicmVwbGFjZUNoaWxkXCIsZnVuY3Rpb24oZSxuKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUuY2hpbGROb2Rlcyksbz1raS5Ob2RlX3JlcGxhY2VDaGlsZC5jYWxsKHRoaXMsZSxuKTtpZihhKHRoaXMpKXt0LmRpc2Nvbm5lY3RUcmVlKG4pO2Zvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKXQuY29ubmVjdFRyZWUoaVtyXSl9cmV0dXJuIG99dmFyIHM9YShlKSxsPWtpLk5vZGVfcmVwbGFjZUNoaWxkLmNhbGwodGhpcyxlLG4pLHU9YSh0aGlzKTtyZXR1cm4gdSYmdC5kaXNjb25uZWN0VHJlZShuKSxzJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLHUmJnQuY29ubmVjdFRyZWUoZSksbH0pLGtpLk5vZGVfdGV4dENvbnRlbnQmJmtpLk5vZGVfdGV4dENvbnRlbnQuZ2V0P2UoTm9kZS5wcm90b3R5cGUsa2kuTm9kZV90ZXh0Q29udGVudCk6dC5hZGRQYXRjaChmdW5jdGlvbih0KXtlKHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTx0aGlzLmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl0LnB1c2godGhpcy5jaGlsZE5vZGVzW2VdLnRleHRDb250ZW50KTtyZXR1cm4gdC5qb2luKFwiXCIpfSxzZXQ6ZnVuY3Rpb24odCl7Zm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KWtpLk5vZGVfcmVtb3ZlQ2hpbGQuY2FsbCh0aGlzLHRoaXMuZmlyc3RDaGlsZCk7a2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKHRoaXMsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCkpfX0pfSl9KEFpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJpbm5lckhUTUxcIix7ZW51bWVyYWJsZTpuLmVudW1lcmFibGUsY29uZmlndXJhYmxlOiEwLGdldDpuLmdldCxzZXQ6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxvPXZvaWQgMDtpZihhKHRoaXMpJiYobz1bXSxsKHRoaXMsZnVuY3Rpb24odCl7dCE9PWkmJm8ucHVzaCh0KX0pKSxuLnNldC5jYWxsKHRoaXMsZSksbylmb3IodmFyIHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIHM9b1tyXTtzLl9fQ0Vfc3RhdGU9PT1taS5jdXN0b20mJnQuZGlzY29ubmVjdGVkQ2FsbGJhY2socyl9cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZSh0aGlzKTp0LnBhdGNoVHJlZSh0aGlzKSxlfX0pfWZ1bmN0aW9uIG4oZSxuKXt1KGUsXCJpbnNlcnRBZGphY2VudEVsZW1lbnRcIixmdW5jdGlvbihlLGkpe3ZhciBvPWEoaSkscj1uLmNhbGwodGhpcyxlLGkpO3JldHVybiBvJiZ0LmRpc2Nvbm5lY3RUcmVlKGkpLGEocikmJnQuY29ubmVjdFRyZWUoaSkscn0pfWlmKGtpLkVsZW1lbnRfYXR0YWNoU2hhZG93P3UoRWxlbWVudC5wcm90b3R5cGUsXCJhdHRhY2hTaGFkb3dcIixmdW5jdGlvbih0KXt2YXIgZT1raS5FbGVtZW50X2F0dGFjaFNoYWRvdy5jYWxsKHRoaXMsdCk7cmV0dXJuIHRoaXMuX19DRV9zaGFkb3dSb290PWUsZX0pOmNvbnNvbGUud2FybihcIkN1c3RvbSBFbGVtZW50czogYEVsZW1lbnQjYXR0YWNoU2hhZG93YCB3YXMgbm90IHBhdGNoZWQuXCIpLGtpLkVsZW1lbnRfaW5uZXJIVE1MJiZraS5FbGVtZW50X2lubmVySFRNTC5nZXQpZShFbGVtZW50LnByb3RvdHlwZSxraS5FbGVtZW50X2lubmVySFRNTCk7ZWxzZSBpZihraS5IVE1MRWxlbWVudF9pbm5lckhUTUwmJmtpLkhUTUxFbGVtZW50X2lubmVySFRNTC5nZXQpZShIVE1MRWxlbWVudC5wcm90b3R5cGUsa2kuSFRNTEVsZW1lbnRfaW5uZXJIVE1MKTtlbHNle3ZhciBpPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCxcImRpdlwiKTt0LmFkZFBhdGNoKGZ1bmN0aW9uKHQpe2UodCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGtpLk5vZGVfY2xvbmVOb2RlLmNhbGwodGhpcywhMCkuaW5uZXJIVE1MfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9XCJ0ZW1wbGF0ZVwiPT09dGhpcy5sb2NhbE5hbWU/dGhpcy5jb250ZW50OnRoaXM7Zm9yKGkuaW5uZXJIVE1MPXQ7ZS5jaGlsZE5vZGVzLmxlbmd0aD4wOylraS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwoZSxlLmNoaWxkTm9kZXNbMF0pO2Zvcig7aS5jaGlsZE5vZGVzLmxlbmd0aD4wOylraS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwoZSxpLmNoaWxkTm9kZXNbMF0pfX0pfSl9dShFbGVtZW50LnByb3RvdHlwZSxcInNldEF0dHJpYnV0ZVwiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3NldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSxuKTt2YXIgaT1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7a2kuRWxlbWVudF9zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUsbiksbj1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSksdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxlLGksbixudWxsKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJzZXRBdHRyaWJ1dGVOU1wiLGZ1bmN0aW9uKGUsbixpKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfc2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbixpKTt2YXIgbz1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO2tpLkVsZW1lbnRfc2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbixpKSxpPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbiksdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxuLG8saSxlKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJyZW1vdmVBdHRyaWJ1dGVcIixmdW5jdGlvbihlKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcyxlKTt2YXIgbj1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7a2kuRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpLG51bGwhPT1uJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLGUsbixudWxsLG51bGwpfSksdShFbGVtZW50LnByb3RvdHlwZSxcInJlbW92ZUF0dHJpYnV0ZU5TXCIsZnVuY3Rpb24oZSxuKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7dmFyIGk9a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTtraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO3ZhciBvPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7aSE9PW8mJnQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsbixpLG8sZSl9KSxraS5IVE1MRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ/bihIVE1MRWxlbWVudC5wcm90b3R5cGUsa2kuSFRNTEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50KTpraS5FbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudD9uKEVsZW1lbnQucHJvdG90eXBlLGtpLkVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50KTpjb25zb2xlLndhcm4oXCJDdXN0b20gRWxlbWVudHM6IGBFbGVtZW50I2luc2VydEFkamFjZW50RWxlbWVudGAgd2FzIG5vdCBwYXRjaGVkLlwiKSxFaSh0LEVsZW1lbnQucHJvdG90eXBlLHtwcmVwZW5kOmtpLkVsZW1lbnRfcHJlcGVuZCxhcHBlbmQ6a2kuRWxlbWVudF9hcHBlbmR9KSxmdW5jdGlvbih0LGUsbil7ZS5iZWZvcmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24uYmVmb3JlLmFwcGx5KHRoaXMsaSk7Zm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspdC5kaXNjb25uZWN0VHJlZShyW3NdKTtpZihhKHRoaXMpKWZvcih2YXIgbD0wO2w8aS5sZW5ndGg7bCsrKXt2YXIgdT1pW2xdO3UgaW5zdGFuY2VvZiBFbGVtZW50JiZ0LmNvbm5lY3RUcmVlKHUpfX0sZS5hZnRlcj1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkoZSksbz0wO288ZTtvKyspaVtvXT1hcmd1bWVudHNbb107dmFyIHI9aS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOb2RlJiZhKHQpfSk7bi5hZnRlci5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pLHM9YSh0aGlzKTtuLnJlcGxhY2VXaXRoLmFwcGx5KHRoaXMsaSk7Zm9yKHZhciBsPTA7bDxyLmxlbmd0aDtsKyspdC5kaXNjb25uZWN0VHJlZShyW2xdKTtpZihzKXt0LmRpc2Nvbm5lY3RUcmVlKHRoaXMpO2Zvcih2YXIgdT0wO3U8aS5sZW5ndGg7dSsrKXt2YXIgYz1pW3VdO2MgaW5zdGFuY2VvZiBFbGVtZW50JiZ0LmNvbm5lY3RUcmVlKGMpfX19LGUucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKTtuLnJlbW92ZS5jYWxsKHRoaXMpLGUmJnQuZGlzY29ubmVjdFRyZWUodGhpcyl9fSh0LEVsZW1lbnQucHJvdG90eXBlLHtiZWZvcmU6a2kuRWxlbWVudF9iZWZvcmUsYWZ0ZXI6a2kuRWxlbWVudF9hZnRlcixyZXBsYWNlV2l0aDpraS5FbGVtZW50X3JlcGxhY2VXaXRoLHJlbW92ZTpraS5FbGVtZW50X3JlbW92ZX0pfShBaSksZG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT0hMDt2YXIgU2k9bmV3IHlpKEFpKTtPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LFwiY3VzdG9tRWxlbWVudHNcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6U2l9KX0hZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Q9ITE7dmFyIHQ9ZjtmPVtdLHQuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LnVpZF8tZS51aWRffSk7dmFyIG49ITE7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXQudGFrZVJlY29yZHMoKTshZnVuY3Rpb24odCl7dC5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj11LmdldChlKTtuJiZuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5vYnNlcnZlcj09PXQmJmUucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfSh0KSxlLmxlbmd0aCYmKHQuY2FsbGJhY2tfKGUsdCksbj0hMCl9KSxuJiZlKCl9ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj10O247bj1uLnBhcmVudE5vZGUpe3ZhciBpPXUuZ2V0KG4pO2lmKGkpZm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciByPWlbb10sYT1yLm9wdGlvbnM7aWYobj09PXR8fGEuc3VidHJlZSl7dmFyIHM9ZShhKTtzJiZyLmVucXVldWUocyl9fX19ZnVuY3Rpb24gaSh0KXt0aGlzLmNhbGxiYWNrXz10LHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrcH1mdW5jdGlvbiBvKHQsZSl7dGhpcy50eXBlPXQsdGhpcy50YXJnZXQ9ZSx0aGlzLmFkZGVkTm9kZXM9W10sdGhpcy5yZW1vdmVkTm9kZXM9W10sdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBnPW5ldyBvKHQsZSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbXx8KG09ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG8odC50eXBlLHQudGFyZ2V0KTtyZXR1cm4gZS5hZGRlZE5vZGVzPXQuYWRkZWROb2Rlcy5zbGljZSgpLGUucmVtb3ZlZE5vZGVzPXQucmVtb3ZlZE5vZGVzLnNsaWNlKCksZS5wcmV2aW91c1NpYmxpbmc9dC5wcmV2aW91c1NpYmxpbmcsZS5uZXh0U2libGluZz10Lm5leHRTaWJsaW5nLGUuYXR0cmlidXRlTmFtZT10LmF0dHJpYnV0ZU5hbWUsZS5hdHRyaWJ1dGVOYW1lc3BhY2U9dC5hdHRyaWJ1dGVOYW1lc3BhY2UsZS5vbGRWYWx1ZT10Lm9sZFZhbHVlLGV9KGcpLG0ub2xkVmFsdWU9dCxtKX1mdW5jdGlvbiBzKHQsZSxuKXt0aGlzLm9ic2VydmVyPXQsdGhpcy50YXJnZXQ9ZSx0aGlzLm9wdGlvbnM9bix0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119aWYoIXQuSnNNdXRhdGlvbk9ic2VydmVyKXt2YXIgbCx1PW5ldyBXZWFrTWFwO2lmKC9UcmlkZW50fEVkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpbD1zZXRUaW1lb3V0O2Vsc2UgaWYod2luZG93LnNldEltbWVkaWF0ZSlsPXdpbmRvdy5zZXRJbW1lZGlhdGU7ZWxzZXt2YXIgYz1bXSxoPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbih0KXtpZih0LmRhdGE9PT1oKXt2YXIgZT1jO2M9W10sZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoKX0pfX0pLGw9ZnVuY3Rpb24odCl7Yy5wdXNoKHQpLHdpbmRvdy5wb3N0TWVzc2FnZShoLFwiKlwiKX19dmFyIGQ9ITEsZj1bXSxwPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24odCxlKXtpZih0PWZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQodCl8fHR9KHQpLCFlLmNoaWxkTGlzdCYmIWUuYXR0cmlidXRlcyYmIWUuY2hhcmFjdGVyRGF0YXx8ZS5hdHRyaWJ1dGVPbGRWYWx1ZSYmIWUuYXR0cmlidXRlc3x8ZS5hdHRyaWJ1dGVGaWx0ZXImJmUuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIWUuYXR0cmlidXRlc3x8ZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiFlLmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciBuPXUuZ2V0KHQpO258fHUuc2V0KHQsbj1bXSk7Zm9yKHZhciBpLG89MDtvPG4ubGVuZ3RoO28rKylpZihuW29dLm9ic2VydmVyPT09dGhpcyl7KGk9bltvXSkucmVtb3ZlTGlzdGVuZXJzKCksaS5vcHRpb25zPWU7YnJlYWt9aXx8KGk9bmV3IHModGhpcyx0LGUpLG4ucHVzaChpKSx0aGlzLm5vZGVzXy5wdXNoKHQpKSxpLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbih0KXtmb3IodmFyIGU9dS5nZXQodCksbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2lmKGkub2JzZXJ2ZXI9PT10aGlzKXtpLnJlbW92ZUxpc3RlbmVycygpLGUuc3BsaWNlKG4sMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLHR9fTt2YXIgZyxtO3MucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18saT1uLmxlbmd0aDtpZihuLmxlbmd0aD4wKXt2YXIgbz1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZT90Om0mJmZ1bmN0aW9uKHQpe3JldHVybiB0PT09bXx8dD09PWd9KHQpP206bnVsbH0obltpLTFdLHQpO2lmKG8pcmV0dXJuIHZvaWQobltpLTFdPW8pfWVsc2UhZnVuY3Rpb24odCl7Zi5wdXNoKHQpLGR8fChkPSEwLGwoZSkpfSh0aGlzLm9ic2VydmVyKTtuW2ldPXR9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb25zO2UuYXR0cmlidXRlcyYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQXR0ck1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGFyYWN0ZXJEYXRhJiZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIix0aGlzLCEwKSxlLmNoaWxkTGlzdCYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsdGhpcywhMCksKGUuY2hpbGRMaXN0fHxlLnN1YnRyZWUpJiZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Ob2RlUmVtb3ZlZFwiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucztlLmF0dHJpYnV0ZXMmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLGUuY2hhcmFjdGVyRGF0YSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGlsZExpc3QmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLChlLmNoaWxkTGlzdHx8ZS5zdWJ0cmVlKSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24odCl7aWYodCE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18odCksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2godCk7dmFyIGU9dS5nZXQodCk7ZXx8dS5zZXQodCxlPVtdKSxlLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLHQuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odCk7Zm9yKHZhciBlPXUuZ2V0KHQpLG49MDtuPGUubGVuZ3RoO24rKylpZihlW25dPT09dGhpcyl7ZS5zcGxpY2UobiwxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbih0KXtzd2l0Y2godC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0LnR5cGUpe2Nhc2VcIkRPTUF0dHJNb2RpZmllZFwiOnZhciBlPXQuYXR0ck5hbWUsaT10LnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxvPXQudGFyZ2V0OyhzPW5ldyByKFwiYXR0cmlidXRlc1wiLG8pKS5hdHRyaWJ1dGVOYW1lPWUscy5hdHRyaWJ1dGVOYW1lc3BhY2U9aTtsPXQuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDp0LnByZXZWYWx1ZTtuKG8sZnVuY3Rpb24odCl7aWYodC5hdHRyaWJ1dGVzJiYoIXQuYXR0cmlidXRlRmlsdGVyfHwhdC5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RofHwtMSE9PXQuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZSl8fC0xIT09dC5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihpKSkpcmV0dXJuIHQuYXR0cmlidXRlT2xkVmFsdWU/YShsKTpzfSk7YnJlYWs7Y2FzZVwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCI6dmFyIHM9cihcImNoYXJhY3RlckRhdGFcIixvPXQudGFyZ2V0KSxsPXQucHJldlZhbHVlO24obyxmdW5jdGlvbih0KXtpZih0LmNoYXJhY3RlckRhdGEpcmV0dXJuIHQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2EobCk6c30pO2JyZWFrO2Nhc2VcIkRPTU5vZGVSZW1vdmVkXCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcih0LnRhcmdldCk7Y2FzZVwiRE9NTm9kZUluc2VydGVkXCI6dmFyIHUsYyxoPXQudGFyZ2V0O1wiRE9NTm9kZUluc2VydGVkXCI9PT10LnR5cGU/KHU9W2hdLGM9W10pOih1PVtdLGM9W2hdKTt2YXIgZD1oLnByZXZpb3VzU2libGluZyxmPWgubmV4dFNpYmxpbmc7KHM9cihcImNoaWxkTGlzdFwiLHQudGFyZ2V0LnBhcmVudE5vZGUpKS5hZGRlZE5vZGVzPXUscy5yZW1vdmVkTm9kZXM9YyxzLnByZXZpb3VzU2libGluZz1kLHMubmV4dFNpYmxpbmc9ZixuKHQucmVsYXRlZE5vZGUsZnVuY3Rpb24odCl7aWYodC5jaGlsZExpc3QpcmV0dXJuIHN9KX1nPW09dm9pZCAwfX0sdC5Kc011dGF0aW9uT2JzZXJ2ZXI9aSx0Lk11dGF0aW9uT2JzZXJ2ZXJ8fCh0Lk11dGF0aW9uT2JzZXJ2ZXI9aSxpLl9pc1BvbHlmaWxsZWQ9ITApfX0oc2VsZiksZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiBsW3NdPWkuYXBwbHkoZSx0KSxzKyt9ZnVuY3Rpb24gaSh0KXt2YXIgbj1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3QuYXBwbHkoZSxuKTpuZXcgRnVuY3Rpb24oXCJcIit0KSgpfX1mdW5jdGlvbiBvKHQpe2lmKHUpc2V0VGltZW91dChpKG8sdCksMCk7ZWxzZXt2YXIgZT1sW3RdO2lmKGUpe3U9ITA7dHJ5e2UoKX1maW5hbGx5e3IodCksdT0hMX19fX1mdW5jdGlvbiByKHQpe2RlbGV0ZSBsW3RdfWlmKCF0LnNldEltbWVkaWF0ZSl7dmFyIGEscz0xLGw9e30sdT0hMSxjPXQuZG9jdW1lbnQsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtoPWgmJmguc2V0VGltZW91dD9oOnQsXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKHQucHJvY2Vzcyk/YT1mdW5jdGlvbigpe3ZhciB0PW4oYXJndW1lbnRzKTtyZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhpKG8sdCkpLHR9OmZ1bmN0aW9uKCl7aWYodC5wb3N0TWVzc2FnZSYmIXQuaW1wb3J0U2NyaXB0cyl7dmFyIGU9ITAsbj10Lm9ubWVzc2FnZTtyZXR1cm4gdC5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtlPSExfSx0LnBvc3RNZXNzYWdlKFwiXCIsXCIqXCIpLHQub25tZXNzYWdlPW4sZX19KCk/ZnVuY3Rpb24oKXt2YXIgZT1cInNldEltbWVkaWF0ZSRcIitNYXRoLnJhbmRvbSgpK1wiJFwiLGk9ZnVuY3Rpb24obil7bi5zb3VyY2U9PT10JiZcInN0cmluZ1wiPT10eXBlb2Ygbi5kYXRhJiYwPT09bi5kYXRhLmluZGV4T2YoZSkmJm8oK24uZGF0YS5zbGljZShlLmxlbmd0aCkpfTt0LmFkZEV2ZW50TGlzdGVuZXI/dC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGksITEpOnQuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIixpKSxhPWZ1bmN0aW9uKCl7dmFyIGk9bihhcmd1bWVudHMpO3JldHVybiB0LnBvc3RNZXNzYWdlKGUraSxcIipcIiksaX19KCk6dC5NZXNzYWdlQ2hhbm5lbD9mdW5jdGlvbigpe3ZhciB0PW5ldyBNZXNzYWdlQ2hhbm5lbDt0LnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtvKHQuZGF0YSl9LGE9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyk7cmV0dXJuIHQucG9ydDIucG9zdE1lc3NhZ2UoZSksZX19KCk6YyYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGMuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT9mdW5jdGlvbigpe3ZhciB0PWMuZG9jdW1lbnRFbGVtZW50O2E9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyksaT1jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7cmV0dXJuIGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7byhlKSxpLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLHQucmVtb3ZlQ2hpbGQoaSksaT1udWxsfSx0LmFwcGVuZENoaWxkKGkpLGV9fSgpOmE9ZnVuY3Rpb24oKXt2YXIgdD1uKGFyZ3VtZW50cyk7cmV0dXJuIHNldFRpbWVvdXQoaShvLHQpLDApLHR9LGguc2V0SW1tZWRpYXRlPWEsaC5jbGVhckltbWVkaWF0ZT1yfX0oc2VsZiksZnVuY3Rpb24oKXt2YXIgdD17ZW5zdXJlVmlld3BvcnRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIik7cmV0dXJuIHR8fCgodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibWV0YVwiKSkubmFtZT1cInZpZXdwb3J0XCIsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0KSksdH0sc2V0dXA6ZnVuY3Rpb24oKXt2YXIgZT10LmVuc3VyZVZpZXdwb3J0RWxlbWVudCgpO2UmJihlLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRcIil8fGUuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLFwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSxtYXhpbXVtLXNjYWxlPTEsbWluaW11bS1zY2FsZT0xLHVzZXItc2NhbGFibGU9bm9cIikpfX07d2luZG93LlZpZXdwb3J0PXR9KCk7dmFyIFBpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSl9cmV0dXJuIGIoZSx0KSxlfShmdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIEhUTUxFbGVtZW50KXt2YXIgdD1mdW5jdGlvbigpe307cmV0dXJuIHQucHJvdG90eXBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdH1yZXR1cm4gSFRNTEVsZW1lbnR9KCkpLE9pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtmb3IodC50ZW1wbGF0ZT10LmlubmVySFRNTDt0LmZpcnN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKTtyZXR1cm4gdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUhPT1kb2N1bWVudC5ib2R5JiZRLndhcm4oXCJvbnMtdGVtcGxhdGUgKGlkID0gXCIrdGhpcy5nZXRBdHRyaWJ1dGUoXCJpZFwiKStcIikgbXVzdCBiZSBsb2NhdGVkIGp1c3QgdW5kZXIgZG9jdW1lbnQuYm9keVwiKyh0aGlzLnBhcmVudE5vZGUub3V0ZXJIVE1MP1wiOlxcblxcblwiK3RoaXMucGFyZW50Tm9kZS5vdXRlckhUTUw6XCIuXCIpKTt2YXIgdD1uZXcgQ3VzdG9tRXZlbnQoXCJfdGVtcGxhdGVsb2FkZWRcIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwfSk7dC50ZW1wbGF0ZT10aGlzLnRlbXBsYXRlLHQudGVtcGxhdGVJZD10aGlzLmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMuZGlzcGF0Y2hFdmVudCh0KX19XSksZX0oKTtjLlRlbXBsYXRlPU9pLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10ZW1wbGF0ZVwiLE9pKTt2YXIgeGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtpZihudWxsIT09Qy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpKXQuX3BsYXRmb3JtVXBkYXRlKCk7ZWxzZSBpZighdC5faXNBbGxvd2VkUGxhdGZvcm0oKSl7Zm9yKDt0LmNoaWxkTm9kZXNbMF07KXQuY2hpbGROb2Rlc1swXS5yZW1vdmUoKTt0Ll9wbGF0Zm9ybVVwZGF0ZSgpfX0pLHQuX29uT3JpZW50YXRpb25DaGFuZ2UoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtPdC5vbihcImNoYW5nZVwiLHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7XCJvcmllbnRhdGlvblwiPT09dCYmdGhpcy5fb25PcmllbnRhdGlvbkNoYW5nZSgpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtPdC5vZmYoXCJjaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlKX19LHtrZXk6XCJfcGxhdGZvcm1VcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT10aGlzLl9pc0FsbG93ZWRQbGF0Zm9ybSgpP1wiXCI6XCJub25lXCJ9fSx7a2V5OlwiX2lzQWxsb3dlZFBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5nZXRBdHRyaWJ1dGUoXCJwbGF0Zm9ybVwiKXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwbGF0Zm9ybVwiKS5zcGxpdCgvXFxzKy8pLmluZGV4T2YoQy5nZXRNb2JpbGVPUygpKT49MH19LHtrZXk6XCJfb25PcmllbnRhdGlvbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJvcmllbnRhdGlvblwiKSYmdGhpcy5faXNBbGxvd2VkUGxhdGZvcm0oKSl7dmFyIHQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJvcmllbnRhdGlvblwiKS50b0xvd2VyQ2FzZSgpLGU9T3QuaXNQb3J0cmFpdCgpP1wicG9ydHJhaXRcIjpcImxhbmRzY2FwZVwiO3RoaXMuc3R5bGUuZGlzcGxheT10PT09ZT9cIlwiOlwibm9uZVwifX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm9yaWVudGF0aW9uXCJdfX1dKSxlfSgpO2MuSWY9eGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWlmXCIseGkpO3ZhciBUaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cCh0aGlzLHQpLHRoaXMudGltaW5nPWUudGltaW5nfHxcImxpbmVhclwiLHRoaXMuZHVyYXRpb249ZS5kdXJhdGlvbnx8MCx0aGlzLmRlbGF5PWUuZGVsYXl8fDAsdGhpcy5kZWY9e3RpbWluZzp0aGlzLnRpbWluZyxkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLGRlbGF5OnRoaXMuZGVsYXl9fXJldHVybiBnKHQsbnVsbCxbe2tleTpcImV4dGVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGU9dGhpcyxuPWZ1bmN0aW9uKCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksUS5leHRlbmQodGhpcyx0KX07cmV0dXJuIG4ucHJvdG90eXBlPXRoaXMucHJvdG90eXBlLG59fV0pLHR9KCksTGk9e307TGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwib25zZmxhZy1pcGhvbmV4LXBvcnRyYWl0XCIpJiZ3aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHR9LExpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJvbnNmbGFnLWlwaG9uZXgtbGFuZHNjYXBlXCIpJiZ3aW5kb3cuaW5uZXJXaWR0aD49d2luZG93LmlubmVySGVpZ2h0fSxMaS5nZXRTYWZlQXJlYUxlbmd0aHM9ZnVuY3Rpb24oKXtyZXR1cm4gTGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP3t0b3A6NDQscmlnaHQ6MCxib3R0b206MzQsbGVmdDowfTpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP3t0b3A6MCxyaWdodDo0NCxib3R0b206MjEsbGVmdDo0NH06e3RvcDowLHJpZ2h0OjAsYm90dG9tOjAsbGVmdDowfX0sTGkuZ2V0U2FmZUFyZWFET01SZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dm9pZCAwO3JldHVybiB0PUxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT97eDowLHk6NDQsd2lkdGg6d2luZG93LmlubmVyV2lkdGgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodC03OH06TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT97eDo0NCx5OjAsd2lkdGg6d2luZG93LmlubmVyV2lkdGgtODgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodC0yMX06e3g6MCx5OjAsd2lkdGg6d2luZG93LmlubmVyV2lkdGgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodH0sXyh7fSx0LHtsZWZ0OnQueCx0b3A6dC55LHJpZ2h0OnQueCt0LndpZHRoLGJvdHRvbTp0LnkrdC5oZWlnaHR9KX07dmFyIE1pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSxEaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1hc2tUaW1pbmc9XCJsaW5lYXJcIixsLm1hc2tEdXJhdGlvbj0uMixsfXJldHVybiBiKGUsTWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eTowfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eToxfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCA4MCUsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eToxfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eTowfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDgwJSwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX1dKSxlfSgpLElpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwubWFza1RpbWluZz1cImxpbmVhclwiLGwubWFza0R1cmF0aW9uPS4yLExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmxpZnRBbW91bnQ9XCJjYWxjKDEwMCUgKyA0OHB4KVwiOkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMzNweClcIjpsLmxpZnRBbW91bnQ9ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQvMi0xK1wicHhcIixsfXJldHVybiBiKGUsTWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eTowfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eToxfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MX0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MH0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMubGlmdEFtb3VudCtcIiwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fV0pLGV9KCksTmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksdC5fdmlzaWJsZT0hMSx0Ll9kb29yTG9jaz1uZXcgTnQsdC5fY2FuY2VsPXQuX2NhbmNlbC5iaW5kKHQpLHQuX3NlbGZDYW1lbE5hbWU9US5jYW1lbGl6ZSh0LnRhZ05hbWUuc2xpY2UoNCkpLHQuX2RlZmF1bHREQkI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2FuY2VsYWJsZT90Ll9jYW5jZWwoKTplLmNhbGxQYXJlbnRIYW5kbGVyKCl9LHQuX2FuaW1hdG9yRmFjdG9yeT10Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJfdG9nZ2xlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnN0eWxlLmRpc3BsYXk9dD9cImJsb2NrXCI6XCJub25lXCJ9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19XSksZyhlLFt7a2V5OlwiX2NhbmNlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNhbmNlbGFibGUmJiF0aGlzLl9ydW5uaW5nJiYodGhpcy5fcnVubmluZz0hMCx0aGlzLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7dC5fcnVubmluZz0hMSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodCxcImRpYWxvZy1jYW5jZWxcIil9LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3J1bm5pbmc9ITF9KSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshMF0uY29uY2F0KGUpKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO3JldHVybiB0aGlzLl9zZXRWaXNpYmxlLmFwcGx5KHRoaXMsWyExXS5jb25jYXQoZSkpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshdGhpcy52aXNpYmxlXS5jb25jYXQoZSkpfX0se2tleTpcIl9zZXRWaXNpYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LHI9dD9cInNob3dcIjpcImhpZGVcIjsobz1fKHt9LG8pKS5hbmltYXRpb25PcHRpb25zPVEuZXh0ZW5kKG8uYW5pbWF0aW9uT3B0aW9uc3x8e30sTy5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcodGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSkpO3ZhciBhPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInByZVwiK3IsKGU9e30sbShlLHRoaXMuX3NlbGZDYW1lbE5hbWUsdGhpcyksbShlLFwiY2FuY2VsXCIsZnVuY3Rpb24oKXtyZXR1cm4gYT0hMH0pLGUpKSxhP1Byb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlXCIrcitcIiBldmVudC5cIik6bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7aS5fZG9vckxvY2sud2FpdFVubG9jayhmdW5jdGlvbigpe3ZhciBhPWkuX2Rvb3JMb2NrLmxvY2soKSxzPWkuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcihvKTt0JiZpLl90b2dnbGVTdHlsZSghMCxvKSxpLl92aXNpYmxlPXQsUS5pb3NQYWdlU2Nyb2xsRml4KHQpLG4oaSxmdW5jdGlvbigpe3Nbcl0oaSxmdW5jdGlvbigpeyF0JiZpLl90b2dnbGVTdHlsZSghMSxvKSxhKCksUS5wcm9wYWdhdGVBY3Rpb24oaSxcIl9cIityKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQoaSxcInBvc3RcIityLG0oe30saS5fc2VsZkNhbWVsTmFtZSxpKSksby5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZvLmNhbGxiYWNrKGkpLGUoaSl9KX0pfSl9KX19LHtrZXk6XCJfdXBkYXRlTWFza1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9tYXNrJiZ0LmdldEF0dHJpYnV0ZShcIm1hc2stY29sb3JcIikmJih0Ll9tYXNrLnN0eWxlLmJhY2tncm91bmRDb2xvcj10LmdldEF0dHJpYnV0ZShcIm1hc2stY29sb3JcIikpfSl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vbkRldmljZUJhY2tCdXR0b249dGhpcy5fZGVmYXVsdERCQi5iaW5kKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX21hc2smJih0Ll9tYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHQuX2NhbmNlbCwhMSksUS5pb3NNYXNrU2Nyb2xsRml4KHQuX21hc2ssITApKX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9bnVsbCx0aGlzLl9tYXNrJiYodGhpcy5fbWFzay5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jYW5jZWwsITEpLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLl9tYXNrLCExKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJhbmltYXRpb25cIjp0aGlzLl9hbmltYXRvckZhY3Rvcnk9dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCk7YnJlYWs7Y2FzZVwibWFzay1jb2xvclwiOnRoaXMuX3VwZGF0ZU1hc2soKX19fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Zpc2libGV9fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJjYW5jZWxhYmxlXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiY2FuY2VsYWJsZVwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJjYW5jZWxhYmxlXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImFuaW1hdGlvblwiLFwibWFzay1jb2xvclwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVzaG93XCIsXCJwb3N0c2hvd1wiLFwicHJlaGlkZVwiLFwicG9zdGhpZGVcIixcImRpYWxvZy1jYW5jZWxcIl19fV0pLGV9KCksQmk9e1wiLmFjdGlvbi1zaGVldFwiOlwiYWN0aW9uLXNoZWV0LS0qXCIsXCIuYWN0aW9uLXNoZWV0LW1hc2tcIjpcImFjdGlvbi1zaGVldC1tYXNrLS0qXCIsXCIuYWN0aW9uLXNoZWV0LXRpdGxlXCI6XCJhY3Rpb24tc2hlZXQtdGl0bGUtLSpcIn0samk9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9EaTpJaX0sbm9uZTpNaX0sSGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpqaSxiYXNlQ2xhc3M6TWksYmFzZUNsYXNzTmFtZTpcIkFjdGlvblNoZWV0QW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsIXRoaXMuX3NoZWV0KXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Zvcih0LmNsYXNzTGlzdC5hZGQoXCJhY3Rpb24tc2hlZXRcIik7dGhpcy5maXJzdENoaWxkOyl0LmFwcGVuZENoaWxkKHRoaXMuZmlyc3RDaGlsZCk7dGhpcy5hcHBlbmRDaGlsZCh0KX1pZighdGhpcy5fdGl0bGUmJnRoaXMuaGFzQXR0cmlidXRlKFwidGl0bGVcIikpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pbm5lckhUTUw9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKSxlLmNsYXNzTGlzdC5hZGQoXCJhY3Rpb24tc2hlZXQtdGl0bGVcIiksdGhpcy5fc2hlZXQuaW5zZXJ0QmVmb3JlKGUsdGhpcy5fc2hlZXQuZmlyc3RDaGlsZCl9aWYoIXRoaXMuX21hc2spe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0LW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUobix0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX3NoZWV0LnN0eWxlLnpJbmRleD0yMDAwMSx0aGlzLl9tYXNrLnN0eWxlLnpJbmRleD0yZTQsQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl91cGRhdGVUaXRsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdGl0bGUmJih0aGlzLl90aXRsZS5pbm5lckhUTUw9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1widGl0bGVcIj09PXQ/dGhpcy5fdXBkYXRlVGl0bGUoKTp2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LG4saSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBCaX19LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFjdGlvbi1zaGVldC1tYXNrXCIpfX0se2tleTpcIl9zaGVldFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFjdGlvbi1zaGVldFwiKX19LHtrZXk6XCJfdGl0bGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmFjdGlvbi1zaGVldC10aXRsZVwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgTWl8fFEudGhyb3dBbmltYXRvcihcIkFjdGlvblNoZWV0XCIpLGppW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcInRpdGxlXCJdKX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaml9fSx7a2V5OlwiQWN0aW9uU2hlZXRBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBNaX19XSksZX0oKTtjLkFjdGlvblNoZWV0PUhpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1hY3Rpb24tc2hlZXRcIixIaSk7dmFyIFJpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJlEudGhyb3dBYnN0cmFjdCgpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3JpcHBsZU9wdFwiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzXX19XSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZSksIXRoaXMuX2ljb24mJnRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJJY29uXCIpO3ZhciB0PVEuY3JlYXRlRWxlbWVudCgnPG9ucy1pY29uIGljb249XCInK3RoaXMuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSsnXCI+PC9vbnMtaWNvbj4nKTt0LmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZS5yZXBsYWNlKFwiYnV0dG9uXCIsXCJpY29uXCIpKSx0aGlzLmluc2VydEJlZm9yZSh0LHRoaXMuZmlyc3RDaGlsZCl9dGhpcy5fdXBkYXRlUmlwcGxlKCksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl91cGRhdGVJY29uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pY29uJiZ0aGlzLl9pY29uLnNldEF0dHJpYnV0ZShcImljb25cIix0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIikpfX0se2tleTpcIl91cGRhdGVSaXBwbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JpcHBsZU9wdCYmUS51cGRhdGVSaXBwbGUuYXBwbHkoUSx3KHRoaXMuX3JpcHBsZU9wdCkpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJpY29uXCI6dGhpcy5fdXBkYXRlSWNvbigpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOnRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUpJiZ0aGlzLl91cGRhdGVSaXBwbGUoKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJfaWNvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWljb25cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIixcImljb25cIixcInJpcHBsZVwiXX19XSksZX0oKSxGaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYWN0aW9uLXNoZWV0LWJ1dHRvbi0tKlwiLFwiLmFjdGlvbi1zaGVldC1pY29uXCI6XCJhY3Rpb24tc2hlZXQtaWNvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYWN0aW9uLXNoZWV0LWJ1dHRvblwifX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXt9fV0pLGV9KCk7Yy5BY3Rpb25TaGVldEJ1dHRvbj1GaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWN0aW9uLXNoZWV0LWJ1dHRvblwiLEZpKTt2YXIgcWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kdXJhdGlvbixyPXZvaWQgMD09PW8/LjI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHtkdXJhdGlvbjpyLHRpbWluZzppLGRlbGF5OnN9KSl9cmV0dXJuIGIoZSxxaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCguOSwgLjksIDEpXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLCAxLCAxKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLCAxLCAxKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoLjksIC45LCAxKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksVmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC40LCAxKVwiOm4sbz10LmR1cmF0aW9uLHI9dm9pZCAwPT09bz8uMjpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse2R1cmF0aW9uOnIsdGltaW5nOmksZGVsYXk6c30pKX1yZXR1cm4gYihlLHFpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKDEuMywgMS4zLCAxKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksV2k9e1wiLmFsZXJ0LWRpYWxvZ1wiOlwiYWxlcnQtZGlhbG9nLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiOlwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy10aXRsZVwiOlwiYWxlcnQtZGlhbG9nLXRpdGxlLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWNvbnRlbnRcIjpcImFsZXJ0LWRpYWxvZy1jb250ZW50LS0qXCIsXCIuYWxlcnQtZGlhbG9nLWZvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWZvb3Rlci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWZvb3Rlci0tcm93Zm9vdGVyLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS1yb3dmb290ZXItLSpcIixcIi5hbGVydC1kaWFsb2ctYnV0dG9uLS1wcmltYWxcIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLXByaW1hbC0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1idXR0b25cIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLSpcIixcIm9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS0qXCIsXCIuYWxlcnQtZGlhbG9nLW1hc2tcIjpcImFsZXJ0LWRpYWxvZy1tYXNrLS0qXCIsXCIudGV4dC1pbnB1dFwiOlwidGV4dC1pbnB1dC0tKlwifSxVaT17bm9uZTpxaSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/emk6Vml9LGZhZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT96aTpWaX19LFhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6VWksYmFzZUNsYXNzOnFpLGJhc2VDbGFzc05hbWU6XCJBbGVydERpYWxvZ0FuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTEwMDAxO3ZhciB0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZighdGhpcy5fbWFzayYmIXRoaXMuX2RpYWxvZylmb3IoO3RoaXMuZmlyc3RDaGlsZDspdC5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO2lmKCF0aGlzLl9tYXNrKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcImFsZXJ0LWRpYWxvZy1tYXNrXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKGUsdGhpcy5jaGlsZHJlblswXSl9aWYoIXRoaXMuX2RpYWxvZyl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1kaWFsb2dcIiksdGhpcy5pbnNlcnRCZWZvcmUobixudWxsKX1pZighUS5maW5kQ2hpbGQodGhpcy5fZGlhbG9nLFwiLmFsZXJ0LWRpYWxvZy1jb250YWluZXJcIikpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiKSx0aGlzLl9kaWFsb2cuYXBwZW5kQ2hpbGQoaSl9dGhpcy5fZGlhbG9nLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKHQpLHRoaXMuX2RpYWxvZy5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFdpfX0se2tleTpcIl9tYXNrXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIuYWxlcnQtZGlhbG9nLW1hc2tcIil9fSx7a2V5OlwiX2RpYWxvZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFsZXJ0LWRpYWxvZ1wiKX19LHtrZXk6XCJfdGl0bGVFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX2RpYWxvZy5jaGlsZHJlblswXSxcIi5hbGVydC1kaWFsb2ctdGl0bGVcIil9fSx7a2V5OlwiX2NvbnRlbnRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX2RpYWxvZy5jaGlsZHJlblswXSxcIi5hbGVydC1kaWFsb2ctY29udGVudFwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgcWl8fFEudGhyb3dBbmltYXRvcihcIkFsZXJ0RGlhbG9nXCIpLFVpW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFVpfX0se2tleTpcIkFsZXJ0RGlhbG9nQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcWl9fV0pLGV9KCk7Yy5BbGVydERpYWxvZz1YaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWxlcnQtZGlhbG9nXCIsWGkpO3ZhciBZaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYWxlcnQtZGlhbG9nLWJ1dHRvblwifX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcyx2b2lkIDAse21vZGlmaWVyOlwibGlnaHQtZ3JheVwifV19fV0pLGV9KCk7Yy5BbGVydERpYWxvZ0J1dHRvbj1ZaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblwiLFlpKTt2YXIgR2k9e1wiXCI6XCJiYWNrLWJ1dHRvbi0tKlwiLFwiLmJhY2stYnV0dG9uX19pY29uXCI6XCJiYWNrLWJ1dHRvbi0tKl9faWNvblwiLFwiLmJhY2stYnV0dG9uX19sYWJlbFwiOlwiYmFjay1idXR0b24tLSpfX2xhYmVsXCJ9LCRpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdC5fb3B0aW9ucz17fSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUljb25cIix2YWx1ZTpmdW5jdGlvbigpeyhhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06US5maW5kQ2hpbGQodGhpcyxcIi5iYWNrLWJ1dHRvbl9faWNvblwiKSkuaW5uZXJIVE1MPVwiYW5kcm9pZFwiPT09Ti5nZXRQbGF0Zm9ybSh0aGlzKXx8US5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIik/Jzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/Plxcbjxzdmcgd2lkdGg9XCIxNnB4XCIgaGVpZ2h0PVwiMTZweFwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxcbiAgICA8dGl0bGU+bWQtYmFjay1idXR0b24taWNvbjwvdGl0bGU+XFxuICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPlxcbiAgICA8ZGVmcz48L2RlZnM+XFxuICAgIDxnIGlkPVwidG9vbGJhci1iYWNrLWJ1dHRvblwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxcbiAgICAgICAgPGcgaWQ9XCJhbmRyb2lkXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0zMi4wMDAwMDAsIC0zMi4wMDAwMDApXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiPlxcbiAgICAgICAgICAgIDxwb2x5Z29uIGlkPVwibWQtYmFjay1idXR0b24taWNvblwiIHBvaW50cz1cIjQ4IDM5IDM1LjgzIDM5IDQxLjQyIDMzLjQxIDQwIDMyIDMyIDQwIDQwIDQ4IDQxLjQxIDQ2LjU5IDM1LjgzIDQxIDQ4IDQxXCI+PC9wb2x5Z29uPlxcbiAgICAgICAgPC9nPlxcbiAgICA8L2c+XFxuPC9zdmc+XFxuJzonPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XFxuPHN2ZyB3aWR0aD1cIjEzcHhcIiBoZWlnaHQ9XCIyMXB4XCIgdmlld0JveD1cIjAgMCAxMyAyMVwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XFxuICAgIDx0aXRsZT5pb3MtYmFjay1idXR0b24taWNvbjwvdGl0bGU+XFxuICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPlxcbiAgICA8ZGVmcz48L2RlZnM+XFxuICAgIDxnIGlkPVwidG9vbGJhci1iYWNrLWJ1dHRvblwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxcbiAgICAgICAgPGcgaWQ9XCJpb3NcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoLTM0LjAwMDAwMCwgLTMwLjAwMDAwMClcIj5cXG4gICAgICAgICAgICA8cG9seWdvbiBpZD1cImlvcy1iYWNrLWJ1dHRvbi1pY29uXCIgcG9pbnRzPVwiMzQgNDAuNSA0NC41IDMwIDQ2LjUgMzIgMzggNDAuNSA0Ni41IDQ5IDQ0LjUgNTFcIj48L3BvbHlnb24+XFxuICAgICAgICA8L2c+XFxuICAgIDwvZz5cXG48L3N2Zz5cXG4nfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwiYmFjay1idXR0b25cIiksIVEuZmluZENoaWxkKHRoaXMsXCIuYmFjay1idXR0b25fX2xhYmVsXCIpKXtmb3IodmFyIHQ9US5jcmVhdGUoXCJzcGFuLmJhY2stYnV0dG9uX19sYWJlbFwiKTt0aGlzLmNoaWxkTm9kZXNbMF07KXQuYXBwZW5kQ2hpbGQodGhpcy5jaGlsZE5vZGVzWzBdKTt0aGlzLmFwcGVuZENoaWxkKHQpfWlmKCFRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2stYnV0dG9uX19pY29uXCIpKXt2YXIgZT1RLmNyZWF0ZShcInNwYW4uYmFjay1idXR0b25fX2ljb25cIik7dGhpcy5fdXBkYXRlSWNvbihlKSx0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuY2hpbGRyZW5bMF0pfVEudXBkYXRlUmlwcGxlKHRoaXMsdm9pZCAwLHtjZW50ZXI6XCJcIixzaXplOlwiY29udGFpblwiLGJhY2tncm91bmQ6XCJ0cmFuc3BhcmVudFwifSksQi5pbml0TW9kaWZpZXIodGhpcyxHaSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMub25DbGljayl0aGlzLm9uQ2xpY2suYXBwbHkodGhpcyk7ZWxzZXt2YXIgdD1RLmZpbmRQYXJlbnQodGhpcyxcIm9ucy1uYXZpZ2F0b3JcIik7dCYmdC5wb3BQYWdlKHRoaXMub3B0aW9ucyl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJiYWNrLWJ1dHRvblwiLEdpKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsR2kpJiZ0aGlzLl91cGRhdGVJY29uKCl9fX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCJ9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwifX0se2tleTpcIm9wdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnM9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkJhY2tCdXR0b249JGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJhY2stYnV0dG9uXCIsJGkpO3ZhciBLaT1cImJvdHRvbS1iYXJcIixRaT17XCJcIjpcImJvdHRvbS1iYXItLSpcIn0sSmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNsYXNzTGlzdC5hZGQoS2kpLEIuaW5pdE1vZGlmaWVyKHQsUWkpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXBhZ2VcIikmJnRoaXMucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwicGFnZS13aXRoLWJvdHRvbS10b29sYmFyXCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLEtpLFFpKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsUWkpfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkJvdHRvbVRvb2xiYXI9SmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJvdHRvbS10b29sYmFyXCIsSmkpO3ZhciBaaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYnV0dG9uLS0qXCJ9fX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJidXR0b25cIn19XSksZX0oKTtjLkJ1dHRvbj1aaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYnV0dG9uXCIsWmkpO3ZhciB0bz17XCJcIjpcImNhcmQtLSpcIixcIi5jYXJkX190aXRsZVwiOlwiY2FyZC0tKl9fdGl0bGVcIixcIi5jYXJkX19jb250ZW50XCI6XCJjYXJkLS0qX19jb250ZW50XCJ9LGVvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bdF07ZS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aXRsZVwiKT9lLmNsYXNzTGlzdC5hZGQoXCJjYXJkX190aXRsZVwiKTplLmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRlbnRcIikmJmUuY2xhc3NMaXN0LmFkZChcImNhcmRfX2NvbnRlbnRcIil9Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImNhcmRcIiksQi5pbml0TW9kaWZpZXIodGhpcyx0byl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJjYXJkXCIsdG8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyx0byl9fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuQ2FyZD1lbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY2FyZFwiLGVvKTt2YXIgbm89e1wiXCI6XCJjYXJvdXNlbC1pdGVtLS0qXCJ9LGlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5zdHlsZS53aWR0aD1cIjEwMCVcIixCLmluaXRNb2RpZmllcih0LG5vKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihcIm1vZGlmaWVyXCI9PT10KXJldHVybiBCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG5vKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCJdfX1dKSxlfSgpO2MuQ2Fyb3VzZWxJdGVtPWlvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jYXJvdXNlbC1pdGVtXCIsaW8pO3ZhciBvbz17dmVydGljYWw6e2F4aXM6XCJZXCIsc2l6ZTpcIkhlaWdodFwiLGRpcjpbXCJ1cFwiLFwiZG93blwiXSx0M2Q6W1wiMHB4LCBcIixcInB4LCAwcHhcIl19LGhvcml6b250YWw6e2F4aXM6XCJYXCIsc2l6ZTpcIldpZHRoXCIsZGlyOltcImxlZnRcIixcInJpZ2h0XCJdLHQzZDpbXCJcIixcInB4LCAwcHgsIDBweFwiXX19LHJvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzO3AodGhpcyx0KTtcImdldEluaXRpYWxJbmRleCBnZXRCdWJibGVXaWR0aCBpc1ZlcnRpY2FsIGlzT3ZlclNjcm9sbGFibGUgaXNDZW50ZXJlZFxcbiAgICBpc0F1dG9TY3JvbGxhYmxlIHJlZnJlc2hIb29rIHByZUNoYW5nZUhvb2sgcG9zdENoYW5nZUhvb2sgb3ZlclNjcm9sbEhvb2tcIi5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09ZVt0XXx8ZnVuY3Rpb24oKXtyZXR1cm4hMX19KSx0aGlzLmdldEVsZW1lbnQ9ZS5nZXRFbGVtZW50LHRoaXMuc2Nyb2xsSG9vaz1lLnNjcm9sbEhvb2ssdGhpcy5pdGVtU2l6ZT1lLml0ZW1TaXplfHxcIjEwMCVcIix0aGlzLmdldEF1dG9TY3JvbGxSYXRpbz1mdW5jdGlvbigpe3ZhciB0PWUuZ2V0QXV0b1Njcm9sbFJhdGlvJiZlLmdldEF1dG9TY3JvbGxSYXRpby5hcHBseShlLGFyZ3VtZW50cyk7cmV0dXJuKCh0PVwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0PT10P3Q6LjUpPDB8fHQ+MSkmJlEudGhyb3coXCJJbnZhbGlkIGF1dG8tc2Nyb2xsLXJhdGlvIFwiK3QrXCIuIE11c3QgYmUgYmV0d2VlbiAwIGFuZCAxXCIpLHR9LHRoaXMuc2hvdWxkQmxvY2s9XCJvdGhlclwiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TLHRoaXMub25EcmFnU3RhcnQ9dGhpcy5vbkRyYWdTdGFydC5iaW5kKHRoaXMpLHRoaXMub25EcmFnPXRoaXMub25EcmFnLmJpbmQodGhpcyksdGhpcy5vbkRyYWdFbmQ9dGhpcy5vbkRyYWdFbmQuYmluZCh0aGlzKSx0aGlzLm9uUmVzaXplPXRoaXMub25SZXNpemUuYmluZCh0aGlzKSx0aGlzLl9zaG91bGRGaXhTY3JvbGw9XCJpb3NcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPU31yZXR1cm4gZyh0LFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWUuc3dpcGVhYmxlLGk9ZS5hdXRvUmVmcmVzaDt0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMudGFyZ2V0PXRoaXMuZ2V0RWxlbWVudCgpLmNoaWxkcmVuWzBdLHRoaXMuYmxvY2tlcj10aGlzLmdldEVsZW1lbnQoKS5jaGlsZHJlblsxXSx0aGlzLnRhcmdldCYmdGhpcy5ibG9ja2VyfHxRLnRocm93KCdFeHBlY3RlZCBcInRhcmdldFwiIGFuZCBcImJsb2NrZXJcIiBlbGVtZW50cyB0byBleGlzdCBiZWZvcmUgaW5pdGlhbGl6aW5nIFN3aXBlcicpLHRoaXMuc2hvdWxkQmxvY2t8fCh0aGlzLmJsb2NrZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksdGhpcy5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXJcIiksdGhpcy50YXJnZXQuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItdGFyZ2V0XCIpLHRoaXMuYmxvY2tlci5jbGFzc0xpc3QuYWRkKFwib25zLXN3aXBlci1ibG9ja2VyXCIpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5nZXRFbGVtZW50KCkse2RyYWdNaW5EaXN0YW5jZToxLGRyYWdMb2NrVG9BeGlzOiEwLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pLHRoaXMuX211dGF0aW9uT2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZWZyZXNoKCl9KSx0aGlzLnVwZGF0ZVN3aXBlYWJsZShuKSx0aGlzLnVwZGF0ZUF1dG9SZWZyZXNoKGkpLHRoaXMuX3Njcm9sbD10aGlzLl9vZmZzZXQ9dGhpcy5fbGFzdEFjdGl2ZUluZGV4PTAsdGhpcy5fdXBkYXRlTGF5b3V0KCksdGhpcy5fc2V0dXBJbml0aWFsSW5kZXgoKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5pbml0aWFsaXplZCYmdC5fc2V0dXBJbml0aWFsSW5kZXgoKX0pLHdpbmRvdz09PXdpbmRvdy5wYXJlbnQmJjAhPT10aGlzLm9mZnNldEhlaWdodHx8d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3JldHVybiB0LmluaXRpYWxpemVkJiZ0Lm9uUmVzaXplKCl9KX19LHtrZXk6XCJkaXNwb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxpemVkPSExLHRoaXMudXBkYXRlU3dpcGVhYmxlKCExKSx0aGlzLnVwZGF0ZUF1dG9SZWZyZXNoKCExKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3ImJnRoaXMuX2dlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy50YXJnZXQ9dGhpcy5ibG9ja2VyPXRoaXMuX2dlc3R1cmVEZXRlY3Rvcj10aGlzLl9tdXRhdGlvbk9ic2VydmVyPW51bGwsdGhpcy5zZXR1cFJlc2l6ZSghMSl9fSx7a2V5Olwib25SZXNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Njcm9sbC90aGlzLnRhcmdldFNpemU7dGhpcy5fcmVzZXQoKSx0aGlzLnNldEFjdGl2ZUluZGV4KHQpLHRoaXMucmVmcmVzaCgpfX0se2tleTpcIl9jYWxjdWxhdGVJdGVtU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pdGVtU2l6ZS5tYXRjaCgvXihcXGQrKShweHwlKS8pO3R8fFEudGhyb3coXCJJbnZhbGlkIHN0YXRlOiBzd2lwZXIncyBzaXplIHVuaXQgbXVzdCBiZSAnJScgb3IgJ3B4J1wiKTt2YXIgZT1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm5cIiVcIj09PXRbMl0/TWF0aC5yb3VuZChlLzEwMCp0aGlzLnRhcmdldFNpemUpOmV9fSx7a2V5OlwiX3NldHVwSW5pdGlhbEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXNldCgpLHRoaXMuX2xhc3RBY3RpdmVJbmRleD1NYXRoLm1heChNYXRoLm1pbihOdW1iZXIodGhpcy5nZXRJbml0aWFsSW5kZXgoKSksdGhpcy5pdGVtQ291bnQpLDApLHRoaXMuX3Njcm9sbD10aGlzLl9vZmZzZXQrdGhpcy5pdGVtTnVtU2l6ZSp0aGlzLl9sYXN0QWN0aXZlSW5kZXgsdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsKX19LHtrZXk6XCJfc2V0U3dpcGluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJzd2lwaW5nXCIsdCl9fSx7a2V5Olwic2V0QWN0aXZlSW5kZXhcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3NldFN3aXBpbmcoITApLHQ9TWF0aC5tYXgoMCxNYXRoLm1pbih0LHRoaXMuaXRlbUNvdW50LTEpKTt2YXIgaT1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMubWF4U2Nyb2xsLHRoaXMuX29mZnNldCt0aGlzLml0ZW1OdW1TaXplKnQpKTtpZihDLmlzVUlXZWJWaWV3KCkpe3ZhciBvPWZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLHQpfShRLmFycmF5RnJvbSh0aGlzLnRhcmdldC5jaGlsZHJlbikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBRLmFycmF5RnJvbSh0LmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFnZV9fY29udGVudFwiKX0pfSkpLHI9bmV3IE1hcDtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCl7by5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Iuc2V0KHQsdC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSksdC5jbGFzc0xpc3QuYWRkKFwicGFnZV9fY29udGVudC0tc3VwcHJlc3MtbGF5ZXItY3JlYXRpb25cIil9KSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NoYW5nZVRvKGksbil9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe28uZm9yRWFjaChmdW5jdGlvbih0KXt0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsci5nZXQodCkpfSkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfSl9KX1yZXR1cm4gdGhpcy5fY2hhbmdlVG8oaSxuKX19LHtrZXk6XCJnZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX3Njcm9sbDt0LT10aGlzLl9vZmZzZXQ7dmFyIGU9dGhpcy5pdGVtQ291bnQsbj10aGlzLml0ZW1OdW1TaXplO2lmKDA9PT10aGlzLml0ZW1OdW1TaXplfHwhUS5pc0ludGVnZXIodCkpcmV0dXJuIHRoaXMuX2xhc3RBY3RpdmVJbmRleDtpZih0PD0wKXJldHVybiAwO2Zvcih2YXIgaT0wO2k8ZTtpKyspaWYobippPD10JiZuKihpKzEpPnQpcmV0dXJuIGk7cmV0dXJuIGUtMX19LHtrZXk6XCJzZXR1cFJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3dpbmRvd1sodD9cImFkZFwiOlwicmVtb3ZlXCIpK1wiRXZlbnRMaXN0ZW5lclwiXShcInJlc2l6ZVwiLHRoaXMub25SZXNpemUsITApfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zZXR1cFJlc2l6ZSghMCksdGhpcy5vblJlc2l6ZSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdC50YXJnZXQmJnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIil9LDFlMy82MCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXR1cFJlc2l6ZSghMSksdGhpcy50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKX19LHtrZXk6XCJ1cGRhdGVTd2lwZWFibGVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9nZXN0dXJlRGV0ZWN0b3Ipe3ZhciBlPXQ/XCJvblwiOlwib2ZmXCI7dGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ1wiLHRoaXMub25EcmFnKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnc3RhcnRcIix0aGlzLm9uRHJhZ1N0YXJ0KSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnZW5kXCIsdGhpcy5vbkRyYWdFbmQpfX19LHtrZXk6XCJ1cGRhdGVBdXRvUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX211dGF0aW9uT2JzZXJ2ZXImJih0P3RoaXMuX211dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldCx7Y2hpbGRMaXN0OiEwfSk6dGhpcy5fbXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCkpfX0se2tleTpcInVwZGF0ZUl0ZW1TaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5pdGVtU2l6ZT10fHxcIjEwMCVcIix0aGlzLnJlZnJlc2goKX19LHtrZXk6XCJ0b2dnbGVCbG9ja2VyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5ibG9ja2VyLnN0eWxlLnBvaW50ZXJFdmVudHM9dD9cImF1dG9cIjpcIm5vbmVcIn19LHtrZXk6XCJfY2FuQ29uc3VtZUdlc3R1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmRpcmVjdGlvbixuPTA9PT10aGlzLl9zY3JvbGwmJiF0aGlzLmlzT3ZlclNjcm9sbGFibGUoKSxpPXRoaXMuX3Njcm9sbD09PXRoaXMubWF4U2Nyb2xsJiYhdGhpcy5pc092ZXJTY3JvbGxhYmxlKCk7cmV0dXJuIHRoaXMuaXNWZXJ0aWNhbCgpP1wiZG93blwiPT09ZSYmIW58fFwidXBcIj09PWUmJiFpOlwicmlnaHRcIj09PWUmJiFufHxcImxlZnRcIj09PWUmJiFpfX0se2tleTpcIm9uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fCFRLmlzVmFsaWRHZXN0dXJlKHQpLCF0aGlzLl9pZ25vcmVEcmFnKXt2YXIgbj10LmNvbnN1bWU7aWYodC5jb25zdW1lPWZ1bmN0aW9uKCl7biYmbigpLGUuX2lnbm9yZURyYWc9ITB9LHRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkpe3ZhciBpPXQuZ2VzdHVyZS5jZW50ZXImJnQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WHx8MCxvPXRoaXMuZ2V0QnViYmxlV2lkdGgoKXx8MCxyPWZ1bmN0aW9uKCl7biYmbigpLHQuY29uc3VtZWQ9ITAsZS5fc3RhcnRlZD0hMCxlLnNob3VsZEJsb2NrJiZlLnRvZ2dsZUJsb2NrZXIoITApLGUuX3NldFN3aXBpbmcoITApLFEuaW9zUHJldmVudFNjcm9sbChlLl9nZXN0dXJlRGV0ZWN0b3IpfTtpPG98fGk+dGhpcy50YXJnZXRTaXplLW8/c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIWUuX2lnbm9yZURyYWcmJnIoKX0pOnIoKX19fX0se2tleTpcIm9uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZ2VzdHVyZSYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX3N0YXJ0ZWQmJih0aGlzLl9jb250aW51ZWQ9ITAsdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9zY3JvbGxUbyh0aGlzLl9zY3JvbGwtdGhpcy5fZ2V0RGVsdGEodCkse3Rocm90dGxlOiEwfSkpfX0se2tleTpcIm9uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3N0YXJ0ZWQ9ITEsdC5nZXN0dXJlJiYhdGhpcy5faWdub3JlRHJhZyYmdGhpcy5fY29udGludWVkKXt0aGlzLl9jb250aW51ZWQ9ITEsdC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZT10aGlzLl9zY3JvbGwtdGhpcy5fZ2V0RGVsdGEodCksbj10aGlzLl9ub3JtYWxpemVTY3JvbGwoZSk7ZT09PW4/dGhpcy5fc3RhcnRNb21lbnR1bVNjcm9sbChlLHQpOnRoaXMuX2tpbGxPdmVyU2Nyb2xsKG4pLHRoaXMuc2hvdWxkQmxvY2smJnRoaXMudG9nZ2xlQmxvY2tlcighMSl9ZWxzZSB0aGlzLl9pZ25vcmVEcmFnPSEwfX0se2tleTpcIl9zdGFydE1vbWVudHVtU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9nZXRWZWxvY2l0eShlKSxpPWUuZ2VzdHVyZS5pbnRlcmltRGlyZWN0aW9uPT09dGhpcy5kTS5kaXJbdGhpcy5fZ2V0RGVsdGEoZSk8MD8wOjFdLG89dGhpcy5fZ2V0QXV0b1Njcm9sbCh0LG4saSkscj1NYXRoLmFicyhvLXQpLyhuKy4wMSkvMWUzO3I9TWF0aC5taW4oLjI1LE1hdGgubWF4KC4xLHIpKSx0aGlzLl9jaGFuZ2VUbyhvLHtzd2lwZTohMCxhbmltYXRpb25PcHRpb25zOntkdXJhdGlvbjpyLHRpbWluZzpcImN1YmljLWJlemllciguNCwgLjcsIC41LCAxKVwifX0pfX0se2tleTpcIl9raWxsT3ZlclNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fc2Nyb2xsPXQ7dmFyIG49dGhpcy5kTS5kaXJbTnVtYmVyKHQ+MCldLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5fY2hhbmdlVG8odCx7YW5pbWF0aW9uT3B0aW9uczp7ZHVyYXRpb246LjQsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC4xLCAuNCwgLjEsIDEpXCJ9fSl9O3RoaXMub3ZlclNjcm9sbEhvb2soe2RpcmVjdGlvbjpuLGtpbGxPdmVyU2Nyb2xsOml9KXx8aSgpfX0se2tleTpcIl9jaGFuZ2VUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT17YWN0aXZlSW5kZXg6dGhpcy5nZXRBY3RpdmVJbmRleCh0KSxsYXN0QWN0aXZlSW5kZXg6dGhpcy5fbGFzdEFjdGl2ZUluZGV4LHN3aXBlOm4uc3dpcGV8fCExfSxvPWkuYWN0aXZlSW5kZXghPT1pLmxhc3RBY3RpdmVJbmRleCxyPSEhbyYmdGhpcy5wcmVDaGFuZ2VIb29rKGkpO3JldHVybiB0aGlzLl9zY3JvbGw9cj90aGlzLl9vZmZzZXQraS5sYXN0QWN0aXZlSW5kZXgqdGhpcy5pdGVtTnVtU2l6ZTp0LHRoaXMuX2xhc3RBY3RpdmVJbmRleD1yP2kubGFzdEFjdGl2ZUluZGV4OmkuYWN0aXZlSW5kZXgsdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsLG4pLnRoZW4oZnVuY3Rpb24oKXtpZih0IT09ZS5fc2Nyb2xsfHxyKXtpZihuLnJlamVjdClyZXR1cm4gZS5fc2V0U3dpcGluZyghMSksUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZFwiKX1lbHNlIGUuX3NldFN3aXBpbmcoITEpLG8mJmUucG9zdENoYW5nZUhvb2soaSl9KX19LHtrZXk6XCJfc2Nyb2xsVG9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKG4udGhyb3R0bGUpe2lmKHQ8MCl0PXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpP01hdGgucm91bmQoLjM1KnQpOjA7ZWxzZXt2YXIgaT10aGlzLm1heFNjcm9sbDtpPHQmJih0PXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpP2krTWF0aC5yb3VuZCguMzUqKHQtaSkpOmkpfX12YXIgbz1cIm5vbmVcIj09PW4uYW5pbWF0aW9uP3t9Om4uYW5pbWF0aW9uT3B0aW9ucztyZXR1cm4gdGhpcy5zY3JvbGxIb29rJiZ0aGlzLml0ZW1OdW1TaXplPjAmJnRoaXMuc2Nyb2xsSG9vaygodC90aGlzLml0ZW1OdW1TaXplKS50b0ZpeGVkKDIpLG4uYW5pbWF0aW9uT3B0aW9uc3x8e30pLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3JldHVybiBudChlLnRhcmdldCkucXVldWUoe3RyYW5zZm9ybTplLl9nZXRUcmFuc2Zvcm0odCl9LG8pLnBsYXkobil9KX19LHtrZXk6XCJfZ2V0QXV0b1Njcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLm1heFNjcm9sbCxvPXRoaXMuX29mZnNldCxyPXRoaXMuaXRlbU51bVNpemU7aWYoIXRoaXMuaXNBdXRvU2Nyb2xsYWJsZSgpKXJldHVybiBNYXRoLm1heCgwLE1hdGgubWluKGksdCkpO2Zvcih2YXIgYT1bXSxzPW87czxpO3MrPXIpYS5wdXNoKHMpO2EucHVzaChpKTt2YXIgbD0oYT1hLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTWF0aC5hYnMoZS10KS1NYXRoLmFicyhuLXQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIWV8fHQhPT1hW2UtMV19KSlbMF0sdT10aGlzLl9sYXN0QWN0aXZlSW5kZXgqcitvLGM9TWF0aC5hYnModC11KS9yO3JldHVybiBjPD10aGlzLmdldEF1dG9TY3JvbGxSYXRpbyhuLGUscik/bD11OmM8MSYmYVswXT09PXUmJmEubGVuZ3RoPjEmJihsPWFbMV0pLE1hdGgubWF4KDAsTWF0aC5taW4oaSxsKSl9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl90YXJnZXRTaXplPXRoaXMuX2l0ZW1OdW1TaXplPXZvaWQgMH19LHtrZXk6XCJfbm9ybWFsaXplU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHQsdGhpcy5tYXhTY3JvbGwpLDApfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3Jlc2V0KCksdGhpcy5fdXBkYXRlTGF5b3V0KCksUS5pc0ludGVnZXIodGhpcy5fc2Nyb2xsKSl7dmFyIHQ9dGhpcy5fbm9ybWFsaXplU2Nyb2xsKHRoaXMuX3Njcm9sbCk7dCE9PXRoaXMuX3Njcm9sbD90aGlzLl9raWxsT3ZlclNjcm9sbCh0KTp0aGlzLl9jaGFuZ2VUbyh0KX1lbHNlIHRoaXMuX3NldHVwSW5pdGlhbEluZGV4KCk7dGhpcy5yZWZyZXNoSG9vaygpfX0se2tleTpcIl9nZXREZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lmdlc3R1cmVbXCJkZWx0YVwiK3RoaXMuZE0uYXhpc119fSx7a2V5OlwiX2dldFZlbG9jaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2VzdHVyZVtcInZlbG9jaXR5XCIrdGhpcy5kTS5heGlzXX19LHtrZXk6XCJfZ2V0VHJhbnNmb3JtXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIit0aGlzLmRNLnQzZFswXSstdCt0aGlzLmRNLnQzZFsxXStcIilcIn19LHtrZXk6XCJfdXBkYXRlTGF5b3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRNPW9vW3RoaXMuaXNWZXJ0aWNhbCgpP1widmVydGljYWxcIjpcImhvcml6b250YWxcIl0sdGhpcy50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1zd2lwZXItdGFyZ2V0LS12ZXJ0aWNhbFwiLHRoaXMuaXNWZXJ0aWNhbCgpKTtmb3IodmFyIHQ9dGhpcy50YXJnZXQuY2hpbGRyZW5bMF07dDt0PXQubmV4dEVsZW1lbnRTaWJsaW5nKXQuc3R5bGVbdGhpcy5kTS5zaXplLnRvTG93ZXJDYXNlKCldPXRoaXMuaXRlbVNpemU7dGhpcy5pc0NlbnRlcmVkKCkmJih0aGlzLl9vZmZzZXQ9KHRoaXMudGFyZ2V0U2l6ZS10aGlzLml0ZW1OdW1TaXplKS8tMnx8MCl9fSx7a2V5OlwiaXRlbUNvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0LmNoaWxkcmVuLmxlbmd0aH19LHtrZXk6XCJpdGVtTnVtU2l6ZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9pdGVtTnVtU2l6ZSYmdGhpcy5faXRlbU51bVNpemU9PXRoaXMuX2l0ZW1OdW1TaXplfHwodGhpcy5faXRlbU51bVNpemU9dGhpcy5fY2FsY3VsYXRlSXRlbVNpemUoKSksdGhpcy5faXRlbU51bVNpemV9fSx7a2V5OlwibWF4U2Nyb2xsXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pdGVtQ291bnQqdGhpcy5pdGVtTnVtU2l6ZS10aGlzLnRhcmdldFNpemU7cmV0dXJuIE1hdGguY2VpbCh0PDA/MDp0KX19LHtrZXk6XCJ0YXJnZXRTaXplXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldFNpemV8fCh0aGlzLl90YXJnZXRTaXplPXRoaXMudGFyZ2V0W1wib2Zmc2V0XCIrdGhpcy5kTS5zaXplXSksdGhpcy5fdGFyZ2V0U2l6ZX19XSksdH0oKSxhbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoaWxkcmVuWzBdJiZcIk9OUy1DQVJPVVNFTC1JVEVNXCIhPT10aGlzLmNoaWxkcmVuWzBdLnRhZ05hbWUmJnRoaXMuY2hpbGRyZW5bMF18fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoIXQucGFyZW50Tm9kZSl7Zm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KXQuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt0aGlzLmFwcGVuZENoaWxkKHQpfSF0aGlzLmNoaWxkcmVuWzFdJiZ0aGlzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHRoaXMuYXBwZW5kQ2hpbGQ9dGhpcy5hcHBlbmRDaGlsZC5iaW5kKHQpLHRoaXMuaW5zZXJ0QmVmb3JlPXRoaXMuaW5zZXJ0QmVmb3JlLmJpbmQodCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc3dpcGVyfHwodGhpcy5fc3dpcGVyPW5ldyBybyh7Z2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0fSxnZXRJbml0aWFsSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJpbml0aWFsLWluZGV4XCIpfSxnZXRBdXRvU2Nyb2xsUmF0aW86ZnVuY3Rpb24oKXtyZXR1cm4gdC5hdXRvU2Nyb2xsUmF0aW99LGlzVmVydGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdC52ZXJ0aWNhbH0saXNPdmVyU2Nyb2xsYWJsZTpmdW5jdGlvbigpe3JldHVybiB0Lm92ZXJzY3JvbGxhYmxlfSxpc0NlbnRlcmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHQuY2VudGVyZWR9LGlzQXV0b1Njcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5hdXRvU2Nyb2xsfSxpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLG92ZXJTY3JvbGxIb29rOnRoaXMuX29uT3ZlclNjcm9sbC5iaW5kKHRoaXMpLHByZUNoYW5nZUhvb2s6dGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzLFwicHJlY2hhbmdlXCIpLHBvc3RDaGFuZ2VIb29rOnRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyxcInBvc3RjaGFuZ2VcIikscmVmcmVzaEhvb2s6dGhpcy5fb25SZWZyZXNoLmJpbmQodGhpcyksc2Nyb2xsSG9vazpmdW5jdGlvbigpe3JldHVybiB0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlLmFwcGx5KHQsYXJndW1lbnRzKX19KSxuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gdC5fc3dpcGVyLmluaXQoe3N3aXBlYWJsZTp0Lmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKSxhdXRvUmVmcmVzaDp0Lmhhc0F0dHJpYnV0ZShcImF1dG8tcmVmcmVzaFwiKX0pfSkpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXImJnRoaXMuX3N3aXBlci5pbml0aWFsaXplZCYmKHRoaXMuX3N3aXBlci5kaXNwb3NlKCksdGhpcy5fc3dpcGVyPW51bGwpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLl9zd2lwZXIpc3dpdGNoKHQpe2Nhc2VcInN3aXBlYWJsZVwiOnRoaXMuX3N3aXBlci51cGRhdGVTd2lwZWFibGUodGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpO2JyZWFrO2Nhc2VcImF1dG8tcmVmcmVzaFwiOnRoaXMuX3N3aXBlci51cGRhdGVBdXRvUmVmcmVzaCh0aGlzLmhhc0F0dHJpYnV0ZShcImF1dG8tcmVmcmVzaFwiKSk7YnJlYWs7Y2FzZVwiaXRlbS1oZWlnaHRcIjp0aGlzLnZlcnRpY2FsJiZ0aGlzLl9zd2lwZXIudXBkYXRlSXRlbVNpemUodGhpcy5pdGVtU2l6ZSk7YnJlYWs7Y2FzZVwiaXRlbS13aWR0aFwiOnRoaXMudmVydGljYWx8fHRoaXMuX3N3aXBlci51cGRhdGVJdGVtU2l6ZSh0aGlzLml0ZW1TaXplKTticmVhaztjYXNlXCJkaXJlY3Rpb25cIjp0aGlzLl9zd2lwZXIucmVmcmVzaCgpfX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLnNob3coKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLmhpZGUoKX19LHtrZXk6XCJfb25PdmVyU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5kaXJlY3Rpb24sbj10LmtpbGxPdmVyU2Nyb2xsLGk9ITE7cmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwib3ZlcnNjcm9sbFwiLHtjYXJvdXNlbDp0aGlzLGFjdGl2ZUluZGV4OnRoaXMuZ2V0QWN0aXZlSW5kZXgoKSxkaXJlY3Rpb246ZSx3YWl0VG9SZXR1cm46ZnVuY3Rpb24odCl7aT0hMCx0LnRoZW4obil9fSksaX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuYWN0aXZlSW5kZXgsaT1lLmxhc3RBY3RpdmVJbmRleDtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyx0LHtjYXJvdXNlbDp0aGlzLGFjdGl2ZUluZGV4Om4sbGFzdEFjdGl2ZUluZGV4Oml9KX19LHtrZXk6XCJfb25SZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInJlZnJlc2hcIix7Y2Fyb3VzZWw6dGhpc30pfX0se2tleTpcInNldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm4gbj1fKHthbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIiksYW5pbWF0aW9uT3B0aW9uczp0aGlzLmhhc0F0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpP1EuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpOntkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn19LG4pLHRoaXMuX3N3aXBlci5zZXRBY3RpdmVJbmRleCh0LG4pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZuLmNhbGxiYWNrKGUpLFByb21pc2UucmVzb2x2ZShlKX0pfX0se2tleTpcImdldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpcGVyLmdldEFjdGl2ZUluZGV4KCl9fSx7a2V5OlwibmV4dFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldEFjdGl2ZUluZGV4KHRoaXMuZ2V0QWN0aXZlSW5kZXgoKSsxLHQpfX0se2tleTpcInByZXZcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCh0aGlzLmdldEFjdGl2ZUluZGV4KCktMSx0KX19LHtrZXk6XCJmaXJzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldEFjdGl2ZUluZGV4KDAsdCl9fSx7a2V5OlwibGFzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuc2V0QWN0aXZlSW5kZXgoTWF0aC5tYXgodGhpcy5pdGVtQ291bnQtMSwwKSx0KX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXIucmVmcmVzaCgpfX0se2tleTpcIml0ZW1Db3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zd2lwZXIuaXRlbUNvdW50fX0se2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwic3dpcGVhYmxlXCIsdCl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcImF1dG9TY3JvbGxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbFwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiYXV0by1zY3JvbGxcIix0KX19LHtrZXk6XCJ2ZXJ0aWNhbFwiLGdldDpmdW5jdGlvbigpe3JldHVyblwidmVydGljYWxcIj09PXRoaXMuZ2V0QXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpfX0se2tleTpcIml0ZW1TaXplXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9KHRoaXMuZ2V0QXR0cmlidXRlKFwiaXRlbS1cIisodGhpcy52ZXJ0aWNhbD9cImhlaWdodFwiOlwid2lkdGhcIikpfHxcIlwiKS50cmltKCk7cmV0dXJuIHQubWF0Y2goL15cXGQrKHB4fCUpJC8pP3Q6XCIxMDAlXCJ9fSx7a2V5OlwiYXV0b1Njcm9sbFJhdGlvXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbC1yYXRpb1wiKSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZShcImF1dG8tc2Nyb2xsLXJhdGlvXCIsdCl9fSx7a2V5OlwiZGlzYWJsZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX19LHtrZXk6XCJvdmVyc2Nyb2xsYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcIm92ZXJzY3JvbGxhYmxlXCIpfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJvdmVyc2Nyb2xsYWJsZVwiLHQpfX0se2tleTpcImNlbnRlcmVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiY2VudGVyZWRcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImNlbnRlcmVkXCIsdCl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJzd2lwZWFibGVcIixcImF1dG8tcmVmcmVzaFwiLFwiZGlyZWN0aW9uXCIsXCJpdGVtLWhlaWdodFwiLFwiaXRlbS13aWR0aFwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwb3N0Y2hhbmdlXCIsXCJyZWZyZXNoXCIsXCJvdmVyc2Nyb2xsXCJdfX1dKSxlfSgpO2MuQ2Fyb3VzZWw9YW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNhcm91c2VsXCIsYW8pO3ZhciBzbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikmJnQuX3VwZGF0ZVdpZHRoKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJ3aWR0aFwiPT09dCYmdGhpcy5fdXBkYXRlV2lkdGgoKX19LHtrZXk6XCJfdXBkYXRlV2lkdGhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIik7dD8odD10LnRyaW0oKS5tYXRjaCgvXlxcZCskLyk/dCtcIiVcIjp0LGQodGhpcyx7ZmxleDpcIjAgMCBcIit0LG1heFdpZHRoOnR9KSk6ZC5jbGVhcih0aGlzLFwiZmxleCBtYXhXaWR0aFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIndpZHRoXCJdfX1dKSxlfSgpO2MuQ29sPXNvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jb2xcIixzbyk7dmFyIGxvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx1bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZS1pbi1vdXRcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxsbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTYwJSwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNjAlLCAwKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksY289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2UtaW4tb3V0XCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxsfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKyh0aGlzLmJvZHlIZWlnaHQvMi0xKStcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKyh0aGlzLmJvZHlIZWlnaHQvMi0xKStcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19XSksZX0oKSxobz17XCIuZGlhbG9nXCI6XCJkaWFsb2ctLSpcIixcIi5kaWFsb2ctY29udGFpbmVyXCI6XCJkaWFsb2ctY29udGFpbmVyLS0qXCIsXCIuZGlhbG9nLW1hc2tcIjpcImRpYWxvZy1tYXNrLS0qXCJ9LGZvPXtkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/dW86Y299LHNsaWRlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5ib2R5SGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LGx9cmV0dXJuIGIoZSxsbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgXCIrKC10aGlzLmJvZHlIZWlnaHQvMisxLXQuX2RpYWxvZy5jbGllbnRIZWlnaHQpK1wicHgsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTowfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgXCIrKC10aGlzLmJvZHlIZWlnaHQvMisxLXQuX2RpYWxvZy5jbGllbnRIZWlnaHQpK1wicHgsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLG5vbmU6bG99LHBvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6Zm8sYmFzZUNsYXNzOmxvLGJhc2VDbGFzc05hbWU6XCJEaWFsb2dBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMSwhdGhpcy5fZGlhbG9nKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NMaXN0LmFkZChcImRpYWxvZ1wiKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihlLmNsYXNzTGlzdC5hZGQoXCJkaWFsb2ctY29udGFpbmVyXCIpO3RoaXMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3QuYXBwZW5kQ2hpbGQoZSksdGhpcy5hcHBlbmRDaGlsZCh0KX1pZighdGhpcy5fbWFzayl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTGlzdC5hZGQoXCJkaWFsb2ctbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZShuLHRoaXMuZmlyc3RDaGlsZCl9dGhpcy5fZGlhbG9nLnN0eWxlLnpJbmRleD0yMDAwMSx0aGlzLl9tYXNrLnN0eWxlLnpJbmRleD0yZTQsdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdGF0dXMtYmFyLWZpbGxcIixcIlwiKSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBob319LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmRpYWxvZy1tYXNrXCIpfX0se2tleTpcIl9kaWFsb2dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5kaWFsb2dcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIGxvfHxRLnRocm93QW5pbWF0b3IoXCJEaWFsb2dcIiksZm9bdF09ZX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZm99fSx7a2V5OlwiRGlhbG9nQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbG99fV0pLGV9KCk7Yy5EaWFsb2c9cG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWRpYWxvZ1wiLHBvKTt2YXIgZ289XCJmYWJcIixtbz17XCJcIjpcImZhYi0tKlwiLFwiLmZhYl9faWNvblwiOlwiZmFiLS0qX19pY29uXCJ9LF9vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5oaWRlKCksdC5jbGFzc0xpc3QuYWRkKGdvKSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksIVEuZmluZENoaWxkKHRoaXMsXCIuZmFiX19pY29uXCIpKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0LmNsYXNzTGlzdC5hZGQoXCJmYWJfX2ljb25cIiksUS5hcnJheUZyb20odGhpcy5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudGFnTmFtZSYmXCJvbnMtcmlwcGxlXCI9PT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8dC5hcHBlbmRDaGlsZChlKX0pLHRoaXMuYXBwZW5kQ2hpbGQodCl9dGhpcy5fdXBkYXRlUmlwcGxlKCksQi5pbml0TW9kaWZpZXIodGhpcyxtbyksdGhpcy5fdXBkYXRlUG9zaXRpb24oKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5zaG93KCl9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxnbyxtbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG1vKTticmVhaztjYXNlXCJyaXBwbGVcIjp0aGlzLl91cGRhdGVSaXBwbGUoKTticmVhaztjYXNlXCJwb3NpdGlvblwiOnRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNob3coKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5oaWRlKCl9KX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnVwZGF0ZVJpcHBsZSh0aGlzKX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7c3dpdGNoKHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImZhYi0tdG9wX19sZWZ0XCIsXCJmYWItLWJvdHRvbV9fcmlnaHRcIixcImZhYi0tYm90dG9tX19sZWZ0XCIsXCJmYWItLXRvcF9fcmlnaHRcIixcImZhYi0tdG9wX19jZW50ZXJcIixcImZhYi0tYm90dG9tX19jZW50ZXJcIiksdCl7Y2FzZVwidG9wIHJpZ2h0XCI6Y2FzZVwicmlnaHQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcInRvcCBsZWZ0XCI6Y2FzZVwibGVmdCB0b3BcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLXRvcF9fbGVmdFwiKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fcmlnaHRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIGxlZnRcIjpjYXNlXCJsZWZ0IGJvdHRvbVwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19sZWZ0XCIpO2JyZWFrO2Nhc2VcImNlbnRlciB0b3BcIjpjYXNlXCJ0b3AgY2VudGVyXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2NlbnRlclwiKTticmVhaztjYXNlXCJjZW50ZXIgYm90dG9tXCI6Y2FzZVwiYm90dG9tIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19jZW50ZXJcIil9fX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlKCEwKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMSl9fSx7a2V5OlwidG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06IXRoaXMudmlzaWJsZSxlPSh0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpfHxcIlwiKS5pbmRleE9mKFwiYm90dG9tXCIpPj0wP1widHJhbnNsYXRlM2QoMHB4LCAtXCIrKFEuZ2xvYmFscy5mYWJPZmZzZXR8fDApK1wicHgsIDBweClcIjpcIlwiO2QodGhpcyx7dHJhbnNmb3JtOmUrXCIgc2NhbGUoXCIrTnVtYmVyKHQpK1wiKVwifSl9fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuLTE9PT10aGlzLnN0eWxlLnRyYW5zZm9ybS5pbmRleE9mKFwic2NhbGUoMClcIikmJlwibm9uZVwiIT09dGhpcy5zdHlsZS5kaXNwbGF5fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwicG9zaXRpb25cIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuRmFiPV9vLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1mYWJcIixfbyk7dmFyIHZvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZ2VzdHVyZURldGVjdG9yPW5ldyBzdCh0LHtwYXNzaXZlOiEwfSksdH1yZXR1cm4gYihlLFBpKSxlfSgpO2MuR2VzdHVyZURldGVjdG9yPXZvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1nZXN0dXJlLWRldGVjdG9yXCIsdm8pO3ZhciBibz1cImZhXCIseW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9jb21waWxlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dGhpcy5fY2xlYW5DbGFzc0F0dHJpYnV0ZShcImljb25cIj09PXQ/ZTp0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIiksXCJtb2RpZmllclwiPT09dD9lOnZvaWQgMCksdGhpcy5fdXBkYXRlKCl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLl91cGRhdGUoKX19LHtrZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fYnVpbGRDbGFzc0FuZFN0eWxlKHRoaXMuX3BhcnNlQXR0cihcImljb25cIiksdGhpcy5fcGFyc2VBdHRyKFwic2l6ZVwiKSksbj1lLmNsYXNzTGlzdCxpPWUuc3R5bGU7US5leHRlbmQodGhpcy5zdHlsZSxpKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2xhc3NMaXN0LmFkZChlKX0pfX0se2tleTpcIl9wYXJzZUF0dHJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIixuPSh0aGlzLmdldEF0dHJpYnV0ZSh0KXx8dHx8XCJcIikuc3BsaXQoL1xccyosXFxzKi8pLGk9blswXSxvPW5bMV07cmV0dXJuIG89KG98fFwiXCIpLnNwbGl0KC9cXHMqOlxccyovKSwoZSYmUmVnRXhwKFwiKF58XFxcXHMrKVwiK29bMF0rXCIoJHxcXFxccyspXCIsXCJpXCIpLnRlc3QoZSk/b1sxXTppKXx8XCJcIn19LHtrZXk6XCJfY2xlYW5DbGFzc0F0dHJpYnV0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPXRoaXMuX3ByZWZpeEljb24odGhpcy5fcGFyc2VBdHRyKHQsZSkpLG89aS5jbGFzc05hbWUscj1pLnByZWZpeCxhPW8hPT1yP1wifFwiK3IrXCIkfFwiK3IrXCItXCI6XCJ8XCIrbytcIiRcInx8XCJcIixzPW5ldyBSZWdFeHAoXCJeKGZhJHxmYS18aW9uLXx6bWRpJHx6bWRpLXxvbnMtaWNvbi0tXCIrYStcIilcIik7US5hcnJheUZyb20odGhpcy5jbGFzc0xpc3QpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gcy50ZXN0KHQpfSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gbi5jbGFzc0xpc3QucmVtb3ZlKHQpfSl9fSx7a2V5OlwiX3ByZWZpeEljb25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1ibysoYm8/XCItXCI6XCJcIikrdDtyZXR1cm57Y2xhc3NOYW1lOmUscHJlZml4OmUuc3BsaXQoXCItXCIpWzBdfX19LHtrZXk6XCJfYnVpbGRDbGFzc0FuZFN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1bXCJvbnMtaWNvblwiXSxpPXt9O2lmKDA9PT10LmluZGV4T2YoXCJpb24tXCIpKW4ucHVzaCh0KSxuLnB1c2goXCJvbnMtaWNvbi0taW9uXCIpO2Vsc2UgaWYoMD09PXQuaW5kZXhPZihcImZhLVwiKSluLnB1c2godCksbi5wdXNoKFwiZmFcIik7ZWxzZSBpZigwPT09dC5pbmRleE9mKFwibWQtXCIpKW4ucHVzaChcInptZGlcIiksbi5wdXNoKFwiem1kaS1cIit0LnNwbGl0KC8tKC4rKT8vKVsxXSk7ZWxzZXt2YXIgbz10aGlzLl9wcmVmaXhJY29uKHQpLHI9by5jbGFzc05hbWUsYT1vLnByZWZpeDthJiZuLnB1c2goYSksciYmbi5wdXNoKHIpfXJldHVybiBlLm1hdGNoKC9eWzEtNV14fGxnJC8pPyhuLnB1c2goXCJvbnMtaWNvbi0tXCIrZSksdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImZvbnQtc2l6ZVwiKSk6aS5mb250U2l6ZT1lLHtjbGFzc0xpc3Q6bixzdHlsZTppfX19XSxbe2tleTpcInNldEF1dG9QcmVmaXhcIix2YWx1ZTpmdW5jdGlvbih0KXtibz10P1wic3RyaW5nXCI9PXR5cGVvZiB0JiZ0fHxcImZhXCI6XCJcIn19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJpY29uXCIsXCJzaXplXCIsXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5JY29uPXlvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1pY29uXCIseW8pO3ZhciBrbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7cCh0aGlzLHQpLFwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZudWxsIT09ZXx8US50aHJvdygnXCJkZWxlZ2F0ZVwiIHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdCcpLHRoaXMuX3VzZXJEZWxlZ2F0ZT1lLG4gaW5zdGFuY2VvZiBFbGVtZW50fHxudWxsPT09bnx8US50aHJvdygnXCJ0ZW1wbGF0ZUVsZW1lbnRcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50IG9yIG51bGwnKSx0aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9bn1yZXR1cm4gZyh0LFt7a2V5OlwiaGFzUmVuZGVyRnVuY3Rpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyRGVsZWdhdGUuX3JlbmRlciBpbnN0YW5jZW9mIEZ1bmN0aW9ufX0se2tleTpcIl9yZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3VzZXJEZWxlZ2F0ZS5fcmVuZGVyLmFwcGx5KHRoaXMuX3VzZXJEZWxlZ2F0ZSxhcmd1bWVudHMpfX0se2tleTpcImxvYWRJdGVtRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fdXNlckRlbGVnYXRlLmxvYWRJdGVtRWxlbWVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMuX3VzZXJEZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQodCxlKTtlbHNle3ZhciBuPXRoaXMuX3VzZXJEZWxlZ2F0ZS5jcmVhdGVJdGVtQ29udGVudCh0LHRoaXMuX3RlbXBsYXRlRWxlbWVudCk7biBpbnN0YW5jZW9mIEVsZW1lbnR8fFEudGhyb3coJ1wiY3JlYXRlSXRlbUNvbnRlbnRcIiBtdXN0IHJldHVybiBhbiBpbnN0YW5jZSBvZiBFbGVtZW50JyksZSh7ZWxlbWVudDpufSl9fX0se2tleTpcImNvdW50SXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3VzZXJEZWxlZ2F0ZS5jb3VudEl0ZW1zKCk7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQmJlEudGhyb3coJ1wiY291bnRJdGVtc1wiIG11c3QgcmV0dXJuIGEgbnVtYmVyJyksdH19LHtrZXk6XCJ1cGRhdGVJdGVtXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl91c2VyRGVsZWdhdGUudXBkYXRlSXRlbUNvbnRlbnQgaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLnVwZGF0ZUl0ZW1Db250ZW50KHQsZSl9fSx7a2V5OlwiY2FsY3VsYXRlSXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3VzZXJEZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0IGluc3RhbmNlb2YgRnVuY3Rpb24pe3ZhciBlPXRoaXMuX3VzZXJEZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KHQpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlJiZRLnRocm93KCdcImNhbGN1bGF0ZUl0ZW1IZWlnaHRcIiBtdXN0IHJldHVybiBhIG51bWJlcicpLGV9cmV0dXJuIDB9fSx7a2V5OlwiZGVzdHJveUl0ZW1cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3VzZXJEZWxlZ2F0ZS5kZXN0cm95SXRlbSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZ0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveUl0ZW0odCxlKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZ0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveSgpLHRoaXMuX3VzZXJEZWxlZ2F0ZT10aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9bnVsbH19LHtrZXk6XCJpdGVtSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJEZWxlZ2F0ZS5pdGVtSGVpZ2h0fX1dKSx0fSgpLHdvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSxuIGluc3RhbmNlb2Yga298fFEudGhyb3coJ1wiZGVsZWdhdGVcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBMYXp5UmVwZWF0RGVsZWdhdGUnKSx0aGlzLl93cmFwcGVyRWxlbWVudD1lLHRoaXMuX2RlbGVnYXRlPW4sdGhpcy5faW5zZXJ0SW5kZXg9dGhpcy5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bMF0mJlwiT05TLUxBWlktUkVQRUFUXCI9PT10aGlzLl93cmFwcGVyRWxlbWVudC5jaGlsZHJlblswXS50YWdOYW1lPzE6MCxcIm9ucy1saXN0XCI9PT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmZS5jbGFzc0xpc3QuYWRkKFwibGF6eS1saXN0XCIpLHRoaXMuX3BhZ2VDb250ZW50PXRoaXMuX2ZpbmRQYWdlQ29udGVudEVsZW1lbnQoZSksdGhpcy5fcGFnZUNvbnRlbnR8fFEudGhyb3coXCJMYXp5UmVwZWF0IG11c3QgYmUgZGVzY2VuZGFudCBvZiBhIFBhZ2UgZWxlbWVudFwiKSx0aGlzLmxhc3RTY3JvbGxUb3A9dGhpcy5fcGFnZUNvbnRlbnQuc2Nyb2xsVG9wLHRoaXMucGFkZGluZz0wLHRoaXMuX3RvcFBvc2l0aW9ucz1bMF0sdGhpcy5fcmVuZGVyZWRJdGVtcz17fSx0aGlzLl9kZWxlZ2F0ZS5pdGVtSGVpZ2h0fHx0aGlzLl9kZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KDApfHwodGhpcy5fdW5rbm93bkl0ZW1IZWlnaHQ9ITApLHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCksdGhpcy5fb25DaGFuZ2UoKX1yZXR1cm4gZyh0LFt7a2V5OlwiX2ZpbmRQYWdlQ29udGVudEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmZpbmRQYXJlbnQodCxcIi5wYWdlX19jb250ZW50XCIpO2lmKGUpcmV0dXJuIGU7dmFyIG49US5maW5kUGFyZW50KHQsXCJvbnMtcGFnZVwiKTtpZihuKXt2YXIgaT1RLmZpbmRDaGlsZChuLFwiLmNvbnRlbnRcIik7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH19LHtrZXk6XCJfY2hlY2tJdGVtSGVpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9kZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQoMCxmdW5jdGlvbihuKXtlLl91bmtub3duSXRlbUhlaWdodHx8US50aHJvdyhcIkludmFsaWQgc3RhdGVcIiksZS5fd3JhcHBlckVsZW1lbnQuYXBwZW5kQ2hpbGQobi5lbGVtZW50KTt2YXIgaT1mdW5jdGlvbigpe2UuX2RlbGVnYXRlLmRlc3Ryb3lJdGVtKDAsbiksbi5lbGVtZW50JiZuLmVsZW1lbnQucmVtb3ZlKCksZGVsZXRlIGUuX3Vua25vd25JdGVtSGVpZ2h0LHQoKX07ZS5faXRlbUhlaWdodD1uLmVsZW1lbnQub2Zmc2V0SGVpZ2h0LGUuX2l0ZW1IZWlnaHQ+MD9pKCk6KGUuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixuLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2l0ZW1IZWlnaHQ9bi5lbGVtZW50Lm9mZnNldEhlaWdodCwwPT1lLl9pdGVtSGVpZ2h0JiZRLnRocm93KCdJbnZhbGlkIHN0YXRlOiBcIml0ZW1IZWlnaHRcIiBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJyksZS5fd3JhcHBlckVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cIlwiLGkoKX0pKX0pfX0se2tleTpcIl9jb3VudEl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuY291bnRJdGVtcygpfX0se2tleTpcIl9nZXRJdGVtSGVpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVkSXRlbXMuaGFzT3duUHJvcGVydHkodCk/KHRoaXMuX3JlbmRlcmVkSXRlbXNbdF0uaGFzT3duUHJvcGVydHkoXCJoZWlnaHRcIil8fCh0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhlaWdodD10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSx0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhlaWdodCk6dGhpcy5fdG9wUG9zaXRpb25zW3QrMV0mJnRoaXMuX3RvcFBvc2l0aW9uc1t0XT90aGlzLl90b3BQb3NpdGlvbnNbdCsxXS10aGlzLl90b3BQb3NpdGlvbnNbdF06dGhpcy5zdGF0aWNJdGVtSGVpZ2h0fHx0aGlzLl9kZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KHQpfX0se2tleTpcIl9jYWxjdWxhdGVSZW5kZXJlZEhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykucmVkdWNlKGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUrdC5fZ2V0SXRlbUhlaWdodCgrbil9LDApfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKCl9fSx7a2V5OlwiX2xhc3RJdGVtUmVuZGVyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heC5hcHBseShNYXRoLHcoT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykpKX19LHtrZXk6XCJfZmlyc3RJdGVtUmVuZGVyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLHcoT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykpKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD17Zm9yY2VTY3JvbGxEb3duOiEwfSxlPU1hdGgubWluKHRoaXMuX2xhc3RJdGVtUmVuZGVyZWQoKSx0aGlzLl9jb3VudEl0ZW1zKCktMSksbj10aGlzLl9maXJzdEl0ZW1SZW5kZXJlZCgpO1EuaXNJbnRlZ2VyKGUpJiYodC5mb3JjZUxhc3RJbmRleD1lKSxRLmlzSW50ZWdlcihuKSYmKHRoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLl90b3BQb3NpdGlvbnNbbl0rdGhpcy5fY2FsY3VsYXRlUmVuZGVyZWRIZWlnaHQoKStcInB4XCIsdGhpcy5wYWRkaW5nPXRoaXMuX3RvcFBvc2l0aW9uc1tuXSx0LmZvcmNlRmlyc3RJbmRleD1uKSx0aGlzLl9yZW1vdmVBbGxFbGVtZW50cygpLHRoaXMuX3JlbmRlcih0KSx0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5oZWlnaHQ9XCJpbmhlcml0XCJ9fSx7a2V5OlwiX3JlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWUuZm9yY2VTY3JvbGxEb3duLGk9dm9pZCAwIT09biYmbixvPWUuZm9yY2VGaXJzdEluZGV4LHI9ZS5mb3JjZUxhc3RJbmRleDtpZih0aGlzLl91bmtub3duSXRlbUhlaWdodClyZXR1cm4gdGhpcy5fY2hlY2tJdGVtSGVpZ2h0KHRoaXMuX3JlbmRlci5iaW5kKHRoaXMsYXJndW1lbnRzWzBdKSk7dmFyIGE9IWkmJnRoaXMubGFzdFNjcm9sbFRvcD50aGlzLl9wYWdlQ29udGVudC5zY3JvbGxUb3A7dGhpcy5sYXN0U2Nyb2xsVG9wPXRoaXMuX3BhZ2VDb250ZW50LnNjcm9sbFRvcDtmb3IodmFyIHM9e30sbD10aGlzLl93cmFwcGVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsdT00KndpbmRvdy5pbm5lckhlaWdodC1sLGM9dGhpcy5fY291bnRJdGVtcygpLGg9b3x8TWF0aC5tYXgoMCx0aGlzLl9jYWxjdWxhdGVTdGFydEluZGV4KGwpLTMwKSxkPWgsZj10aGlzLl90b3BQb3NpdGlvbnNbZF07ZDxjJiZmPHU7ZCsrKWQ+PXRoaXMuX3RvcFBvc2l0aW9ucy5sZW5ndGgmJih0aGlzLl90b3BQb3NpdGlvbnMubGVuZ3RoKz0xMDApLHRoaXMuX3RvcFBvc2l0aW9uc1tkXT1mLGYrPXRoaXMuX2dldEl0ZW1IZWlnaHQoZCk7aWYodGhpcy5fZGVsZWdhdGUuaGFzUmVuZGVyRnVuY3Rpb24mJnRoaXMuX2RlbGVnYXRlLmhhc1JlbmRlckZ1bmN0aW9uKCkpcmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9yZW5kZXIoaCxkLGZ1bmN0aW9uKCl7dC5wYWRkaW5nPXQuX3RvcFBvc2l0aW9uc1toXX0pO2lmKGEpZm9yKHZhciBwPWQtMTtwPj1oO3AtLSlzW3BdPSEwLHRoaXMuX3JlbmRlckVsZW1lbnQocCxhKTtlbHNlIGZvcih2YXIgZz1yfHxNYXRoLm1heC5hcHBseShNYXRoLFtkLTFdLmNvbmNhdCh3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSkpLG09aDttPD1nO20rKylzW21dPSEwLHRoaXMuX3JlbmRlckVsZW1lbnQobSxhKTtPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBzW2VdfHx0Ll9yZW1vdmVFbGVtZW50KGUsYSl9KX19LHtrZXk6XCJfcmVuZGVyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPXRoaXMuX3JlbmRlcmVkSXRlbXNbdF07aT90aGlzLl9kZWxlZ2F0ZS51cGRhdGVJdGVtKHQsaSk6dGhpcy5fZGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KHQsZnVuY3Rpb24oaSl7ZT8obi5fd3JhcHBlckVsZW1lbnQuaW5zZXJ0QmVmb3JlKGkuZWxlbWVudCxuLl93cmFwcGVyRWxlbWVudC5jaGlsZHJlbltuLl9pbnNlcnRJbmRleF0pLG4ucGFkZGluZz1uLl90b3BQb3NpdGlvbnNbdF0saS5oZWlnaHQ9bi5fdG9wUG9zaXRpb25zW3QrMV0tbi5fdG9wUG9zaXRpb25zW3RdKTpuLl93cmFwcGVyRWxlbWVudC5hcHBlbmRDaGlsZChpLmVsZW1lbnQpLG4uX3JlbmRlcmVkSXRlbXNbdF09aX0pfX0se2tleTpcIl9yZW1vdmVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0PSt0O3ZhciBuPXRoaXMuX3JlbmRlcmVkSXRlbXNbdF07dGhpcy5fZGVsZWdhdGUuZGVzdHJveUl0ZW0odCxuKSxlP3RoaXMuX3RvcFBvc2l0aW9uc1t0KzFdPXZvaWQgMDp0aGlzLnBhZGRpbmc9dGhpcy5wYWRkaW5nK3RoaXMuX2dldEl0ZW1IZWlnaHQodCksbi5lbGVtZW50LnBhcmVudEVsZW1lbnQmJm4uZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG4uZWxlbWVudCksZGVsZXRlIHRoaXMuX3JlbmRlcmVkSXRlbXNbdF19fSx7a2V5OlwiX3JlbW92ZUFsbEVsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbW92ZUVsZW1lbnQoZSl9KX19LHtrZXk6XCJfcmVjYWxjdWxhdGVUb3BQb3NpdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10O248PWU7bisrKXRoaXMuX3RvcFBvc2l0aW9uc1tuKzFdPXRoaXMuX3RvcFBvc2l0aW9uc1tuXSt0aGlzLl9nZXRJdGVtSGVpZ2h0KG4pfX0se2tleTpcIl9jYWxjdWxhdGVTdGFydEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmlyc3RJdGVtUmVuZGVyZWQoKSxuPXRoaXMuX2xhc3RJdGVtUmVuZGVyZWQoKTt0aGlzLl9yZWNhbGN1bGF0ZVRvcFBvc2l0aW9ucyhlLG4pO2Zvcih2YXIgaT0wLG89dGhpcy5fY291bnRJdGVtcygpLTE7Oyl7dmFyIHI9TWF0aC5mbG9vcigoaStvKS8yKSxhPXQrdGhpcy5fdG9wUG9zaXRpb25zW3JdO2lmKG88aSlyZXR1cm4gMDtpZihhPD0wJiZhK3RoaXMuX2dldEl0ZW1IZWlnaHQocik+MClyZXR1cm4gcjtpc05hTihhKXx8YT49MD9vPXItMTppPXIrMX19fSx7a2V5OlwiX2RlYm91bmNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXZvaWQgMDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbz10aGlzLHI9YXJndW1lbnRzLGE9biYmIWk7Y2xlYXJUaW1lb3V0KGkpLGE/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6aT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT1udWxsLHQuYXBwbHkobyxyKX0sZSl9fX0se2tleTpcIl9kb3VibGVGaXJlT25Ub3VjaGVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKCksdGhpcy5fZGVib3VuY2UodGhpcy5fcmVuZGVyLmJpbmQodGhpcyksMTAwKX19LHtrZXk6XCJfYWRkRXZlbnRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe1EuYmluZExpc3RlbmVycyh0aGlzLFtcIl9vbkNoYW5nZVwiLFwiX2RvdWJsZUZpcmVPblRvdWNoZW5kXCJdKSxDLmlzSU9TKCkmJih0aGlzLl9ib3VuZE9uQ2hhbmdlPXRoaXMuX2RlYm91bmNlKHRoaXMuX2JvdW5kT25DaGFuZ2UsMzApKSx0aGlzLl9wYWdlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCksQy5pc0lPUygpJiYoUS5hZGRFdmVudExpc3RlbmVyKHRoaXMuX3BhZ2VDb250ZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fYm91bmRPbkNoYW5nZSx7Y2FwdHVyZTohMCxwYXNzaXZlOiEwfSksdGhpcy5fcGFnZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5fYm91bmREb3VibGVGaXJlT25Ub3VjaGVuZCwhMCkpLHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCl9fSx7a2V5OlwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wYWdlQ29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCksQy5pc0lPUygpJiYoUS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3BhZ2VDb250ZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fYm91bmRPbkNoYW5nZSx7Y2FwdHVyZTohMCxwYXNzaXZlOiEwfSksdGhpcy5fcGFnZUNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5fYm91bmREb3VibGVGaXJlT25Ub3VjaGVuZCwhMCkpLHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlQWxsRWxlbWVudHMoKSx0aGlzLl9kZWxlZ2F0ZS5kZXN0cm95KCksdGhpcy5fcGFyZW50RWxlbWVudD10aGlzLl9kZWxlZ2F0ZT10aGlzLl9yZW5kZXJlZEl0ZW1zPW51bGwsdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKX19LHtrZXk6XCJwYWRkaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AsMTApfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd3JhcHBlckVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcD10K1wicHhcIn19LHtrZXk6XCJzdGF0aWNJdGVtSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLml0ZW1IZWlnaHR8fHRoaXMuX2l0ZW1IZWlnaHR9fV0pLHR9KCksRW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc0F0dHJpYnV0ZShcImRlbGVnYXRlXCIpJiYodGhpcy5kZWxlZ2F0ZT13aW5kb3dbdGhpcy5nZXRBdHRyaWJ1dGUoXCJkZWxlZ2F0ZVwiKV0pfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2xhenlSZXBlYXRQcm92aWRlciYmdGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyLnJlZnJlc2goKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJih0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXIuZGVzdHJveSgpLHRoaXMuX2xhenlSZXBlYXRQcm92aWRlcj1udWxsKX19LHtrZXk6XCJkZWxlZ2F0ZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJnRoaXMuX2xhenlSZXBlYXRQcm92aWRlci5kZXN0cm95KCksIXRoaXMuX3RlbXBsYXRlRWxlbWVudCYmdGhpcy5jaGlsZHJlblswXSYmKHRoaXMuX3RlbXBsYXRlRWxlbWVudD10aGlzLnJlbW92ZUNoaWxkKHRoaXMuY2hpbGRyZW5bMF0pKTt2YXIgZT1uZXcga28odCx0aGlzLl90ZW1wbGF0ZUVsZW1lbnR8fG51bGwpO3RoaXMuX2xhenlSZXBlYXRQcm92aWRlcj1uZXcgd28odGhpcy5wYXJlbnRFbGVtZW50LGUpfSxnZXQ6ZnVuY3Rpb24oKXtRLnRocm93KFwiTm8gZGVsZWdhdGUgZ2V0dGVyXCIpfX1dKSxlfSgpO1AuTGF6eVJlcGVhdERlbGVnYXRlPWtvLFAuTGF6eVJlcGVhdFByb3ZpZGVyPXdvLGMuTGF6eVJlcGVhdD1FbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGF6eS1yZXBlYXRcIixFbyk7dmFyIENvPXtcIlwiOlwibGlzdC1oZWFkZXItLSpcIn0sQW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9jb21waWxlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImxpc3QtaGVhZGVyXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsQ28pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC1oZWFkZXJcIixDbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLENvKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0SGVhZGVyPUFvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0LWhlYWRlclwiLEFvKTt2YXIgU289e1wiXCI6XCJsaXN0LXRpdGxlLS0qXCJ9LFBvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LXRpdGxlXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsU28pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC10aXRsZVwiLFNvKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsU28pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkxpc3RUaXRsZT1QbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGlzdC10aXRsZVwiLFBvKTt2YXIgT289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHhvPXtcIi5saXN0LWl0ZW1cIjpcImxpc3QtaXRlbS0tKlwiLFwiLmxpc3QtaXRlbV9fbGVmdFwiOlwibGlzdC1pdGVtLS0qX19sZWZ0XCIsXCIubGlzdC1pdGVtX19jZW50ZXJcIjpcImxpc3QtaXRlbS0tKl9fY2VudGVyXCIsXCIubGlzdC1pdGVtX19yaWdodFwiOlwibGlzdC1pdGVtLS0qX19yaWdodFwiLFwiLmxpc3QtaXRlbV9fbGFiZWxcIjpcImxpc3QtaXRlbS0tKl9fbGFiZWxcIixcIi5saXN0LWl0ZW1fX3RpdGxlXCI6XCJsaXN0LWl0ZW0tLSpfX3RpdGxlXCIsXCIubGlzdC1pdGVtX19zdWJ0aXRsZVwiOlwibGlzdC1pdGVtLS0qX19zdWJ0aXRsZVwiLFwiLmxpc3QtaXRlbV9fdGh1bWJuYWlsXCI6XCJsaXN0LWl0ZW0tLSpfX3RodW1ibmFpbFwiLFwiLmxpc3QtaXRlbV9faWNvblwiOlwibGlzdC1pdGVtLS0qX19pY29uXCJ9LFRvPXtkZWZhdWx0OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLE9vKSxnKGUsW3trZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlRXhwYW5zaW9uKHQsITAsZSl9fSx7a2V5OlwiaGlkZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUV4cGFuc2lvbih0LCExLGUpfX0se2tleTpcIl9hbmltYXRlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG89dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQscj10LmV4cGFuZGFibGVDb250ZW50LnN0eWxlLmRpc3BsYXk7dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQ9XCJhdXRvXCIsdC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjt2YXIgYT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LmV4cGFuZGFibGVDb250ZW50KSxzPVt7aGVpZ2h0OjAscGFkZGluZ1RvcDowLHBhZGRpbmdCb3R0b206MH0se2hlaWdodDphLmhlaWdodCxwYWRkaW5nVG9wOmEucGFkZGluZ1RvcCxwYWRkaW5nQm90dG9tOmEucGFkZGluZ0JvdHRvbX1dLGw9W3t0cmFuc2Zvcm06XCJyb3RhdGUoNDVkZWcpXCJ9LHt0cmFuc2Zvcm06XCJyb3RhdGUoMjI1ZGVnKVwifV07aWYodC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQ9bywoaT1udCh0LmV4cGFuZGFibGVDb250ZW50LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHByb3BlcnR5OlwiaGVpZ2h0IHBhZGRpbmctdG9wIHBhZGRpbmctYm90dG9tXCJ9KSkuZGVmYXVsdC5hcHBseShpLHcoZT9zOnMucmV2ZXJzZSgpKSkucGxheShmdW5jdGlvbigpe3QuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuZGlzcGxheT1yLG4mJm4oKX0pLHQuZXhwYW5kQ2hldnJvbil7dmFyIHU7KHU9bnQodC5leHBhbmRDaGV2cm9uLHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHByb3BlcnR5OlwidHJhbnNmb3JtXCJ9KSkuZGVmYXVsdC5hcHBseSh1LHcoZT9sOmwucmV2ZXJzZSgpKSkucGxheSgpfX19XSksZX0oKSxub25lOk9vfSxMbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7dC5fYW5pbWF0b3JGYWN0b3J5PXQuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpLHQudG9nZ2xlRXhwYW5zaW9uPXQudG9nZ2xlRXhwYW5zaW9uLmJpbmQodCk7dmFyIGk9L15vbnMtKD8hY29sJHxyb3ckfGlmJCkvaTtyZXR1cm4gdC5fc2hvdWxkSWdub3JlVGFwPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInByZXZlbnQtdGFwXCIpfHxpLnRlc3QodC50YWdOYW1lKX0sdC5zaG93PXQuc2hvd0V4cGFuc2lvbix0LmhpZGU9dC5oaWRlRXhwYW5zaW9uLG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1cIiksdGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpJiZ0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW0tLWV4cGFuZGFibGVcIik7Zm9yKHZhciB0PXZvaWQgMCxlPXZvaWQgMCxuPXZvaWQgMCxpPXZvaWQgMCxvPXZvaWQgMCxyPVEuZ2V0QWxsQ2hpbGROb2Rlcyh0aGlzKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBzPXJbYV07cy5jbGFzc0xpc3QuY29udGFpbnMoXCJsZWZ0XCIpPyhzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1fX2xlZnRcIiksdD1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcImNlbnRlclwiKT9lPXM6cy5jbGFzc0xpc3QuY29udGFpbnMoXCJyaWdodFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19yaWdodFwiKSxuPXMpOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9wXCIpPyhzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1fX3RvcFwiKSxpPXMpOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXhwYW5kYWJsZS1jb250ZW50XCIpJiYocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19leHBhbmRhYmxlLWNvbnRlbnRcIiksbz1zKX1pZighbiYmdGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpKXsobj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19yaWdodFwiLFwicmlnaHRcIik7dmFyIGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7bC5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19leHBhbmQtY2hldnJvblwiKSxuLmFwcGVuZENoaWxkKGwpfWlmKCFlKXtpZihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdHx8bnx8bylmb3IodmFyIHU9dGhpcy5jaGlsZE5vZGVzLmxlbmd0aC0xO3U+PTA7dS0tKXt2YXIgYz10aGlzLmNoaWxkTm9kZXNbdV07YyE9PXQmJmMhPT1uJiZjIT09byYmXCJPTlMtUklQUExFXCIhPT1jLnRhZ05hbWUmJmUuaW5zZXJ0QmVmb3JlKGMsZS5maXJzdENoaWxkKX1lbHNlIGZvcig7dGhpcy5jaGlsZE5vZGVzWzBdOyllLmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7b3x8dGhpcy5pbnNlcnRCZWZvcmUoZSxufHxudWxsKX1lLmNsYXNzTGlzdC5hZGQoXCJjZW50ZXJcIixcImxpc3QtaXRlbV9fY2VudGVyXCIpLG8mJih0aGlzLl90b3A9aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl90b3AuY2xhc3NMaXN0LmFkZChcInRvcFwiLFwibGlzdC1pdGVtX190b3BcIiksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90b3ApLHRoaXMuX3RvcC5hcHBlbmRDaGlsZChlKSx0JiZ0aGlzLl90b3AuYXBwZW5kQ2hpbGQodCksbiYmdGhpcy5fdG9wLmFwcGVuZENoaWxkKG4pKSxRLnVwZGF0ZVJpcHBsZSh0aGlzKSxCLmluaXRNb2RpZmllcih0aGlzLHhvKX19LHtrZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmIXRoaXMuX2V4cGFuZGluZyl7dGhpcy5leHBhbmRlZD0hMCx0aGlzLl9leHBhbmRpbmc9ITA7dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKCkuc2hvd0V4cGFuc2lvbih0aGlzLGZ1bmN0aW9uKCl7dC5jbGFzc0xpc3QuYWRkKFwiZXhwYW5kZWRcIiksdC5fZXhwYW5kaW5nPSExfSl9fX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpJiYhdGhpcy5fZXhwYW5kaW5nKXt0aGlzLmV4cGFuZGVkPSExLHRoaXMuX2V4cGFuZGluZz0hMDt0aGlzLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3IoKS5oaWRlRXhwYW5zaW9uKHRoaXMsZnVuY3Rpb24oKXt0LmNsYXNzTGlzdC5yZW1vdmUoXCJleHBhbmRlZFwiKSx0Ll9leHBhbmRpbmc9ITF9KX19fSx7a2V5OlwidG9nZ2xlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImV4cGFuZGVkXCIpP3RoaXMuaGlkZUV4cGFuc2lvbigpOnRoaXMuc2hvd0V4cGFuc2lvbigpfX0se2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOlRvLGJhc2VDbGFzczpPbyxiYXNlQ2xhc3NOYW1lOlwiTGlzdEl0ZW1BbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil8fFwiZGVmYXVsdFwifSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJsaXN0LWl0ZW1cIix4byk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHhvKTticmVhaztjYXNlXCJyaXBwbGVcIjpRLnVwZGF0ZVJpcHBsZSh0aGlzKTticmVhaztjYXNlXCJhbmltYXRpb25cIjp0aGlzLl9hbmltYXRvckZhY3Rvcnk9dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX3NldHVwTGlzdGVuZXJzKCEwKSx0Ll9vcmlnaW5hbEJhY2tncm91bmRDb2xvcj10LnN0eWxlLmJhY2tncm91bmRDb2xvcix0LnRhcHBlZD0hMX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9KHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIjtRW2VdKHRoaXMsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaCx7cGFzc2l2ZTohMH0pLFFbZV0odGhpcyxcInRvdWNobW92ZVwiLHRoaXMuX29uUmVsZWFzZSx7cGFzc2l2ZTohMH0pLHRoaXNbZV0oXCJ0b3VjaGNhbmNlbFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcInRvdWNoZW5kXCIsdGhpcy5fb25SZWxlYXNlKSx0aGlzW2VdKFwidG91Y2hsZWF2ZVwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcImRyYWdcIix0aGlzLl9vbkRyYWcpLHRoaXNbZV0oXCJtb3VzZWRvd25cIix0aGlzLl9vblRvdWNoKSx0aGlzW2VdKFwibW91c2V1cFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcIm1vdXNlb3V0XCIsdGhpcy5fb25SZWxlYXNlKSx0aGlzLl90b3AmJnRoaXMuX3RvcFtlXShcImNsaWNrXCIsdGhpcy50b2dnbGVFeHBhbnNpb24pfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Lmdlc3R1cmU7dGhpcy5oYXNBdHRyaWJ1dGUoXCJsb2NrLW9uLWRyYWdcIikmJltcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YoZS5kaXJlY3Rpb24pPi0xJiZlLnByZXZlbnREZWZhdWx0KCl9fSx7a2V5OlwiX29uVG91Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCEodGhpcy50YXBwZWR8fHRoaXMhPT10LnRhcmdldCYmKHRoaXMuX3Nob3VsZElnbm9yZVRhcCh0LnRhcmdldCl8fFEuZmluZFBhcmVudCh0LnRhcmdldCx0aGlzLl9zaG91bGRJZ25vcmVUYXAsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSkpKSl7dGhpcy50YXBwZWQ9ITA7dmFyIG49e3RyYW5zaXRpb246XCJiYWNrZ3JvdW5kLWNvbG9yIDAuMHMgbGluZWFyIDAuMDJzLCBib3gtc2hhZG93IDAuMHMgbGluZWFyIDAuMDJzXCJ9O3RoaXMuaGFzQXR0cmlidXRlKFwidGFwcGFibGVcIikmJih0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciYmKHRoaXMuX29yaWdpbmFsQmFja2dyb3VuZENvbG9yPXRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yKSxuLmJhY2tncm91bmRDb2xvcj10aGlzLmdldEF0dHJpYnV0ZShcInRhcC1iYWNrZ3JvdW5kLWNvbG9yXCIpfHxcIiNkOWQ5ZDlcIixuLmJveFNoYWRvdz1cIjBweCAtMXB4IDBweCAwcHggXCIrbi5iYWNrZ3JvdW5kQ29sb3IpLGQodGhpcyxuKX19fSx7a2V5OlwiX29uUmVsZWFzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50YXBwZWQ9ITEsdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5fb3JpZ2luYWxCYWNrZ3JvdW5kQ29sb3J8fFwiXCIsZC5jbGVhcih0aGlzLFwidHJhbnNpdGlvbiBib3hTaGFkb3dcIil9fSx7a2V5OlwiZXhwYW5kYWJsZUNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtaXRlbV9fZXhwYW5kYWJsZS1jb250ZW50XCIpfX0se2tleTpcImV4cGFuZENoZXZyb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtaXRlbV9fZXhwYW5kLWNoZXZyb25cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIixcInJpcHBsZVwiLFwiYW5pbWF0aW9uXCJdfX1dKSxlfSgpO2MuTGlzdEl0ZW09TG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3QtaXRlbVwiLExvKTt2YXIgTW89e1wiXCI6XCJsaXN0LS0qXCJ9LERvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0XCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsTW8pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdFwiLE1vKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsTW8pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkxpc3Q9RG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3RcIixEbyk7dmFyIElvPVtcImF1dG9jYXBpdGFsaXplXCIsXCJhdXRvY29tcGxldGVcIixcImF1dG9jb3JyZWN0XCIsXCJhdXRvZm9jdXNcIixcImRpc2FibGVkXCIsXCJpbnB1dG1vZGVcIixcIm1heFwiLFwibWF4bGVuZ3RoXCIsXCJtaW5cIixcIm1pbmxlbmd0aFwiLFwibmFtZVwiLFwicGF0dGVyblwiLFwicGxhY2Vob2xkZXJcIixcInJlYWRvbmx5XCIsXCJyZXF1aXJlZFwiLFwic2l6ZVwiLFwic3RlcFwiLFwidmFsaWRhdG9yXCIsXCJ2YWx1ZVwiXSxObz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdC5fYm91bmREZWxlZ2F0ZUV2ZW50PXQuX2RlbGVnYXRlRXZlbnQuYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX1dKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUmJnRoaXMuY2xhc3NMaXN0LmFkZCh0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKSwwPT09dGhpcy5jaGlsZHJlbi5sZW5ndGgmJih0aGlzLmFwcGVuZENoaWxkKFEuY3JlYXRlRnJhZ21lbnQodGhpcy5fdGVtcGxhdGUpKSx0aGlzLl9zZXRJbnB1dElkKCksdGhpcy5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpKX19LHtrZXk6XCJfdXBkYXRlQm91bmRBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO0lvLmZvckVhY2goZnVuY3Rpb24oZSl7dC5oYXNBdHRyaWJ1dGUoZSk/dC5faW5wdXQuc2V0QXR0cmlidXRlKGUsdC5nZXRBdHRyaWJ1dGUoZSkpOnQuX2lucHV0LnJlbW92ZUF0dHJpYnV0ZShlKX0pLHRoaXMuX3VwZGF0ZSgpfX0se2tleTpcIl9kZWxlZ2F0ZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEN1c3RvbUV2ZW50KHQudHlwZSx7YnViYmxlczohMSxjYW5jZWxhYmxlOiEwfSk7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChlKX19LHtrZXk6XCJfc2V0SW5wdXRJZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJpbnB1dC1pZFwiKSYmKHRoaXMuX2lucHV0LmlkPXRoaXMuZ2V0QXR0cmlidXRlKFwiaW5wdXQtaWRcIikpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCksdC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdC5fYm91bmREZWxlZ2F0ZUV2ZW50KSx0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCl9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwibW9kaWZpZXJcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLGksbyxvLl9zY2hlbWUpfSk7YnJlYWs7Y2FzZVwiaW5wdXQtaWRcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fc2V0SW5wdXRJZCgpfSk7YnJlYWs7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsdGhpcy5fc2NoZW1lKX1Jby5pbmRleE9mKHQpPj0wJiZuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCl9KX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiXCJ9fSx7a2V5OlwiX2lucHV0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpfX0se2tleTpcInZhbHVlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9pbnB1dD90aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpOnRoaXMuX2lucHV0LnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0IGluc3RhbmNlb2YgRGF0ZSYmKHQ9dC50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLDEwKSksZS5faW5wdXQudmFsdWU9dCxlLl91cGRhdGUoKX0pfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiaW5wdXQtaWRcIixcImNsYXNzXCJdLmNvbmNhdChJbyl9fV0pLGV9KCksQm89e1wiLnRleHQtaW5wdXRcIjpcInRleHQtaW5wdXQtLSpcIixcIi50ZXh0LWlucHV0X19sYWJlbFwiOlwidGV4dC1pbnB1dC0tKl9fbGFiZWxcIn0sam89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9ib3VuZE9uSW5wdXQ9dC5fdXBkYXRlLmJpbmQodCksdC5fYm91bmRPbkZvY3VzaW49dC5fdXBkYXRlLmJpbmQodCksdH1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVMYWJlbCgpLHRoaXMuX3VwZGF0ZUxhYmVsQ2xhc3MoKX19LHtrZXk6XCJfdXBkYXRlTGFiZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIil8fFwiXCI7dm9pZCAwIT09dGhpcy5faGVscGVyLnRleHRDb250ZW50P3RoaXMuX2hlbHBlci50ZXh0Q29udGVudD10OnRoaXMuX2hlbHBlci5pbm5lclRleHQ9dH19LHtrZXk6XCJfdXBkYXRlTGFiZWxDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKCl7XCJcIj09PXRoaXMudmFsdWU/dGhpcy5faGVscGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWlucHV0LS1tYXRlcmlhbF9fbGFiZWwtLWFjdGl2ZVwiKTp0aGlzLl9oZWxwZXIuY2xhc3NMaXN0LmFkZChcInRleHQtaW5wdXQtLW1hdGVyaWFsX19sYWJlbC0tYWN0aXZlXCIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLHQuX2JvdW5kT25JbnB1dCksdC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIix0Ll9ib3VuZE9uRm9jdXNpbil9KTt2YXIgaT10aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7W1wiY2hlY2tib3hcIixcInJhZGlvXCJdLmluZGV4T2YoaSk+PTAmJlEud2FybignV2FybjogPG9ucy1pbnB1dCB0eXBlPVwiJytpKydcIj4gaXMgZGVwcmVjYXRlZCBzaW5jZSB2Mi40LjAuIFVzZSA8b25zLScraStcIj4gaW5zdGVhZC5cIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksbih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsdC5fYm91bmRPbklucHV0KSx0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLHQuX2JvdW5kT25Gb2N1c2luKX0pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsaSxvKXt2YXIgcj10aGlzO3N3aXRjaCh0KXtjYXNlXCJ0eXBlXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIixyLnR5cGUpfSk7YnJlYWs7ZGVmYXVsdDp2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LGksbyl9fX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQm99fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwidGV4dC1pbnB1dFwiPlxcbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1pbnB1dF9fbGFiZWxcIj48L3NwYW4+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtyZXR1cm5bXCJjaGVja2JveFwiLFwicmFkaW9cIl0uaW5kZXhPZih0KTwwJiZ0fHxcInRleHRcIn19LHtrZXk6XCJfaGVscGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcInNwYW5cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1widHlwZVwiXSl9fV0pLGV9KCk7Yy5JbnB1dD1qbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtaW5wdXRcIixqbyk7dmFyIEhvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJnV0aWwudGhyb3dBYnN0cmFjdCgpLG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiY2hlY2tlZFwiLG51bGwsdC5nZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIpKX0pLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3N3aXRjaCh0KXtjYXNlXCJjaGVja2VkXCI6dGhpcy5jaGVja2VkPW51bGwhPT1pO2JyZWFrO2RlZmF1bHQ6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX19jaGVja21hcmtcIj48L3NwYW4+XFxuICAgICd9fSx7a2V5OlwiX2hlbHBlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpfX0se2tleTpcImNoZWNrZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXQuY2hlY2tlZH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7ZS5faW5wdXQuY2hlY2tlZD10fSl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiY2hlY2tlZFwiXSl9fV0pLGV9KCksUm89e1wiLmNoZWNrYm94XCI6XCJjaGVja2JveC0tKlwiLFwiLmNoZWNrYm94X19pbnB1dFwiOlwiY2hlY2tib3gtLSpfX2lucHV0XCIsXCIuY2hlY2tib3hfX2NoZWNrbWFya1wiOlwiY2hlY2tib3gtLSpfX2NoZWNrbWFya1wifSxGbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBSb319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwifX1dKSxlfSgpO2MuQ2hlY2tib3g9Rm8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNoZWNrYm94XCIsRm8pO3ZhciBxbz17XCIucmFkaW8tYnV0dG9uXCI6XCJyYWRpby1idXR0b24tLSpcIixcIi5yYWRpby1idXR0b25fX2lucHV0XCI6XCJyYWRpby1idXR0b24tLSpfX2lucHV0XCIsXCIucmFkaW8tYnV0dG9uX19jaGVja21hcmtcIjpcInJhZGlvLWJ1dHRvbi0tKl9fY2hlY2ttYXJrXCJ9LHpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLEhvKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHFvfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYWRpby1idXR0b25cIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYWRpb1wifX1dKSxlfSgpO2MuUmFkaW89em8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXJhZGlvXCIsem8pO3ZhciBWbz17XCIuc2VhcmNoLWlucHV0XCI6XCJzZWFyY2gtaW5wdXQtLSpcIn0sV289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsTm8pLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVm99fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwic2VhcmNoLWlucHV0XCI+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwic2VhcmNoXCJ9fV0pLGV9KCk7Yy5TZWFyY2hJbnB1dD1XbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VhcmNoLWlucHV0XCIsV28pO3ZhciBVbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksWG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFVvKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksWW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciggLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxVbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAxMDAlLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19XSksZX0oKSxHbz17XCJcIjpcIm1vZGFsLS0qXCIsbW9kYWxfX2NvbnRlbnQ6XCJtb2RhbC0tKl9fY29udGVudFwifSwkbz17ZGVmYXVsdDpVbyxmYWRlOlhvLGxpZnQ6WW8sbm9uZTpVb30sS289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9kZWZhdWx0REJCPWZ1bmN0aW9uKCl7fSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczokbyxiYXNlQ2xhc3M6VW8sYmFzZUNsYXNzTmFtZTpcIk1vZGFsQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJtb2RhbFwiKSwhUS5maW5kQ2hpbGQodGhpcyxcIi5tb2RhbF9fY29udGVudFwiKSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2NvbnRlbnRcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl7dmFyIGU9dGhpcy5jaGlsZE5vZGVzWzBdO3RoaXMucmVtb3ZlQ2hpbGQoZSksdC5pbnNlcnRCZWZvcmUoZSxudWxsKX10aGlzLmFwcGVuZENoaWxkKHQpfUIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdG9nZ2xlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnN0eWxlLmRpc3BsYXk9dD9cInRhYmxlXCI6XCJub25lXCJ9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7XCJjbGFzc1wiPT09dD9RLnJlc3RvcmVDbGFzcyh0aGlzLFwibW9kYWxcIixHbyk6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gR299fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVvfHxRLnRocm93QW5pbWF0b3IoXCJNb2RhbFwiKSwkb1t0XT1lfX0se2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh3KHYoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxcIm9ic2VydmVkQXR0cmlidXRlc1wiLHRoaXMpKSxbXCJjbGFzc1wiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuICRvfX0se2tleTpcIk1vZGFsQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVW99fV0pLGV9KCk7Yy5Nb2RhbD1LbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbW9kYWxcIixLbyk7dmFyIFFvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzO3AodGhpcyx0KSxcImVsZW1lbnQgaWdub3JlU3dpcGUgaXNJbml0aWFsU3RhdGUgb25EcmFnQ2FsbGJhY2sgc3dpcGVNYXggc3dpcGVNaW4gc3dpcGVNaWRcIi5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09ZVt0XX0pLHRoaXMuZWxlbWVudEhhbmRsZXI9ZS5lbGVtZW50SGFuZGxlcnx8ZS5lbGVtZW50LHRoaXMuZ2V0VGhyZXNob2xkPWUuZ2V0VGhyZXNob2xkfHxmdW5jdGlvbigpe3JldHVybi41fSx0aGlzLmdldFNpZGU9ZS5nZXRTaWRlfHxmdW5jdGlvbigpe3JldHVyblwibGVmdFwifSx0aGlzLmhhbmRsZUdlc3R1cmU9dGhpcy5oYW5kbGVHZXN0dXJlLmJpbmQodGhpcyksdGhpcy5fc2hvdWxkRml4U2Nyb2xsPVwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1N9cmV0dXJuIGcodCxbe2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIik7dGhpcy5nZXN0dXJlRGV0ZWN0b3J8fCh0aGlzLmdlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5lbGVtZW50SGFuZGxlcix7ZHJhZ01pbkRpc3RhbmNlOjEscGFzc2l2ZTohdGhpcy5fc2hvdWxkRml4U2Nyb2xsfSkpO3ZhciBlPXQ/XCJvblwiOlwib2ZmXCI7dGhpcy5nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnIGRyYWdzdGFydCBkcmFnZW5kXCIsdGhpcy5oYW5kbGVHZXN0dXJlKX19LHtrZXk6XCJoYW5kbGVHZXN0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5nZXN0dXJlJiYoXCJkcmFnc3RhcnRcIj09PXQudHlwZT90aGlzLm9uRHJhZ1N0YXJ0KHQpOnRoaXMuX2lnbm9yZURyYWd8fChcImRyYWdlbmRcIj09PXQudHlwZT90aGlzLm9uRHJhZ0VuZCh0KTp0aGlzLm9uRHJhZyh0KSkpfX0se2tleTpcIm9uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fCFRLmlzVmFsaWRHZXN0dXJlKHQpfHx0aGlzLmlnbm9yZVN3aXBlKHQsXCJsZWZ0XCI9PT1lLmdldFNpZGUoKT90Lmdlc3R1cmUuY2VudGVyLmNsaWVudFg6d2luZG93LmlubmVyV2lkdGgtdC5nZXN0dXJlLmNlbnRlci5jbGllbnRYKSx0aGlzLl9pZ25vcmVEcmFnfHwodC5jb25zdW1lJiZ0LmNvbnN1bWUoKSx0LmNvbnN1bWVkPSEwLHRoaXMuX3dpZHRoPWZ1bmN0aW9uKHQpe3ZhciBlPVtwYXJzZUludCh0LDEwKSwvcHgvLnRlc3QodCldLG49ZVswXTtyZXR1cm4gZVsxXT9uOk1hdGgucm91bmQoZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCpuLzEwMCl9KHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aHx8XCIxMDAlXCIpLHRoaXMuX3N0YXJ0RGlzdGFuY2U9dGhpcy5fZGlzdGFuY2U9dGhpcy5pc0luaXRpYWxTdGF0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYhdGhpcy5pc0luaXRpYWxTdGF0ZSgpP3RoaXMuX3dpZHRoOjAsUS5pb3NQcmV2ZW50U2Nyb2xsKHRoaXMuZ2VzdHVyZURldGVjdG9yKSl9fSx7a2V5Olwib25EcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZT1cImxlZnRcIj09PXRoaXMuZ2V0U2lkZSgpP3QuZ2VzdHVyZS5kZWx0YVg6LXQuZ2VzdHVyZS5kZWx0YVgsbj1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMuX3dpZHRoLHRoaXMuX3N0YXJ0RGlzdGFuY2UrZSkpO24hPT10aGlzLl9kaXN0YW5jZSYmKHRoaXMuX2Rpc3RhbmNlPW4sdGhpcy5zd2lwZU1pZCh0aGlzLl9kaXN0YW5jZSx0aGlzLl93aWR0aCkpfX0se2tleTpcIm9uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9dC5nZXN0dXJlLmludGVyaW1EaXJlY3Rpb247dGhpcy5nZXRTaWRlKCkhPT1lJiZ0aGlzLl9kaXN0YW5jZT50aGlzLl93aWR0aCp0aGlzLmdldFRocmVzaG9sZCgpP3RoaXMuc3dpcGVNYXgoKTp0aGlzLnN3aXBlTWluKCl9fSx7a2V5OlwiZGlzcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlRGV0ZWN0b3ImJnRoaXMuZ2VzdHVyZURldGVjdG9yLmRpc3Bvc2UoKSx0aGlzLmdlc3R1cmVEZXRlY3Rvcj10aGlzLmVsZW1lbnQ9dGhpcy5lbGVtZW50SGFuZGxlcj1udWxsfX1dKSx0fSgpLEpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHAodGhpcyxlKSx0PVEuZXh0ZW5kKHt0aW1pbmc6XCJsaW5lYXJcIixkdXJhdGlvbjpcIjAuNFwiLGRlbGF5OlwiMFwifSx0fHx7fSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fSx7a2V5OlwiYmxvY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmNyZWF0ZUVsZW1lbnQoJ1xcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyB6LWluZGV4OiAxMDAwMDBcIj48L2Rpdj5cXG4gICAgJyk7cmV0dXJuIHQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlKSxmdW5jdGlvbigpe3JldHVybiBlLnJlbW92ZSgpfX19XSksZX0oKSxabz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC5kdXJhdGlvblJlc3RvcmUsaT12b2lkIDA9PT1uPy4xOm4sbz10LmR1cmF0aW9uU3dpcGUscj12b2lkIDA9PT1vPy4xNTpvLGE9dC50aW1pbmdTd2lwZSxzPXZvaWQgMD09PWE/XCJsaW5lYXJcIjphLGw9eSh0LFtcImR1cmF0aW9uUmVzdG9yZVwiLFwiZHVyYXRpb25Td2lwZVwiLFwidGltaW5nU3dpcGVcIl0pO3AodGhpcyxlKTt2YXIgdT1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyxfKHt9LGwpKSk7cmV0dXJuIHUuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSx1LmR1cmF0aW9uUmVzdG9yZT1pLHUuZHVyYXRpb25Td2lwZT1yLHUudGltaW5nU3dpcGU9cyx1Lm9wdFN3aXBlPXt0aW1pbmc6cyxkdXJhdGlvbjpyfSx1Lm9wdFJlc3RvcmU9e3RpbWluZzpzLGR1cmF0aW9uOml9LHUuc3dpcGVTaGFkb3c9US5jcmVhdGVFbGVtZW50KCc8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMnB4OyByaWdodDogMTAwJTsgdG9wOiAwOyBib3R0b206IDA7IHotaW5kZXg6IC0xO2JhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgdHJhbnNwYXJlbnQgMCwgcmdiYSgwLDAsMCwuMDQpIDQwJSwgcmdiYSgwLDAsMCwuMTIpIDgwJSwgcmdiYSgwLDAsMCwuMTYpIDEwMCUpO1wiPjwvZGl2PicpLHUuaXNEcmFnU3RhcnQ9ITAsdX1yZXR1cm4gYihlLEpvKSxnKGUsbnVsbCxbe2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiEwfX1dKSxnKGUsW3trZXk6XCJfZGVjb21wb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3Nob3VsZEFuaW1hdGVUb29sYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2NhbGN1bGF0ZURlbHRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2RyYWdTdGFydFNldHVwXCIsdmFsdWU6ZnVuY3Rpb24odCxuKXt0aGlzLmlzRHJhZ1N0YXJ0PSExLHRoaXMudW5ibG9jaz12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLG4pLHQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayx0KSx0aGlzLnRhcmdldD17ZW50ZXI6US5maW5kVG9vbGJhclBhZ2UodCl8fHQsbGVhdmU6US5maW5kVG9vbGJhclBhZ2Uobil8fG59LHRoaXMuZGVjb21wPXtlbnRlcjp0aGlzLl9kZWNvbXBvc2UodGhpcy50YXJnZXQuZW50ZXIpLGxlYXZlOnRoaXMuX2RlY29tcG9zZSh0aGlzLnRhcmdldC5sZWF2ZSl9LHRoaXMuZGVsdGE9dGhpcy5fY2FsY3VsYXRlRGVsdGEobix0aGlzLmRlY29tcC5sZWF2ZSksdGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj10aGlzLl9zaG91bGRBbmltYXRlVG9vbGJhcih0aGlzLnRhcmdldC5lbnRlcix0aGlzLnRhcmdldC5sZWF2ZSksdGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj8odGhpcy5zd2lwZVNoYWRvdy5zdHlsZS50b3A9dGhpcy5kZWNvbXAubGVhdmUudG9vbGJhci5vZmZzZXRIZWlnaHQrXCJweFwiLHRoaXMudGFyZ2V0LmxlYXZlLmFwcGVuZENoaWxkKHRoaXMuc3dpcGVTaGFkb3cpLHRoaXMuX3NhdmVTdHlsZSh0aGlzLnRhcmdldC5lbnRlcix0aGlzLnRhcmdldC5sZWF2ZSkpOihuLmFwcGVuZENoaWxkKHRoaXMuc3dpcGVTaGFkb3cpLHRoaXMuX3NhdmVTdHlsZSh0LG4pKSxuLmNsYXNzTGlzdC5hZGQoXCJvdmVyZmxvdy12aXNpYmxlXCIpLHRoaXMub3ZlcmZsb3dFbGVtZW50PW4sdGhpcy5kZWNvbXAubGVhdmUuY29udGVudC5jbGFzc0xpc3QuYWRkKFwiY29udGVudC1zd2lwaW5nXCIpfX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMuaXNTd2lwaW5nPSEwLFwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobi5zdHlsZS5kaXNwbGF5PVwiXCIpLHRoaXMuaXNEcmFnU3RhcnQmJih0aGlzLm1heFdpZHRoPWUsdGhpcy5fZHJhZ1N0YXJ0U2V0dXAobixpKSk7dmFyIG89KHQtZSkvZTt0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrMjUqbytcIiUsIDAsIDApXCIsb3BhY2l0eToxKzEwKm8vMTAwfSksbnQodGhpcy5kZWNvbXAuZW50ZXIudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMuZGVsdGEudGl0bGUqbytcInB4LCAwLCAwKVwiLG9wYWNpdHk6MStvfSksbnQodGhpcy5kZWNvbXAuZW50ZXIuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7b3BhY2l0eToxKzEwKm8vMTAwLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMuZGVsdGEubGFiZWwqbytcInB4LCAwLCAwKVwifSksbnQodGhpcy5kZWNvbXAuZW50ZXIub3RoZXIpLnF1ZXVlKHtvcGFjaXR5OjErb30pLG50KFt0aGlzLmRlY29tcC5sZWF2ZS5jb250ZW50LHRoaXMuZGVjb21wLmxlYXZlLmJvdHRvbVRvb2xiYXIsdGhpcy5kZWNvbXAubGVhdmUuYmFja2dyb3VuZCx0aGlzLnN3aXBlU2hhZG93XSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5Oi0xKm99KSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrMTI1KigxK28pK1wiJSwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmxlYXZlLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6LTEqbyx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlKigxK28pK1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTotMSpvfSkpOm50LnJ1bkFsbChudChpKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdCtcInB4LCAwLCAwKVwifSksbnQobikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzI1Km8rXCIlLCAwLCAwKVwiLG9wYWNpdHk6MSsxMCpvLzEwMH0pLG50KHRoaXMuc3dpcGVTaGFkb3cpLnF1ZXVlKHtvcGFjaXR5Oi0xKm99KSl9fSx7a2V5OlwicmVzdG9yZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3RoaXMuaXNEcmFnU3RhcnR8fCh0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTI1JSwgMCwgMClcIixvcGFjaXR5Oi45fSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrdGhpcy5kZWx0YS50aXRsZStcInB4LCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25SZXN0b3JlK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgXCIrdGhpcy50aW1pbmdTd2lwZSxvcGFjaXR5OjB9KSxudCh0aGlzLmRlY29tcC5lbnRlci5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrdGhpcy5kZWx0YS5sYWJlbCtcInB4LCAwLCAwKVwifSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eTowfSx0aGlzLm9wdFJlc3RvcmUpLG50KFt0aGlzLmRlY29tcC5sZWF2ZS5jb250ZW50LHRoaXMuZGVjb21wLmxlYXZlLmJvdHRvbVRvb2xiYXIsdGhpcy5kZWNvbXAubGVhdmUuYmFja2dyb3VuZCx0aGlzLnN3aXBlU2hhZG93XSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhcikucXVldWUoe29wYWNpdHk6MX0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5OjEsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGV9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTowfSx0aGlzLm9wdFJlc3RvcmUpLnF1ZXVlKGZ1bmN0aW9uKGUpe2kuX3Jlc2V0KGkudGFyZ2V0LmVudGVyLGkudGFyZ2V0LmxlYXZlKSx0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbiYmbigpLGUoKX0pKTpudC5ydW5BbGwobnQodCkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKC0yNSUsIDAsIDApXCIsb3BhY2l0eTouOX0sdGhpcy5vcHRSZXN0b3JlKSxudChlKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKS5xdWV1ZShmdW5jdGlvbihvKXtpLl9yZXNldCh0LGUpLHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuJiZuKCksbygpfSkpKX19LHtrZXk6XCJwb3BTd2lwZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3RoaXMuaXNEcmFnU3RhcnR8fCh0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlLG9wYWNpdHk6MX0pLG50KHRoaXMuZGVjb21wLmVudGVyLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eToxfSx0aGlzLm9wdFN3aXBlKSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0sdGhpcy5vcHRTd2lwZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhcikucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRTd2lwZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEyNSUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6MCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlK1wicHgsIDAsIDApXCIsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uU3dpcGUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGV9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTowLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMubWF4V2lkdGgrXCJweCwgMCwgMClcIn0sdGhpcy5vcHRTd2lwZSkucXVldWUoZnVuY3Rpb24odCl7aS5fcmVzZXQoaS50YXJnZXQuZW50ZXIsaS50YXJnZXQubGVhdmUpLG4mJm4oKSx0KCl9KSk6bnQucnVuQWxsKG50KHQpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0sdGhpcy5vcHRTd2lwZSksbnQoZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDEwMCUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLnF1ZXVlKGZ1bmN0aW9uKG8pe2kuX3Jlc2V0KHQsZSksbiYmbigpLG8oKX0pKSl9fSx7a2V5OlwiX3NhdmVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zYXZlZFN0eWxlPW5ldyBXZWFrTWFwO2Zvcih2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gdC5fc2F2ZWRTdHlsZS5zZXQoZSxlLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKX0sbj1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkobiksbz0wO288bjtvKyspaVtvXT1hcmd1bWVudHNbb107aS5mb3JFYWNoKGUpLE9iamVjdC5rZXlzKHRoaXMuZGVjb21wKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5rZXlzKHQuZGVjb21wW25dKS5mb3JFYWNoKGZ1bmN0aW9uKGkpeyh0LmRlY29tcFtuXVtpXWluc3RhbmNlb2YgQXJyYXk/dC5kZWNvbXBbbl1baV06W3QuZGVjb21wW25dW2ldXSkuZm9yRWFjaChlKX0pfSl9fSx7a2V5OlwiX3Jlc3RvcmVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT1mdW5jdGlvbihlKXtudWxsPT09dC5fc2F2ZWRTdHlsZS5nZXQoZSk/ZS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTplLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdC5fc2F2ZWRTdHlsZS5nZXQoZSkpLHQuX3NhdmVkU3R5bGUuZGVsZXRlKGUpfSxuPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShuKSxvPTA7bzxuO28rKylpW29dPWFyZ3VtZW50c1tvXTtpLmZvckVhY2goZSksT2JqZWN0LmtleXModGhpcy5kZWNvbXApLmZvckVhY2goZnVuY3Rpb24obil7T2JqZWN0LmtleXModC5kZWNvbXBbbl0pLmZvckVhY2goZnVuY3Rpb24oaSl7KHQuZGVjb21wW25dW2ldaW5zdGFuY2VvZiBBcnJheT90LmRlY29tcFtuXVtpXTpbdC5kZWNvbXBbbl1baV1dKS5mb3JFYWNoKGUpfSl9KX19LHtrZXk6XCJfcmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNTd2lwaW5nPSExLHRoaXMuX3NhdmVkU3R5bGUmJnRoaXMuX3Jlc3RvcmVTdHlsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy51bmJsb2NrJiZ0aGlzLnVuYmxvY2soKSx0aGlzLnN3aXBlU2hhZG93LnJlbW92ZSgpLHRoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdGhpcy5vdmVyZmxvd0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJmbG93LXZpc2libGVcIiksdGhpcy5kZWNvbXAubGVhdmUuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGVudC1zd2lwaW5nXCIpLHRoaXMuZGVjb21wPXRoaXMudGFyZ2V0PXRoaXMub3ZlcmZsb3dFbGVtZW50PXRoaXMuX3NhdmVkU3R5bGU9bnVsbCx0aGlzLmlzRHJhZ1N0YXJ0PSEwfX1dKSxlfSgpLHRyPWZ1bmN0aW9uKCl7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIisoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjApK1wiLCBcIisoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjApK1wiLCBcIisoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjApK1wiKVwifSxlcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKDAuMywgLjQsIDAsIC45KVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphLGw9eSh0LFtcInRpbWluZ1wiLFwiZGVsYXlcIixcImR1cmF0aW9uXCJdKTtwKHRoaXMsZSk7dmFyIHU9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsXyh7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSxsKSkpO3JldHVybiB1LmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgei1pbmRleDogMlwiPjwvZGl2PicpLHV9cmV0dXJuIGIoZSxabyksZyhlLFt7a2V5OlwiX2RlY29tcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX2dldFRvb2xiYXJFbGVtZW50KCksbj1lLl9nZXRUb29sYmFyTGVmdEl0ZW1zRWxlbWVudCgpLGk9ZS5fZ2V0VG9vbGJhclJpZ2h0SXRlbXNFbGVtZW50KCksbz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKVwib25zLWJhY2stYnV0dG9uXCIhPT10W25dLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJmUucHVzaCh0W25dKTtyZXR1cm4gZX0scj1bXS5jb25jYXQoMD09PW4uY2hpbGRyZW4ubGVuZ3RoP246byhuLmNoaWxkcmVuKSkuY29uY2F0KDA9PT1pLmNoaWxkcmVuLmxlbmd0aD9pOm8oaS5jaGlsZHJlbikpO3JldHVybnt0b29sYmFyQ2VudGVyOmUuX2dldFRvb2xiYXJDZW50ZXJJdGVtc0VsZW1lbnQoKSxiYWNrQnV0dG9uSWNvbjplLl9nZXRUb29sYmFyQmFja0J1dHRvbkljb25FbGVtZW50KCksYmFja0J1dHRvbkxhYmVsOmUuX2dldFRvb2xiYXJCYWNrQnV0dG9uTGFiZWxFbGVtZW50KCksb3RoZXI6cixjb250ZW50OnQuX2dldENvbnRlbnRFbGVtZW50KCksYmFja2dyb3VuZDp0Ll9nZXRCYWNrZ3JvdW5kRWxlbWVudCgpLHRvb2xiYXI6ZSxib3R0b21Ub29sYmFyOnQuX2dldEJvdHRvbVRvb2xiYXJFbGVtZW50KCl9fX0se2tleTpcIl9zaG91bGRBbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5fY2FuQW5pbWF0ZVRvb2xiYXIoKSYmZS5fY2FuQW5pbWF0ZVRvb2xiYXIoKSxpPXQuX2dldFRvb2xiYXJFbGVtZW50KCksbz1lLl9nZXRUb29sYmFyRWxlbWVudCgpLHI9aS5oYXNBdHRyaWJ1dGUoXCJzdGF0aWNcIil8fG8uaGFzQXR0cmlidXRlKFwic3RhdGljXCIpLGE9US5oYXNNb2RpZmllcihpLFwibWF0ZXJpYWxcIil8fFEuaGFzTW9kaWZpZXIobyxcIm1hdGVyaWFsXCIpLHM9US5oYXNNb2RpZmllcihpLFwidHJhbnNwYXJlbnRcIil8fFEuaGFzTW9kaWZpZXIobyxcInRyYW5zcGFyZW50XCIpO3JldHVybiBuJiYhciYmIWEmJiFzfX0se2tleTpcIl9jYWxjdWxhdGVEZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwLGk9dm9pZCAwLG89dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihlLmJhY2tCdXR0b25MYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJiYWNrLWJ1dHRvbl9fbGFiZWxcIikpe3ZhciByPWUuYmFja0J1dHRvbkxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO249TWF0aC5yb3VuZChvLndpZHRoLzItci53aWR0aC8yLXIubGVmdCl9ZWxzZSBuPU1hdGgucm91bmQoby53aWR0aC8yKi42KTtyZXR1cm4gZS5iYWNrQnV0dG9uSWNvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJiYWNrLWJ1dHRvbl9faWNvblwiKSYmKGk9ZS5iYWNrQnV0dG9uSWNvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodC0yKSx7dGl0bGU6bixsYWJlbDppfX19LHtrZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxpLG8pe3ZhciByPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssaSk7dmFyIGE9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtuKHQsZnVuY3Rpb24oKXt2YXIgZT1RLmZpbmRUb29sYmFyUGFnZSh0KXx8dCxuPVEuZmluZFRvb2xiYXJQYWdlKGkpfHxpLHM9ci5fZGVjb21wb3NlKGUpLGw9ci5fZGVjb21wb3NlKG4pLHU9ci5fY2FsY3VsYXRlRGVsdGEoaSxzKTtyLl9zaG91bGRBbmltYXRlVG9vbGJhcihlLG4pP250LnJ1bkFsbChudChbcy5jb250ZW50LHMuYm90dG9tVG9vbGJhcixzLmJhY2tncm91bmRdLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSx7dHJhbnNmb3JtOnRyKCl9KSxudChzLnRvb2xiYXIsci5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHMudG9vbGJhckNlbnRlcixyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTI1JVwiKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9KSxudChzLmJhY2tCdXR0b25MYWJlbCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKHUudGl0bGUrXCJweFwiKSxvcGFjaXR5OjB9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjEsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrci5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrci5kdXJhdGlvbitcInMgXCIrci50aW1pbmd9KSxudChzLm90aGVyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtjc3M6e29wYWNpdHk6MX0sdGltaW5nOlwibGluZWFyXCJ9KSxudChbbC5jb250ZW50LGwuYm90dG9tVG9vbGJhcixsLmJhY2tncm91bmRdLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItMjUlXCIpLG9wYWNpdHk6Ljl9KS5xdWV1ZShmdW5jdGlvbih0KXtyLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLGEoKSxvKCksdCgpfSksbnQobC50b29sYmFyQ2VudGVyLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItXCIrdS50aXRsZStcInB4XCIpLG9wYWNpdHk6MCx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIityLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIityLmR1cmF0aW9uK1wicyBcIityLnRpbWluZ30pLG50KGwuYmFja0J1dHRvbkxhYmVsLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItXCIrdS5sYWJlbCtcInB4XCIpLG9wYWNpdHk6MH0pLG50KGwub3RoZXIsci5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se2Nzczp7b3BhY2l0eTowfSx0aW1pbmc6XCJsaW5lYXJcIn0pKTpudC5ydW5BbGwobnQodCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTAwJVwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQoaSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSkucXVldWUoZnVuY3Rpb24odCl7ci5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxhKCksbygpLHQoKX0pKX0pfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO2lmKHRoaXMuaXNTd2lwaW5nKXJldHVybiB0aGlzLnBvcFN3aXBlKHQsbixpKTt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayx0KTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpLGE9US5maW5kVG9vbGJhclBhZ2UodCl8fHQscz1RLmZpbmRUb29sYmFyUGFnZShuKXx8bixsPXRoaXMuX2RlY29tcG9zZShhKSx1PXRoaXMuX2RlY29tcG9zZShzKSxjPXRoaXMuX2NhbGN1bGF0ZURlbHRhKG4sdSk7dGhpcy5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIoYSxzKT9udC5ydW5BbGwobnQoW2wuY29udGVudCxsLmJvdHRvbVRvb2xiYXIsbC5iYWNrZ3JvdW5kXSx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQobC50b29sYmFyQ2VudGVyLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItXCIrYy50aXRsZStcInB4XCIpLG9wYWNpdHk6MH0se3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MSx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uK1wicyBcIit0aGlzLnRpbWluZ30pLG50KGwuYmFja0J1dHRvbkxhYmVsLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItXCIrYy5sYWJlbCtcInB4XCIpfSx7dHJhbnNmb3JtOnRyKCl9KSxudChsLm90aGVyLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtjc3M6e29wYWNpdHk6MX0sdGltaW5nOlwibGluZWFyXCJ9KSxudChbdS5jb250ZW50LHUuYm90dG9tVG9vbGJhcix1LmJhY2tncm91bmRdLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKX0se3RyYW5zZm9ybTp0cihcIjEwMCVcIil9KS53YWl0KDApLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSxudCh1LnRvb2xiYXIsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHUudG9vbGJhckNlbnRlcix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMjUlXCIpfSksbnQodS5iYWNrQnV0dG9uTGFiZWwsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0se3RyYW5zZm9ybTp0cihjLnRpdGxlK1wicHhcIiksb3BhY2l0eTowLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb24rXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb24rXCJzIFwiK3RoaXMudGltaW5nfSkpOm50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItMjUlXCIpLG9wYWNpdHk6Ljl9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKX0se3RyYW5zZm9ybTp0cihcIjEwMCVcIil9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSkpfX1dKSxlfSgpLG5yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KGJsYWNrLCB3aGl0ZSk7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbik7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIC0xMCUsIDApXCIsb3BhY2l0eTouOX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgLTQzcHgsIDApXCIsb3BhY2l0eTouOX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxyKCksaSgpLHQoKX0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAxMDAlLCAwKVwifSkpfX1dKSxlfSgpLGlyPVwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOmlyLG9wYWNpdHk6MH0se3RyYW5zZm9ybTppcixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOmlyLG9wYWNpdHk6MX0se3RyYW5zZm9ybTppcixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19XSksZX0oKSxycj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYmxhY2tNYXNrT3BhY2l0eT0uNCxsLmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgei1pbmRleDogMjtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgb3BhY2l0eTogMDtcIj48L2Rpdj4nKSxsfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpczt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLG4ucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayxuLm5leHRTaWJsaW5nKTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpO250LnJ1bkFsbChudCh0aGlzLmJhY2tncm91bmRNYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MH0se29wYWNpdHk6dGhpcy5ibGFja01hc2tPcGFjaXR5fSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0KCl9KSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgxMDAlLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNDUlLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7cigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdC5uZXh0U2libGluZyk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzayx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OnRoaXMuYmxhY2tNYXNrT3BhY2l0eX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTQ1JSwgMCwgMClcIixvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX1dKSxlfSgpLGFyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/LjA1Om8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcIj48L2Rpdj4nKSxsfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpczt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayxuKTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpLGE9bnQodGhpcy5iYWNrZ3JvdW5kTWFzaykud2FpdCh0aGlzLmRlbGF5K3RoaXMuZHVyYXRpb24pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSk7bnQucnVuQWxsKGEsbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5Oi40fSkucXVldWUoZnVuY3Rpb24odCl7cigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzaykud2FpdCh0aGlzLmRlbGF5K3RoaXMuZHVyYXRpb24pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTouNH0se29wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9KSl9fV0pLGV9KCksc3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSlcIjpuLG89dC50aW1pbmdQb3Ascj12b2lkIDA9PT1vP1wiY3ViaWMtYmV6aWVyKDAuNCwgMCwgMSwgMSlcIjpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphLGw9dC5kdXJhdGlvbix1PXZvaWQgMD09PWw/LjI6bDtwKHRoaXMsZSk7dmFyIGM9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnMsZHVyYXRpb246dX0pKTtyZXR1cm4gYy50aW1pbmdQb3A9cixjfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgNDJweCwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28oKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpO250LnJ1bkFsbChudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se2Nzczp7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMzhweCwgMClcIixvcGFjaXR5OjB9LHRpbWluZzp0aGlzLnRpbWluZ1BvcH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28oKSxpKCksdCgpfSkpfX1dKSxlfSgpLGxyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSl9cmV0dXJuIGIoZSxKbyksZyhlLFt7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe24oKX19XSksZX0oKSx1cj17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3NyOmVyfSxzbGlkZTpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3JyOmVyfSxsaWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/YXI6bnJ9LGZhZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9zcjpvcn0sXCJzbGlkZS1pb3NcIjplcixcInNsaWRlLW1kXCI6cnIsXCJsaWZ0LWlvc1wiOm5yLFwibGlmdC1tZFwiOmFyLFwiZmFkZS1pb3NcIjpvcixcImZhZGUtbWRcIjpzcixub25lOmxyfSxjcj17cmVhZHk6ZnVuY3Rpb24odCxlKXtlKCl9fSxocj1mdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1QQUdFXCIhPT10Lm5vZGVOYW1lJiZRLnRocm93KFwiT25seSBwYWdlIGVsZW1lbnRzIGNhbiBiZSBjaGlsZHJlbiBvZiBuYXZpZ2F0b3JcIil9LGRyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5faXNSdW5uaW5nPSExLHQuX2luaXRpYWxpemVkPSExLHQuX3BhZ2VMb2FkZXI9anQsdC5fcGFnZU1hcD1uZXcgV2Vha01hcCx0Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImFuaW1hdG9yRmFjdG9yeVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmltYXRvckZhY3Rvcnl9fV0pLGcoZSxbe2tleTpcIl9nZXRQYWdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX29uRGV2aWNlQmFja0J1dHRvbi5iaW5kKHRoaXMpLCFDLmlzQW5kcm9pZCgpfHxcImZvcmNlXCI9PT10aGlzLmdldEF0dHJpYnV0ZShcInN3aXBlYWJsZVwiKSl7dmFyIGU9dm9pZCAwO3RoaXMuX3N3aXBlPW5ldyBRbyh7ZWxlbWVudDp0aGlzLGdldFRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCguMixwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKFwic3dpcGUtdGhyZXNob2xkXCIpKXx8MCl9LHN3aXBlTWF4OmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgxLHtkdXJhdGlvbjplLmR1cmF0aW9uU3dpcGUsdGltaW5nOmUudGltaW5nU3dpcGV9KSx0W3Quc3dpcGVNYXg/XCJzd2lwZU1heFwiOlwicG9wUGFnZVwiXSh7YW5pbWF0b3I6ZX0pLGU9bnVsbH0sc3dpcGVNaWQ6ZnVuY3Rpb24obixpKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKG4vaSksZS50cmFuc2xhdGUobixpLHQudG9wUGFnZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLHQudG9wUGFnZSl9LHN3aXBlTWluOmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgwLHtkdXJhdGlvbjplLmR1cmF0aW9uUmVzdG9yZSx0aW1pbmc6ZS50aW1pbmdTd2lwZX0pLGUucmVzdG9yZSh0LnRvcFBhZ2UucHJldmlvdXNFbGVtZW50U2libGluZyx0LnRvcFBhZ2UpLGU9bnVsbH0saWdub3JlU3dpcGU6ZnVuY3Rpb24obixpKXtpZighdC5faXNSdW5uaW5nJiZ0LmNoaWxkcmVuLmxlbmd0aD4xKXt2YXIgbz1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInN3aXBlLXRhcmdldC13aWR0aFwiKXx8MjUsMTApO2lmKFwicmlnaHRcIj09PW4uZ2VzdHVyZS5kaXJlY3Rpb24mJm8+aSl7dmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuL29ucy1iYWNrLWJ1dHRvbi9pLnRlc3QodC50YWdOYW1lKX07aWYoIXIobi50YXJnZXQpJiYhUS5maW5kUGFyZW50KG4udGFyZ2V0LHIsZnVuY3Rpb24odCl7cmV0dXJuL29ucy1wYWdlL2kudGVzdCh0LnRhZ05hbWUpfSkpe3ZhciBhPSh0LnRvcFBhZ2UucHVzaGVkT3B0aW9uc3x8e30pLmFuaW1hdGlvbnx8dC5hbmltYXRvckZhY3RvcnkuX2FuaW1hdGlvbixzPXVyW2FdaW5zdGFuY2VvZiBGdW5jdGlvbj91clthXS5jYWxsKCk6dXJbYV07aWYodm9pZCAwIT09cyYmcy5zd2lwZWFibGUpcmV0dXJuIGU9bmV3IHMsITF9fX1yZXR1cm4hMH19KSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcInN3aXBlYWJsZVwiKX1pZighdGhpcy5faW5pdGlhbGl6ZWQpe3RoaXMuX2luaXRpYWxpemVkPSEwO3ZhciBpPVEuZGVmZXIoKTt0aGlzLmxvYWRlZD1pLnByb21pc2UsY3IucmVhZHkodGhpcyxmdW5jdGlvbigpe3ZhciBlPSFRLmhhc0FueUNvbXBvbmVudEFzUGFyZW50KHQpLG89e2FuaW1hdGlvbjpcIm5vbmVcIixzaG93OmV9O2lmKDA9PT10LnBhZ2VzLmxlbmd0aCYmdC5fZ2V0UGFnZVRhcmdldCgpKXQucHVzaFBhZ2UodC5fZ2V0UGFnZVRhcmdldCgpLG8pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaS5yZXNvbHZlKCl9KTtlbHNlIGlmKHQucGFnZXMubGVuZ3RoPjApe2Zvcih2YXIgcj0wO3I8dC5wYWdlcy5sZW5ndGg7cisrKWhyKHQucGFnZXNbcl0pO3QudG9wUGFnZSYmbih0LnRvcFBhZ2UsZnVuY3Rpb24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2kucmVzb2x2ZSgpLGUmJnQudG9wUGFnZS5fc2hvdygpLHQuX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvbigpfSwwKX0pfWVsc2Ugbih0LGZ1bmN0aW9uKCl7MD09PXQucGFnZXMubGVuZ3RoJiZ0Ll9nZXRQYWdlVGFyZ2V0KCk/dC5wdXNoUGFnZSh0Ll9nZXRQYWdlVGFyZ2V0KCksbykudGhlbihmdW5jdGlvbigpe3JldHVybiBpLnJlc29sdmUoKX0pOmkucmVzb2x2ZSgpfSl9KX19fSx7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0b3JGYWN0b3J5PW5ldyBPKHthbmltYXRvcnM6dXIsYmFzZUNsYXNzOkpvLGJhc2VDbGFzc05hbWU6XCJOYXZpZ2F0b3JBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLmRpc3Bvc2UoKSx0aGlzLl9zd2lwZT1udWxsfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCk7YnJlYWs7Y2FzZVwic3dpcGVhYmxlXCI6dGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLnVwZGF0ZSgpfX19LHtrZXk6XCJwb3BQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2U9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKG51bGwsZSkub3B0aW9ucyxRLmlzSW50ZWdlcihlLnRpbWVzKSYmZS50aW1lcz4xJiZ0aGlzLl9yZW1vdmVQYWdlcyhlLnRpbWVzKTtyZXR1cm4gdGhpcy5fcG9wUGFnZShlLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3QuX3BhZ2VMb2FkZXIudW5sb2FkKHQucGFnZXNbdC5wYWdlcy5sZW5ndGgtMV0pLGUoKX0pfSl9fSx7a2V5OlwiX3BvcFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtpZih0aGlzLl9pc1J1bm5pbmcpcmV0dXJuIFByb21pc2UucmVqZWN0KFwicG9wUGFnZSBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKHRoaXMucGFnZXMubGVuZ3RoPD0xKXJldHVybiBQcm9taXNlLnJlamVjdChcIm9ucy1uYXZpZ2F0b3IncyBwYWdlIHN0YWNrIGlzIGVtcHR5LlwiKTtpZih0aGlzLl9lbWl0UHJlUG9wRXZlbnQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwb3AgZXZlbnQuXCIpO3ZhciBpPXRoaXMucGFnZXMubGVuZ3RoO3JldHVybiB0aGlzLl9pc1J1bm5pbmc9ITAsdGhpcy5wYWdlc1tpLTJdLnVwZGF0ZUJhY2tCdXR0b24oaS0yPjApLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8pe3ZhciByPWUucGFnZXNbaS0xXSxhPWUucGFnZXNbaS0yXTsodD1RLmV4dGVuZCh7fSxlLm9wdGlvbnN8fHt9LHIucHVzaGVkT3B0aW9uc3x8e30sdCkpLmRhdGEmJihhLmRhdGE9US5leHRlbmQoe30sYS5kYXRhfHx7fSx0LmRhdGF8fHt9KSk7ci5faGlkZSgpLGEuc3R5bGUuZGlzcGxheT1cIlwiOyh0LmFuaW1hdG9yfHxlLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3IodCkpLnBvcChlLnBhZ2VzW2ktMl0sZS5wYWdlc1tpLTFdLGZ1bmN0aW9uKCl7bigpLnRoZW4oZnVuY3Rpb24oKXtlLl9pc1J1bm5pbmc9ITEsYS5fc2hvdygpLFEudHJpZ2dlckVsZW1lbnRFdmVudChlLFwicG9zdHBvcFwiLHtsZWF2ZVBhZ2U6cixlbnRlclBhZ2U6YSxuYXZpZ2F0b3I6ZX0pLHQuY2FsbGJhY2smJnQuY2FsbGJhY2soYSksbyhhKX0pfSl9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBlLl9pc1J1bm5pbmc9ITF9KX19LHtrZXk6XCJwdXNoUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnModCxuKTt0PWkucGFnZTt2YXIgbz1mdW5jdGlvbihpKXtocihpKSxlLl9wYWdlTWFwLnNldChpLHQpLChpPVEuZXh0ZW5kKGkse2RhdGE6bi5kYXRhfSkpLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIn07cmV0dXJuKG49aS5vcHRpb25zKS5wYWdlSFRNTD90aGlzLl9wdXNoUGFnZShuLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe0h0LmxvYWQoe3BhZ2U6bi5wYWdlSFRNTCxwYXJlbnQ6ZSxwYXJhbXM6bi5kYXRhfSxmdW5jdGlvbihlKXtvKGUpLHQoKX0pfSl9KTp0aGlzLl9wdXNoUGFnZShuLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplLHBhcmFtczpuLmRhdGF9LGZ1bmN0aW9uKHQpe28odCksaSgpfSl9KX0pfX0se2tleTpcIl9wdXNoUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07aWYodGhpcy5faXNSdW5uaW5nKXJldHVybiBQcm9taXNlLnJlamVjdChcInB1c2hQYWdlIGlzIGFscmVhZHkgcnVubmluZy5cIik7aWYodGhpcy5fZW1pdFByZVB1c2hFdmVudCgpKXJldHVybiBQcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZXB1c2ggZXZlbnQuXCIpO3RoaXMuX2lzUnVubmluZz0hMDt2YXIgaT1PLnBhcnNlQW5pbWF0aW9uT3B0aW9uc1N0cmluZyh0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTtlPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc3x8e30se2FuaW1hdGlvbk9wdGlvbnM6aX0sZSk7dmFyIG89dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKGUpO3JldHVybiBuKCkudGhlbihmdW5jdGlvbigpe3ZhciBuPXQucGFnZXMubGVuZ3RoLGk9dC5wYWdlc1tuLTFdLHI9ZS5sZWF2ZVBhZ2V8fHQucGFnZXNbbi0yXTtyZXR1cm4gaHIoaSksaS51cGRhdGVCYWNrQnV0dG9uKG4+KGUuX3JlcGxhY2VQYWdlPzI6MSkpLGkucHVzaGVkT3B0aW9ucz1RLmV4dGVuZCh7fSxpLnB1c2hlZE9wdGlvbnN8fHt9LGV8fHt9KSxpLmRhdGE9US5leHRlbmQoe30saS5kYXRhfHx7fSxlLmRhdGF8fHt9KSxpLnVubG9hZD1pLnVubG9hZHx8ZS51bmxvYWQsbmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIGE9ZnVuY3Rpb24oKXt0Ll9pc1J1bm5pbmc9ITEsITEhPT1lLnNob3cmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLl9zaG93KCl9KSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodCxcInBvc3RwdXNoXCIse2xlYXZlUGFnZTpyLGVudGVyUGFnZTppLG5hdmlnYXRvcjp0fSksciYmKHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksZS5jYWxsYmFjayYmZS5jYWxsYmFjayhpKSxuKGkpfTtpLnN0eWxlLnZpc2liaWxpdHk9XCJcIixyPyhyLl9oaWRlKCksby5wdXNoKGkscixhKSk6YSgpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyB0Ll9pc1J1bm5pbmc9ITEsZX0pfX0se2tleTpcInJlcGxhY2VQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm4gdGhpcy5wdXNoUGFnZSh0LG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucGFnZXMubGVuZ3RoPjEmJmUuX3BhZ2VMb2FkZXIudW5sb2FkKGUucGFnZXNbZS5wYWdlcy5sZW5ndGgtMl0pLGUuX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvbigpLFByb21pc2UucmVzb2x2ZSh0KX0pfX0se2tleTpcImluc2VydFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e30sbz10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnMoZSxpKTtpZihlPW8ucGFnZSxpPW8ub3B0aW9ucywodD10aGlzLl9ub3JtYWxpemVJbmRleCh0KSk+PXRoaXMucGFnZXMubGVuZ3RoKXJldHVybiB0aGlzLnB1c2hQYWdlKGUsaSk7ZT1cInN0cmluZ1wiPT10eXBlb2YgaS5wYWdlSFRNTD9pLnBhZ2VIVE1MOmU7dmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGkucGFnZUhUTUw/SHQ6dGhpcy5fcGFnZUxvYWRlcjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obyl7ci5sb2FkKHtwYWdlOmUscGFyZW50Om59LGZ1bmN0aW9uKHIpe2hyKHIpLG4uX3BhZ2VNYXAuc2V0KHIsZSkscj1RLmV4dGVuZChyLHtkYXRhOmkuZGF0YSxwdXNoZWRPcHRpb25zOml9KSxpLmFuaW1hdGlvbk9wdGlvbnM9US5leHRlbmQoe30sTy5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcobi5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSksaS5hbmltYXRpb25PcHRpb25zfHx7fSksci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLG4uaW5zZXJ0QmVmb3JlKHIsbi5wYWdlc1t0XSksbi50b3BQYWdlLnVwZGF0ZUJhY2tCdXR0b24oITApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyPW51bGwsbyhuLnBhZ2VzW3RdKX0sMWUzLzYwKX0pfSl9fSx7a2V5OlwicmVtb3ZlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuKHQ9dGhpcy5fbm9ybWFsaXplSW5kZXgodCkpPHRoaXMucGFnZXMubGVuZ3RoLTE/bmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIGk9ZS5wYWdlc1t0XSxvPWUudG9wUGFnZTtlLl9wYWdlTWFwLmRlbGV0ZShpKSxlLl9wYWdlTG9hZGVyLnVubG9hZChpKSwxPT09ZS5wYWdlcy5sZW5ndGgmJmUudG9wUGFnZS51cGRhdGVCYWNrQnV0dG9uKCExKSxuKG8pfSk6dGhpcy5wb3BQYWdlKG4pfX0se2tleTpcInJlc2V0VG9QYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxpPXRoaXMuX3ByZXBhcmVQYWdlQW5kT3B0aW9ucyh0LG4pO2lmKHQ9aS5wYWdlLChuPWkub3B0aW9ucykuYW5pbWF0b3J8fG4uYW5pbWF0aW9ufHxuLnBvcHx8KG4uYW5pbWF0aW9uPVwibm9uZVwiKSxuLnBhZ2V8fG4ucGFnZUhUTUx8fCF0aGlzLl9nZXRQYWdlVGFyZ2V0KCl8fCh0PW4ucGFnZT10aGlzLl9nZXRQYWdlVGFyZ2V0KCkpLG4ucG9wKXJldHVybiB0aGlzLl9yZW1vdmVQYWdlcygpLHRoaXMuaW5zZXJ0UGFnZSgwLHQse2RhdGE6bi5kYXRhfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLnBvcFBhZ2Uobil9KTt2YXIgbz1uLmNhbGxiYWNrO3JldHVybiBuLmNhbGxiYWNrPWZ1bmN0aW9uKHQpe2UuX3JlbW92ZVBhZ2VzKCksdC51cGRhdGVCYWNrQnV0dG9uKCExKSxvJiZvKHQpfSx0aGlzLnB1c2hQYWdlKHQsbil9fSx7a2V5OlwiYnJpbmdQYWdlVG9wXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9Oy0xPT09W1wibnVtYmVyXCIsXCJzdHJpbmdcIl0uaW5kZXhPZih2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6Zih0KSkmJlEudGhyb3coXCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcGFnZSBuYW1lIG9yIHRoZSBpbmRleCBvZiBhbiBleGlzdGluZyBwYWdlLiBZb3Ugc3VwcGxpZWQgXCIrdCk7dmFyIG49XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5fbm9ybWFsaXplSW5kZXgodCk6dGhpcy5fbGFzdEluZGV4T2ZQYWdlKHQpLGk9dGhpcy5wYWdlc1tuXTtpZihuPDApcmV0dXJuIHRoaXMucHVzaFBhZ2UodCxlKTtyZXR1cm4gZT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnMoaSxlKS5vcHRpb25zLG49PT10aGlzLnBhZ2VzLmxlbmd0aC0xP1Byb21pc2UucmVzb2x2ZShpKTooaXx8US50aHJvdyhcIkZhaWxlZCB0byBmaW5kIGl0ZW0gXCIrdCksdGhpcy5faXNSdW5uaW5nP1Byb21pc2UucmVqZWN0KFwicHVzaFBhZ2UgaXMgYWxyZWFkeSBydW5uaW5nLlwiKTp0aGlzLl9lbWl0UHJlUHVzaEV2ZW50KCk/UHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwdXNoIGV2ZW50LlwiKTooaS5zdHlsZS5kaXNwbGF5PVwiXCIsaS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsaS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGkpLHRoaXMuX3B1c2hQYWdlKGUpKSl9fSx7a2V5OlwiX3ByZXBhcmVQYWdlQW5kT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm5cIm9iamVjdFwiIT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZRLnRocm93KFwib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4gWW91IHN1cHBsaWVkIFwiK2UpLG51bGwhPT10JiZ2b2lkIDAhPT10fHwhZS5wYWdlfHwodD1lLnBhZ2UpLGU9US5leHRlbmQoe30sdGhpcy5vcHRpb25zfHx7fSxlLHtwYWdlOnR9KSx7cGFnZTp0LG9wdGlvbnM6ZX19fSx7a2V5OlwiX3JlbW92ZVBhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYWdlcyxuPXZvaWQgMD09PXQ/MDplLmxlbmd0aC10O249bjwwPzE6bjtmb3IodmFyIGk9ZS5sZW5ndGgtMjtpPj1uO2ktLSl0aGlzLl9wYWdlTWFwLmRlbGV0ZShlW2ldKSx0aGlzLl9wYWdlTG9hZGVyLnVubG9hZChlW2ldKX19LHtrZXk6XCJfdXBkYXRlTGFzdFBhZ2VCYWNrQnV0dG9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhZ2VzLmxlbmd0aC0xO3Q+PTAmJnRoaXMucGFnZXNbdF0udXBkYXRlQmFja0J1dHRvbih0PjApfX0se2tleTpcIl9ub3JtYWxpemVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0wP3Q6TWF0aC5hYnModGhpcy5wYWdlcy5sZW5ndGgrdCkldGhpcy5wYWdlcy5sZW5ndGh9fSx7a2V5OlwiX29uRGV2aWNlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMucGFnZXMubGVuZ3RoPjE/dGhpcy5wb3BQYWdlKCk6dC5jYWxsUGFyZW50SGFuZGxlcigpfX0se2tleTpcIl9sYXN0SW5kZXhPZlBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7Zm9yKGU9dGhpcy5wYWdlcy5sZW5ndGgtMTtlPj0wJiYodGhpcy5fcGFnZU1hcC5oYXModGhpcy5wYWdlc1tlXSl8fFEudGhyb3coXCJJbmNvcnJlY3Qgc3RhdGUgb2YgcGFnZU1hcFwiKSx0IT09dGhpcy5fcGFnZU1hcC5nZXQodGhpcy5wYWdlc1tlXSkpO2UtLSk7cmV0dXJuIGV9fSx7a2V5OlwiX2VtaXRQcmVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInByZVwiK3QsUS5leHRlbmQoe25hdmlnYXRvcjp0aGlzLGN1cnJlbnRQYWdlOnRoaXMucGFnZXNbdGhpcy5wYWdlcy5sZW5ndGgtMV0sY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIG49ITB9fSxlKSksbn19LHtrZXk6XCJfZW1pdFByZVB1c2hFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VtaXRQcmVFdmVudChcInB1c2hcIil9fSx7a2V5OlwiX2VtaXRQcmVQb3BFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGg7cmV0dXJuIHRoaXMuX2VtaXRQcmVFdmVudChcInBvcFwiLHtsZWF2ZVBhZ2U6dGhpcy5wYWdlc1t0LTFdLGVudGVyUGFnZTp0aGlzLnBhZ2VzW3QtMl19KX19LHtrZXk6XCJfY3JlYXRlUGFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmNyZWF0ZUVsZW1lbnQoUC5ub3JtYWxpemVQYWdlSFRNTCh0KSk7cmV0dXJuIGhyKGUpLGV9fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5sb2FkZWQudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnRvcFBhZ2UmJnQudG9wUGFnZS5fc2hvdygpfSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG9wUGFnZSYmdGhpcy50b3BQYWdlLl9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhZ2VzLmxlbmd0aC0xO3Q+PTA7dC0tKXRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMucGFnZXNbdF0pO3RoaXMucmVtb3ZlKCl9fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19LHtrZXk6XCJ0b3BQYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubGFzdEVsZW1lbnRDaGlsZDt0JiZcIk9OUy1QQUdFXCIhPT10LnRhZ05hbWU7KXQ9dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO3JldHVybiB0fX0se2tleTpcInBhZ2VzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuYXJyYXlGcm9tKHRoaXMuY2hpbGRyZW4pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1QQUdFXCI9PT10LnRhZ05hbWV9KX19LHtrZXk6XCJvblN3aXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU3dpcGV9LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIm9uU3dpcGVcIiBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0aGlzLl9vblN3aXBlPXR9fSx7a2V5Olwib3B0aW9uc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3B0aW9ucz10fX0se2tleTpcIl9pc1J1bm5pbmdcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJfaXMtcnVubmluZ1wiLHQ/XCJ0cnVlXCI6XCJmYWxzZVwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJfaXMtcnVubmluZ1wiKSl9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIEpvfHxRLnRocm93QW5pbWF0b3IoXCJOYXZpZ2F0b3JcIiksdXJbdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJhbmltYXRpb25cIixcInN3aXBlYWJsZVwiXX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdXJ9fSx7a2V5OlwiTmF2aWdhdG9yQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSm99fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlcHVzaFwiLFwicG9zdHB1c2hcIixcInByZXBvcFwiLFwicG9zdHBvcFwiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBjcn19XSksZX0oKTtjLk5hdmlnYXRvcj1kcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbmF2aWdhdG9yXCIsZHIpO3ZhciBmcj17XCJcIjpcInRvb2xiYXItLSpcIixcIi50b29sYmFyX19sZWZ0XCI6XCJ0b29sYmFyLS0qX19sZWZ0XCIsXCIudG9vbGJhcl9fY2VudGVyXCI6XCJ0b29sYmFyLS0qX19jZW50ZXJcIixcIi50b29sYmFyX19yaWdodFwiOlwidG9vbGJhci0tKl9fcmlnaHRcIn0scHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwidG9vbGJhclwiLGZyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsZnIpfX19LHtrZXk6XCJfZ2V0VG9vbGJhckxlZnRJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIubGVmdFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckNlbnRlckl0ZW1zRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jZW50ZXJcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJSaWdodEl0ZW1zRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5yaWdodFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckJhY2tCdXR0b25MYWJlbEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b24gLmJhY2stYnV0dG9uX19sYWJlbFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckJhY2tCdXR0b25JY29uRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIm9ucy1iYWNrLWJ1dHRvbiAuYmFjay1idXR0b25fX2ljb25cIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJ0b29sYmFyXCIpLHRoaXMuX2Vuc3VyZVRvb2xiYXJJdGVtRWxlbWVudHMoKSxCLmluaXRNb2RpZmllcih0aGlzLGZyKX19LHtrZXk6XCJfZW5zdXJlVG9vbGJhckl0ZW1FbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuY2hpbGROb2Rlcy5sZW5ndGgtMTt0Pj0wO3QtLSkxIT10aGlzLmNoaWxkTm9kZXNbdF0ubm9kZVR5cGUmJnRoaXMucmVtb3ZlQ2hpbGQodGhpcy5jaGlsZE5vZGVzW3RdKTt2YXIgZT10aGlzLl9lbnN1cmVUb29sYmFyRWxlbWVudChcImNlbnRlclwiKTtpZihlLmNsYXNzTGlzdC5hZGQoXCJ0b29sYmFyX190aXRsZVwiKSwxIT09dGhpcy5jaGlsZHJlbi5sZW5ndGh8fCF0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcImNlbnRlclwiKSl7dmFyIG49dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJsZWZ0XCIpLGk9dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJyaWdodFwiKTt0aGlzLmNoaWxkcmVuWzBdPT09biYmdGhpcy5jaGlsZHJlblsxXT09PWUmJnRoaXMuY2hpbGRyZW5bMl09PT1pfHwodGhpcy5hcHBlbmRDaGlsZChuKSx0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQoaSkpfX19LHtrZXk6XCJfZW5zdXJlVG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihRLmZpbmRDaGlsZCh0aGlzLFwiLnRvb2xiYXJfX1wiK3QpKXt2YXIgZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnRvb2xiYXJfX1wiK3QpO3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCksZX12YXIgbj1RLmZpbmRDaGlsZCh0aGlzLFwiLlwiK3QpfHxRLmNyZWF0ZShcIi5cIit0KTtyZXR1cm4gbi5jbGFzc0xpc3QuYWRkKFwidG9vbGJhcl9fXCIrdCksbn19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLlRvb2xiYXI9cHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvb2xiYXJcIixwcik7dmFyIGdyPVwicGFnZVwiLG1yPXtcIlwiOlwicGFnZS0tKlwiLFwiLnBhZ2VfX2NvbnRlbnRcIjpcInBhZ2UtLSpfX2NvbnRlbnRcIixcIi5wYWdlX19iYWNrZ3JvdW5kXCI6XCJwYWdlLS0qX19iYWNrZ3JvdW5kXCJ9LF9yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVyaXZlSG9va3MoKSx0Ll9kZWZhdWx0Q2xhc3NOYW1lPWdyLHQuY2xhc3NMaXN0LmFkZChnciksdC5faW5pdGlhbGl6ZWQ9ITEsbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHQuX2lzU2hvd249ITEsdC5fY29udGVudEVsZW1lbnQ9dC5fZ2V0Q29udGVudEVsZW1lbnQoKSx0Ll9iYWNrZ3JvdW5kRWxlbWVudD10Ll9nZXRCYWNrZ3JvdW5kRWxlbWVudCgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztOLnByZXBhcmUodGhpcyk7dmFyIGU9US5maW5kQ2hpbGQodGhpcyxcIm9ucy10b29sYmFyXCIpLG49US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19iYWNrZ3JvdW5kXCIpfHxRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2tncm91bmRcIil8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwicGFnZV9fYmFja2dyb3VuZFwiKSx0aGlzLmluc2VydEJlZm9yZShuLCFlJiZ0aGlzLmZpcnN0Q2hpbGR8fGUmJmUubmV4dFNpYmxpbmcpO3ZhciBpPVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fY29udGVudFwiKXx8US5maW5kQ2hpbGQodGhpcyxcIi5jb250ZW50XCIpfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NMaXN0LmFkZChcInBhZ2VfX2NvbnRlbnRcIiksaS5wYXJlbnRFbGVtZW50fHxRLmFycmF5RnJvbSh0aGlzLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7KDEhPT1lLm5vZGVUeXBlfHx0Ll9lbGVtZW50U2hvdWxkQmVNb3ZlZChlKSkmJmkuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLl90cnlUb0ZpbGxTdGF0dXNCYXIoaSksdGhpcy5pbnNlcnRCZWZvcmUoaSxuLm5leHRTaWJsaW5nKSxlJiZRLmhhc01vZGlmaWVyKGUsXCJ0cmFuc3BhcmVudFwiKXx8MSE9PWkuY2hpbGRyZW4ubGVuZ3RofHwhUS5pc1BhZ2VDb250cm9sKGkuY2hpbGRyZW5bMF0pfHwodGhpcy5fZGVmYXVsdENsYXNzTmFtZSs9XCIgcGFnZS0td3JhcHBlclwiLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiY2xhc3NcIikpLEIuaW5pdE1vZGlmaWVyKHRoaXMsbXIpfX0se2tleTpcIl9lbGVtZW50U2hvdWxkQmVNb3ZlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFnZV9fYmFja2dyb3VuZFwiKSlyZXR1cm4hMTt2YXIgZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZihcIm9ucy1mYWJcIj09PWUpcmV0dXJuIXQuaGFzQXR0cmlidXRlKFwicG9zaXRpb25cIik7cmV0dXJuIHQuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfHwtMT09PVtcInNjcmlwdFwiLFwib25zLXRvb2xiYXJcIixcIm9ucy1ib3R0b20tdG9vbGJhclwiLFwib25zLW1vZGFsXCIsXCJvbnMtc3BlZWQtZGlhbFwiLFwib25zLWRpYWxvZ1wiLFwib25zLWFsZXJ0LWRpYWxvZ1wiLFwib25zLXBvcG92ZXJcIixcIm9ucy1hY3Rpb24tc2hlZXRcIl0uaW5kZXhPZihlKX19LHtrZXk6XCJfdHJ5VG9GaWxsU3RhdHVzQmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX2NvbnRlbnRFbGVtZW50O1AuYXV0b1N0YXR1c0JhckZpbGwoZnVuY3Rpb24oKXtRLnRvZ2dsZUF0dHJpYnV0ZSh0LFwic3RhdHVzLWJhci1maWxsXCIsIVEuZmluZFBhcmVudCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInN0YXR1cy1iYXItZmlsbFwiKX0pJiYodC5fY2FuQW5pbWF0ZVRvb2xiYXIoZSl8fCFRLmZpbmRDaGlsZChlLFEuaXNQYWdlQ29udHJvbCkpKX0pfX0se2tleTpcIl9jYW5BbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX2NvbnRlbnRFbGVtZW50O3JldHVybiEhUS5maW5kQ2hpbGQodGhpcyxcIm9ucy10b29sYmFyXCIpfHwhIVEuZmluZENoaWxkKHQsZnVuY3Rpb24odCl7cmV0dXJuIFEubWF0Y2godCxcIm9ucy10b29sYmFyXCIpJiYhdC5oYXNBdHRyaWJ1dGUoXCJpbmxpbmVcIil9KX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztRLmlzQXR0YWNoZWQodGhpcykmJm4odGhpcyxmdW5jdGlvbigpe3QuX3RyeVRvRmlsbFN0YXR1c0JhcigpLHQuaGFzQXR0cmlidXRlKFwib24taW5maW5pdGUtc2Nyb2xsXCIpJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIm9uLWluZmluaXRlLXNjcm9sbFwiLG51bGwsdC5nZXRBdHRyaWJ1dGUoXCJvbi1pbmZpbml0ZS1zY3JvbGxcIikpLHQuX2luaXRpYWxpemVkfHwodC5faW5pdGlhbGl6ZWQ9ITAsc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5vbkluaXQmJnQub25Jbml0KCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJpbml0XCIpfSksUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudCh0KXx8c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3Nob3coKX0pKX0pfX0se2tleTpcInVwZGF0ZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmJhY2tCdXR0b24mJih0P3RoaXMuYmFja0J1dHRvbi5zaG93KCk6dGhpcy5iYWNrQnV0dG9uLmhpZGUoKSl9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fY29udGVudEVsZW1lbnQsbj0oZS5zY3JvbGxUb3ArZS5jbGllbnRIZWlnaHQpL2Uuc2Nyb2xsSGVpZ2h0Pj10aGlzLl9pbmZpbml0ZVNjcm9sbExpbWl0O3RoaXMuX29uSW5maW5pdGVTY3JvbGwmJiF0aGlzLl9sb2FkaW5nQ29udGVudCYmbiYmKHRoaXMuX2xvYWRpbmdDb250ZW50PSEwLHRoaXMuX29uSW5maW5pdGVTY3JvbGwoZnVuY3Rpb24oKXtyZXR1cm4gdC5fbG9hZGluZ0NvbnRlbnQ9ITF9KSl9fSx7a2V5OlwiX2dldENvbnRlbnRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnBhZ2VfX2NvbnRlbnRcIik7aWYodClyZXR1cm4gdDtRLnRocm93KCdGYWlsIHRvIGdldCBcIi5wYWdlX19jb250ZW50XCIgZWxlbWVudCcpfX0se2tleTpcIl9nZXRCYWNrZ3JvdW5kRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19iYWNrZ3JvdW5kXCIpO2lmKHQpcmV0dXJuIHQ7US50aHJvdygnRmFpbCB0byBnZXQgXCIucGFnZV9fYmFja2dyb3VuZFwiIGVsZW1lbnQnKX19LHtrZXk6XCJfZ2V0Qm90dG9tVG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWJvdHRvbS10b29sYmFyXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9nZXRUb29sYmFyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9ucy10b29sYmFyXCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsdGhpcy5fZGVmYXVsdENsYXNzTmFtZSxtcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG1yKTticmVhaztjYXNlXCJvbi1pbmZpbml0ZS1zY3JvbGxcIjp0aGlzLm9uSW5maW5pdGVTY3JvbGw9bnVsbD09PW4/bnVsbDpmdW5jdGlvbih0KXt2YXIgZT1RLmZpbmRGcm9tUGF0aChuKTtpLm9uSW5maW5pdGVTY3JvbGw9ZSxlKHQpfX19fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpeyF0aGlzLl9pc1Nob3duJiZRLmlzQXR0YWNoZWQodGhpcykmJih0aGlzLl9pc1Nob3duPSEwLHRoaXMuc2V0QXR0cmlidXRlKFwic2hvd25cIixcIlwiKSx0aGlzLm9uU2hvdyYmdGhpcy5vblNob3coKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInNob3dcIiksUS5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9zaG93XCIpKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNTaG93biYmKHRoaXMuX2lzU2hvd249ITEsdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzaG93blwiKSx0aGlzLm9uSGlkZSYmdGhpcy5vbkhpZGUoKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImhpZGVcIiksUS5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9oaWRlXCIpKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faGlkZSgpLHRoaXMub25EZXN0cm95JiZ0aGlzLm9uRGVzdHJveSgpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwiZGVzdHJveVwiKSx0aGlzLm9uRGV2aWNlQmFja0J1dHRvbiYmdGhpcy5vbkRldmljZUJhY2tCdXR0b24uZGVzdHJveSgpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfZGVzdHJveVwiKSx0aGlzLnJlbW92ZSgpfX0se2tleTpcIl9kZXJpdmVIb29rc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbnN0cnVjdG9yLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPVwib25cIitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbXCJfXCIrbl19LHNldDpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wiJytuKydcIiBob29rIG11c3QgYmUgYSBmdW5jdGlvbicpLHRbXCJfXCIrbl09ZS5iaW5kKHQpfX0pfSl9fSx7a2V5OlwibmFtZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZShcIm5hbWVcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwibmFtZVwiKX19LHtrZXk6XCJiYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIm9ucy1iYWNrLWJ1dHRvblwiKX19LHtrZXk6XCJvbkluZmluaXRlU2Nyb2xsXCIsc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvbkluZmluaXRlU2Nyb2xsXCIgbXVzdCBiZSBmdW5jdGlvbiBvciBudWxsJyksbih0aGlzLGZ1bmN0aW9uKCl7dD9lLl9vbkluZmluaXRlU2Nyb2xsfHwoZS5faW5maW5pdGVTY3JvbGxMaW1pdD0uOSxlLl9ib3VuZE9uU2Nyb2xsPWUuX29uU2Nyb2xsLmJpbmQoZSksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbnRlbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixlLl9ib3VuZE9uU2Nyb2xsKX0pKTplLl9jb250ZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZS5fYm91bmRPblNjcm9sbCksZS5fb25JbmZpbml0ZVNjcm9sbD10fSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkluZmluaXRlU2Nyb2xsfX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5Olwic2Nyb2xsVG9wXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRFbGVtZW50LnNjcm9sbFRvcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRlbnRFbGVtZW50LnNjcm9sbFRvcD10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcIm9uLWluZmluaXRlLXNjcm9sbFwiLFwiY2xhc3NcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaW5pdFwiLFwic2hvd1wiLFwiaGlkZVwiLFwiZGVzdHJveVwiXX19XSksZX0oKTtjLlBhZ2U9X3IsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXBhZ2VcIixfcik7dmFyIHZyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJfYW5pbWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5mcm9tLGk9ZS50byxvPWUub3B0aW9ucyxyPWUuY2FsbGJhY2ssYT1lLnJlc3RvcmUscz12b2lkIDAhPT1hJiZhLGw9ZS5hbmltYXRpb247cmV0dXJuIG89US5leHRlbmQoe30sdGhpcy5vcHRpb25zLG8pLGwmJihuPWwuZnJvbSxpPWwudG8pLGw9bnQodCkscyYmKGw9bC5zYXZlU3R5bGUoKSksbD1sLnF1ZXVlKG4pLndhaXQodGhpcy5kZWxheSkucXVldWUoe2NzczppLGR1cmF0aW9uOnRoaXMuZHVyYXRpb24sdGltaW5nOnRoaXMudGltaW5nfSkscyYmKGw9bC5yZXN0b3JlU3R5bGUoKSksciYmKGw9bC5xdWV1ZShmdW5jdGlvbih0KXtyKCksdCgpfSkpLGx9fSx7a2V5OlwiX2FuaW1hdGVBbGxcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtyZXR1cm4gbi5fYW5pbWF0ZSh0W2ldLGVbaV0pLnBsYXkoKX0pfX1dKSxlfSgpLGJyPXtvdXQ6e2Zyb206e29wYWNpdHk6MX0sdG86e29wYWNpdHk6MH19LGluOntmcm9tOntvcGFjaXR5OjB9LHRvOntvcGFjaXR5OjF9fX0seXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsdnIpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVBbGwodCx7X21hc2s6YnIuaW4sX3BvcG92ZXI6e2FuaW1hdGlvbjpici5pbixyZXN0b3JlOiEwLGNhbGxiYWNrOmV9fSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUFsbCh0LHtfbWFzazpici5vdXQsX3BvcG92ZXI6e2FuaW1hdGlvbjpici5vdXQscmVzdG9yZTohMCxjYWxsYmFjazplfX0pfX1dKSxlfSgpLGtyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLHlyKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlQWxsKHQse19tYXNrOmJyLmluLF9wb3BvdmVyOntmcm9tOnt0cmFuc2Zvcm06XCJzY2FsZTNkKDEuMywgMS4zLCAxLjApXCIsb3BhY2l0eTowfSx0bzp7dHJhbnNmb3JtOlwic2NhbGUzZCgxLjAsIDEuMCwgIDEuMClcIixvcGFjaXR5OjF9LHJlc3RvcmU6ITAsY2FsbGJhY2s6ZX19KX19XSksZX0oKSx3cj17XCIucG9wb3ZlclwiOlwicG9wb3Zlci0tKlwiLFwiLnBvcG92ZXItbWFza1wiOlwicG9wb3Zlci1tYXNrLS0qXCIsXCIucG9wb3Zlcl9fY29udGVudFwiOlwicG9wb3Zlci0tKl9fY29udGVudFwiLFwiLnBvcG92ZXJfX2Fycm93XCI6XCJwb3BvdmVyLS0qX19hcnJvd1wifSxFcj17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3lyOmtyfSxub25lOnZyLFwiZmFkZS1pb3NcIjprcixcImZhZGUtbWRcIjp5cn0sQ3I9e3VwOlwiYm90dG9tXCIsbGVmdDpcInJpZ2h0XCIsZG93bjpcInRvcFwiLHJpZ2h0OlwibGVmdFwifSxBcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2JvdW5kT25DaGFuZ2U9dC5fb25DaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCksdC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpFcixiYXNlQ2xhc3M6dnIsYmFzZUNsYXNzTmFtZTpcIlBvcG92ZXJBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil8fFwiZGVmYXVsdFwifSl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3Q/KHRoaXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdGhpcy5fY3VycmVudFRhcmdldD1lLnRhcmdldCx0aGlzLl9wb3NpdGlvblBvcG92ZXIoZS50YXJnZXQpKToodGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX2NsZWFyU3R5bGVzKCkpfX0se2tleTpcIl9wb3NpdGlvblBvcG92ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yYWRpdXMsbj10aGlzLl9jb250ZW50LGk9dGhpcy5fbWFyZ2luLG89TGkuZ2V0U2FmZUFyZWFMZW5ndGhzKCkscj1MaS5nZXRTYWZlQXJlYURPTVJlY3QoKSxhPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz1RLmhhc01vZGlmaWVyKHRoaXMsXCJtYXRlcmlhbFwiKSxsPXMmJnRoaXMuaGFzQXR0cmlidXRlKFwiY292ZXItdGFyZ2V0XCIpLHU9KFEuZmluZFBhcmVudCh0aGlzLFwib25zLXBhZ2VcIil8fGRvY3VtZW50LmJvZHkpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9e3RvcDpNYXRoLm1heCh1LnRvcCxyLnRvcCksbGVmdDpNYXRoLm1heCh1LmxlZnQsci5sZWZ0KSxib3R0b206TWF0aC5taW4odS5ib3R0b20sci5ib3R0b20pLHJpZ2h0Ok1hdGgubWluKHUucmlnaHQsci5yaWdodCl9LGg9e3RvcDphLnRvcC0oYy50b3AraSksbGVmdDphLmxlZnQtKGMubGVmdCtpKSxib3R0b206Yy5ib3R0b20taS1hLmJvdHRvbSxyaWdodDpjLnJpZ2h0LWktYS5yaWdodH0sZD17dG9wOmEudG9wK01hdGgucm91bmQoYS5oZWlnaHQvMiktKGMudG9wK2kpLGxlZnQ6YS5sZWZ0K01hdGgucm91bmQoYS53aWR0aC8yKS0oYy5sZWZ0K2kpLGJvdHRvbTpjLmJvdHRvbS1pLWEuYm90dG9tK01hdGgucm91bmQoYS5oZWlnaHQvMikscmlnaHQ6Yy5yaWdodC1pLWEucmlnaHQrTWF0aC5yb3VuZChhLndpZHRoLzIpfSxmPXRoaXMuX2NhbGN1bGF0ZURpcmVjdGlvbnMoaCkscD1mLnZlcnRpY2FsLGc9Zi5wcmltYXJ5LG09Zi5zZWNvbmRhcnk7dGhpcy5fY3VycmVudERpcmVjdGlvbj1nLFEuYWRkTW9kaWZpZXIodGhpcyxnKTt2YXIgXz1wP1wid2lkdGhcIjpcImhlaWdodFwiLHY9ZnVuY3Rpb24odCl7cmV0dXJue3dpZHRoOnBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpLDEwKSxoZWlnaHQ6cGFyc2VJbnQodC5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpLDEwKX19KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG4pKSxiPWw/MDoocD9hLmhlaWdodDphLndpZHRoKSsocz8wOjE0KSx5PU1hdGgubWF4KG9bZ10raSxvW2ddK2kraFtnXStiKSxrPU1hdGgubWF4KG9bbV0raSxvW21dK2krZFttXS12W19dLzIpO3RoaXMuX3BvcG92ZXIuc3R5bGVbZ109eStcInB4XCIsdGhpcy5fcG9wb3Zlci5zdHlsZVttXT1rK1wicHhcIix0aGlzLl9hcnJvdy5zdHlsZVttXT1NYXRoLm1heChlLG9bbV0raStkW21dLWspK1wicHhcIn19LHtrZXk6XCJfY2FsY3VsYXRlRGlyZWN0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKXx8XCJ1cCBkb3duIGxlZnQgcmlnaHRcIikuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIENyW3RdfSkuc29ydChmdW5jdGlvbihlLG4pe3JldHVybiB0W2VdLXRbbl19KVswXSxuPVwidG9wXCI9PWV8fFwiYm90dG9tXCI9PWUsaT12b2lkIDA7cmV0dXJuIGk9bj90LmxlZnQ8dC5yaWdodD9cImxlZnRcIjpcInJpZ2h0XCI6dC50b3A8dC5ib3R0b20/XCJ0b3BcIjpcImJvdHRvbVwiLHt2ZXJ0aWNhbDpuLHByaW1hcnk6ZSxzZWNvbmRhcnk6aX19fSx7a2V5OlwiX2NsZWFyU3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX2N1cnJlbnREaXJlY3Rpb249bnVsbCxbXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9hcnJvdy5zdHlsZVtlXT10Ll9jb250ZW50LnN0eWxlW2VdPXQuX3BvcG92ZXIuc3R5bGVbZV09XCJcIixRLnJlbW92ZU1vZGlmaWVyKHQsZSl9KX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5fY3VycmVudFRhcmdldCYmdC5fcG9zaXRpb25Qb3BvdmVyKHQuX2N1cnJlbnRUYXJnZXQpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSwhdGhpcy5fcG9wb3Zlcnx8IXRoaXMuX21hc2spe2lmKHRoaXMuX3BvcG92ZXImJnRoaXMuX2NvbnRlbnQpe2lmKCF0aGlzLl9tYXNrKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NMaXN0LmFkZChcInBvcG92ZXItbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZSh0LHRoaXMuZmlyc3RDaGlsZCl9aWYoIXRoaXMuX2Fycm93KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcInBvcG92ZXJfX2Fycm93XCIpLHRoaXMuX3BvcG92ZXIuYXBwZW5kQ2hpbGQoZSl9fWVsc2V7Zm9yKHZhciBuPVEuY3JlYXRlRnJhZ21lbnQoJ1xcbiAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItbWFza1wiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJfX2NvbnRlbnRcIj48L2Rpdj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJfX2Fycm93XCI+PC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAnKSxpPW4ucXVlcnlTZWxlY3RvcihcIi5wb3BvdmVyX19jb250ZW50XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspaS5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3RoaXMuYXBwZW5kQ2hpbGQobil9dGhpcy5oYXNBdHRyaWJ1dGUoXCJzdHlsZVwiKSYmKHRoaXMuX3BvcG92ZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIix0aGlzLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpKSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mKG49IXR8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpfHx0IGluc3RhbmNlb2YgRXZlbnR8fHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9fKHt9LG4se3RhcmdldDp0fSk6Xyh7fSx0KSkudGFyZ2V0P24udGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobi50YXJnZXQpOm4udGFyZ2V0IGluc3RhbmNlb2YgRXZlbnQmJihuLnRhcmdldD1uLnRhcmdldC50YXJnZXQpLG4udGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnR8fFEudGhyb3coXCJJbnZhbGlkIHRhcmdldCB0eXBlIG9yIHVuZGVmaW5lZFwiKSx2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInNob3dcIix0aGlzKS5jYWxsKHRoaXMsbil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9ib3VuZE9uQ2hhbmdlLCExKSx0aGlzLl9tYXJnaW49dGhpcy5fbWFyZ2lufHxwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKS5nZXRQcm9wZXJ0eVZhbHVlKFwidG9wXCIpKSx0aGlzLl9tYXJnaW49dGhpcy5fbWFyZ2lufHw2LG4odGhpcyxmdW5jdGlvbigpe3QuX3JhZGl1cz1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0Ll9jb250ZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1c1wiKSl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9ib3VuZE9uQ2hhbmdlLCExKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7aWYoXCJkaXJlY3Rpb25cIj09PXQpcmV0dXJuIHRoaXMuX2JvdW5kT25DaGFuZ2UoKTtcIm1vZGlmaWVyXCI9PT10JiZ0aGlzLl9jdXJyZW50RGlyZWN0aW9uJiZRLmFkZE1vZGlmaWVyKHRoaXMsdGhpcy5fY3VycmVudERpcmVjdGlvbiksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd3J9fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5wb3BvdmVyLW1hc2tcIil9fSx7a2V5OlwiX3BvcG92ZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5wb3BvdmVyXCIpfX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX3BvcG92ZXIsXCIucG9wb3Zlcl9fY29udGVudFwiKX19LHtrZXk6XCJfYXJyb3dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcy5fcG9wb3ZlcixcIi5wb3BvdmVyX19hcnJvd1wiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgdnJ8fFEudGhyb3dBbmltYXRvcihcIlBvcG92ZXJcIiksRXJbdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiZGlyZWN0aW9uXCJdKX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRXJ9fSx7a2V5OlwiUG9wb3ZlckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZyfX1dKSxlfSgpO2MuUG9wb3Zlcj1BcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcG9wb3ZlclwiLEFyKTt2YXIgU3I9e1wiLnByb2dyZXNzLWJhclwiOlwicHJvZ3Jlc3MtYmFyLS0qXCIsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCI6XCJwcm9ncmVzcy1iYXItLSpfX3ByaW1hcnlcIixcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiOlwicHJvZ3Jlc3MtYmFyLS0qX19zZWNvbmRhcnlcIn0sUHI9US5jcmVhdGVFbGVtZW50KCdcXG4gIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIj5cXG4gICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhcl9fc2Vjb25kYXJ5XCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJfX3ByaW1hcnlcIj48L2Rpdj5cXG4gIDwvZGl2PlxcbicpLE9yPVwiaW5kZXRlcm1pbmF0ZVwiLHhyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQ29tcGlsZWQoKT90aGlzLl90ZW1wbGF0ZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWJhclwiKTp0aGlzLl90ZW1wbGF0ZT1Qci5jbG9uZU5vZGUoITApLHRoaXMuX3ByaW1hcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCIpLHRoaXMuX3NlY29uZGFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiKSx0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpLHRoaXMuX3VwZGF0ZVZhbHVlKCksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSksTi5wcmVwYXJlKHRoaXMpLEIuaW5pdE1vZGlmaWVyKHRoaXMsU3IpfX0se2tleTpcIl9pc0NvbXBpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighUS5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIikpcmV0dXJuITE7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIik7cmV0dXJuISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWJhcl9fc2Vjb25kYXJ5XCIpJiYhIVEuZmluZENoaWxkKHQsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcIm1vZGlmaWVyXCI9PT10PyhCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFNyKSx0aGlzLmhhc0F0dHJpYnV0ZShPcikmJnRoaXMuX3VwZGF0ZURldGVybWluYXRlKCkpOlwidmFsdWVcIj09PXR8fFwic2Vjb25kYXJ5LXZhbHVlXCI9PT10P3RoaXMuX3VwZGF0ZVZhbHVlKCk6dD09PU9yJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpfX0se2tleTpcIl91cGRhdGVEZXRlcm1pbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gUS50b2dnbGVNb2RpZmllcih0LE9yLHtmb3JjZTp0Lmhhc0F0dHJpYnV0ZShPcil9KX0pfX0se2tleTpcIl91cGRhdGVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9wcmltYXJ5LnN0eWxlLndpZHRoPXQuaGFzQXR0cmlidXRlKFwidmFsdWVcIik/dC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKStcIiVcIjpcIjAlXCIsdC5fc2Vjb25kYXJ5LnN0eWxlLndpZHRoPXQuaGFzQXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpP3QuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpK1wiJVwiOlwiMCVcIn0pfX0se2tleTpcInZhbHVlXCIsc2V0OmZ1bmN0aW9uKHQpeyhcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHx0PjEwMCkmJlEudGhyb3coXCJJbnZhbGlkIHZhbHVlXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwidmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil8fFwiMFwiKX19LHtrZXk6XCJzZWNvbmRhcnlWYWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiLE1hdGguZmxvb3IodCkpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIil8fFwiMFwiKX19LHtrZXk6XCJpbmRldGVybWluYXRlXCIsc2V0OmZ1bmN0aW9uKHQpe3Q/dGhpcy5zZXRBdHRyaWJ1dGUoT3IsXCJcIik6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoT3IpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoT3IpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInZhbHVlXCIsXCJzZWNvbmRhcnktdmFsdWVcIixPcl19fV0pLGV9KCk7Yy5Qcm9ncmVzc0Jhcj14cixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcHJvZ3Jlc3MtYmFyXCIseHIpO3ZhciBUcj17XCIucHJvZ3Jlc3MtY2lyY3VsYXJcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qXCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX2JhY2tncm91bmRcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19iYWNrZ3JvdW5kXCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19wcmltYXJ5XCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiOlwicHJvZ3Jlc3MtY2lyY3VsYXItLSpfX3NlY29uZGFyeVwifSxMcj1RLmNyZWF0ZUVsZW1lbnQoJ1xcbiAgPHN2ZyBjbGFzcz1cInByb2dyZXNzLWNpcmN1bGFyXCI+XFxuICAgIDxjaXJjbGUgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhcl9fYmFja2dyb3VuZFwiIC8+XFxuICAgIDxjaXJjbGUgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIgY3g9XCI1MCVcIiBjeT1cIjUwJVwiIHI9XCI0MCVcIiAvPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIiBjeD1cIjUwJVwiIGN5PVwiNTAlXCIgcj1cIjQwJVwiIC8+XFxuICA8L3N2Zz5cXG4nKSxNcj1cImluZGV0ZXJtaW5hdGVcIixEcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcIm1vZGlmaWVyXCI9PT10PyhCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFRyKSx0aGlzLmhhc0F0dHJpYnV0ZShNcikmJnRoaXMuX3VwZGF0ZURldGVybWluYXRlKCkpOlwidmFsdWVcIj09PXR8fFwic2Vjb25kYXJ5LXZhbHVlXCI9PT10P3RoaXMuX3VwZGF0ZVZhbHVlKCk6dD09PU1yJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpfX0se2tleTpcIl91cGRhdGVEZXRlcm1pbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gUS50b2dnbGVNb2RpZmllcih0LE1yLHtmb3JjZTp0Lmhhc0F0dHJpYnV0ZShNcil9KX0pfX0se2tleTpcIl91cGRhdGVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpJiZuKHRoaXMsZnVuY3Rpb24oKXt2YXIgZT1NYXRoLmNlaWwoMjUxLjMyKnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikqLjAxKTt0Ll9wcmltYXJ5LnN0eWxlW1wic3Ryb2tlLWRhc2hhcnJheVwiXT1lK1wiJSwgMjUxLjMyJVwifSksdGhpcy5oYXNBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIik/bih0aGlzLGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5jZWlsKDI1MS4zMip0LmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKSouMDEpO3QuX3NlY29uZGFyeS5zdHlsZS5kaXNwbGF5PW51bGwsdC5fc2Vjb25kYXJ5LnN0eWxlW1wic3Ryb2tlLWRhc2hhcnJheVwiXT1lK1wiJSwgMjUxLjMyJVwifSk6bih0aGlzLGZ1bmN0aW9uKCl7dC5fc2Vjb25kYXJ5LnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNDb21waWxlZCgpP3RoaXMuX3RlbXBsYXRlPVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtY2lyY3VsYXJcIik6dGhpcy5fdGVtcGxhdGU9THIuY2xvbmVOb2RlKCEwKSx0aGlzLl9wcmltYXJ5PVEuZmluZENoaWxkKHRoaXMuX3RlbXBsYXRlLFwiLnByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCIpLHRoaXMuX3NlY29uZGFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIpLHRoaXMuX3VwZGF0ZURldGVybWluYXRlKCksdGhpcy5fdXBkYXRlVmFsdWUoKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMuX3RlbXBsYXRlKSxOLnByZXBhcmUodGhpcyksQi5pbml0TW9kaWZpZXIodGhpcyxUcil9fSx7a2V5OlwiX2lzQ29tcGlsZWRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCFRLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpKXJldHVybiExO3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtY2lyY3VsYXJcIik7cmV0dXJuISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWNpcmN1bGFyX19zZWNvbmRhcnlcIikmJiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fcHJpbWFyeVwiKX19LHtrZXk6XCJ2YWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfHxcIjBcIil9fSx7a2V5Olwic2Vjb25kYXJ5VmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpfHxcIjBcIil9fSx7a2V5OlwiaW5kZXRlcm1pbmF0ZVwiLHNldDpmdW5jdGlvbih0KXt0P3RoaXMuc2V0QXR0cmlidXRlKE1yLFwiXCIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKE1yKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKE1yKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJ2YWx1ZVwiLFwic2Vjb25kYXJ5LXZhbHVlXCIsTXJdfX1dKSxlfSgpO2MuUHJvZ3Jlc3NDaXJjdWxhcj1EcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcHJvZ3Jlc3MtY2lyY3VsYXJcIixEcik7dmFyIElyPVwiaW5pdGlhbFwiLE5yPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFEudGhyb3coJ1wiJyt0KydcIiBtdXN0IGJlICcrZSl9LEJyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fc2hvdWxkRml4U2Nyb2xsPVEuZ2xvYmFscy5pc1VJV2ViVmlldyx0Ll9vbkRyYWc9dC5fb25EcmFnLmJpbmQodCksdC5fb25EcmFnU3RhcnQ9dC5fb25EcmFnU3RhcnQuYmluZCh0KSx0Ll9vbkRyYWdFbmQ9dC5fb25EcmFnRW5kLmJpbmQodCksdC5fb25TY3JvbGw9dC5fb25TY3JvbGwuYmluZCh0KSx0Ll9zZXRTdGF0ZShJciwhMCksdC5faGlkZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX3NldFN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhlaWdodCtcInB4XCI7ZCh0aGlzLHtoZWlnaHQ6dCxsaW5lSGVpZ2h0OnR9KSxcIlwiPT09dGhpcy5zdHlsZS5kaXNwbGF5JiZ0aGlzLl9zaG93KCl9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcGFnZUVsZW1lbnQ7ZS5zY3JvbGxUb3A8MCYmKGUuc2Nyb2xsVG9wPTApfX0se2tleTpcIl9jYW5Db25zdW1lR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVyblwidXBcIj09PXQuZGlyZWN0aW9ufHxcImRvd25cIj09PXQuZGlyZWN0aW9ufX0se2tleTpcIl9vbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5nZXN0dXJlJiYhdGhpcy5kaXNhYmxlZCl7dmFyIG49dC5nZXN0dXJlLmNlbnRlci5jbGllbnRZK3RoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcCxpPXdpbmRvdy5pbm5lckhlaWdodCxvPXRoaXMuX3Nob3VsZEZpeFNjcm9sbD8uODoxO2lmKHRoaXMuX2lnbm9yZURyYWc9dC5jb25zdW1lZHx8bj5pKm8sIXRoaXMuX2lnbm9yZURyYWcpe3ZhciByPXQuY29uc3VtZTt0LmNvbnN1bWU9ZnVuY3Rpb24oKXtyJiZyKCksZS5faWdub3JlRHJhZz0hMCxlLl9oaWRlKCl9LHRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkmJihyJiZyKCksdC5jb25zdW1lZD0hMCx0aGlzLl9zaG93KCkpfXRoaXMuX3N0YXJ0U2Nyb2xsPXRoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcH19fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5nZXN0dXJlJiYhdGhpcy5kaXNhYmxlZCYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkpe1wibm9uZVwiPT09dGhpcy5zdHlsZS5kaXNwbGF5JiZ0aGlzLl9zaG93KCksdC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgbj10Lmdlc3R1cmUuY2VudGVyLmNsaWVudFkrdGhpcy5fcGFnZUVsZW1lbnQuc2Nyb2xsVG9wLGk9d2luZG93LmlubmVySGVpZ2h0O3RoaXMuX3Nob3VsZEZpeFNjcm9sbCYmKHRoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcD10aGlzLl9zdGFydFNjcm9sbC10Lmdlc3R1cmUuZGVsdGFZLChcInVwXCIhPT10Lmdlc3R1cmUuaW50ZXJpbURpcmVjdGlvbnx8bjw9LjUqaSkmJnQuZ2VzdHVyZS5wcmV2ZW50RGVmYXVsdCgpKTt2YXIgbz1NYXRoLm1heCh0Lmdlc3R1cmUuZGVsdGFZLXRoaXMuX3N0YXJ0U2Nyb2xsLDApO2lmKG8hPT10aGlzLl9jdXJyZW50VHJhbnNsYXRpb24pe3ZhciByPXRoaXMudGhyZXNob2xkSGVpZ2h0O3I+MCYmbz49cj8odC5nZXN0dXJlLnN0b3BEZXRlY3QoKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fZmluaXNoKCl9KSk6bz49dGhpcy5oZWlnaHQ/dGhpcy5fc2V0U3RhdGUoXCJwcmVhY3Rpb25cIik6dGhpcy5fc2V0U3RhdGUoSXIpLHRoaXMuX3RyYW5zbGF0ZVRvKG8pfX19fSx7a2V5OlwiX29uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQmJiF0aGlzLl9pZ25vcmVEcmFnJiYodC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9jdXJyZW50VHJhbnNsYXRpb24+MCkpe3RoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbj50aGlzLmhlaWdodD90aGlzLl9maW5pc2goKTp0aGlzLl90cmFuc2xhdGVUbygwLHthbmltYXRlOiEwfSl9fX0se2tleTpcIl9maW5pc2hcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2V0U3RhdGUoXCJhY3Rpb25cIiksdGhpcy5fdHJhbnNsYXRlVG8odGhpcy5oZWlnaHQse2FuaW1hdGU6ITB9KTsodGhpcy5vbkFjdGlvbnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKGZ1bmN0aW9uKCl7dC5fdHJhbnNsYXRlVG8oMCx7YW5pbWF0ZTohMH0pLHQuX3NldFN0YXRlKElyKX0pfX0se2tleTpcIl9zZXRTdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zdGF0ZTt0aGlzLnNldEF0dHJpYnV0ZShcInN0YXRlXCIsdCksZXx8bj09PXRoaXMuc3RhdGV8fFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwiY2hhbmdlc3RhdGVcIix7cHVsbEhvb2s6dGhpcyxzdGF0ZTp0LGxhc3RTdGF0ZTpufSl9fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5zdHlsZS5kaXNwbGF5PVwiXCIsdC5fcGFnZUVsZW1lbnQmJih0Ll9wYWdlRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3A9XCItXCIrdC5oZWlnaHQrXCJweFwiKX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5fcGFnZUVsZW1lbnQmJih0aGlzLl9wYWdlRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3A9XCJcIil9fSx7a2V5OlwiX3RyYW5zbGF0ZVRvXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKDAhPXRoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbnx8MCE9dCl7dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPXQ7dmFyIG49ZS5hbmltYXRlP3tkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIn06e307dGhpcy5fb25QdWxsJiZ0aGlzLl9vblB1bGwoKHQvdGhpcy5oZWlnaHQpLnRvRml4ZWQoMiksbik7dmFyIGk9dGhpcy5oYXNBdHRyaWJ1dGUoXCJmaXhlZC1jb250ZW50XCIpP3RoaXM6dGhpcy5fcGFnZUVsZW1lbnQ7bnQoaSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDBweCwgXCIrdCtcInB4LCAwcHgpXCJ9LG4pLnBsYXkoZnVuY3Rpb24oKXswPT09dCYmZC5jbGVhcihpLFwidHJhbnNpdGlvbiB0cmFuc2Zvcm1cIiksZS5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmNhbGxiYWNrKCl9KX19fSx7a2V5OlwiX2Rpc2FibGVEcmFnTG9ja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ0xvY2tEaXNhYmxlZD0hMCx0aGlzLl9zZXR1cExpc3RlbmVycyghMCl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWZ1bmN0aW9uKHQpe3JldHVybiBlLl9wYWdlRWxlbWVudFt0K1wiRXZlbnRMaXN0ZW5lclwiXShcInNjcm9sbFwiLGUuX29uU2Nyb2xsLCExKX0saT1mdW5jdGlvbih0KXt2YXIgbj17cGFzc2l2ZTohMH07ZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ1wiLGUuX29uRHJhZyxuKSxlLl9nZXN0dXJlRGV0ZWN0b3JbdF0oXCJkcmFnc3RhcnRcIixlLl9vbkRyYWdTdGFydCxuKSxlLl9nZXN0dXJlRGV0ZWN0b3JbdF0oXCJkcmFnZW5kXCIsZS5fb25EcmFnRW5kLG4pfTt0aGlzLl9nZXN0dXJlRGV0ZWN0b3ImJihpKFwib2ZmXCIpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy5fZ2VzdHVyZURldGVjdG9yPW51bGwpLG4oXCJyZW1vdmVcIiksdCYmKHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5fcGFnZUVsZW1lbnQse2RyYWdNaW5EaXN0YW5jZToxLGRyYWdEaXN0YW5jZUNvcnJlY3Rpb246ITEsZHJhZ0xvY2tUb0F4aXM6IXRoaXMuX2RyYWdMb2NrRGlzYWJsZWQscGFzc2l2ZTohdGhpcy5fc2hvdWxkRml4U2Nyb2xsfSksaShcIm9uXCIpLG4oXCJhZGRcIikpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50VHJhbnNsYXRpb249MCx0aGlzLl9wYWdlRWxlbWVudD10aGlzLnBhcmVudE5vZGUsdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApLHRoaXMuX3NldFN0eWxlKCl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hpZGUoKSx0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe1wiaGVpZ2h0XCI9PT10JiZ0aGlzLl9wYWdlRWxlbWVudCYmdGhpcy5fc2V0U3R5bGUoKX19LHtrZXk6XCJvbkFjdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkFjdGlvbn0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fE5yKFwib25BY3Rpb25cIixcImZ1bmN0aW9uIG9yIG51bGxcIiksdGhpcy5fb25BY3Rpb249dH19LHtrZXk6XCJvblB1bGxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25QdWxsfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8TnIoXCJvblB1bGxcIixcImZ1bmN0aW9uIG9yIG51bGxcIiksdGhpcy5fb25QdWxsPXR9fSx7a2V5OlwiaGVpZ2h0XCIsc2V0OmZ1bmN0aW9uKHQpe1EuaXNJbnRlZ2VyKHQpfHxOcihcImhlaWdodFwiLFwiaW50ZWdlclwiKSx0aGlzLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLHQrXCJweFwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIjY0XCIsMTApfX0se2tleTpcInRocmVzaG9sZEhlaWdodFwiLHNldDpmdW5jdGlvbih0KXtRLmlzSW50ZWdlcih0KXx8TnIoXCJ0aHJlc2hvbGRIZWlnaHRcIixcImludGVnZXJcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0aHJlc2hvbGQtaGVpZ2h0XCIsdCtcInB4XCIpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aHJlc2hvbGQtaGVpZ2h0XCIpfHxcIjk2XCIsMTApfX0se2tleTpcInN0YXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic3RhdGVcIil9fSx7a2V5OlwicHVsbERpc3RhbmNlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbn19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaGVpZ2h0XCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNoYW5nZXN0YXRlXCJdfX1dKSxlfSgpO2MuUHVsbEhvb2s9QnIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXB1bGwtaG9va1wiLEJyKTt2YXIganI9e1wiXCI6XCJyYW5nZS0tKlwiLFwiLnJhbmdlX19pbnB1dFwiOlwicmFuZ2UtLSpfX2lucHV0XCIsXCIucmFuZ2VfX2ZvY3VzLXJpbmdcIjpcInJhbmdlLS0qX19mb2N1cy1yaW5nXCJ9LEhyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fb25Nb3VzZURvd249dC5fb25Nb3VzZURvd24uYmluZCh0KSx0Ll9vbk1vdXNlVXA9dC5fb25Nb3VzZVVwLmJpbmQodCksdC5fb25Ub3VjaFN0YXJ0PXQuX29uVG91Y2hTdGFydC5iaW5kKHQpLHQuX29uVG91Y2hFbmQ9dC5fb25Ub3VjaEVuZC5iaW5kKHQpLHQuX29uSW5wdXQ9dC5fdXBkYXRlLmJpbmQodCksdC5fb25EcmFnc3RhcnQ9dC5fb25EcmFnc3RhcnQuYmluZCh0KSx0Ll9vbkRyYWdlbmQ9dC5fb25EcmFnZW5kLmJpbmQodCksdH1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfY29tcGlsZVwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fdXBkYXRlRGlzYWJsZWQodGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl9fSx7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faW5wdXQsZT10aGlzLl9mb2N1c1Jpbmc7dC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZT0xMDAqdGhpcy5fcmF0aW8rXCIlIDJweFwiLGUudmFsdWU9dGhpcy52YWx1ZSxcIlwiPT09dC5taW4mJlwiMFwiPT09dC52YWx1ZXx8dC5taW49PT10LnZhbHVlP3Quc2V0QXR0cmlidXRlKFwiX3plcm9cIixcIlwiKTp0LnJlbW92ZUF0dHJpYnV0ZShcIl96ZXJvXCIpLFtcIm1pblwiLFwibWF4XCJdLmZvckVhY2goZnVuY3Rpb24obil7cmV0dXJuIGVbbl09dFtuXX0pfX0se2tleTpcIl9vbk1vdXNlRG93blwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faW5wdXQuY2xhc3NMaXN0LmFkZChcInJhbmdlX19pbnB1dC0tYWN0aXZlXCIpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9pbnB1dC5mb2N1cygpfSl9fSx7a2V5OlwiX29uVG91Y2hTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX29uTW91c2VEb3duKCl9fSx7a2V5OlwiX29uTW91c2VVcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKX19LHtrZXk6XCJfb25Ub3VjaEVuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX29uTW91c2VVcCh0KX19LHtrZXk6XCJfb25EcmFnc3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmNvbnN1bWVkPSEwLHQuZ2VzdHVyZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIiksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyl9fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiX29uRHJhZ2VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7XCJkaXNhYmxlZFwiPT09dCYmdGhpcy5fdXBkYXRlRGlzYWJsZWQoaSksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl91cGRhdGVEaXNhYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q/dGhpcy5jbGFzc0xpc3QuYWRkKFwicmFuZ2UtLWRpc2FibGVkXCIpOnRoaXMuY2xhc3NMaXN0LnJlbW92ZShcInJhbmdlLS1kaXNhYmxlZFwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9KHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIjtRW2VdKHRoaXMsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaFN0YXJ0LHtwYXNzaXZlOiEwfSksdGhpc1tlXShcIm1vdXNlZG93blwiLHRoaXMuX29uTW91c2VEb3duKSx0aGlzW2VdKFwibW91c2V1cFwiLHRoaXMuX29uTW91c2VVcCksdGhpc1tlXShcInRvdWNoZW5kXCIsdGhpcy5fb25Ub3VjaEVuZCksdGhpc1tlXShcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ3N0YXJ0KSx0aGlzW2VdKFwiZHJhZ2VuZFwiLHRoaXMuX29uRHJhZ2VuZCksdGhpc1tlXShcImlucHV0XCIsdGhpcy5fb25JbnB1dCl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBqcn19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgY2xhc3M9XCJyYW5nZV9fZm9jdXMtcmluZ1wiIHRhYkluZGV4PVwiLTFcIj5cXG4gICAgJ319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFuZ2VcIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYW5nZVwifX0se2tleTpcIl9mb2N1c1JpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblsxXX19LHtrZXk6XCJfcmF0aW9cIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1cIlwiPT09dGhpcy5faW5wdXQubWluPzA6cGFyc2VJbnQodGhpcy5faW5wdXQubWluKSxlPVwiXCI9PT10aGlzLl9pbnB1dC5tYXg/MTAwOnBhcnNlSW50KHRoaXMuX2lucHV0Lm1heCk7cmV0dXJuKHRoaXMudmFsdWUtdCkvKGUtdCl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJkaXNhYmxlZFwiXS5jb25jYXQodyhOby5vYnNlcnZlZEF0dHJpYnV0ZXMpKX19XSksZX0oKTtjLlJhbmdlPUhyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yYW5nZVwiLEhyKTt2YXIgUnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMuX3F1ZXVlPVtdLHRoaXMuX2luZGV4PTB9cmV0dXJuIGcodCxbe2tleTpcImFuaW1hdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToyMDAsaT0obmV3IERhdGUpLmdldFRpbWUoKSxvPXt9LHI9ITEsYT0hMSxzPSExLGw9T2JqZWN0LmtleXMoZSksdT17c3RvcDpmdW5jdGlvbigpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtzJiZjbGVhclRpbWVvdXQocyk7dmFyIGg9TWF0aC5taW4oMSwoKG5ldyBEYXRlKS5nZXRUaW1lKCktaSkvbik7cmV0dXJuIGwuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPSgxLWgpKm9bbl0raCplW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1cIjBzXCIsYy5zdG9wTmV4dD9hPSExOnJ8fChyPSEwLGEmJmEoKSksdX0sdGhlbjpmdW5jdGlvbih0KXtyZXR1cm4gYT10LHImJmEmJmEoKSx1fSxzcGVlZDpmdW5jdGlvbihhKXtpZihQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQmJihhPTApLCFyKXtzJiZjbGVhclRpbWVvdXQocyk7dmFyIGM9KChuZXcgRGF0ZSkuZ2V0VGltZSgpLWkpL24saD1hKigxLWMpO2wuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPSgxLWMpKm9bbl0rYyplW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSxmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpO2wuZm9yRWFjaChlLmdldFByb3BlcnR5VmFsdWUuYmluZChlKSksZT10Lm9mZnNldEhlaWdodH0oKSxpPXQuc3BlZWRVcFRpbWUsbj1oLHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uPW4vMWUzK1wic1wiLGwuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPWVbbl0rKFwib3BhY2l0eVwiPT1uP1wiXCI6XCJweFwiKX0pLHM9c2V0VGltZW91dCh1LnN0b3AsaCl9cmV0dXJuIHV9LGZpbmlzaDpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTo1MCxlPSgobmV3IERhdGUpLmdldFRpbWUoKS1pKS9uO3JldHVybiB1LnNwZWVkKHQvKDEtZSkpLHV9fTtpZih0Lmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxyfHxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQpcmV0dXJuIHU7dmFyIGM9d2luZG93LmdldENvbXB1dGVkU3R5bGUodCk7cmV0dXJuIGwuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1wYXJzZUZsb2F0KGMuZ2V0UHJvcGVydHlWYWx1ZSh0KSk7b1t0XT1pc05hTihlKT8wOmV9KSxyfHwodC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHk9bC5qb2luKFwiLFwiKSx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1uLzFlMytcInNcIixsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT1lW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSkscz1zZXRUaW1lb3V0KHUuc3RvcCxuKSx0aGlzLl9vblN0b3BBbmltYXRpb25zKHQsdS5zdG9wKSx1fX1dKSxnKHQsW3trZXk6XCJfb25TdG9wQW5pbWF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fcXVldWUsaT10aGlzLl9pbmRleCsrO25bdF09blt0XXx8W10sblt0XVtpXT1mdW5jdGlvbihvKXtyZXR1cm4gZGVsZXRlIG5bdF1baV0sblt0XSYmMD09blt0XS5sZW5ndGgmJmRlbGV0ZSBuW3RdLGUobyl9fX0se2tleTpcInN0b3BBbmltYXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7ZS5zdG9wQW5pbWF0aW9ucyh0LG4pfSk7KHRoaXMuX3F1ZXVlW3RdfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXt0KG58fHt9KX0pfX0se2tleTpcInN0b3BBbGxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLnN0b3BBbmltYXRpb25zKE9iamVjdC5rZXlzKHRoaXMuX3F1ZXVlKSx0KX19LHtrZXk6XCJmYWRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjIwMDtyZXR1cm4gdGhpcy5hbmltYXRlKHQse29wYWNpdHk6MH0sZSl9fV0pLHR9KCksRnI9e1wiXCI6XCJyaXBwbGUtLSpcIixcIi5yaXBwbGVfX3dhdmVcIjpcInJpcHBsZS0tKl9fd2F2ZVwiLFwiLnJpcHBsZV9fYmFja2dyb3VuZFwiOlwicmlwcGxlLS0qX19iYWNrZ3JvdW5kXCJ9LHFyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fb25UYXA9dC5fb25UYXAuYmluZCh0KSx0Ll9vbkhvbGQ9dC5fb25Ib2xkLmJpbmQodCksdC5fb25EcmFnU3RhcnQ9dC5fb25EcmFnU3RhcnQuYmluZCh0KSx0Ll9vblJlbGVhc2U9dC5fb25SZWxlYXNlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2FuaW1hdG9yPW5ldyBScixbXCJjb2xvclwiLFwiY2VudGVyXCIsXCJzdGFydC1yYWRpdXNcIixcImJhY2tncm91bmRcIixcIm1vZGlmaWVyXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soZSxudWxsLHQuZ2V0QXR0cmlidXRlKGUpKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xhc3NMaXN0LmFkZChcInJpcHBsZVwiKSx0aGlzLl93YXZlPXRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZV9fd2F2ZVwiKVswXSx0aGlzLl9iYWNrZ3JvdW5kPXRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZV9fYmFja2dyb3VuZFwiKVswXSx0aGlzLl9iYWNrZ3JvdW5kJiZ0aGlzLl93YXZlfHwodGhpcy5fd2F2ZT1RLmNyZWF0ZShcIi5yaXBwbGVfX3dhdmVcIiksdGhpcy5fYmFja2dyb3VuZD1RLmNyZWF0ZShcIi5yaXBwbGVfX2JhY2tncm91bmRcIiksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl93YXZlKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMuX2JhY2tncm91bmQpKSxCLmluaXRNb2RpZmllcih0aGlzLEZyKX19LHtrZXk6XCJfZ2V0RWZmZWN0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJzaXplXCIpKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInNpemVcIik7aWYoLTEhPT1bXCJjb3ZlclwiLFwiY29udGFpblwiXS5pbmRleE9mKHQpKXJldHVybiB0fXJldHVyblwiY292ZXJcIn19LHtrZXk6XCJfY2FsY3VsYXRlQ29vcmRzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49dm9pZCAwLGk9dm9pZCAwLG89dm9pZCAwLHI9dm9pZCAwLGE9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPXRoaXMuX2dldEVmZmVjdFNpemUoKSxsPWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJSaXBwbGUgaW52YWxpZCBzdGF0ZVwiKX07cmV0dXJuIHRoaXMuX2NlbnRlcj8oZT1hLndpZHRoLzIsbj1hLmhlaWdodC8yLFwiY292ZXJcIj09PXM/cj1NYXRoLnNxcnQoZSplK24qbik6XCJjb250YWluXCI9PT1zP3I9TWF0aC5taW4oZSxuKTpsKCkpOihlPShcIm51bWJlclwiPT10eXBlb2YgdC5jbGllbnRYP3QuY2xpZW50WDp0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgpLWEubGVmdCxuPShcIm51bWJlclwiPT10eXBlb2YgdC5jbGllbnRZP3QuY2xpZW50WTp0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpLWEudG9wLGk9TWF0aC5tYXgobixhLmhlaWdodC1uKSxvPU1hdGgubWF4KGUsYS53aWR0aC1lKSxcImNvdmVyXCI9PT1zP3I9TWF0aC5zcXJ0KGkqaStvKm8pOlwiY29udGFpblwiPT09cz9yPU1hdGgubWluKE1hdGgucm91bmQoaS8yKSxNYXRoLnJvdW5kKG8vMikpOmwoKSkse3g6ZSx5Om4scjpyfX19LHtrZXk6XCJfcmlwcGxlQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjMwMCxuPXRoaXMuX2FuaW1hdG9yLGk9dGhpcy5fd2F2ZSxvPXRoaXMuX2JhY2tncm91bmQscj10aGlzLl9taW5SLGE9dGhpcy5fY2FsY3VsYXRlQ29vcmRzKHQpLHM9YS54LGw9YS55LHU9YS5yO3JldHVybiBuLnN0b3BBbGwoe3N0b3BOZXh0OjF9KSxuLmFuaW1hdGUobyx7b3BhY2l0eToxfSxlKSxRLmV4dGVuZChpLnN0eWxlLHtvcGFjaXR5OjEsdG9wOmwtcitcInB4XCIsbGVmdDpzLXIrXCJweFwiLHdpZHRoOjIqcitcInB4XCIsaGVpZ2h0OjIqcitcInB4XCJ9KSxuLmFuaW1hdGUoaSx7dG9wOmwtdSxsZWZ0OnMtdSxoZWlnaHQ6Mip1LHdpZHRoOjIqdX0sZSl9fSx7a2V5OlwiX3VwZGF0ZVBhcmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3BhcmVudFVwZGF0ZWQmJnRoaXMucGFyZW50Tm9kZSl7XCJzdGF0aWNcIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMucGFyZW50Tm9kZSkuZ2V0UHJvcGVydHlWYWx1ZShcInBvc2l0aW9uXCIpJiYodGhpcy5wYXJlbnROb2RlLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksdGhpcy5fcGFyZW50VXBkYXRlZD0hMH19fSx7a2V5OlwiX29uVGFwXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmRpc2FibGVkfHx0LnJpcHBsZXx8KHQucmlwcGxlPSEwLHRoaXMuX3VwZGF0ZVBhcmVudCgpLHRoaXMuX3JpcHBsZUFuaW1hdGlvbih0Lmdlc3R1cmUuc3JjRXZlbnQpLnRoZW4oZnVuY3Rpb24oKXtlLl9hbmltYXRvci5mYWRlKGUuX3dhdmUpLGUuX2FuaW1hdG9yLmZhZGUoZS5fYmFja2dyb3VuZCl9KSl9fSx7a2V5OlwiX29uSG9sZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZWR8fHQucmlwcGxlfHwodC5yaXBwbGU9ITAsdGhpcy5fdXBkYXRlUGFyZW50KCksdGhpcy5faG9sZGluZz10aGlzLl9yaXBwbGVBbmltYXRpb24odC5nZXN0dXJlLnNyY0V2ZW50LDJlMyksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpKX19LHtrZXk6XCJfb25SZWxlYXNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9ob2xkaW5nJiYhdC5yaXBwbGUmJih0LnJpcHBsZT0hMCx0aGlzLl9ob2xkaW5nLnNwZWVkKDMwMCkudGhlbihmdW5jdGlvbigpe2UuX2FuaW1hdG9yLnN0b3BBbGwoe3N0b3BOZXh0OiEwfSksZS5fYW5pbWF0b3IuZmFkZShlLl93YXZlKSxlLl9hbmltYXRvci5mYWRlKGUuX2JhY2tncm91bmQpfSksdGhpcy5faG9sZGluZz0hMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpfX0se2tleTpcIl9vbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2hvbGRpbmcpcmV0dXJuIHRoaXMuX29uUmVsZWFzZSh0KTstMSE9W1wibGVmdFwiLFwicmlnaHRcIl0uaW5kZXhPZih0Lmdlc3R1cmUuZGlyZWN0aW9uKSYmdGhpcy5fb25UYXAodCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3BhcmVudE5vZGU9dGhpcy5wYXJlbnROb2RlLFAuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD90aGlzLmRpc2FibGVkPSEwOih0aGlzLl9wYXJlbnROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLl9vblRhcCksdGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGFyZW50Tm9kZXx8dGhpcy5wYXJlbnROb2RlO3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRhcFwiLHRoaXMuX29uVGFwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInJpcHBsZVwiLEZyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsRnIpO2JyZWFrO2Nhc2VcInN0YXJ0LXJhZGl1c1wiOnRoaXMuX21pblI9TWF0aC5tYXgoMCxwYXJzZUZsb2F0KGkpfHwwKTticmVhaztjYXNlXCJjb2xvclwiOmkmJm4odGhpcyxmdW5jdGlvbigpe28uX3dhdmUuc3R5bGUuYmFja2dyb3VuZD1pLG8uaGFzQXR0cmlidXRlKFwiYmFja2dyb3VuZFwiKXx8KG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1pKX0pO2JyZWFrO2Nhc2VcImJhY2tncm91bmRcIjooaXx8ZSkmJihcIm5vbmVcIj09PWk/bih0aGlzLGZ1bmN0aW9uKCl7by5fYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIiksby5fYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kPVwidHJhbnNwYXJlbnRcIn0pOm4odGhpcyxmdW5jdGlvbigpe28uX2JhY2tncm91bmQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikmJm8uX2JhY2tncm91bmQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksby5fYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kPWl9KSk7YnJlYWs7Y2FzZVwiY2VudGVyXCI6XCJjZW50ZXJcIj09PXQmJih0aGlzLl9jZW50ZXI9bnVsbCE9aSYmXCJmYWxzZVwiIT1pKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInN0YXJ0LXJhZGl1c1wiLFwiY29sb3JcIixcImJhY2tncm91bmRcIixcImNlbnRlclwiLFwiY2xhc3NcIixcIm1vZGlmaWVyXCJdfX1dKSxlfSgpO2MuUmlwcGxlPXFyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yaXBwbGVcIixxcik7dmFyIHpyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFBpKSxlfSgpO2MuUm93PXpyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yb3dcIix6cik7dmFyIFZyPXtcIlwiOlwic2VnbWVudC0tKlwiLFwiLnNlZ21lbnRfX2l0ZW1cIjpcInNlZ21lbnQtLSpfX2l0ZW1cIixcIi5zZWdtZW50X19pbnB1dFwiOlwic2VnbWVudC0tKl9faW5wdXRcIixcIi5zZWdtZW50X19idXR0b25cIjpcInNlZ21lbnQtLSpfX2J1dHRvblwifSxXcj1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuXCJvbnMtc2VnbWVudC1nZW4tXCIrdCsrfX0oKSxVcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3NlZ21lbnRJZD1XcigpLHQuX3RhYmJhcj1udWxsLHQuX29uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksdC5fb25UYWJiYXJQcmVDaGFuZ2U9dC5fb25UYWJiYXJQcmVDaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xhc3RBY3RpdmVJbmRleD10Ll90YWJiYXI/dC5fdGFiYmFyLmdldEFjdGl2ZVRhYkluZGV4KCk6dC5nZXRBY3RpdmVCdXR0b25JbmRleCgpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwic2VnbWVudFwiKTtmb3IodmFyIHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTt0Pj0wO3QtLSl7dmFyIGU9dGhpcy5jaGlsZHJlblt0XTtlLmNsYXNzTGlzdC5hZGQoXCJzZWdtZW50X19pdGVtXCIpO3ZhciBuPVEuZmluZENoaWxkKGUsXCIuc2VnbWVudF9faW5wdXRcIil8fFEuY3JlYXRlKFwiaW5wdXQuc2VnbWVudF9faW5wdXRcIik7bi50eXBlPVwicmFkaW9cIixuLnZhbHVlPXQsbi5uYW1lPW4ubmFtZXx8dGhpcy5fc2VnbWVudElkLG4uY2hlY2tlZD0hdGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikmJnQ9PT0ocGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhY3RpdmUtaW5kZXhcIikpfHwwKTt2YXIgaT1RLmZpbmRDaGlsZChlLFwiLnNlZ21lbnRfX2J1dHRvblwiKXx8US5jcmVhdGUoXCIuc2VnbWVudF9fYnV0dG9uXCIpO2lmKGkucGFyZW50RWxlbWVudCE9PWUpZm9yKDtlLmZpcnN0Q2hpbGQ7KWkuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKTtlLmFwcGVuZENoaWxkKG4pLGUuYXBwZW5kQ2hpbGQoaSl9Qi5pbml0TW9kaWZpZXIodGhpcyxWcil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikmJm4odGhpcyxmdW5jdGlvbigpe3ZhciBlPVEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIik7dC5fdGFiYmFyPWUmJmUucXVlcnlTZWxlY3RvcihcIiNcIit0LmdldEF0dHJpYnV0ZShcInRhYmJhci1pZFwiKSksdC5fdGFiYmFyJiZcIk9OUy1UQUJCQVJcIj09PXQuX3RhYmJhci50YWdOYW1lfHxRLnRocm93KFwiTm8gdGFiYmFyIHdpdGggaWQgXCIrdC5nZXRBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikrXCIgd2FzIGZvdW5kLlwiKSx0Ll90YWJiYXIuc2V0QXR0cmlidXRlKFwiaGlkZS10YWJzXCIsXCJcIiksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NldENoZWNrZWQodC5fdGFiYmFyLmdldEFjdGl2ZVRhYkluZGV4KCkpfSksdC5fdGFiYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJwcmVjaGFuZ2VcIix0Ll9vblRhYmJhclByZUNoYW5nZSl9KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fdGFiYmFyJiYodC5fdGFiYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwcmVjaGFuZ2VcIix0Ll9vblRhYmJhclByZUNoYW5nZSksdC5fdGFiYmFyPW51bGwpfSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpfX0se2tleTpcIl9zZXRDaGVja2VkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jaGlsZHJlblt0XS5maXJzdEVsZW1lbnRDaGlsZC5jaGVja2VkPSEwfX0se2tleTpcInNldEFjdGl2ZUJ1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3RhYmJhcj90aGlzLl90YWJiYXIuc2V0QWN0aXZlVGFiKHQsZSk6KHRoaXMuX3NldENoZWNrZWQodCksdGhpcy5fcG9zdENoYW5nZSh0KSxQcm9taXNlLnJlc29sdmUodCkpfX0se2tleTpcImdldEFjdGl2ZUJ1dHRvbkluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTt0Pj0wO3QtLSlpZih0aGlzLmNoaWxkcmVuW3RdLmZpcnN0RWxlbWVudENoaWxkLmNoZWNrZWQpcmV0dXJuIHQ7cmV0dXJuLTF9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl90YWJiYXI/dGhpcy5fdGFiYmFyLnNldEFjdGl2ZVRhYih0aGlzLmdldEFjdGl2ZUJ1dHRvbkluZGV4KCkse3JlamVjdDohMX0pOnRoaXMuX3Bvc3RDaGFuZ2UodGhpcy5nZXRBY3RpdmVCdXR0b25JbmRleCgpKX19LHtrZXk6XCJfb25UYWJiYXJQcmVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3QuZGV0YWlsLmNhbmNlbGVkfHwoZS5fc2V0Q2hlY2tlZCh0LmluZGV4KSxlLl9wb3N0Q2hhbmdlKHQuaW5kZXgpKX0pfX0se2tleTpcIl9wb3N0Q2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwb3N0Y2hhbmdlXCIse2luZGV4OnQsYWN0aXZlSW5kZXg6dCxsYXN0QWN0aXZlSW5kZXg6dGhpcy5fbGFzdEFjdGl2ZUluZGV4LHNlZ21lbnRJdGVtOnRoaXMuY2hpbGRyZW5bdF19KSx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9dH19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNlZ21lbnRcIixWcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFZyKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNsYXNzXCIsXCJtb2RpZmllclwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwb3N0Y2hhbmdlXCJdfX1dKSxlfSgpO2MuU2VnbWVudD1VcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VnbWVudFwiLFVyKTt2YXIgWHI9e1wiXCI6XCJzZWxlY3QtKiBzZWxlY3QtLSpcIixcIi5zZWxlY3QtaW5wdXRcIjpcInNlbGVjdC1pbnB1dC0tKlwifSxZcj1bXCJhdXRvZm9jdXNcIixcImRpc2FibGVkXCIsXCJmb3JtXCIsXCJtdWx0aXBsZVwiLFwibmFtZVwiLFwicmVxdWlyZWRcIixcInNpemVcIl0sR3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdC5fZGVyaXZlR2V0dGVycygpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNlbGVjdFwiLFhyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsWHIpfVlyLmluZGV4T2YodCk+PTAmJm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVCb3VuZEF0dHJpYnV0ZXMoKX0pfX0se2tleTpcIl91cGRhdGVCb3VuZEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7WXIuZm9yRWFjaChmdW5jdGlvbihlKXt0Lmhhc0F0dHJpYnV0ZShlKT90Ll9zZWxlY3Quc2V0QXR0cmlidXRlKGUsdC5nZXRBdHRyaWJ1dGUoZSkpOnQuX3NlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoZSl9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInNlbGVjdFwiKTt2YXIgdD10aGlzLl9zZWxlY3R8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7IXQuaWQmJnRoaXMuaGFzQXR0cmlidXRlKFwic2VsZWN0LWlkXCIpJiYodC5pZD10aGlzLmdldEF0dHJpYnV0ZShcInNlbGVjdC1pZFwiKSksdC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0LWlucHV0XCIpLHRoaXMuX3NlbGVjdHx8KFEuYXJyYXlGcm9tKHRoaXMuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBlbmRDaGlsZChlKX0pLHRoaXMuYXBwZW5kQ2hpbGQodCkpLEIuaW5pdE1vZGlmaWVyKHRoaXMsWHIpfX0se2tleTpcIl9kZXJpdmVHZXR0ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1tcImRpc2FibGVkXCIsXCJsZW5ndGhcIixcIm11bHRpcGxlXCIsXCJuYW1lXCIsXCJvcHRpb25zXCIsXCJzZWxlY3RlZEluZGV4XCIsXCJzaXplXCIsXCJ2YWx1ZVwiLFwiZm9ybVwiLFwidHlwZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0Ll9zZWxlY3RbZV19LHNldDotMT09PVtcImZvcm1cIixcInR5cGVcIl0uaW5kZXhPZihlKT9mdW5jdGlvbihpKXtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NlbGVjdFtlXT1pfSl9OnZvaWQgMH0pfSl9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7dGhpcy5fc2VsZWN0LmFkZCh0LGUpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NlbGVjdC5yZW1vdmUodCl9fSx7a2V5OlwiX3NlbGVjdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl0uY29uY2F0KFlyKX19XSksZX0oKTtjLlNlbGVjdD1HcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VsZWN0XCIsR3IpO3ZhciAkcj17XCJcIjpcImZhYi0tKiBzcGVlZC1kaWFsX19pdGVtLS0qXCJ9LEtyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHQuX2JvdW5kT25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImZhYiBmYWItLW1pbmkgc3BlZWQtZGlhbF9faXRlbVwiLCRyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsJHIpLFEuYWRkTW9kaWZpZXIodGhpcyxcIm1pbmlcIik7YnJlYWs7Y2FzZVwicmlwcGxlXCI6dGhpcy5fdXBkYXRlUmlwcGxlKCl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrLCExKX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnVwZGF0ZVJpcHBsZSh0aGlzKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Ti5wcmVwYXJlKHRoaXMpLFwiZmFiIGZhYi0tbWluaSBzcGVlZC1kaWFsX19pdGVtXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNsYXNzTGlzdC5hZGQoZSl9KSxRLmFkZE1vZGlmaWVyKHRoaXMsXCJtaW5pXCIpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsJHIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5TcGVlZERpYWxJdGVtPUtyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGVlZC1kaWFsLWl0ZW1cIixLcik7dmFyIFFyPXtcIlwiOlwic3BlZWQtZGlhbC0tKlwifSxKcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHQuX2l0ZW1TaG93bj0hMSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xhc3NMaXN0LmFkZChcInNwZWVkLWRpYWxcIiksTi5wcmVwYXJlKHRoaXMpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsUXIpLHRoaXMuaGFzQXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpP3RoaXMuX3VwZGF0ZURpcmVjdGlvbih0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKSk6dGhpcy5fdXBkYXRlRGlyZWN0aW9uKFwidXBcIiksdGhpcy5fdXBkYXRlUG9zaXRpb24oKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwic3BlZWQtZGlhbFwiLFFyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsUXIpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVSaXBwbGUoKX0pO2JyZWFrO2Nhc2VcImRpcmVjdGlvblwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVEaXJlY3Rpb24oaSl9KTticmVhaztjYXNlXCJwb3NpdGlvblwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVQb3NpdGlvbigpfSl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrLCExKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uQ2xpY2s/KHRoaXMub25DbGljay5hcHBseSh0aGlzKSxQcm9taXNlLnJlc29sdmUoKSk6IXRoaXMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZT90aGlzLnRvZ2dsZUl0ZW1zKCk6dm9pZCAwfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmxpbmU/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3QuaW5saW5lP2UoKTpzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5oaWRlKCkudGhlbihlKX0pfSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZmFiJiYodGhpcy5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIik/dGhpcy5fZmFiLnNldEF0dHJpYnV0ZShcInJpcHBsZVwiLFwiXCIpOnRoaXMuX2ZhYi5yZW1vdmVBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfX0se2tleTpcIl91cGRhdGVEaXJlY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspZChlW25dLHt0cmFuc2l0aW9uRGVsYXk6MjUqbitcIm1zXCIsYm90dG9tOlwiYXV0b1wiLHJpZ2h0OlwiYXV0b1wiLHRvcDpcImF1dG9cIixsZWZ0OlwiYXV0b1wifSk7c3dpdGNoKHQpe2Nhc2VcInVwXCI6Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspZVtpXS5zdHlsZS5ib3R0b209NzIrNTYqaStcInB4XCIsZVtpXS5zdHlsZS5yaWdodD1cIjhweFwiO2JyZWFrO2Nhc2VcImRvd25cIjpmb3IodmFyIG89MDtvPGUubGVuZ3RoO28rKyllW29dLnN0eWxlLnRvcD03Mis1NipvK1wicHhcIixlW29dLnN0eWxlLmxlZnQ9XCI4cHhcIjticmVhaztjYXNlXCJsZWZ0XCI6Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspZVtyXS5zdHlsZS50b3A9XCI4cHhcIixlW3JdLnN0eWxlLnJpZ2h0PTcyKzU2KnIrXCJweFwiO2JyZWFrO2Nhc2VcInJpZ2h0XCI6Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspZVthXS5zdHlsZS50b3A9XCI4cHhcIixlW2FdLnN0eWxlLmxlZnQ9NzIrNTYqYStcInB4XCI7YnJlYWs7ZGVmYXVsdDpRLnRocm93KFwiQXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdXAsIGRvd24sIGxlZnQgb3IgcmlnaHQuXCIpfX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7c3dpdGNoKHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImZhYi0tdG9wX19sZWZ0XCIsXCJmYWItLWJvdHRvbV9fcmlnaHRcIixcImZhYi0tYm90dG9tX19sZWZ0XCIsXCJmYWItLXRvcF9fcmlnaHRcIixcImZhYi0tdG9wX19jZW50ZXJcIixcImZhYi0tYm90dG9tX19jZW50ZXJcIiksdCl7Y2FzZVwidG9wIHJpZ2h0XCI6Y2FzZVwicmlnaHQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcInRvcCBsZWZ0XCI6Y2FzZVwibGVmdCB0b3BcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLXRvcF9fbGVmdFwiKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fcmlnaHRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIGxlZnRcIjpjYXNlXCJsZWZ0IGJvdHRvbVwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19sZWZ0XCIpO2JyZWFrO2Nhc2VcImNlbnRlciB0b3BcIjpjYXNlXCJ0b3AgY2VudGVyXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2NlbnRlclwiKTticmVhaztjYXNlXCJjZW50ZXIgYm90dG9tXCI6Y2FzZVwiYm90dG9tIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19jZW50ZXJcIil9fX0se2tleTpcIl9nZXRUcmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpfHxcIlwiKS5pbmRleE9mKFwiYm90dG9tXCIpPj0wP1widHJhbnNsYXRlM2QoMHB4LCAtXCIrKFEuZ2xvYmFscy5mYWJPZmZzZXR8fDApK1wicHgsIDBweCkgXCI6XCJcIn19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmFiLnNob3coKSxkKHRoaXMse3RyYW5zZm9ybTp0aGlzLl9nZXRUcmFuc2xhdGV9KSxQcm9taXNlLnJlc29sdmUoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmhpZGVJdGVtcygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5fZmFiLmhpZGUoKX0pfX0se2tleTpcInNob3dJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIik/dGhpcy5fdXBkYXRlRGlyZWN0aW9uKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpKTp0aGlzLl91cGRhdGVEaXJlY3Rpb24oXCJ1cFwiKTt2YXIgdD0wO2lmKCF0aGlzLl9pdGVtU2hvd24pe2Zvcih2YXIgZT10aGlzLml0ZW1zLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9MjUqbjt0Kz1pLGQoZVtuXSx7dHJhbnNmb3JtOlwic2NhbGUoMSlcIix0cmFuc2l0aW9uRGVsYXk6aStcIm1zXCJ9KX10Kz01MCx0aGlzLl9pdGVtU2hvd249ITAsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJvcGVuXCIpfXZhciBvPVEuZGVmZXIoKTtyZXR1cm4gc2V0VGltZW91dChvLnJlc29sdmUsdCksby5wcm9taXNlfX0se2tleTpcImhpZGVJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9MDtpZih0aGlzLl9pdGVtU2hvd24pe2Zvcih2YXIgZT10aGlzLml0ZW1zLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9MjUqKGUubGVuZ3RoLW4pO3QrPWksZChlW25dLHt0cmFuc2Zvcm06XCJzY2FsZSgwKVwiLHRyYW5zaXRpb25EZWxheTppK1wibXNcIn0pfXQrPTUwLHRoaXMuX2l0ZW1TaG93bj0hMSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNsb3NlXCIpfXZhciBvPVEuZGVmZXIoKTtyZXR1cm4gc2V0VGltZW91dChvLnJlc29sdmUsdCksby5wcm9taXNlfX0se2tleTpcImlzT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1TaG93bn19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGU/dGhpcy5oaWRlKCk6dGhpcy5zaG93KCl9fSx7a2V5OlwidG9nZ2xlSXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzT3BlbigpP3RoaXMuaGlkZUl0ZW1zKCk6dGhpcy5zaG93SXRlbXMoKX19LHtrZXk6XCJpdGVtc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJvbnMtc3BlZWQtZGlhbC1pdGVtXCIpKX19LHtrZXk6XCJfZmFiXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtZmFiXCIpfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLmhpZGVJdGVtcygpLFEuYXJyYXlGcm9tKHRoaXMuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24oZSl7US5tYXRjaChlLFwiLmZhYlwiKSYmUS50b2dnbGVBdHRyaWJ1dGUoZSxcImRpc2FibGVkXCIsdCl9KSxRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiaW5saW5lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfX0se2tleTpcInZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmFiLnZpc2libGUmJlwibm9uZVwiIT09dGhpcy5zdHlsZS5kaXNwbGF5fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiY2xhc3NcIixcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImRpcmVjdGlvblwiLFwicG9zaXRpb25cIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wib3BlblwiLFwiY2xvc2VcIl19fV0pLGV9KCk7Yy5TcGVlZERpYWw9SnIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwZWVkLWRpYWxcIixKcik7dmFyIFpyPXtyZWFkeTpmdW5jdGlvbih0LGUpe3NldEltbWVkaWF0ZShlKX19LHRhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fcGFnZT1udWxsLHQuX3BhZ2VMb2FkZXI9anQsbih0LGZ1bmN0aW9uKCl7WnIucmVhZHkodCxmdW5jdGlvbigpe3ZhciBlPXQuX2dldFBhZ2VUYXJnZXQoKTtlJiZ0LmxvYWQoZSl9KX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpfHxRLnRocm93KCdcIm9ucy1zcGxpdHRlci1jb250ZW50XCIgbXVzdCBoYXZlIFwib25zLXNwbGl0dGVyXCIgYXMgcGFyZW50Jyl9fSx7a2V5OlwiX2dldFBhZ2VUYXJnZXRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfHx0aGlzLmdldEF0dHJpYnV0ZShcInBhZ2VcIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3BhZ2U9dDt2YXIgaT1uLmNhbGxiYWNrfHxmdW5jdGlvbigpe307cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBvPWUuX2NvbnRlbnR8fG51bGw7ZS5fcGFnZUxvYWRlci5sb2FkKHtwYWdlOnQscGFyZW50OmV9LGZ1bmN0aW9uKHQpe28mJihlLl9wYWdlTG9hZGVyLnVubG9hZChvKSxvPW51bGwpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9zaG93KCl9KSxpKHQpLG4odCl9KX0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fY29udGVudCksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5OlwiX2NvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9LHNldDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQnR8fFEudGhyb3dQYWdlTG9hZGVyKCksdGhpcy5fcGFnZUxvYWRlcj10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gWnJ9fV0pLGV9KCk7Yy5TcGxpdHRlckNvbnRlbnQ9dGEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwbGl0dGVyLWNvbnRlbnRcIix0YSk7dmFyIGVhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0LnBhcmVudE5vZGUuX3NpZGVzLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVyblwic3BsaXRcIj09PXQubW9kZX0pJiZ0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnRcIil9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vbkNsaWNrIGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5vbkNsaWNrKCk6US5tYXRjaCh0aGlzLnBhcmVudE5vZGUsXCJvbnMtc3BsaXR0ZXJcIikmJnRoaXMucGFyZW50Tm9kZS5fc2lkZXMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5jbG9zZShcImxlZnRcIikuY2F0Y2goZnVuY3Rpb24oKXt9KX0pLHQuc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2spLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLCEwKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2spLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLCExKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX1dKSxlfSgpO2MuU3BsaXR0ZXJNYXNrPWVhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1tYXNrXCIsZWEpO3ZhciBuYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZHVyYXRpb24scj12b2lkIDA9PT1vPy4zOm8sYT10LmRlbGF5LHM9dm9pZCAwPT09YT8wOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZHVyYXRpb246cixkZWxheTpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInVwZGF0ZU9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtRLmV4dGVuZCh0aGlzLHt0aW1pbmc6dGhpcy50aW1pbmcsZHVyYXRpb246dGhpcy5kdXJhdGlvbixkZWxheTp0aGlzLmRlbGF5fSx0KX19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT10LnBhcmVudE5vZGU7bihpLGZ1bmN0aW9uKCl7ZS5fc2lkZT10LGUuX29wcG9zaXRlU2lkZT1pLnJpZ2h0IT09dCYmaS5yaWdodHx8aS5sZWZ0IT09dCYmaS5sZWZ0LGUuX2NvbnRlbnQ9aS5jb250ZW50LGUuX21hc2s9aS5tYXNrfSl9fSx7a2V5OlwiZGVhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRyYW5zaXRpb24oKSx0aGlzLl9tYXNrJiZ0aGlzLmNsZWFyTWFzaygpLHRoaXMuX2NvbnRlbnQ9dGhpcy5fc2lkZT10aGlzLl9vcHBvc2l0ZVNpZGU9dGhpcy5fbWFzaz1udWxsfX0se2tleTpcImNsZWFyVHJhbnNpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztcInNpZGUgbWFzayBjb250ZW50XCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0W1wiX1wiK2VdJiZkLmNsZWFyKHRbXCJfXCIrZV0sXCJ0cmFuc2Zvcm0gdHJhbnNpdGlvblwiKX0pfX0se2tleTpcImNsZWFyTWFza1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCIhPT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdGhpcy5fb3Bwb3NpdGVTaWRlLmlzT3Blbnx8KHRoaXMuX21hc2suc3R5bGUub3BhY2l0eT1cIlwiLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9fSx7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7fX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt0KCl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0KCl9fSx7a2V5OlwibWludXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJpZ2h0XCI9PT10aGlzLl9zaWRlLnNpZGU/XCItXCI6XCJcIn19XSksZX0oKSxpYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxuYSksZyhlLFt7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbWFzay5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixudCh0aGlzLl9zaWRlKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrdCkrXCJweCwgMCwgMClcIn0pLnBsYXkoKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7bnQucnVuQWxsKG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMubWludXMrXCIxMDAlLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oZSl7ZSgpLHQmJnQoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJibG9ja1wifSkucXVldWUoe29wYWNpdHk6XCIxXCJ9LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzpcImxpbmVhclwifSkpfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7bnQucnVuQWxsKG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihlKXt0JiZ0KCksZSgpfSksbnQodGhpcy5fbWFzaykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eTpcIjBcIn0se2R1cmF0aW9uOnRoaXMuZHVyYXRpb24sdGltaW5nOlwibGluZWFyXCJ9KS5xdWV1ZSh7ZGlzcGxheTpcIm5vbmVcIn0pKX19XSksZX0oKSxvYT17ZGVmYXVsdDppYSxvdmVybGF5OmlhLHB1c2g6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsbmEpLGcoZSxbe2tleTpcIl9nZXRTbGlkaW5nRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVt0aGlzLl9zaWRlLHRoaXMuX2NvbnRlbnRdO3JldHVybiB0aGlzLl9vcHBvc2l0ZVNpZGUmJlwic3BsaXRcIj09PXRoaXMuX29wcG9zaXRlU2lkZS5tb2RlJiZ0LnB1c2godGhpcy5fb3Bwb3NpdGVTaWRlKSx0fX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NsaWRpbmdFbGVtZW50c3x8KHRoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSksdGhpcy5fbWFzay5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisodGhpcy5taW51cyt0KStcInB4LCAwLCAwKVwifSkucGxheSgpfX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fc2lkZS5vZmZzZXRXaWR0aDt0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCksbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrbikrXCJweCwgMCwgMClcIn0sdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLG4oKSx0JiZ0KCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5OlwiYmxvY2tcIn0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihpKXtuLl9zbGlkaW5nRWxlbWVudHM9bnVsbCx2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNsZWFyVHJhbnNpdGlvblwiLG4pLmNhbGwobiksdCYmdCgpLGkoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSl9fV0pLGV9KCkscmV2ZWFsOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLG5hKSxnKGUsW3trZXk6XCJfZ2V0U2xpZGluZ0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fY29udGVudCx0aGlzLl9tYXNrXTtyZXR1cm4gdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCI9PT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdC5wdXNoKHRoaXMuX29wcG9zaXRlU2lkZSksdH19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYWN0aXZhdGVcIix0aGlzKS5jYWxsKHRoaXMsdCksXCJjb2xsYXBzZVwiPT09dC5tb2RlJiZ0aGlzLl9zZXRTdHlsZXModCl9fSx7a2V5OlwiZGVhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2lkZSYmdGhpcy5fdW5zZXRTdHlsZXModGhpcy5fc2lkZSksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkZWFjdGl2YXRlXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJfc2V0U3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7ZCh0LHtsZWZ0OlwicmlnaHRcIj09PXQuc2lkZT9cImF1dG9cIjowLHJpZ2h0OlwicmlnaHRcIj09PXQuc2lkZT8wOlwiYXV0b1wiLHpJbmRleDowLGJhY2tncm91bmRDb2xvcjpcImJsYWNrXCIsdHJhbnNmb3JtOnRoaXMuX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlKDApLmNvbnRhaW5lci50cmFuc2Zvcm0sZGlzcGxheTpcIm5vbmVcIn0pO3ZhciBlPXQucGFyZW50RWxlbWVudDtuKGUsZnVuY3Rpb24oKXtyZXR1cm4gZS5jb250ZW50JiZkKGUuY29udGVudCx7Ym94U2hhZG93OlwiMCAwIDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMilcIn0pfSl9fSx7a2V5OlwiX3Vuc2V0U3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7ZC5jbGVhcih0LFwibGVmdCByaWdodCB6SW5kZXggYmFja2dyb3VuZENvbG9yIGRpc3BsYXlcIiksdC5fY29udGVudCYmKHQuX2NvbnRlbnQuc3R5bGUub3BhY2l0eT1cIlwiKSx0aGlzLl9vcHBvc2l0ZVNpZGUmJlwic3BsaXRcIiE9PXRoaXMuX29wcG9zaXRlU2lkZS5tb2RlfHx0LnBhcmVudEVsZW1lbnQuY29udGVudCYmZC5jbGVhcih0LnBhcmVudEVsZW1lbnQuY29udGVudCxcImJveFNoYWRvd1wiKX19LHtrZXk6XCJfZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heFdpZHRoLG49KHQtZSkvZSoxMDtyZXR1cm57Y29udGVudDp7b3BhY2l0eToxKyhuPWlzTmFOKG4pPzA6TWF0aC5tYXgoTWF0aC5taW4obiwwKSwtMTApKS8xMDB9LGNvbnRhaW5lcjp7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXM/LTE6MSkqbitcIiUsIDAsIDApXCJ9fX19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zaWRlLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLl9zaWRlLnN0eWxlLnpJbmRleD0xLHRoaXMubWF4V2lkdGg9dGhpcy5tYXhXaWR0aHx8dGhpcy5fZ2V0TWF4V2lkdGgoKTt2YXIgZT10aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZShNYXRoLm1pbih0LHRoaXMubWF4V2lkdGgpKTt0aGlzLl9zbGlkaW5nRWxlbWVudHN8fCh0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCkpLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK3QpK1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLl9zaWRlLl9jb250ZW50KS5xdWV1ZShlLmNvbnRlbnQpLG50KHRoaXMuX3NpZGUpLnF1ZXVlKGUuY29udGFpbmVyKSl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fc2lkZS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fc2lkZS5zdHlsZS56SW5kZXg9MSx0aGlzLm1heFdpZHRoPXRoaXMubWF4V2lkdGh8fHRoaXMuX2dldE1heFdpZHRoKCk7dmFyIG49dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUodGhpcy5tYXhXaWR0aCk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtudC5ydW5BbGwobnQoZS5fc2xpZGluZ0VsZW1lbnRzKS53YWl0KGUuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisoZS5taW51cytlLm1heFdpZHRoKStcInB4LCAwLCAwKVwifSxlLmRlZiksbnQoZS5fbWFzaykud2FpdChlLmRlbGF5KS5xdWV1ZSh7ZGlzcGxheTpcImJsb2NrXCJ9KSxudChlLl9zaWRlLl9jb250ZW50KS53YWl0KGUuZGVsYXkpLnF1ZXVlKG4uY29udGVudCxlLmRlZiksbnQoZS5fc2lkZSkud2FpdChlLmRlbGF5KS5xdWV1ZShuLmNvbnRhaW5lcixlLmRlZikucXVldWUoZnVuY3Rpb24obil7ZS5fc2xpZGluZ0VsZW1lbnRzPW51bGwsbigpLHQmJnQoKX0pKX0sMWUzLzYwKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZSgwKTt0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCksbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0sdGhpcy5kZWYpLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSxudCh0aGlzLl9zaWRlLl9jb250ZW50KS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKG4uY29udGVudCx0aGlzLmRlZiksbnQodGhpcy5fc2lkZSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZShuLmNvbnRhaW5lcix0aGlzLmRlZikucXVldWUoZnVuY3Rpb24obil7ZS5fc2xpZGluZ0VsZW1lbnRzPW51bGwsZS5fc2lkZS5zdHlsZS56SW5kZXg9MCxlLl9zaWRlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZS5fc2lkZS5fY29udGVudC5zdHlsZS5vcGFjaXR5PVwiXCIsdCYmdCgpLG4oKX0pKX19LHtrZXk6XCJfZ2V0TWF4V2lkdGhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWRlLm9mZnNldFdpZHRofX1dKSxlfSgpfSxyYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uTW9kZUNoYW5nZT10Ll9vbk1vZGVDaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXshdC5tYXNrJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtc3BsaXR0ZXItbWFza1wiKSksdC5fbGF5b3V0KCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9nZXRTaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIFEubWF0Y2goZSxcIm9ucy1zcGxpdHRlci1zaWRlXCIpJiZlLmdldEF0dHJpYnV0ZShcInNpZGVcIik9PT10fSl9fSx7a2V5OlwiX29uRGV2aWNlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NpZGVzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuISF0LmlzT3BlbiYmdC5jbG9zZSgpfSl8fHQuY2FsbFBhcmVudEhhbmRsZXIoKX19LHtrZXk6XCJfb25Nb2RlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0LnRhcmdldC5wYXJlbnROb2RlJiZuKHRoaXMsZnVuY3Rpb24oKXtlLl9sYXlvdXQoKX0pfX0se2tleTpcIl9sYXlvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2lkZXMuZm9yRWFjaChmdW5jdGlvbihlKXt0LmNvbnRlbnQmJih0LmNvbnRlbnQuc3R5bGVbZS5zaWRlXT1cInNwbGl0XCI9PT1lLm1vZGU/ZS5zdHlsZS53aWR0aDowKX0pfX0se2tleTpcImxlZnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2lkZShcImxlZnRcIil9fSx7a2V5OlwicmlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2lkZShcInJpZ2h0XCIpfX0se2tleTpcInNpZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1zaWRlXCIpfX0se2tleTpcIl9zaWRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzLmxlZnQsdGhpcy5yaWdodF0uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0fSl9fSx7a2V5OlwiY29udGVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXNwbGl0dGVyLWNvbnRlbnRcIil9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuX2NvbnRlbnR9fSx7a2V5OlwibWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXNwbGl0dGVyLW1hc2tcIil9fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19XSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX29uRGV2aWNlQmFja0J1dHRvbi5iaW5kKHRoaXMpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vZGVjaGFuZ2VcIix0aGlzLl9vbk1vZGVDaGFuZ2UsITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9bnVsbCx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb2RlY2hhbmdlXCIsdGhpcy5fb25Nb2RlQ2hhbmdlLCExKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX3Nob3dcIil9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe1EucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfaGlkZVwiKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7US5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9kZXN0cm95XCIpLHRoaXMucmVtb3ZlKCl9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlIGluc3RhbmNlb2YgU3BsaXR0ZXJBbmltYXRvcnx8US50aHJvd0FuaW1hdG9yKFwiU3BsaXR0ZXJcIiksb2FbdF09ZX19LHtrZXk6XCJTcGxpdHRlckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFNwbGl0dGVyQW5pbWF0b3J9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9hfX1dKSxlfSgpO2MuU3BsaXR0ZXI9cmEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwbGl0dGVyXCIscmEpO3ZhciBhYT1cImNsb3NlZFwiLHNhPXtyZWFkeTpmdW5jdGlvbih0LGUpe3NldEltbWVkaWF0ZShlKX19LGxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9lbGVtZW50PWUsdGhpcy5fb25DaGFuZ2U9dGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSxuJiZ0aGlzLmNoYW5nZVRhcmdldChuKX1yZXR1cm4gZyh0LFt7a2V5OlwiY2hhbmdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kaXNhYmxlKCksdGhpcy5fdGFyZ2V0PXQsdCYmKHRoaXMuX29yaWVudGF0aW9uPS0xIT09W1wicG9ydHJhaXRcIixcImxhbmRzY2FwZVwiXS5pbmRleE9mKHQpLHRoaXMuYWN0aXZhdGUoKSl9fSx7a2V5OlwiX21hdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uP3RoaXMuX3RhcmdldD09PSh0LmlzUG9ydHJhaXQ/XCJwb3J0cmFpdFwiOlwibGFuZHNjYXBlXCIpOnQubWF0Y2hlc319LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9lbGVtZW50Ll91cGRhdGVNb2RlKHRoaXMuX21hdGNoKHQpP1wiY29sbGFwc2VcIjpcInNwbGl0XCIpfX0se2tleTpcImFjdGl2YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vcmllbnRhdGlvbj8oT3Qub24oXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSksdGhpcy5fb25DaGFuZ2Uoe2lzUG9ydHJhaXQ6T3QuaXNQb3J0cmFpdCgpfSkpOih0aGlzLl9xdWVyeVJlc3VsdD13aW5kb3cubWF0Y2hNZWRpYSh0aGlzLl90YXJnZXQpLHRoaXMuX3F1ZXJ5UmVzdWx0LmFkZExpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKSx0aGlzLl9vbkNoYW5nZSh0aGlzLl9xdWVyeVJlc3VsdCkpfX0se2tleTpcImRpc2FibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29yaWVudGF0aW9uP090Lm9mZihcImNoYW5nZVwiLHRoaXMuX29uQ2hhbmdlKTp0aGlzLl9xdWVyeVJlc3VsdCYmKHRoaXMuX3F1ZXJ5UmVzdWx0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKSx0aGlzLl9xdWVyeVJlc3VsdD1udWxsKX19XSksdH0oKSx1YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3BhZ2U9bnVsbCx0Ll9zdGF0ZT1hYSx0Ll9sb2NrPW5ldyBOdCx0Ll9wYWdlTG9hZGVyPWp0LHQuX2NvbGxhcHNlRGV0ZWN0aW9uPW5ldyBsYSh0KSx0Ll9hbmltYXRvckZhY3Rvcnk9bmV3IE8oe2FuaW1hdG9yczpyYS5hbmltYXRvcnMsYmFzZUNsYXNzOm5hLGJhc2VDbGFzc05hbWU6XCJTcGxpdHRlckFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0LmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pLG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwid2lkdGhcIiksdC5oYXNBdHRyaWJ1dGUoXCJzaWRlXCIpfHx0LnNldEF0dHJpYnV0ZShcInNpZGVcIixcImxlZnRcIiksc2EucmVhZHkodCxmdW5jdGlvbigpe3ZhciBlPXQuX3BhZ2V8fHQuZ2V0QXR0cmlidXRlKFwicGFnZVwiKTtlJiZ0LmxvYWQoZSl9KX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7US5tYXRjaCh0aGlzLnBhcmVudE5vZGUsXCJvbnMtc3BsaXR0ZXJcIil8fFEudGhyb3coXCJQYXJlbnQgbXVzdCBiZSBhbiBvbnMtc3BsaXR0ZXIgZWxlbWVudFwiKSx0aGlzLl9zd2lwZT1uZXcgUW8oe2VsZW1lbnQ6dGhpcyxlbGVtZW50SGFuZGxlcjp0aGlzLnBhcmVudEVsZW1lbnQsc3dpcGVNYXg6ZnVuY3Rpb24oKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKDEsdC5fYW5pbWF0aW9uT3B0KSx0Lm9wZW4oKX0sc3dpcGVNaWQ6ZnVuY3Rpb24oZSxuKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKGUvbiksdC5fYW5pbWF0b3IudHJhbnNsYXRlKGUpfSxzd2lwZU1pbjpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMCx0Ll9hbmltYXRpb25PcHQpLHQuY2xvc2UoKX0sZ2V0VGhyZXNob2xkOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4oMSxwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKFwib3Blbi10aHJlc2hvbGRcIikpfHwuMykpfSxnZXRTaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHQuc2lkZX0saXNJbml0aWFsU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZT10Ll9zdGF0ZT09PWFhO3JldHVybiB0Ll9zdGF0ZT1cImNoYW5naW5nXCIsZX0saWdub3JlU3dpcGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmlzT3BlbixvPU1hdGgubWF4KDAscGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJzd2lwZS10YXJnZXQtd2lkdGhcIiksMTApfHwwKTtyZXR1cm5cInNwbGl0XCI9PT10Ll9tb2RlfHx0Ll9sb2NrLmlzTG9ja2VkKCl8fHQuX2lzT3RoZXJTaWRlT3BlbigpfHwhZnVuY3Rpb24oZSl7cmV0dXJuXCJsZWZ0XCI9PT10LnNpZGU/XCJsZWZ0XCI9PT1lJiZpfHxcInJpZ2h0XCI9PT1lJiYhaTpcImxlZnRcIj09PWUmJiFpfHxcInJpZ2h0XCI9PT1lJiZpfShlLmdlc3R1cmUuZGlyZWN0aW9uKXx8IWkmJjAhPT1vJiZuPm99fSksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJzd2lwZWFibGVcIiksbih0aGlzLGZ1bmN0aW9uKCl7dC5jb25zdHJ1Y3Rvci5vYnNlcnZlZEF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soZSxudWxsLHQuZ2V0QXR0cmlidXRlKGUpKX0pfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS5kaXNwb3NlKCksdGhpcy5fYW5pbWF0b3I9dGhpcy5fYW5pbWF0aW9uT3B0PXRoaXMuX3N3aXBlPW51bGx9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJzd2lwZWFibGVcIjp0aGlzLl9zd2lwZSYmdGhpcy5fc3dpcGUudXBkYXRlKCk7YnJlYWs7Y2FzZVwid2lkdGhcIjpuPXRoaXMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksdGhpcy5zdHlsZS53aWR0aD0vXlxcZCsocHh8JSkkLy50ZXN0KG4pP246XCI4MCVcIjticmVhaztkZWZhdWx0OnRoaXNbUS5jYW1lbGl6ZShcIl91cGRhdGUtXCIrdCldKG4pfX19LHtrZXk6XCJfZW1pdEV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoXCJwcmVcIiE9PXQuc2xpY2UoMCwzKSlyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsdCx7c2lkZTp0aGlzfSk7dmFyIGU9ITE7cmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLHQse3NpZGU6dGhpcyxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMH19KSxlfX0se2tleTpcIl9pc090aGVyU2lkZU9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuISFRLmZpbmRDaGlsZCh0aGlzLnBhcmVudEVsZW1lbnQsZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yJiZlIT09dCYmXCJjb2xsYXBzZVwiPT09ZS5fbW9kZSYmZS5pc09wZW59KX19LHtrZXk6XCJfdXBkYXRlQ29sbGFwc2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcImNvbGxhcHNlXCIpO3JldHVybiBudWxsPT09dHx8XCJzcGxpdFwiPT09dD8odGhpcy5fY29sbGFwc2VEZXRlY3Rpb24uZGlzYWJsZSgpLHRoaXMuX3VwZGF0ZU1vZGUoXCJzcGxpdFwiKSk6XCJcIj09PXR8fFwiY29sbGFwc2VcIj09PXQ/KHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmRpc2FibGUoKSx0aGlzLl91cGRhdGVNb2RlKFwiY29sbGFwc2VcIikpOnZvaWQgdGhpcy5fY29sbGFwc2VEZXRlY3Rpb24uY2hhbmdlVGFyZ2V0KHQpfX0se2tleTpcIl91cGRhdGVNb2RlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCE9PXRoaXMuX21vZGUmJih0aGlzLl9tb2RlPXQsdGhpcy5zZXRBdHRyaWJ1dGUoXCJtb2RlXCIsdCksXCJzcGxpdFwiPT09dD8odGhpcy5fYW5pbWF0b3ImJnRoaXMuX2FuaW1hdG9yLmRlYWN0aXZhdGUoKSx0aGlzLl9zdGF0ZT1hYSk6KHRoaXMuX2FuaW1hdG9yJiZ0aGlzLl9hbmltYXRvci5hY3RpdmF0ZSh0aGlzKSxcIm9wZW5cIj09PXRoaXMuX3N0YXRlJiZ0aGlzLl9hbmltYXRvci5vcGVuKCkpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwibW9kZWNoYW5nZVwiLHtzaWRlOnRoaXMsbW9kZTp0fSkpfX0se2tleTpcIl91cGRhdGVBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKTt0aGlzLnBhcmVudE5vZGUmJih0aGlzLl9hbmltYXRvciYmdGhpcy5fYW5pbWF0b3IuZGVhY3RpdmF0ZSgpLHRoaXMuX2FuaW1hdG9yPXRoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcih7YW5pbWF0aW9uOnR9KSx0aGlzLl9hbmltYXRvci5hY3RpdmF0ZSh0aGlzKSx0aGlzLl9hbmltYXRpb25PcHQ9e3RpbWluZzp0aGlzLl9hbmltYXRvci5kdXJhdGlvbixkdXJhdGlvbjp0aGlzLl9hbmltYXRvci5kdXJhdGlvbn0pfX0se2tleTpcIl91cGRhdGVBbmltYXRpb25PcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKTt0aGlzLl9hbmltYXRvci51cGRhdGVPcHRpb25zKE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKHQpKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9nZ2xlKHQsITApfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9nZ2xlKHQsITEpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWFyZ3VtZW50c1sxXSxpPVwiYm9vbGVhblwiPT10eXBlb2Ygbj9uOiF0aGlzLmlzT3BlbixvPWk/XCJvcGVuXCI6XCJjbG9zZVwiLHI9aT9cIm9wZW5cIjphYTtpZihcInNwbGl0XCI9PT10aGlzLl9tb2RlKXJldHVybiBQcm9taXNlLnJlc29sdmUoITEpO2lmKHRoaXMuX3N0YXRlPT09cilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO2lmKHRoaXMuX2xvY2suaXNMb2NrZWQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJBbm90aGVyIHNwbGl0dGVyLXNpZGUgYWN0aW9uIGlzIGFscmVhZHkgcnVubmluZy5cIik7aWYoaSYmdGhpcy5faXNPdGhlclNpZGVPcGVuKCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQW5vdGhlciBtZW51IGlzIGFscmVhZHkgb3Blbi5cIik7aWYodGhpcy5fZW1pdEV2ZW50KFwicHJlXCIrbykpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlXCIrbytcIiBldmVudC5cIik7dmFyIGE9dGhpcy5fbG9jay5sb2NrKCk7cmV0dXJuIHRoaXMuX3N0YXRlPVwiY2hhbmdpbmdcIixuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt0Ll9hbmltYXRvcltvXShmdW5jdGlvbigpe1EuaW9zUGFnZVNjcm9sbEZpeChpKSx0Ll9zdGF0ZT1yLGEoKSx0Ll9lbWl0RXZlbnQoXCJwb3N0XCIrbyksZS5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmNhbGxiYWNrKHQpLG4odCl9KX0pfX0se2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3BhZ2U9dDt2YXIgaT1uLmNhbGxiYWNrfHxmdW5jdGlvbigpe307cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBvPWUuX2NvbnRlbnR8fG51bGw7ZS5fcGFnZUxvYWRlci5sb2FkKHtwYWdlOnQscGFyZW50OmV9LGZ1bmN0aW9uKHQpe28mJihlLl9wYWdlTG9hZGVyLnVubG9hZChvKSxvPW51bGwpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9zaG93KCl9KSxpKHQpLG4odCl9KX0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fY29udGVudCksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJzaWRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyaWdodFwiPT09dGhpcy5nZXRBdHRyaWJ1dGUoXCJzaWRlXCIpP1wicmlnaHRcIjpcImxlZnRcIn19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5OlwiX2NvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9LHNldDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQnR8fFEudGhyb3dQYWdlTG9hZGVyKCksdGhpcy5fcGFnZUxvYWRlcj10fX0se2tleTpcIm1vZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZX19LHtrZXk6XCJvblN3aXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU3dpcGV9LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIm9uU3dpcGVcIiBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0aGlzLl9vblN3aXBlPXR9fSx7a2V5OlwiaXNPcGVuXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJjb2xsYXBzZVwiPT09dGhpcy5fbW9kZSYmdGhpcy5fc3RhdGUhPT1hYX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImFuaW1hdGlvblwiLFwid2lkdGhcIixcImNvbGxhcHNlXCIsXCJzd2lwZWFibGVcIixcImFuaW1hdGlvbi1vcHRpb25zXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInByZW9wZW5cIixcInBvc3RvcGVuXCIsXCJwcmVjbG9zZVwiLFwicG9zdGNsb3NlXCIsXCJtb2RlY2hhbmdlXCJdfX0se2tleTpcInJld3JpdGFibGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHNhfX1dKSxlfSgpO2MuU3BsaXR0ZXJTaWRlPXVhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1zaWRlXCIsdWEpO3ZhciBjYT17XCJcIjpcInN3aXRjaC0tKlwiLFwiLnN3aXRjaF9faW5wdXRcIjpcInN3aXRjaC0tKl9faW5wdXRcIixcIi5zd2l0Y2hfX2hhbmRsZVwiOlwic3dpdGNoLS0qX19oYW5kbGVcIixcIi5zd2l0Y2hfX3RvZ2dsZVwiOlwic3dpdGNoLS0qX190b2dnbGVcIn0saGE9e2lvczpbMSwyMV0sbWF0ZXJpYWw6WzAsMTZdfSxkYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwibW9kaWZpZXJcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpfSksdC5fb25DaGFuZ2U9dC5fb25DaGFuZ2UuYmluZCh0KSx0Ll9vblJlbGVhc2U9dC5fb25SZWxlYXNlLmJpbmQodCksdC5fbGFzdFRpbWVTdGFtcD0wLHR9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX2dldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9jYXRpb25zO3JldHVybiBNYXRoLm1pbihlWzFdLE1hdGgubWF4KGVbMF0sdGhpcy5fc3RhcnRYK3QuZ2VzdHVyZS5kZWx0YVgpKX19LHtrZXk6XCJfZW1pdENoYW5nZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNoYW5nZVwiLHt2YWx1ZTp0aGlzLmNoZWNrZWQsc3dpdGNoOnRoaXMsaXNJbnRlcmFjdGl2ZTohMH0pfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QmJnQuc3RvcFByb3BhZ2F0aW9uJiZ0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuX2VtaXRDaGFuZ2VFdmVudCgpfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7KHQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmRlZmF1bHRFbGVtZW50Q2xhc3MrXCJfX3RvdWNoXCIpfHx0LnRpbWVTdGFtcC10aGlzLl9sYXN0VGltZVN0YW1wPDUwKSYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2xhc3RUaW1lU3RhbXA9dC50aW1lU3RhbXB9fSx7a2V5OlwiX29uSG9sZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZWR8fChCLmFkZE1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIiksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpKX19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHwtMT09PVtcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YodC5nZXN0dXJlLmRpcmVjdGlvbik/Qi5yZW1vdmVNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpOih0LmNvbnN1bWVkPSEwLEIuYWRkTW9kaWZpZXIodGhpcyxcImFjdGl2ZVwiKSx0aGlzLl9zdGFydFg9dGhpcy5fbG9jYXRpb25zW3RoaXMuY2hlY2tlZD8xOjBdLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdcIix0aGlzLl9vbkRyYWcpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5faGFuZGxlLnN0eWxlLmxlZnQ9dGhpcy5fZ2V0UG9zaXRpb24odCkrXCJweFwifX0se2tleTpcIl9vblJlbGVhc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sb2NhdGlvbnMsbj10aGlzLl9nZXRQb3NpdGlvbih0KSxpPXRoaXMuY2hlY2tlZDt0aGlzLmNoZWNrZWQ9bj49KGVbMF0rZVsxXSkvMix0aGlzLmNoZWNrZWQhPT1pJiZ0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVsZWFzZVwiLHRoaXMuX29uUmVsZWFzZSksdGhpcy5faGFuZGxlLnN0eWxlLmxlZnQ9XCJcIixCLnJlbW92ZU1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIil9fSx7a2V5OlwiY2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLmRpc2FibGVkfHwodGhpcy5jaGVja2VkPSF0aGlzLmNoZWNrZWQsdGhpcy5fZW1pdENoYW5nZUV2ZW50KCksdGhpcy5fbGFzdFRpbWVTdGFtcD10LnRpbWVTdGFtcHx8MCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHQuX29uQ2hhbmdlKX0pLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLmNsaWNrKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2spLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcyx7ZHJhZ01pbkRpc3RhbmNlOjEsaG9sZFRpbWVvdXQ6MjUxLHBhc3NpdmU6ITB9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdC5fb25DaGFuZ2UpfSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhvbGRcIix0aGlzLl9vbkhvbGQpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRhcFwiLHRoaXMuY2xpY2spLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljayksdGhpcy5fZ2VzdHVyZURldGVjdG9yJiZ0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtpZihcIm1vZGlmaWVyXCI9PT10KXt2YXIgbz0tMSE9PShpfHxcIlwiKS5pbmRleE9mKFwibWF0ZXJpYWxcIik7dGhpcy5fbG9jYXRpb25zPWhhW28/XCJtYXRlcmlhbFwiOlwiaW9zXCJdfXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNhfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJzd2l0Y2hcIn19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX3RvZ2dsZVwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX19oYW5kbGVcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX190b3VjaFwiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19LHtrZXk6XCJfaGFuZGxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lK1wiX19oYW5kbGVcIil9fSx7a2V5OlwiY2hlY2tib3hcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXR9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wibW9kaWZpZXJcIl0pfX1dKSxlfSgpO2MuU3dpdGNoPWRhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zd2l0Y2hcIixkYSk7dmFyIGZhPXtcIi50YWJiYXJfX2NvbnRlbnRcIjpcInRhYmJhci0tKl9fY29udGVudFwiLFwiLnRhYmJhcl9fYm9yZGVyXCI6XCJ0YWJiYXItLSpfX2JvcmRlclwiLFwiLnRhYmJhclwiOlwidGFiYmFyLS0qXCJ9LHBhPXtyZWFkeTpmdW5jdGlvbih0LGUpe2UoKX19LGdhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oMS1uKSp0K24qZX0sbWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9sb2FkSW5hY3RpdmU9US5kZWZlcigpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlcnx8KHRoaXMuX3N3aXBlcj1uZXcgcm8oe2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29udGVudEVsZW1lbnR9LGdldEluaXRpYWxJbmRleDpmdW5jdGlvbigpe3JldHVybiB0LmdldEF0dHJpYnV0ZShcImFjdGl2ZUluZGV4XCIpfHx0LmdldEF0dHJpYnV0ZShcImFjdGl2ZS1pbmRleFwiKX0sZ2V0QXV0b1Njcm9sbFJhdGlvOnRoaXMuX2dldEF1dG9TY3JvbGxSYXRpby5iaW5kKHRoaXMpLGdldEJ1YmJsZVdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiaWdub3JlLWVkZ2Utd2lkdGhcIil8fDI1LDEwKX0saXNBdXRvU2Nyb2xsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxwcmVDaGFuZ2VIb29rOnRoaXMuX29uUHJlQ2hhbmdlLmJpbmQodGhpcykscG9zdENoYW5nZUhvb2s6dGhpcy5fb25Qb3N0Q2hhbmdlLmJpbmQodGhpcykscmVmcmVzaEhvb2s6dGhpcy5fb25SZWZyZXNoLmJpbmQodGhpcyksc2Nyb2xsSG9vazp0aGlzLl9vblNjcm9sbC5iaW5kKHRoaXMpfSksbih0aGlzLGZ1bmN0aW9uKCl7dC5fdGFiYmFyQm9yZGVyPVEuZmluZENoaWxkKHQuX3RhYmJhckVsZW1lbnQsXCIudGFiYmFyX19ib3JkZXJcIiksdC5fc3dpcGVyLmluaXQoe3N3aXBlYWJsZTp0Lmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0pfSkpLG4odGhpcyxmdW5jdGlvbigpe3QuX3VwZGF0ZVBvc2l0aW9uKCksUS5maW5kUGFyZW50KHQsXCJvbnMtcGFnZVwiLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZG9jdW1lbnQuYm9keX0pfHx0Ll9zaG93KCl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIuaW5pdGlhbGl6ZWQmJih0aGlzLl9zd2lwZXIuZGlzcG9zZSgpLHRoaXMuX3N3aXBlcj1udWxsLHRoaXMuX3RhYmJhckJvcmRlcj1udWxsLHRoaXMuX3RhYnNSZWN0PW51bGwpfX0se2tleTpcIl9ub3JtYWxpemVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBfKHt9LHQse2luZGV4OnQuYWN0aXZlSW5kZXgsdGFiSXRlbTp0aGlzLnRhYnNbdC5hY3RpdmVJbmRleF19KX19LHtrZXk6XCJfb25Qb3N0Q2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD10aGlzLl9ub3JtYWxpemVFdmVudCh0KSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInBvc3RjaGFuZ2VcIix0KTt2YXIgZT10LnRhYkl0ZW0ucGFnZUVsZW1lbnQ7ZSYmZS5fc2hvdygpfX0se2tleTpcIl9vblByZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5fbm9ybWFsaXplRXZlbnQodCksdC5jYW5jZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jYW5jZWxlZD0hMH0sUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVjaGFuZ2VcIix0KSwhdC5jYW5jZWxlZCl7dmFyIGU9dCxuPWUuYWN0aXZlSW5kZXgsaT1lLmxhc3RBY3RpdmVJbmRleCxvPXRoaXMudGFicztpZihvW25dLnNldEFjdGl2ZSghMCksaT49MCl7dmFyIHI9b1tpXTtyLnNldEFjdGl2ZSghMSksci5wYWdlRWxlbWVudCYmci5wYWdlRWxlbWVudC5faGlkZSgpfX1yZXR1cm4gdC5jYW5jZWxlZH19LHtrZXk6XCJfb25TY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYodGhpcy5fdGFiYmFyQm9yZGVyKWlmKHRoaXMuX3RhYmJhckJvcmRlci5zdHlsZS50cmFuc2l0aW9uPVwiYWxsIFwiKyhlLmR1cmF0aW9ufHwwKStcInMgXCIrKGUudGltaW5nfHxcIlwiKSx0aGlzLl9hdXRvZ3JvdyYmdGhpcy5fdGFic1JlY3QubGVuZ3RoPjApe3ZhciBuPU1hdGguZmxvb3IodCksaT1NYXRoLmNlaWwodCksbz10JTE7dGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLndpZHRoPWdhKHRoaXMuX3RhYnNSZWN0W25dLndpZHRoLHRoaXMuX3RhYnNSZWN0W2ldLndpZHRoLG8pK1wicHhcIix0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNmb3JtPVwidHJhbnNsYXRlM2QoXCIrZ2EodGhpcy5fdGFic1JlY3Rbbl0ubGVmdCx0aGlzLl90YWJzUmVjdFtpXS5sZWZ0LG8pK1wicHgsIDAsIDApXCJ9ZWxzZSB0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNmb3JtPVwidHJhbnNsYXRlM2QoXCIrMTAwKnQrXCIlLCAwLCAwKVwiO3RoaXMuX29uU3dpcGUmJnRoaXMuX29uU3dpcGUodCxlKX19LHtrZXk6XCJfb25SZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9hdXRvZ3Jvdz1RLmhhc01vZGlmaWVyKHRoaXMsXCJhdXRvZ3Jvd1wiKSx0aGlzLl90YWJzUmVjdD10aGlzLnRhYnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfSksdGhpcy5fdGFiYmFyQm9yZGVyKXt0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUuZGlzcGxheT10aGlzLmhhc0F0dHJpYnV0ZShcInRhYi1ib3JkZXJcIil8fFEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpP1wiYmxvY2tcIjpcIm5vbmVcIjt2YXIgdD10aGlzLmdldEFjdGl2ZVRhYkluZGV4KCk7dGhpcy5fdGFic1JlY3QubGVuZ3RoPjAmJnQ+PTAmJih0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUud2lkdGg9dGhpcy5fdGFic1JlY3RbdF0ud2lkdGgrXCJweFwiKX19fSx7a2V5OlwiX2dldEF1dG9TY3JvbGxSYXRpb1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uLzMwMCoodD8tMToxKTtyZXR1cm4gTWF0aC5taW4oMSxNYXRoLm1heCgwLC42K2UqaSkpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyk7dmFyIHQ9dGhpcy5fY29udGVudEVsZW1lbnR8fFEuY3JlYXRlKFwiLnRhYmJhcl9fY29udGVudFwiKTt0LmNsYXNzTGlzdC5hZGQoXCJvbnMtdGFiYmFyX19jb250ZW50XCIpO3ZhciBlPXRoaXMuX3RhYmJhckVsZW1lbnR8fFEuY3JlYXRlKFwiLnRhYmJhclwiKTtpZihlLmNsYXNzTGlzdC5hZGQoXCJvbnMtdGFiYmFyX19mb290ZXJcIiksIWUucGFyZW50Tm9kZSlmb3IoO3RoaXMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3ZhciBuPU51bWJlcih0aGlzLmdldEF0dHJpYnV0ZShcImFjdGl2ZUluZGV4XCIpKTtlLmNoaWxkcmVuLmxlbmd0aD5uJiYhUS5maW5kQ2hpbGQoZSxcIlthY3RpdmVdXCIpJiZlLmNoaWxkcmVuW25dLnNldEF0dHJpYnV0ZShcImFjdGl2ZVwiLFwiXCIpLHRoaXMuX3RhYmJhckJvcmRlcj1RLmZpbmRDaGlsZChlLFwiLnRhYmJhcl9fYm9yZGVyXCIpfHxRLmNyZWF0ZShcIi50YWJiYXJfX2JvcmRlclwiKSxlLmFwcGVuZENoaWxkKHRoaXMuX3RhYmJhckJvcmRlciksZS5jbGFzc0xpc3QuYWRkKFwib25zLXN3aXBlci10YWJiYXJcIiksIXQuY2hpbGRyZW5bMF0mJnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksIXQuY2hpbGRyZW5bMV0mJnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksdC5hcHBlbmRDaGlsZD10LmFwcGVuZENoaWxkLmJpbmQodC5jaGlsZHJlblswXSksdC5pbnNlcnRCZWZvcmU9dC5pbnNlcnRCZWZvcmUuYmluZCh0LmNoaWxkcmVuWzBdKSx0aGlzLmFwcGVuZENoaWxkKHQpLHRoaXMuYXBwZW5kQ2hpbGQoZSksQi5pbml0TW9kaWZpZXIodGhpcyxmYSl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksaT10aGlzLl90b3A9XCJ0b3BcIj09PWV8fFwiYXV0b1wiPT09ZSYmUS5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIiksbz1pP1EuYWRkTW9kaWZpZXI6US5yZW1vdmVNb2RpZmllcjtvKHRoaXMsXCJ0b3BcIik7dmFyIHI9US5maW5kUGFyZW50KHRoaXMsXCJvbnMtcGFnZVwiKTtyJiZuKHIsZnVuY3Rpb24oKXt2YXIgZT0wO3IuY2hpbGRyZW5bMF0mJlEubWF0Y2goci5jaGlsZHJlblswXSxcIm9ucy10b29sYmFyXCIpJiYobyhyLmNoaWxkcmVuWzBdLFwibm9zaGFkb3dcIiksZT0xKTt2YXIgbj1yLl9nZXRDb250ZW50RWxlbWVudCgpLGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUoci5fZ2V0Q29udGVudEVsZW1lbnQoKSxudWxsKTt0LnN0eWxlLnRvcD1pP3BhcnNlSW50KGEuZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctdG9wXCIpLDEwKS1lK1wicHhcIjpcIlwiLG4uc3R5bGUudG9wPWEudG9wLG4uc3R5bGUudG9wPVwiXCJ9KSxQLmF1dG9TdGF0dXNCYXJGaWxsKGZ1bmN0aW9uKCl7dmFyIGU9US5maW5kUGFyZW50KHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuaGFzQXR0cmlidXRlKFwic3RhdHVzLWJhci1maWxsXCIpfSk7US50b2dnbGVBdHRyaWJ1dGUodCxcInN0YXR1cy1iYXItZmlsbFwiLGkmJiFlKX0pfX0se2tleTpcInNldEFjdGl2ZVRhYlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLmdldEFjdGl2ZVRhYkluZGV4KCksbz10aGlzLnRhYnNbaV0scj10aGlzLnRhYnNbdF07aWYoIXIpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiU3BlY2lmaWVkIGluZGV4IGRvZXMgbm90IG1hdGNoIGFueSB0YWIuXCIpO2lmKHQ9PT1pKXJldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInJlYWN0aXZlXCIse2luZGV4OnQsYWN0aXZlSW5kZXg6dCx0YWJJdGVtOnJ9KSxQcm9taXNlLnJlc29sdmUoci5wYWdlRWxlbWVudCk7dmFyIGE9ci5wYWdlRWxlbWVudDtyZXR1cm4oYT9Qcm9taXNlLnJlc29sdmUoYSk6ci5sb2FkZWQpLnRoZW4oZnVuY3Rpb24oaSl7cmV0dXJuIGUuX3N3aXBlci5zZXRBY3RpdmVJbmRleCh0LF8oe3JlamVjdDohMH0sbix7YW5pbWF0aW9uOm8mJmk/bi5hbmltYXRpb258fGUuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpOlwibm9uZVwiLGFuaW1hdGlvbk9wdGlvbnM6US5leHRlbmQoe2R1cmF0aW9uOi4zLHRpbWluZzpcImN1YmljLWJlemllciguNCwgLjcsIC41LCAxKVwifSxlLmhhc0F0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpP1EuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKGUuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpOnt9LG4uYW5pbWF0aW9uT3B0aW9uc3x8e30pfSkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZuLmNhbGxiYWNrKGkpLGl9KX0pfX0se2tleTpcInNldFRhYmJhclZpc2liaWxpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO24odGhpcyxmdW5jdGlvbigpe2UuX2NvbnRlbnRFbGVtZW50LnN0eWxlW2UuX3RvcD9cInRvcFwiOlwiYm90dG9tXCJdPXQ/XCJcIjpcIjBweFwiLGUuX3RhYmJhckVsZW1lbnQuc3R5bGUuZGlzcGxheT10P1wiXCI6XCJub25lXCIsdCYmZS5fb25SZWZyZXNoKCl9KX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoITApfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0VGFiYmFyVmlzaWJpbGl0eSghMSl9fSx7a2V5OlwiZ2V0QWN0aXZlVGFiSW5kZXhcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy50YWJzLGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdJiZcIk9OUy1UQUJcIj09PXRbZV0udGFnTmFtZSYmdFtlXS5pc0FjdGl2ZSgpKXJldHVybiBlO3JldHVybi0xfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlci5zaG93KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dmFyIGU9dC50YWJzLG49dC5nZXRBY3RpdmVUYWJJbmRleChlKTt0Ll9sb2FkSW5hY3RpdmUucmVzb2x2ZSgpLGUubGVuZ3RoPjAmJm4+PTAmJmVbbl0ubG9hZGVkLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zaG93KCl9KX0pfSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5oaWRlKCk7dmFyIHQ9dGhpcy50b3BQYWdlO3QmJnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50YWJzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQucmVtb3ZlKCl9KSx0aGlzLnJlbW92ZSgpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihcIm1vZGlmaWVyXCI9PT10KXtCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLGZhKTt2YXIgaT1mdW5jdGlvbih0KXtyZXR1cm4vKF58XFxzKyl0b3AoJHxcXHMrKS9pLnRlc3QodCl9O2koZSkhPT1pKG4pJiZ0aGlzLl91cGRhdGVQb3NpdGlvbigpfWVsc2VcInBvc2l0aW9uXCI9PT10P1EuaXNBdHRhY2hlZCh0aGlzKSYmdGhpcy5fdXBkYXRlUG9zaXRpb24oKTpcInN3aXBlYWJsZVwiPT09dD90aGlzLl9zd2lwZXImJnRoaXMuX3N3aXBlci51cGRhdGVTd2lwZWFibGUodGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpOlwiaGlkZS10YWJzXCI9PT10JiZ0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoIXRoaXMuaGFzQXR0cmlidXRlKFwiaGlkZS10YWJzXCIpfHxcImZhbHNlXCI9PT1uKX19LHtrZXk6XCJfdGFiYmFyRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRhYmJhclwiKX19LHtrZXk6XCJfY29udGVudEVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50YWJiYXJfX2NvbnRlbnRcIil9fSx7a2V5OlwiX3RhcmdldEVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250ZW50RWxlbWVudDtyZXR1cm4gdCYmdC5jaGlsZHJlblswXXx8bnVsbH19LHtrZXk6XCJ0b3BQYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50YWJzLGU9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpO3JldHVybiB0W2VdP3RbZV0ucGFnZUVsZW1lbnR8fHRoaXMucGFnZXNbMF18fG51bGw6bnVsbH19LHtrZXk6XCJwYWdlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLl90YXJnZXRFbGVtZW50LmNoaWxkcmVuKX19LHtrZXk6XCJ0YWJzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLl90YWJiYXJFbGVtZW50LmNoaWxkcmVuLGZ1bmN0aW9uKHQpe3JldHVyblwiT05TLVRBQlwiPT09dC50YWdOYW1lfSl9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwibm9uZVwiIT09dGhpcy5fdGFiYmFyRWxlbWVudC5zdHlsZS5kaXNwbGF5fX0se2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwic3dpcGVhYmxlXCIsdCl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInBvc2l0aW9uXCIsXCJzd2lwZWFibGVcIixcInRhYi1ib3JkZXJcIixcImhpZGUtdGFic1wiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVjaGFuZ2VcIixcInBvc3RjaGFuZ2VcIixcInJlYWN0aXZlXCJdfX1dKSxlfSgpO2MuVGFiYmFyPW1hLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10YWJiYXJcIixtYSk7dmFyIF9hPXtcIlwiOlwidGFiYmFyLS0qX19pdGVtXCIsXCIudGFiYmFyX19idXR0b25cIjpcInRhYmJhci0tKl9fYnV0dG9uXCJ9LHZhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm5bXCJsYWJlbFwiLFwiaWNvblwiLFwiYmFkZ2VcIl0uc29tZSh0Lmhhc0F0dHJpYnV0ZS5iaW5kKHQpKT90Ll9jb21waWxlKCk6bih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX3BhZ2VMb2FkZXI9anQsdC5fb25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInRhYmJhcl9faXRlbVwiKSwhdGhpcy5fYnV0dG9uKXtmb3IodmFyIHQ9US5jcmVhdGUoXCJidXR0b24udGFiYmFyX19idXR0b25cIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dmFyIGU9US5jcmVhdGUoXCJpbnB1dFwiLHtkaXNwbGF5Olwibm9uZVwifSk7ZS50eXBlPVwicmFkaW9cIix0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQodCksdGhpcy5fdXBkYXRlQnV0dG9uQ29udGVudCgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsX2EpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpfX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9idXR0b24mJlEudXBkYXRlUmlwcGxlKHRoaXMuX2J1dHRvbix0aGlzLmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSl9fSx7a2V5OlwiX3VwZGF0ZUJ1dHRvbkNvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9idXR0b24sbj10aGlzLl9pY29uO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSl7dmFyIGk9KG49bnx8US5jcmVhdGVFbGVtZW50KCc8ZGl2IGNsYXNzPVwidGFiYmFyX19pY29uXCI+PG9ucy1pY29uPjwvb25zLWljb24+PC9kaXY+JykpLmNoaWxkcmVuWzBdLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiaWNvblwiLGUsdC5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKX19KGkuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSk7aS5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKSxuLnBhcmVudEVsZW1lbnQhPT1lJiZlLmluc2VydEJlZm9yZShuLGUuZmlyc3RDaGlsZCksaS5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbj9vKCk6c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24mJm8oKX0pfWVsc2UgbiYmbi5yZW1vdmUoKTtbXCJsYWJlbFwiLFwiYmFkZ2VcIl0uZm9yRWFjaChmdW5jdGlvbihuLGkpe3ZhciBvPXQucXVlcnlTZWxlY3RvcihcIi50YWJiYXJfX1wiK24pO3QuaGFzQXR0cmlidXRlKG4pPygobz1vfHxRLmNyZWF0ZShcIi50YWJiYXJfX1wiK24rKFwiYmFkZ2VcIj09PW4/XCIgbm90aWZpY2F0aW9uXCI6XCJcIikpKS50ZXh0Q29udGVudD10LmdldEF0dHJpYnV0ZShuKSxvLnBhcmVudEVsZW1lbnQhPT1lJiZlLmFwcGVuZENoaWxkKG8pKTpvJiZvLnJlbW92ZSgpfSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMub25DbGljaygpOnRoaXMuX3RhYmJhci5zZXRBY3RpdmVUYWIodGhpcy5pbmRleCx7cmVqZWN0OiExfSl9fSx7a2V5Olwic2V0QWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO3RoaXMuX2lucHV0LmNoZWNrZWQ9dCx0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIix0KSxRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiYWN0aXZlXCIsdCksdGhpcy5oYXNBdHRyaWJ1dGUoXCJpY29uXCIpJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImFjdGl2ZS1pY29uXCIpJiZ0aGlzLl9pY29uLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShcImljb25cIix0aGlzLmdldEF0dHJpYnV0ZSh0P1wiYWN0aXZlLWljb25cIjpcImljb25cIikpfX0se2tleTpcIl9sb2FkUGFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuX2hhc0xvYWRlZD0hMCxuZXcgUHJvbWlzZShmdW5jdGlvbihpKXtuLl9wYWdlTG9hZGVyLmxvYWQoe3BhcmVudDp0LHBhZ2U6ZX0sZnVuY3Rpb24oZSl7dC5yZXBsYWNlQ2hpbGQoZSx0LmNoaWxkcmVuW24uaW5kZXhdKSxuLl9sb2FkZWRQYWdlPWUsaShlKX0pfSl9fSx7a2V5OlwiaXNBY3RpdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrLCExKSx0aGlzLl9sb2FkZWRQYWdlJiYodGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fbG9hZGVkUGFnZSksdGhpcy5fbG9hZGVkUGFnZT1udWxsLHRoaXMuX2hhc0xvYWRlZD0hMSx0aGlzLmxvYWRlZD1udWxsKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2ssITEpLFEuaXNBdHRhY2hlZCh0aGlzKSYmIXRoaXMubG9hZGVkKXt2YXIgZT1RLmRlZmVyKCk7dGhpcy5sb2FkZWQ9ZS5wcm9taXNlLG4odGhpcyxmdW5jdGlvbigpe3ZhciBuPXQuaW5kZXgsaT10Ll90YWJiYXI7aXx8US50aHJvdyhcIlRhYiBlbGVtZW50cyBtdXN0IGJlIGNoaWxkcmVuIG9mIFRhYmJhclwiKSxpLmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpJiZRLmFkZE1vZGlmaWVyKHQsaS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksdC5faGFzTG9hZGVkfHwodC5oYXNBdHRyaWJ1dGUoXCJhY3RpdmVcIikmJih0LnNldEFjdGl2ZSghMCksaS5zZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiLG4pKSxuPT09aS50YWJzLmxlbmd0aC0xJiYoaS5fb25SZWZyZXNoKCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX29uUmVmcmVzaCgpfSkpLG1hLnJld3JpdGFibGVzLnJlYWR5KGksZnVuY3Rpb24oKXt2YXIgbz10LnBhZ2V8fHQuZ2V0QXR0cmlidXRlKFwicGFnZVwiKTtpZighdC5wYWdlRWxlbWVudCYmbyl7dmFyIHI9aS5fdGFyZ2V0RWxlbWVudCxhPVEuY3JlYXRlKFwiZGl2XCIse2hlaWdodDpcIjEwMCVcIix3aWR0aDpcIjEwMCVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9KTtyLmluc2VydEJlZm9yZShhLHIuY2hpbGRyZW5bbl0pO3ZhciBzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xvYWRQYWdlRWxlbWVudChyLG8pLnRoZW4oZS5yZXNvbHZlKX07cmV0dXJuIHQuaXNBY3RpdmUoKT9zKCk6aS5fbG9hZEluYWN0aXZlLnByb21pc2UudGhlbihzKX1yZXR1cm4gZS5yZXNvbHZlKHQucGFnZUVsZW1lbnQpfSkpfSl9fX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJ0YWJiYXJfX2l0ZW1cIixfYSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLGksbyxfYSl9KTticmVhaztjYXNlXCJyaXBwbGVcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUmlwcGxlKCl9KTticmVhaztjYXNlXCJpY29uXCI6Y2FzZVwibGFiZWxcIjpjYXNlXCJiYWRnZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVCdXR0b25Db250ZW50KCl9KTticmVhaztjYXNlXCJwYWdlXCI6dGhpcy5wYWdlPWl8fFwiXCJ9fX0se2tleTpcInBhZ2VMb2FkZXJcIixzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9fSx7a2V5OlwiX2lucHV0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJpbnB1dFwiKX19LHtrZXk6XCJfYnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIudGFiYmFyX19idXR0b25cIil9fSx7a2V5OlwiX2ljb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRhYmJhcl9faWNvblwiKX19LHtrZXk6XCJfdGFiYmFyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZFBhcmVudCh0aGlzLFwib25zLXRhYmJhclwiKX19LHtrZXk6XCJpbmRleFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMucGFyZW50RWxlbWVudC5jaGlsZHJlbix0aGlzKX19LHtrZXk6XCJwYWdlRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe2lmKHRoaXMuX2xvYWRlZFBhZ2UpcmV0dXJuIHRoaXMuX2xvYWRlZFBhZ2U7dmFyIHQ9dGhpcy5fdGFiYmFyO3JldHVybiB0LnBhZ2VzLmxlbmd0aD09PXQudGFicy5sZW5ndGg/dC5wYWdlc1t0aGlzLmluZGV4XTpudWxsfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwiaWNvblwiLFwibGFiZWxcIixcInBhZ2VcIixcImJhZGdlXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLlRhYj12YSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGFiXCIsdmEpO3ZhciBiYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCkseWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksa2E9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI1OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwubWVzc2FnZURlbGF5PS40KmwuZHVyYXRpb24rbC5kZWxheSxDLmlzQW5kcm9pZCgpP2wuYXNjZW5zaW9uPTQ4OkxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmFzY2Vuc2lvbj05ODpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wuYXNjZW5zaW9uPTg1OmwuYXNjZW5zaW9uPTY0LGx9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxRLmdsb2JhbHMuZmFiT2Zmc2V0PXRoaXMuYXNjZW5zaW9uLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSxudCh0aGlzLl9nZXRGYWJzKCkpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIC1cIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKSBzY2FsZSgxKVwifSx0aGlzLmRlZiksbnQoUS5hcnJheUZyb20odC5jaGlsZHJlbiksdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LFEuZ2xvYmFscy5mYWJPZmZzZXQ9MCxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuYXNjZW5zaW9uK1wicHgsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSksbnQodGhpcy5fZ2V0RmFicygpLHRoaXMuZGVmKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKSBzY2FsZSgxKVwifSx0aGlzLmRlZiksbnQoUS5hcnJheUZyb20odC5jaGlsZHJlbiksdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pKX19LHtrZXk6XCJfZ2V0RmFic1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFEuYXJyYXlGcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvbnMtZmFiW3Bvc2l0aW9ufj1ib3R0b21dLCBvbnMtc3BlZWQtZGlhbFtwb3NpdGlvbn49Ym90dG9tXVwiKSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZpc2libGV9KX19XSksZX0oKSx3YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzU6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5ib2R5SGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmxpZnRBbW91bnQ9XCJjYWxjKDEwMCUgKyAzNHB4KVwiOkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMjFweClcIjpsLmxpZnRBbW91bnQ9XCIxMDAlXCIsbH1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7MD09PXBhcnNlSW50KHQuc3R5bGUudG9wLDEwKSYmKHQuc3R5bGUudG9wPXQuc3R5bGUuYm90dG9tPVwiXCIpfX1dKSxlfSgpLEVhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zNTphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5mYWxsQW1vdW50PVwiY2FsYygtMTAwJSAtIDQ0cHgpXCI6bC5mYWxsQW1vdW50PVwiLTEwMCVcIixsfXJldHVybiBiKGUsYmEpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsdGhpcy5fdXBkYXRlUG9zaXRpb24odCksbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuZmFsbEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0PXQuX3RvYXN0LHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHQpLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuZmFsbEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbihpKXtuLl91cGRhdGVQb3NpdGlvbih0LCEwKSxlJiZlKCksaSgpfSkpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwO249TGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP1wiNDRweFwiOlwiMFwiLHQuc3R5bGUudG9wIT09biYmKHQuc3R5bGUudG9wPW4sdC5zdHlsZS5ib3R0b209XCJpbml0aWFsXCIpfX1dKSxlfSgpLENhPXtcIi50b2FzdFwiOlwidG9hc3QtLSpcIixcIi50b2FzdF9fbWVzc2FnZVwiOlwidG9hc3QtLSpfX21lc3NhZ2VcIixcIi50b2FzdF9fYnV0dG9uXCI6XCJ0b2FzdC0tKl9fYnV0dG9uXCJ9LEFhPXtkZWZhdWx0OkMuaXNBbmRyb2lkKCk/a2E6d2EsZmFkZTp5YSxhc2NlbmQ6a2EsbGlmdDp3YSxmYWxsOkVhLG5vbmU6YmF9LFNhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVmYXVsdERCQj1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWxsUGFyZW50SGFuZGxlcigpfSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9hc3QmJih0aGlzLl90b2FzdC5zdHlsZS50b3A9dGhpcy5fdG9hc3Quc3R5bGUuYm90dG9tPVwiXCIpLG5ldyBPKHthbmltYXRvcnM6QWEsYmFzZUNsYXNzOmJhLGJhc2VDbGFzc05hbWU6XCJUb2FzdEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTFlNDt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnRvYXN0XCIpO2lmKCF0KWZvcigodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5jbGFzc0xpc3QuYWRkKFwidG9hc3RcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dmFyIGU9US5maW5kQ2hpbGQodCxcIi50b2FzdF9fYnV0dG9uXCIpO2lmKGV8fChlPVEuZmluZENoaWxkKHQsZnVuY3Rpb24odCl7cmV0dXJuIFEubWF0Y2godCxcIi5idXR0b25cIil8fFEubWF0Y2godCxcImJ1dHRvblwiKX0pKSYmKGUuY2xhc3NMaXN0LnJlbW92ZShcImJ1dHRvblwiKSxlLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdF9fYnV0dG9uXCIpLHQuYXBwZW5kQ2hpbGQoZSkpLCFRLmZpbmRDaGlsZCh0LFwiLnRvYXN0X19tZXNzYWdlXCIpKXt2YXIgbj1RLmZpbmRDaGlsZCh0LFwiLm1lc3NhZ2VcIik7aWYoIW4pe249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodmFyIGk9dC5jaGlsZE5vZGVzLmxlbmd0aC0xO2k+PTA7aS0tKXQuY2hpbGROb2Rlc1tpXSE9PWUmJm4uaW5zZXJ0QmVmb3JlKHQuY2hpbGROb2Rlc1tpXSxuLmZpcnN0Q2hpbGQpfW4uY2xhc3NMaXN0LmFkZChcInRvYXN0X19tZXNzYWdlXCIpLHQuaW5zZXJ0QmVmb3JlKG4sdC5maXJzdENoaWxkKX10LnBhcmVudE5vZGUhPT10aGlzJiZ0aGlzLmFwcGVuZENoaWxkKHQpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIENhfX0se2tleTpcIl90b2FzdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRvYXN0XCIpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBiYXx8US50aHJvdygnXCJBbmltYXRvclwiIHBhcmFtIG11c3QgaW5oZXJpdCBPbnNUb2FzdEVsZW1lbnQuVG9hc3RBbmltYXRvcicpLEFhW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEFhfX0se2tleTpcIlRvYXN0QW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYmF9fV0pLGV9KCk7Yy5Ub2FzdD1TYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdG9hc3RcIixTYSk7dmFyIFBhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFJpKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue1wiXCI6XCJ0b29sYmFyLWJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwidG9vbGJhci1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMsdm9pZCAwLHtjZW50ZXI6XCJcIixzaXplOlwiY29udGFpblwiLGJhY2tncm91bmQ6XCJ0cmFuc3BhcmVudFwifV19fV0pLGV9KCk7cmV0dXJuIGMuVG9vbGJhckJ1dHRvbj1QYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdG9vbGJhci1idXR0b25cIixQYSksZnVuY3Rpb24odCl7d2luZG93Ll9vbnNMb2FkZWQmJnQuX3V0aWwud2FybihcIk9uc2VuIFVJIGlzIGxvYWRlZCBtb3JlIHRoYW4gb25jZS5cIiksd2luZG93Ll9vbnNMb2FkZWQ9ITAsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXt0LmZhc3RDbGljaz16dC5hdHRhY2goZG9jdW1lbnQuYm9keSk7dmFyIGU9XCJ0b3VjaC1hY3Rpb25cImluIGRvY3VtZW50LmJvZHkuc3R5bGU7dC5wbGF0Zm9ybS5fcnVuT25BY3R1YWxQbGF0Zm9ybShmdW5jdGlvbigpe3QucGxhdGZvcm0uaXNBbmRyb2lkKCk/dC5mYXN0Q2xpY2suZGVzdHJveSgpOnQucGxhdGZvcm0uaXNJT1MoKSYmZSYmKHQucGxhdGZvcm0uaXNJT1NTYWZhcmkoKXx8dC5wbGF0Zm9ybS5pc1dLV2ViVmlldygpKSYmdC5mYXN0Q2xpY2suZGVzdHJveSgpfSl9LCExKSx0LnJlYWR5KGZ1bmN0aW9uKCl7dC5lbmFibGVEZXZpY2VCYWNrQnV0dG9uSGFuZGxlcigpLHQuX2RlZmF1bHREZXZpY2VCYWNrQnV0dG9uSGFuZGxlcj10Ll9pbnRlcm5hbC5kYmJEaXNwYXRjaGVyLmNyZWF0ZUhhbmRsZXIod2luZG93LmRvY3VtZW50LmJvZHksZnVuY3Rpb24oKXtPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChuYXZpZ2F0b3IsXCJhcHBcIik/bmF2aWdhdG9yLmFwcC5leGl0QXBwKCk6Y29uc29sZS53YXJuKFwiQ291bGQgbm90IGNsb3NlIHRoZSBhcHAuIElzICdjb3Jkb3ZhLmpzJyBpbmNsdWRlZD9cXG5FcnJvcjogJ3dpbmRvdy5uYXZpZ2F0b3IuYXBwJyBpcyB1bmRlZmluZWQuXCIpfSksZG9jdW1lbnQuYm9keS5fZ2VzdHVyZURldGVjdG9yPW5ldyB0Lkdlc3R1cmVEZXRlY3Rvcihkb2N1bWVudC5ib2R5LHtwYXNzaXZlOiEwfSksdC5wbGF0Zm9ybS5pc1dlYlZpZXcoKXx8ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpezI3PT09ZS5rZXlDb2RlJiZ0LmZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnQoKX0pLHQuX3NldHVwTG9hZGluZ1BsYWNlSG9sZGVycygpfSksVmlld3BvcnQuc2V0dXAoKX0oUnQpLHdpbmRvdy5fc3VwZXJTZWNyZXRPbnM9UnQsUnR9KTsiLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTp0LnRpbWVhZ289ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9XCJzZWNvbmRfbWludXRlX2hvdXJfZGF5X3dlZWtfbW9udGhfeWVhclwiLnNwbGl0KFwiX1wiKSxlPVwi56eSX+WIhumSn1/lsI/ml7Zf5aSpX+WRqF/mnIhf5bm0XCIuc3BsaXQoXCJfXCIpLG49WzYwLDYwLDI0LDcsMzY1LzcvMTIsMTJdLHI9e2VuOmZ1bmN0aW9uKGUsbil7aWYoMD09PW4pcmV0dXJuW1wianVzdCBub3dcIixcInJpZ2h0IG5vd1wiXTt2YXIgcj10W3BhcnNlSW50KG4vMildO3JldHVybiBlPjEmJihyKz1cInNcIiksW2UrXCIgXCIrcitcIiBhZ29cIixcImluIFwiK2UrXCIgXCIrcl19LHpoX0NOOmZ1bmN0aW9uKHQsbil7aWYoMD09PW4pcmV0dXJuW1wi5Yia5YiaXCIsXCLniYfliLvlkI5cIl07dmFyIHI9ZVtwYXJzZUludChuLzIpXTtyZXR1cm5bdCtcIiBcIityK1wi5YmNXCIsdCtcIiBcIityK1wi5ZCOXCJdfX0sYT1mdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCl9LGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBEYXRlP3Q6IWlzTmFOKHQpfHwvXlxcZCskLy50ZXN0KHQpP25ldyBEYXRlKGEodCkpOih0PSh0fHxcIlwiKS50cmltKCkucmVwbGFjZSgvXFwuXFxkKy8sXCJcIikucmVwbGFjZSgvLS8sXCIvXCIpLnJlcGxhY2UoLy0vLFwiL1wiKS5yZXBsYWNlKC8oXFxkKVQoXFxkKS8sXCIkMSAkMlwiKS5yZXBsYWNlKC9aLyxcIiBVVENcIikucmVwbGFjZSgvKFtcXCtcXC1dXFxkXFxkKVxcOj8oXFxkXFxkKS8sXCIgJDEkMlwiKSxuZXcgRGF0ZSh0KSl9LG89ZnVuY3Rpb24odCxlLGkpe2U9cltlXT9lOnJbaV0/aTpcImVuXCI7Zm9yKHZhciBvPTAsdT10PDA/MTowLGM9dD1NYXRoLmFicyh0KTt0Pj1uW29dJiZvPG4ubGVuZ3RoO28rKyl0Lz1uW29dO3JldHVybih0PWEodCkpPigwPT09KG8qPTIpPzk6MSkmJihvKz0xKSxyW2VdKHQsbyxjKVt1XS5yZXBsYWNlKFwiJXNcIix0KX0sdT1mdW5jdGlvbih0LGUpe3JldHVybigoZT1lP2koZSk6bmV3IERhdGUpLWkodCkpLzFlM30sYz1mdW5jdGlvbih0LGUpe3JldHVybiB0LmdldEF0dHJpYnV0ZT90LmdldEF0dHJpYnV0ZShlKTp0LmF0dHI/dC5hdHRyKGUpOnZvaWQgMH0sZj1mdW5jdGlvbih0KXtyZXR1cm4gYyh0LFwiZGF0YS10aW1lYWdvXCIpfHxjKHQsXCJkYXRldGltZVwiKX0sZD1bXSxsPWZ1bmN0aW9uKHQpe3QmJihjbGVhclRpbWVvdXQodCksZGVsZXRlIGRbdF0pfSxzPWZ1bmN0aW9uKHQpe2lmKHQpbChjKHQsXCJkYXRhLXRpZFwiKSk7ZWxzZSBmb3IodmFyIGUgaW4gZClsKGUpfSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxyJiZ0KGUsciksZX19KCk7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7IWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0odGhpcyx0KSx0aGlzLm5vd0RhdGU9ZSx0aGlzLmRlZmF1bHRMb2NhbGU9bnx8XCJlblwifXJldHVybiBoKHQsW3trZXk6XCJzZXRMb2NhbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRlZmF1bHRMb2NhbGU9dH19LHtrZXk6XCJkb1JlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxyKXt2YXIgYT10aGlzLGk9dShlLHRoaXMubm93RGF0ZSk7dC5pbm5lckhUTUw9byhpLHIsdGhpcy5kZWZhdWx0TG9jYWxlKTt2YXIgYz1mdW5jdGlvbih0LGUpe3ZhciBuPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsKG4pLHQoKX0sZSk7cmV0dXJuIGRbbl09MCxufShmdW5jdGlvbigpe2EuZG9SZW5kZXIodCxlLHIpfSxNYXRoLm1pbigxZTMqZnVuY3Rpb24odCl7Zm9yKHZhciBlPTEscj0wLGE9TWF0aC5hYnModCk7dD49bltyXSYmcjxuLmxlbmd0aDtyKyspdC89bltyXSxlKj1uW3JdO3JldHVybiBhPShhJT1lKT9lLWE6ZSxNYXRoLmNlaWwoYSl9KGkpLDIxNDc0ODM2NDcpKTshZnVuY3Rpb24odCxlKXt0LnNldEF0dHJpYnV0ZT90LnNldEF0dHJpYnV0ZShcImRhdGEtdGlkXCIsZSk6dC5hdHRyJiZ0LmF0dHIoXCJkYXRhLXRpZFwiLGUpfSh0LGMpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09dC5sZW5ndGgmJih0PVt0XSk7Zm9yKHZhciBuPXZvaWQgMCxyPTAsYT10Lmxlbmd0aDtyPGE7cisrKW49dFtyXSxzKG4pLHRoaXMuZG9SZW5kZXIobixmKG4pLGUpfX0se2tleTpcImZvcm1hdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8odSh0LHRoaXMubm93RGF0ZSksZSx0aGlzLmRlZmF1bHRMb2NhbGUpfX1dKSx0fSgpLHY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHAodCxlKX07cmV0dXJuIHYucmVnaXN0ZXI9ZnVuY3Rpb24odCxlKXtyW3RdPWV9LHYuY2FuY2VsPXMsdn0pO1xuIiwidmFyIGluc3RhbmNlID0gdGltZWFnbygpO1xyXG50aW1lYWdvID0gaW5zdGFuY2UuZm9ybWF0LmJpbmQoaW5zdGFuY2UpO1xyXG5cclxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XHJcblx0dmFyIHRpbWVvdXQ7XHJcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGltZW91dCA9IG51bGw7XHJcblx0XHRcdGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG5cdFx0fTtcclxuXHRcdHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xyXG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xyXG5cdFx0aWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXhjZXJwdChzdHIsIG1heGxlbikge1xyXG5cdGlmIChzdHIubGVuZ3RoID4gbWF4bGVuKSByZXR1cm4gc3RyLnNsaWNlKDAsIG1heGxlbikudHJpbVJpZ2h0KCkgKyAnLi4uJztcclxuXHRlbHNlIHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERlZmF1bHRGZWVkcygpIHtcclxuXHRpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmZWVkcycpKSB7XHJcblx0XHR2YXIgZmVlZHNUb0FkZCA9IHt9O1xyXG5cdFx0dmFyIHJlY29tbWVuZGVkRmVlZHMgPSBfYXBwX2ZlZWRyZWNvbW1hbmRhdGlvbnNbX2FwcF91c2VyTGFuZ107XHJcblxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWNvbW1lbmRlZEZlZWRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChyZWNvbW1lbmRlZEZlZWRzW2ldLmRlZmF1bHQpIGZlZWRzVG9BZGRbcmVjb21tZW5kZWRGZWVkc1tpXS51cmxdID0gcmVjb21tZW5kZWRGZWVkc1tpXTtcclxuXHRcdH1cclxuXHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmVlZHMnLCBKU09OLnN0cmluZ2lmeShmZWVkc1RvQWRkKSk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XHJcblx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpOyAvLyAkJiBtZWFucyB0aGUgd2hvbGUgbWF0Y2hlZCBzdHJpbmdcclxufVxyXG5cclxudmFyIGZlZWRzUmVmZXRjaFZhbGlkaXR5Q291bnRlciA9IDA7IC8vIE1JTl9TQUZFX0lOVEVHRVJcclxuZnVuY3Rpb24gZmVlZHNSZWZldGNoKCkge1xyXG5cdHZhciB2YWxpZGl0eUludGVnZXIgPSArK2ZlZWRzUmVmZXRjaFZhbGlkaXR5Q291bnRlcjtcclxuXHRmZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcblx0dmFyIGZlZWRzQXJyID0gW107XHJcblx0Zm9yICh2YXIgdXJsIGluIGZlZWRzKSBmZWVkc0Fyci5wdXNoKGZlZWRzW3VybF0pO1xyXG5cdHZhciBpID0gZmVlZHNBcnIubGVuZ3RoO1xyXG5cdHZhciByZXN1bHQgPSBbXTtcclxuXHR2YXIgZXJyID0gW107XHJcblxyXG5cdGlmIChpID09PSAwKSByZXR1cm4gZG9uZShudWxsLCByZXN1bHQpO1xyXG5cdHBhcnNlRmVlZENvbnRlbnQoZmVlZHNBcnIsIGZ1bmN0aW9uIChmZWVkKSB7XHJcblx0XHRyZXN1bHQucHVzaChmZWVkKVxyXG5cdFx0aWYgKC0taSA9PT0gMCkgZG9uZShudWxsLCByZXN1bHQpO1xyXG5cdFx0dmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZmVlZHNyZWZldGNocHJvZ3Jlc3NcIiwge2RldGFpbDogeyBwcm9ncmVzczogMTAwIC0gaSAqIDEwMCAvIGZlZWRzQXJyLmxlbmd0aCB9fSk7XHJcblx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHR9LCBmdW5jdGlvbiAoZXJyb3IsIGZlZWQpIHtcclxuXHRcdGVyci5wdXNoKChmZWVkLnRpdGxlID8gZmVlZC50aXRsZSArICc6ICcgOiAnJykgKyBlcnJvci5lcnJvciB8fCAnVW5rbm93biBlcnJvcicpO1xyXG5cdFx0aWYgKC0taSA9PT0gMCkgZG9uZShudWxsLCByZXN1bHQpO1xyXG5cdFx0dmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZmVlZHNyZWZldGNocHJvZ3Jlc3NcIiwge2RldGFpbDogeyBwcm9ncmVzczogMTAwIC0gaSAqIDEwMCAvIGZlZWRzQXJyLmxlbmd0aCB9fSk7XHJcblx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHR9KTtcclxuXHRmdW5jdGlvbiBkb25lKF9lcnIsIHJlc3VsdCkge1xyXG5cdFx0aWYgKGVyci5sZW5ndGgpIHtcclxuXHRcdFx0dmFyIG1zZyA9ICcnO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGVyci5sZW5ndGg7IGkrKykgbXNnICs9IGVycltpXSArICc8YnI+JztcclxuXHRcdFx0Ly8gb25zLm5vdGlmaWNhdGlvbi50b2FzdChtc2csIHsgdGltZW91dDogNTAwMCB9KTtcclxuXHRcdFx0Y29uc29sZS53YXJuKG1zZyk7XHJcblx0XHR9XHJcblx0XHRpZiAodmFsaWRpdHlJbnRlZ2VyICE9PSBmZWVkc1JlZmV0Y2hWYWxpZGl0eUNvdW50ZXIpIFxyXG5cdFx0XHQvLyByZXR1cm4gY29uc29sZS53YXJuKCdhIG5ldyByZWZyZXNoIHdhcyBhbHJlYWR5IHN0YXJ0ZWQnKTsgLy9hIG5ldyByZWZyZXNoIHdhcyBhbHJlYWR5IHN0YXJ0ZWRcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBmZWVkID0gcmVzdWx0W2ldO1xyXG5cdFx0XHR2YXIgdXJsID0gZmVlZC51cmw7XHJcblx0XHRcdGZlZWRzW3VybF0gPSBmZWVkO1xyXG5cdFx0fVxyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZlZWRzJywgSlNPTi5zdHJpbmdpZnkoZmVlZHMpKTtcclxuXHJcblx0XHR2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuXHRcdGV2ZW50LmluaXRFdmVudCgnZmVlZHNyZWZldGNoJywgdHJ1ZSwgdHJ1ZSk7XHJcblx0XHRkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCJcclxudmFyIF9hcHBfbWF4TGlzdEl0ZW1zID0gMjAwO1xyXG5cclxudmFyIF9hcHBfbWF4TGF6eUxpc3RJdGVtcyA9IDcwMDtcclxuXHJcbiIsIlxyXG52YXIgX2FwcF91c2VyTGFuZyA9IChuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSkuc2xpY2UoMCwgMik7XHJcbmlmIChfYXBwX3VzZXJMYW5nICE9PSAnbmwnICYmIF9hcHBfdXNlckxhbmcgIT09ICdlbicpIF9hcHBfdXNlckxhbmcgPSAnZW4nO1xyXG5fYXBwX3VzZXJMYW5nID0gJ2VuJztcclxuXHJcbnZhciBfYXBwX2xvY2FsaXphdGlvbiA9IHtcclxuICAgIG5vQ29ubmVjdGlvbjoge1xyXG4gICAgICAgIG5sOiAnSmUgYmVudCBuaWV0IHZlcmJvbmRlbiBtZXQgZGUgc2VydmVyLiBKZSBrdW50IGRlIGFwcCBub2cgc3RlZWRzIGdlYnJ1aWtlbiBtYWFyIGRlIGZlZWRzIHppam4gbW9nZWxpamsgdmVyb3VkZXJkLicsXHJcbiAgICAgICAgZW46ICdZb3UgYXJlIG5vdCBjb25uZWN0ZWQgdG8gdGhlIHNlcnZlci4gWW91IGNhbiBzdGlsbCB1c2UgdGhlIGFwcCBidXQgdGhlIGZlZWRzIG1heSBiZSBvdXRkYXRlZC4nXHJcbiAgICB9LFxyXG59O1xyXG5cclxudmFyIF9hcHBfZmVlZHJlY29tbWFuZGF0aW9ucyA9IHtcclxuICAgIG5sOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ1AyMDAwIFBvbGl0aWUnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FsYXJtZXJpbmdlbi5ubC9mZWVkcy9kaXNjaXBsaW5lL3BvbGl0aWUucnNzJyxcclxuICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vYWxhcm1lcmluZ2VuLm5sL3dlYmZlZWRzLmh0bWwnLFxyXG4gICAgICAgICAgICB0eXBlOiAncnNzJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ1AyMDAwIEJyYW5kd2VlcicsXHJcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYWxhcm1lcmluZ2VuLm5sL2ZlZWRzL2Rpc2NpcGxpbmUvYnJhbmR3ZWVyLnJzcycsXHJcbiAgICAgICAgICAgIHNpdGU6ICdodHRwczovL2FsYXJtZXJpbmdlbi5ubC93ZWJmZWVkcy5odG1sJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdQMjAwMCBBbWJ1bGFuY2UnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FsYXJtZXJpbmdlbi5ubC9mZWVkcy9kaXNjaXBsaW5lL2FtYnVsYW5jZS5yc3MnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly9hbGFybWVyaW5nZW4ubmwvd2ViZmVlZHMuaHRtbCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnUDIwMDAgVHJhdW1haGVsaScsXHJcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYWxhcm1lcmluZ2VuLm5sL2ZlZWRzL2Rpc2NpcGxpbmUvdHJhdW1hLnJzcycsXHJcbiAgICAgICAgICAgIHNpdGU6ICdodHRwczovL2FsYXJtZXJpbmdlbi5ubC93ZWJmZWVkcy5odG1sJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdEZXZlbG9wZXIgb24gUmVkZGl0JyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS91c2VyL0FmaXJ1cy8ucnNzJyxcclxuICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vd3d3LnJlZGRpdC5jb20vdXNlci9BZmlydXMnLFxyXG4gICAgICAgICAgICB0eXBlOiAnYXRvbScsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdudS5ubCcsXHJcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vd3d3Lm51Lm5sL3JzcycsXHJcbiAgICAgICAgICAgIHNpdGU6ICdodHRwczovL3d3dy5udS5ubCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnTk9TJyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2ZlZWRzLmZlZWRidXJuZXIuY29tL25vcy96QlBMP2Zvcm1hdD14bWwnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly9ub3MubmwvJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICd3ZWVyLm5sJyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy53ZWVyLm5sL3Jzcy54bWwnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cDovL3d3dy53ZWVyLm5sLycsXHJcbiAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQUQnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5hZC5ubC9ob21lL3Jzcy54bWwnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly93d3cuYWQubmwnLFxyXG4gICAgICAgICAgICB0eXBlOiAncnNzJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ05SQycsXHJcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vd3d3Lm5yYy5ubC9yc3MvJyxcclxuICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vd3d3LmFkLm5sJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdWb2xrc2tyYW50JyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly93d3cudm9sa3NrcmFudC5ubC92b29ycGFnaW5hL3Jzcy54bWwnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly93d3cudm9sa3NrcmFudC5ubCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnVHdlYWtlcnMnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vZmVlZHMuZmVlZGJ1cm5lci5jb20vdHdlYWtlcnMvbWl4ZWQnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly90d2Vha2Vycy5uZXQvJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdEZXZlbG9wZXIgQmxvZycsXHJcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vZXNzdHVkaW8uc2l0ZS9mZWVkJyxcclxuICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vZXNzdHVkaW8uc2l0ZScsXHJcbiAgICAgICAgICAgIHR5cGU6ICdhdG9tJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICBlbjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdDTk4nLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vcnNzLmNubi5jb20vcnNzL2VkaXRpb24ucnNzJyxcclxuICAgICAgICAgICAgc2l0ZTogJ2h0dHBzOi8vZWRpdGlvbi5jbm4uY29tLycsXHJcbiAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQkJDJyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cDovL2ZlZWRzLmJiY2kuY28udWsvbmV3cy9yc3MueG1sP2VkaXRpb249aW50IycsXHJcbiAgICAgICAgICAgIHNpdGU6ICdodHRwOi8vd3d3LmJiYy5jb20vJyxcclxuICAgICAgICAgICAgdHlwZTogJ3JzcycsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdKUkUnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vcG9kY2FzdHMuam9lcm9nYW4ubmV0L2ZlZWQnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cDovL3BvZGNhc3RzLmpvZXJvZ2FuLm5ldC8nLFxyXG4gICAgICAgICAgICB0eXBlOiAncnNzJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ0RldmVsb3BlciBvbiBSZWRkaXQnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5yZWRkaXQuY29tL3VzZXIvQWZpcnVzLy5yc3MnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly93d3cucmVkZGl0LmNvbS91c2VyL0FmaXJ1cycsXHJcbiAgICAgICAgICAgIHR5cGU6ICdhdG9tJyxcclxuICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ0RldmVsb3BlciBCbG9nJyxcclxuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9lc3N0dWRpby5zaXRlL2ZlZWQnLFxyXG4gICAgICAgICAgICBzaXRlOiAnaHR0cHM6Ly9lc3N0dWRpby5zaXRlJyxcclxuICAgICAgICAgICAgdHlwZTogJ2F0b20nLFxyXG4gICAgICAgICAgICBpdGVtczogW10sXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59XHJcblxyXG52YXIgX2FwcF9yZWNvbW1hbmRlZGZlZWRzb3VyY2VzID0ge1xyXG4gICAgbmw6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQWxhcm1lcmluZ2VuIChQMjAwMCknLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FsYXJtZXJpbmdlbi5ubC93ZWJmZWVkcy5odG1sJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ1JlZGRpdCBGZWVkcyBVaXRnZWxlZ2QnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5yZWRkaXQuY29tL3dpa2kvcnNzJyxcclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgZW46IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIENOTiBSU1MgRmVlZHMnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vZWRpdGlvbi5jbm4uY29tL3NlcnZpY2VzL3Jzcy8nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXRsZTogJ1JlZGRpdCBGZWVkcyBFeHBsYWluZWQnLFxyXG4gICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5yZWRkaXQuY29tL3dpa2kvcnNzJyxcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn1cclxuXHJcbmZvciAodmFyIGtleSBpbiBfYXBwX2ZlZWRyZWNvbW1hbmRhdGlvbnMpIHtcclxuICAgIHZhciByZWNvbW1hbmRlZEZlZWRzID0gX2FwcF9mZWVkcmVjb21tYW5kYXRpb25zW2tleV07XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmVjb21tYW5kZWRGZWVkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHJlY29tbWFuZGVkRmVlZHNbaV0udXJsID0gcmVtb3ZlVHJhaWxpbmdTbGFzaChyZWNvbW1hbmRlZEZlZWRzW2ldLnVybCk7XHJcbiAgICAgICAgcmVjb21tYW5kZWRGZWVkc1tpXS5zaXRlID0gcmVtb3ZlVHJhaWxpbmdTbGFzaChyZWNvbW1hbmRlZEZlZWRzW2ldLnNpdGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVUcmFpbGluZ1NsYXNoKHVybCkge1xyXG4gICAgcmV0dXJuIHVybC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcclxufVxyXG5cclxuIiwiXHJcbnZhciBwcm94eSA9ICdodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS8nO1xyXG5cclxudmFyIGdldENvbnRlbnQgPSBmdW5jdGlvbiAoaXRlbSwgY2hpbGQpIHtcclxuICAgIHZhciBlbGVtID0gaXRlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShjaGlsZClbMF07XHJcbiAgICByZXR1cm4gKGVsZW0gJiYgZWxlbS50ZXh0Q29udGVudCB8fCAnJykudHJpbSgpO1xyXG59XHJcblxyXG52YXIgZ2V0Q29udGVudEF0dHIgPSBmdW5jdGlvbiAoaXRlbSwgY2hpbGQsIGF0dHIpIHtcclxuICAgIHZhciBlbGVtID0gaXRlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShjaGlsZClbMF07XHJcbiAgICByZXR1cm4gKGVsZW0gJiYgZWxlbS5nZXRBdHRyaWJ1dGUoYXR0cikgfHwgJycpLnRyaW0oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VSc3NGZWVkKHVybCwgeG1sLCB0ZXh0KSB7XHJcbiAgICB2YXIgaXRlbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2l0ZW0nKSwgMCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciB0aXRsZSA9IGdldENvbnRlbnQoaXRlbXNbaV0sICd0aXRsZScpO1xyXG4gICAgICAgIHZhciBsaW5rID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ2xpbmsnKTtcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBnZXRDb250ZW50KGl0ZW1zW2ldLCAnZGVzY3JpcHRpb24nKTtcclxuICAgICAgICB2YXIgYXV0aG9yID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ2F1dGhvcicpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IGdldENvbnRlbnQoaXRlbXNbaV0sICdjYXRlZ29yeScpO1xyXG4gICAgICAgIHZhciBjb21tZW50cyA9IGdldENvbnRlbnQoaXRlbXNbaV0sICdjb21tZW50cycpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ3B1YkRhdGUnKTtcclxuICAgICAgICBpdGVtc1tpXSA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGF1dGhvcjogYXV0aG9yLFxyXG4gICAgICAgICAgICBjb250ZW50OiAnJyxcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICBjb21tZW50czogY29tbWVudHMsXHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGUsXHJcbiAgICAgICAgICAgIHhtbF9sZW46IGRlc2NyaXB0aW9uLmxlbmd0aCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzaXRlID0gZ2V0Q29udGVudCh4bWwsICdsaW5rJyk7XHJcbiAgICBpZiAoIWlzQmFzZVVybChzaXRlKSkgc2l0ZSA9IG5vcm1hbGl6ZVVybCh1cmwsIHNpdGUpO1xyXG5cclxuICAgIHZhciB1cmxTcGxpdCA9IHNpdGUuc3BsaXQoJy8nKTtcclxuICAgIHZhciBpY29uID0gdXJsU3BsaXRbMF0ucmVwbGFjZSgnaHR0cDonLCAnaHR0cHM6JykgKyAnLy8nICsgdXJsU3BsaXRbMl0gKyAnL2Zhdmljb24uaWNvJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGU6IGdldENvbnRlbnQoeG1sLCAnbGFzdEJ1aWxkRGF0ZScpLFxyXG4gICAgICAgIHNpdGU6IHNpdGUsXHJcbiAgICAgICAgdGl0bGU6IGdldENvbnRlbnQoeG1sLCAndGl0bGUnKSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogZ2V0Q29udGVudCh4bWwsICdkZXNjcmlwdGlvbicpLFxyXG4gICAgICAgIGl0ZW1zOiBpdGVtcyxcclxuICAgICAgICBpY29uOiBpY29uLFxyXG4gICAgICAgIHhtbF9sZW46IHRleHQubGVuZ3RoXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlQXRvbUZlZWQodXJsLCB4bWwsIHRleHQpIHtcclxuICAgIHZhciBpdGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZW50cnknKSwgMCk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciB0aXRsZSA9IGdldENvbnRlbnQoaXRlbXNbaV0sICd0aXRsZScpO1xyXG4gICAgICAgIHZhciBsaW5rID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ2xpbmsnKSB8fCBnZXRDb250ZW50QXR0cihpdGVtc1tpXSwgJ2xpbmsnLCAnaHJlZicpO1xyXG4gICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IGdldENvbnRlbnQoaXRlbXNbaV0sICdzdW1tYXJ5JykgfHwgZXhjZXJwdChnZXRDb250ZW50KGl0ZW1zW2ldLCAnY29udGVudCcpLCAxNTApO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ2NvbnRlbnQnKTtcclxuICAgICAgICB2YXIgYXV0aG9yID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ2F1dGhvcicpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9IGdldENvbnRlbnQoaXRlbXNbaV0sICdjYXRlZ29yeScpIHx8IGdldENvbnRlbnRBdHRyKGl0ZW1zW2ldLCAnY2F0ZWdvcnknLCAndGVybScpO1xyXG4gICAgICAgIHZhciBjb21tZW50cyA9IGdldENvbnRlbnQoaXRlbXNbaV0sICdjb21tZW50cycpO1xyXG4gICAgICAgIHZhciBkYXRlID0gZ2V0Q29udGVudChpdGVtc1tpXSwgJ3B1Ymxpc2hlZCcpIHx8IGdldENvbnRlbnQoaXRlbXNbaV0sICd1cGRhdGVkJyk7XHJcbiAgICAgICAgaXRlbXNbaV0gPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgbGluazogbGluayxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBhdXRob3I6IGF1dGhvcixcclxuICAgICAgICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgICAgICAgY29udGVudEJhc2U6IGdldENvbnRlbnRBdHRyKGl0ZW1zW2ldLCAnY29udGVudCcsICd4bWw6YmFzZScpLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgIGNvbW1lbnRzOiBjb21tZW50cyxcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgeG1sX2xlbjogZGVzY3JpcHRpb24ubGVuZ3RoLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNpdGUgPSBnZXRDb250ZW50KHhtbCwgJ2xpbmsnKSB8fCBnZXRDb250ZW50QXR0cih4bWwsICdsaW5rJykgfHwgbm9ybWFsaXplVXJsKHVybCwgJy8nKTtcclxuICAgIGlmICghaXNCYXNlVXJsKHNpdGUpKSBzaXRlID0gbm9ybWFsaXplVXJsKHVybCwgc2l0ZSk7XHJcblxyXG4gICAgdmFyIHVybFNwbGl0ID0gc2l0ZS5zcGxpdCgnLycpO1xyXG4gICAgdmFyIGljb24gPSB1cmxTcGxpdFswXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyB1cmxTcGxpdFsyXSArICcvZmF2aWNvbi5pY28nO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogJ2F0b20nLFxyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGU6IGdldENvbnRlbnQoeG1sLCAndXBkYXRlZCcpLFxyXG4gICAgICAgIHNpdGU6IHNpdGUsXHJcbiAgICAgICAgdGl0bGU6IGdldENvbnRlbnQoeG1sLCAndGl0bGUnKSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogZ2V0Q29udGVudCh4bWwsICdzdWJ0aXRsZScpLFxyXG4gICAgICAgIGl0ZW1zOiBpdGVtcyxcclxuICAgICAgICBpY29uOiBpY29uLFxyXG4gICAgICAgIHhtbF9sZW46IHRleHQubGVuZ3RoXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZlZWRzQ29udGVudChjYikge1xyXG4gICAgdmFyIGZlZWRzU2V0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmVlZHMnKSB8fCAne30nKTtcclxuICAgIHZhciBmZWVkcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgdXJsIGluIGZlZWRzU2V0KSBmZWVkcy5wdXNoKGZlZWRzU2V0W3VybF0pO1xyXG4gICAgdmFyIGkgPSBmZWVkcy5sZW5ndGg7XHJcbiAgICB2YXIgcmVzdWx0ID0gW107XHJcblxyXG4gICAgaWYgKGkgPT09IDApIHJldHVybiBjYihudWxsLCByZXN1bHQpO1xyXG4gICAgcGFyc2VGZWVkQ29udGVudChmZWVkcywgZnVuY3Rpb24gKGZlZWQpIHtcclxuICAgICAgICByZXN1bHQucHVzaChmZWVkKVxyXG4gICAgICAgIGlmICgtLWkgPT09IDApIGNiKG51bGwsIHJlc3VsdClcclxuICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgZmVlZCkge1xyXG4gICAgICAgIGlmICgtLWkgPT09IDApIGNiKG51bGwsIHJlc3VsdCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VGZWVkQ29udGVudChmZWVkcywgb25GZWVkLCBvbkVycm9yKSB7XHJcbiAgICB2YXIgcGFyc2VycyA9IHtcclxuICAgICAgICBhdG9tOiBwYXJzZUF0b21GZWVkLFxyXG4gICAgICAgIHJzczogcGFyc2VSc3NGZWVkLFxyXG4gICAgICAgIGl0ZW1zOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWVkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIChmdW5jdGlvbiAoZmVlZCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VyID0gcGFyc2Vyc1tmZWVkLnR5cGVdO1xyXG4gICAgICAgICAgICBmZXRjaEZlZWQoZmVlZC51cmwsIGZ1bmN0aW9uIChlcnJvciwgeG1sLCB0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBvbkVycm9yKGVycm9yLCBmZWVkKTtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcGFyc2VyKGZlZWQudXJsLCB4bWwsIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgb25GZWVkKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KShmZWVkc1tpXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZldGNoRmVlZCh1cmwsIGNiKSB7XHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4aHIudGltZW91dCA9IDE1ICogMTAwMDsgLy8gMTUgc2Vjb25kc1xyXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNwb25zZVhNTCkgY2IobnVsbCwgdGhpcy5yZXNwb25zZVhNTCwgdGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBjYih7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25ldHdvcmsnLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnRmVlZCBpcyBub3QgcmV0dXJuaW5nIHZhbGlkIFhNTCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgY2Ioe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ25ldHdvcmsnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMucmVzcG9uc2VUZXh0LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgeGhyLm9wZW4oXCJHRVRcIiwgcHJveHkgKyB1cmwsIHRydWUpO1xyXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9yc3MreG1sXCIpO1xyXG4gICAgeGhyLnNlbmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZEZlZWQodXJsLCBjYikge1xyXG4gICAgXHJcbiAgICBpZiAodXJsLmluZGV4T2YoJ2h0dHA6Ly8nKSAhPT0gMCAmJiB1cmwuaW5kZXhPZignaHR0cHM6Ly8nKSAhPT0gMCkge1xyXG4gICAgICAgIHVybCA9ICdodHRwOi8vJyArIHVybDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhodHRwLnRpbWVvdXQgPSAxNSAqIDEwMDA7IC8vIDE1IHNlY29uZHNcclxuICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgYXRvbVxyXG4gICAgICAgICAgICAgICAgdmFyIGF0b21NYXRjaDEgPSB0aGlzLnJlc3BvbnNlVGV4dC5tYXRjaCgvPGxpbmsuKj90eXBlPVsnXCJdYXBwbGljYXRpb25cXC9hdG9tXFwreG1sWydcIl0uKj8+L21pKTtcclxuICAgICAgICAgICAgICAgIGlmIChhdG9tTWF0Y2gxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0b21GZWVkVXJsID0gYXRvbU1hdGNoMVswXS5tYXRjaCgvaHJlZj1bXjxdKC4qPylbJ1wiXS8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdG9tRmVlZFVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBub3JtYWxpemVVcmwodXJsLCBhdG9tRmVlZFVybFsxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHJzc01hdGNoMSA9IHRoaXMucmVzcG9uc2VUZXh0Lm1hdGNoKC88bGlua1tePF0qP3R5cGU9WydcIl1hcHBsaWNhdGlvblxcL3Jzc1xcK3htbFsnXCJdLio/Pi9taSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocnNzTWF0Y2gxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJzc0ZlZWRVcmwgPSByc3NNYXRjaDFbMF0ubWF0Y2goL2hyZWY9WydcIl0oLio/KVsnXCJdLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJzc0ZlZWRVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBub3JtYWxpemVVcmwodXJsLCByc3NGZWVkVXJsWzFdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VYTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNwb25zZVhNTC5kb2N1bWVudEVsZW1lbnQudGFnTmFtZSA9PT0gJ3JzcycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHsgdHlwZTogJ3JzcycsIHVybDogdXJsIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3BvbnNlWE1MLmRvY3VtZW50RWxlbWVudC50YWdOYW1lID09PSAnZmVlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHsgdHlwZTogJ2F0b20nLCB1cmw6IHVybCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB1cmxTcGxpdCA9IHVybC5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhc2VVcmwgPSB1cmxTcGxpdFswXSArICcvLycgKyB1cmxTcGxpdFsyXTtcclxuICAgICAgICAgICAgICAgIHRyeVRvR3Vlc3NSc3NVcmxzKHVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlVXJsICE9PSB1cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHRoZSBiYXNlIHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlUb0d1ZXNzUnNzVXJscyhiYXNlVXJsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25vdGZvdW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1VuYWJsZSB0byBmaW5kIGZlZWQgb24gdGhlIHBhZ2UnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25vdGZvdW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAnVW5hYmxlIHRvIGZpbmQgZmVlZCBvbiB0aGUgcGFnZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsU3BsaXQgPSB1cmwuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgIHZhciBiYXNlVXJsID0gdXJsU3BsaXRbMF0gKyAnLy8nICsgdXJsU3BsaXRbMl07XHJcbiAgICAgICAgICAgICAgICB0cnlUb0d1ZXNzUnNzVXJscyh1cmwsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVVybCAhPT0gdXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyeSB0aGUgYmFzZSB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5VG9HdWVzc1Jzc1VybHMoYmFzZVVybCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXR3b3JrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5yZXNwb25zZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV0d29yaycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5yZXNwb25zZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgeGh0dHAub3BlbihcIkdFVFwiLCBwcm94eSArIHVybCwgdHJ1ZSk7XHJcbiAgICB4aHR0cC5zZW5kKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJ5VG9HdWVzc1Jzc1VybHModXJsLCBlcnJDYikge1xyXG4gICAgICAgIHZhciBndWVzc0NvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRlc3RGb3JWYWxpZEZlZWQodXJsICsgJy9yc3MueG1sJyk7XHJcbiAgICAgICAgdGVzdEZvclZhbGlkRmVlZCh1cmwgKyAnL2ZlZWQnKTtcclxuICAgICAgICB0ZXN0Rm9yVmFsaWRGZWVkKHVybCArICcvLnJzcycpO1xyXG4gICAgICAgIHRlc3RGb3JWYWxpZEZlZWQodXJsICsgJy9yc3MnKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGVzdEZvclZhbGlkRmVlZChndWVzc1VybCkge1xyXG4gICAgICAgICAgICBmZXRjaEZlZWQoZ3Vlc3NVcmwsIGZ1bmN0aW9uIChlcnIsIHhtbCwgdGV4dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGd1ZXNzQ291bnRlciA9PT0gLTEpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGd1ZXNzQ291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4bWwuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUgPT09ICdyc3MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWVzc0NvdW50ZXIgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYihudWxsLCB7IHR5cGU6ICdyc3MnLCB1cmw6IGd1ZXNzVXJsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4bWwuZG9jdW1lbnRFbGVtZW50LnRhZ05hbWUgPT09ICdmZWVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3Vlc3NDb3VudGVyID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgeyB0eXBlOiAnYXRvbScsIHVybDogZ3Vlc3NVcmwgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3Vlc3NDb3VudGVyID49IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBndWVzc0NvdW50ZXIgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJDYigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVVybChiYXNlVXJsLCBmb3JlaWduVXJsKSB7XHJcbiAgICBpZiAoZm9yZWlnblVybC5pbmRleE9mKCdodHRwOi8vJykgPT09IDAgfHwgZm9yZWlnblVybC5pbmRleE9mKCdodHRwczovLycpID09PSAwKSB7XHJcbiAgICAgICAgLy8gYWJzb2x1dGVcclxuICAgICAgICByZXR1cm4gZm9yZWlnblVybDtcclxuICAgIH0gZWxzZSBpZiAoZm9yZWlnblVybFswXSA9PT0gJy8nKSB7XHJcbiAgICAgICAgdmFyIHVybFNwbGl0ID0gYmFzZVVybC5zcGxpdCgnLycpO1xyXG4gICAgICAgIHJldHVybiB1cmxTcGxpdFswXSArICcvLycgKyB1cmxTcGxpdFsyXSArIGZvcmVpZ25Vcmw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHJlbGF0aXZlXHJcbiAgICAgICAgcmV0dXJuIGNvbmNhdEFuZFJlc29sdmVVcmwoYmFzZVVybCwgZm9yZWlnblVybCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbmNhdEFuZFJlc29sdmVVcmwodXJsLCBjb25jYXQpIHtcclxuICAgIHZhciB1cmwxID0gdXJsLnNwbGl0KCcvJyk7XHJcbiAgICB2YXIgdXJsMiA9IGNvbmNhdC5zcGxpdCgnLycpO1xyXG4gICAgdmFyIHVybDMgPSBbXTtcclxuICAgIGlmIChjb25jYXQudHJpbSgpID09PSAnLycpIHJldHVybiB1cmwxWzBdICsgJy8vJyArIHVybDFbMl07XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHVybDEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHVybDFbaV0gPT09ICcuLicpIHtcclxuICAgICAgICAgICAgdXJsMy5wb3AoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHVybDFbaV0gPT09ICcuJyB8fCB1cmwxW2ldID09PSAnJykge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwzLnB1c2godXJsMVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB1cmwyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmICh1cmwyW2ldID09PSAnLi4nKSB7XHJcbiAgICAgICAgICAgIHVybDMucG9wKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh1cmwyW2ldID09PSAnLicgfHwgdXJsMltpXSA9PT0gJycpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXJsMy5wdXNoKHVybDJbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1cmwzLmpvaW4oJy8nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNCYXNlVXJsKHVybCkge1xyXG4gICAgcmV0dXJuIHVybC5pbmRleE9mKCdodHRwOi8vJykgPT09IDAgfHwgdXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgPT09IDA7XHJcbn1cclxuXHJcbiIsIlxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlY29tbWVuZGVkRmVlZHNQYWdlSW5pdChwYWdlKSB7XHJcblxyXG4gICAgdmFyIHJlY29tbWFuZGVkRmVlZHMgPSBfYXBwX2ZlZWRyZWNvbW1hbmRhdGlvbnNbX2FwcF91c2VyTGFuZ107XHJcbiAgICB2YXIgcmVjb21tYW5kZWRTaXRlcyA9IF9hcHBfcmVjb21tYW5kZWRmZWVkc291cmNlc1tfYXBwX3VzZXJMYW5nXTtcclxuXHJcbiAgICB2YXIgcmVjb21tZW5kZWRGZWVkc0l0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29tbWVuZGVkLWZlZWRzLWl0ZW1zJyk7XHJcbiAgICB2YXIgcmVjb21tZW5kZWRTaXRlc0l0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY29tbWVuZGVkLXNpdGVzLWl0ZW1zJyk7XHJcblxyXG4gICAgdmFyIHBlcnNpc3RGZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcblxyXG4gICAgcGFnZS5hZGRFdmVudExpc3RlbmVyKCdoaWRlJywgZmVlZHNSZWZldGNoKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29tbWFuZGVkRmVlZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAoZnVuY3Rpb24gKGZlZWQpIHtcclxuICAgICAgICAgICAgdmFyIHNpdGVVcmxQYXJ0cyA9IGZlZWQuc2l0ZS5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICB2YXIgaWNvbiA9IHNpdGVVcmxQYXJ0c1swXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyBzaXRlVXJsUGFydHNbMl0gKyAnL2Zhdmljb24uaWNvJztcclxuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSAhIXBlcnNpc3RGZWVkc1tmZWVkLnVybF07XHJcblxyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtPlxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XFxcclxuICAgICAgICAgICAgPGltZyBvbmVycm9yPVwidGhpcy5zcmM9XFwnaW1hZ2VzL2ljb25ub3Rmb3VuZC5wbmdcXCdcIiBzcmM9XCInICsgaWNvbiArICdcIiBjbGFzcz1cImxpc3QtaXRlbV9fdGh1bWJuYWlsXCI+XFxcclxuICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbnRlclwiPlxcXHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGlzdC1pdGVtX190aXRsZVwiPicgKyBmZWVkLnRpdGxlICsgJzwvc3Bhbj5cXFxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxpc3QtaXRlbV9fc3VidGl0bGVcIj4nICsgZmVlZC5zaXRlICsgJzxzcGFuPlxcXHJcbiAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPjxvbnMtc3dpdGNoICcgKyAoY2hlY2tlZCA/ICdjaGVja2VkJyA6ICcnKSArICcgY2xhc3M9XCJyZWNvbW1lbmRlZC1mZWVkLXN3aXRjaFwiPjwvb25zLXN3aXRjaD48L2Rpdj5cXFxyXG4gICAgICAgICAgICA8L29ucy1saXN0LWl0ZW0+JztcclxuXHJcbiAgICAgICAgICAgIHZhciBlbGVtID0gZGl2LmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgIHZhciBvbnNTd2l0Y2ggPSBlbGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlY29tbWVuZGVkLWZlZWQtc3dpdGNoJylbMF07XHJcbiAgICAgICAgICAgIG9uc1N3aXRjaC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdEZlZWRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmVlZHMnKSB8fCAne30nKTtcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkICYmICFwZXJzaXN0RmVlZHNbZmVlZC51cmxdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdEZlZWRzW2ZlZWQudXJsXSA9IGZlZWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFlLnRhcmdldC5jaGVja2VkICYmIHBlcnNpc3RGZWVkc1tmZWVkLnVybF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGVyc2lzdEZlZWRzW2ZlZWQudXJsXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmZWVkcycsIEpTT04uc3RyaW5naWZ5KHBlcnNpc3RGZWVkcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVjb21tZW5kZWRGZWVkc0l0ZW1zLmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgIH0pKHJlY29tbWFuZGVkRmVlZHNbaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb21tYW5kZWRTaXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIChmdW5jdGlvbiAoc2l0ZSkge1xyXG4gICAgICAgICAgICB2YXIgc2l0ZVVybFBhcnRzID0gc2l0ZS51cmwuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgdmFyIGljb24gPSBzaXRlVXJsUGFydHNbMF0ucmVwbGFjZSgnaHR0cDonLCAnaHR0cHM6JykgKyAnLy8nICsgc2l0ZVVybFBhcnRzWzJdICsgJy9mYXZpY29uLmljbyc7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtIHRhcHBhYmxlIFxcXHJcbiAgICAgICAgICAgIG9uY2xpY2s9XCJ3aW5kb3cub3BlbihcXCcnICsgc2l0ZS51cmwgKyAnXFwnLCBcXCdfc3lzdGVtXFwnKVwiIG1vZGlmaWVyPVwiY2hldnJvblwiPlxcXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XFxcclxuICAgICAgICAgICAgPGltZyBvbmVycm9yPVwidGhpcy5zcmM9XFwnaW1hZ2VzL2ljb25ub3Rmb3VuZC5wbmdcXCdcIiBzcmM9XCInICsgaWNvbiArICdcIiBjbGFzcz1cImxpc3QtaXRlbV9fdGh1bWJuYWlsXCI+XFxcclxuICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbnRlclwiPicgKyBzaXRlLnRpdGxlICsgJzwvZGl2PlxcXHJcbiAgICAgICAgICAgIDwvb25zLWxpc3QtaXRlbT4nO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW0gPSBkaXYuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgcmVjb21tZW5kZWRTaXRlc0l0ZW1zLmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgIH0pKHJlY29tbWFuZGVkU2l0ZXNbaV0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiXHJcbmZ1bmN0aW9uIGFkZEZlZWRQYWdlSW5pdChwYWdlKSB7XHJcbiAgICB2YXIgdXJsID0gcGFnZS5kYXRhLnVybDtcclxuICAgIHZhciBhZGRGZWVkUGFnZUNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS1jb250ZW50Jyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXRpdGxlJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLWRlc2NyaXB0aW9uJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VTaXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLXBhZ2Utc2l0ZScpO1xyXG4gICAgdmFyIGFkZEZlZWRQYWdlSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLWljb24nKTtcclxuICAgIHZhciBhZGRGZWVkUHJvZ3Jlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS1wcm9ncmVzcycpO1xyXG4gICAgdmFyIGFkZEZlZWRQYWdlSXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS1pdGVtcycpO1xyXG4gICAgdmFyIGFkZEZlZWRQYWdlTG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLXBhZ2UtcHJvZ3Jlc3MtY2lyY3VsYXInKTtcclxuICAgIHZhciBzdWJzY3JpYmVGZWVkMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXN1YnNjcmliZS1idG4nKTtcclxuICAgIHZhciBzdWJzY3JpYmVGZWVkMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXN1YnNjcmliZS1idG4yJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VOb3Rmb3VuZENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS1ub3Rmb3VuZC1jb250ZW50Jyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VVcmxOb3RGb3VuZFVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXVybC1ub3QtZm91bmQtdXJsJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VVcmxOb3RGb3VuZFJzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXVybC1ub3QtZm91bmQtcnNzJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VVcmxOb3RGb3VuZEZpbmRGZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLXBhZ2UtdXJsLW5vdC1mb3VuZC1maW5kLWZlZWQnKTtcclxuICAgIHZhciBhZGRGZWVkUGFnZVVybE5vdEZvdW5kSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLXBhZ2Utbm90Zm91bmQtY29udGVudC1pbWcnKTtcclxuICAgIHZhciBhZGRGZWVkUGFnZUluaXRpYWxDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLXBhZ2UtaW5pdGlhbC1jb250ZW50Jyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VVcmxSc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS11cmwtcnNzJyk7XHJcbiAgICB2YXIgYWRkRmVlZFBhZ2VVcmxGaW5kRmVlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXVybC1maW5kLWZlZWQnKTtcclxuICAgIHZhciBhZGRGZWVkUGFnZVVybEZpbmRGZWVkRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZmVlZC1wYWdlLXVybC1maW5kLWZlZWQtZm9ybScpO1xyXG4gICAgdmFyIGFkZEZlZWRQYWdlVXJsTm90Rm91bmRGaW5kRmVlZEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtcGFnZS11cmwtbm90LWZvdW5kLWZpbmQtZmVlZC1mb3JtJyk7XHJcblxyXG4gICAgdmFyIHBvcCA9IGZuLm5hdmlnYXRvci5wb3BQYWdlLmJpbmQoZm4ubmF2aWdhdG9yLCB7fSk7XHJcblxyXG4gICAgaWYgKHVybCkgYWRkRmVlZFBhZ2VJbml0U2VhcmNoVXJsKCk7XHJcbiAgICBlbHNlIGFkZEZlZWRQYWdlSW5pdFNlYXJjaEluaXRpYWwoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzdG9wRmVlZFBhZ2VMb2FkaW5nKCkge1xyXG4gICAgICAgIGFkZEZlZWRQcm9ncmVzcy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgJzEwMCcpO1xyXG4gICAgICAgIGFkZEZlZWRQYWdlTG9hZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZEZlZWRQYWdlSW5pdFNlYXJjaEluaXRpYWwoKSB7XHJcbiAgICAgICAgc3RvcEZlZWRQYWdlTG9hZGluZygpO1xyXG5cclxuICAgICAgICBhZGRGZWVkUGFnZUluaXRpYWxDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGFkZEZlZWRQYWdlVXJsRmluZEZlZWRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHNlYXJjaFVybCA9IGFkZEZlZWRQYWdlVXJsUnNzLnZhbHVlO1xyXG4gICAgICAgICAgICBmbi5uYXZpZ2F0b3IucG9wUGFnZSh7IGFuaW1hdGlvbjogJ25vbmUnIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4ubmF2aWdhdG9yLnB1c2hQYWdlKCd2aWV3cy9hZGQtZmVlZC5odG1sJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHNlYXJjaFVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkRmVlZFBhZ2VJbml0U2VhcmNoVXJsKCkge1xyXG4gICAgICAgIGZpbmRGZWVkKHVybCwgZnVuY3Rpb24gKGVyciwgZmVlZCkge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyLnR5cGUgPT09ICduZXR3b3JrJykgb25zLm5vdGlmaWNhdGlvbi5hbGVydCgnQ291bGQgbm90IGdldCB5b3VyIG5ld3Mgc291cmNlIDooLCBuZXR3b3JrIGVycm9yJylcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihwb3ApO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyLnR5cGUgPT09ICdub3Rmb3VuZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdG9wRmVlZFBhZ2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkRmVlZFBhZ2VJbml0aWFsQ29udGVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRGZWVkUGFnZU5vdGZvdW5kQ29udGVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEZlZWRQYWdlVXJsTm90Rm91bmRVcmwuaW5uZXJUZXh0ID0gdXJsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRGZWVkUGFnZVVybE5vdEZvdW5kRmluZEZlZWRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGFkZEZlZWRQYWdlVXJsTm90Rm91bmRSc3MudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuLm5hdmlnYXRvci5wb3BQYWdlKHsgYW5pbWF0aW9uOiAnbm9uZScgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbi5uYXZpZ2F0b3IucHVzaFBhZ2UoJ3ZpZXdzL2FkZC1mZWVkLmh0bWwnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ1Vua25vd24gZXJyb3InLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ucy5ub3RpZmljYXRpb24uYWxlcnQoJ1Vua25vd24gZXJyb3InKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihwb3ApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkZEZlZWRQcm9ncmVzcy5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgNjYpO1xyXG4gICAgICAgICAgICBwYXJzZUZlZWRDb250ZW50KFtmZWVkXSwgZnVuY3Rpb24gKHBhcnNlZEZlZWQpIHtcclxuICAgICAgICAgICAgICAgIGFkZEZlZWRQYWdlQ29udGVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xyXG4gICAgICAgICAgICAgICAgc3RvcEZlZWRQYWdlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgYWRkRmVlZFBhZ2VUaXRsZS5pbm5lclRleHQgPSBwYXJzZWRGZWVkLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgYWRkRmVlZFBhZ2VEZXNjcmlwdGlvbi5pbm5lclRleHQgPSBwYXJzZWRGZWVkLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgYWRkRmVlZFBhZ2VTaXRlLmlubmVyVGV4dCA9IHBhcnNlZEZlZWQuc2l0ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsU3BsaXQgPSBwYXJzZWRGZWVkLnNpdGUuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgIGFkZEZlZWRQYWdlSWNvbi5zcmMgPSB1cmxTcGxpdFswXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyB1cmxTcGxpdFsyXSArICcvZmF2aWNvbi5pY28nO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyc2VkRmVlZC5pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxvbnMtbGlzdC1pdGVtIHRhcHBhYmxlIG1vZGlmaWVyPVwiY2hldnJvblwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIG9uZXJyb3I9XCJ0aGlzLnNyYz1cXCdpbWFnZXMvaWNvbm5vdGZvdW5kLnBuZ1xcJ1wiIHNyYz1cIicgKyB1cmxTcGxpdFswXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyB1cmxTcGxpdFsyXSArICcvZmF2aWNvbi5pY28nICsgJ1wiIGNsYXNzPVwibGlzdC1pdGVtX190aHVtYm5haWxcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZW50ZXJcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaXN0LWl0ZW1fX3RpdGxlXCI+JyArIGl0ZW0udGl0bGUgKyAnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxpc3QtaXRlbV9fc3VidGl0bGVcIj4nICsgaXRlbS5kZXNjcmlwdGlvbiArICc8YnI+PHNtYWxsPicgKyB0aW1lYWdvKGl0ZW0uZGF0ZSkgKyAnPC9zbWFsbD48L3NwYW4+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29ucy1saXN0LWl0ZW0+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGFkZEZlZWRQYWdlSXRlbXMuYXBwZW5kQ2hpbGQoZGl2LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbi5uYXZpZ2F0b3IucHVzaFBhZ2UoJ3ZpZXdzL3NwZWNpZmljLW5ld3MtaXRlbS5odG1sJywgeyBkYXRhOiB7IGZlZWQ6IHBhcnNlZEZlZWQsIGl0ZW06IGl0ZW0gfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkocGFyc2VkRmVlZC5pdGVtc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVGZWVkMS5vbmNsaWNrID0gc3Vic2NyaWJlRmVlZDIub25jbGljayA9IGhhbmRsZVN1YnNjcmliZUNsaWNrO1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVN1YnNjcmliZUNsaWNrKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVlZHNbcGFyc2VkRmVlZC51cmxdID0gcGFyc2VkRmVlZDtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmVlZHMnLCBKU09OLnN0cmluZ2lmeShmZWVkcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZlZWRzUmVmZXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZuLm5hdmlnYXRvci5wb3BQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIudHlwZSA9PT0gJ25ldHdvcmsnKSBvbnMubm90aWZpY2F0aW9uLmFsZXJ0KCdDb3VsZCBub3QgZ2V0IHlvdXIgbmV3cyBzb3VyY2UgOigsIG5ldHdvcmsgZXJyb3InKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHBvcCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG9ucy5ub3RpZmljYXRpb24uYWxlcnQoJ1Vua25vd24gZXJyb3InKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHBvcCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiZnVuY3Rpb24gZmVlZHNQYWdlSW5pdChwYWdlKSB7XHJcbiAgICB2YXIgZmVlZHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWRzLWxpc3QnKTtcclxuICAgIHZhciBhZGRGZWVkRmFiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1mZWVkLWJ0bi1mZWVkcy1wYWdlJyk7XHJcbiAgICB2YXIgZmVlZFNlYXJjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtZmVlZHMtaXRlbXMnKTtcclxuXHJcbiAgICB2YXIgcmVjb21tYW5kZWRGZWVkcyA9IF9hcHBfZmVlZHJlY29tbWFuZGF0aW9uc1tfYXBwX3VzZXJMYW5nXTtcclxuICAgIHZhciByZWNvbW1hbmRlZFNpdGVzID0gX2FwcF9yZWNvbW1hbmRlZGZlZWRzb3VyY2VzW19hcHBfdXNlckxhbmddO1xyXG5cclxuICAgIHZhciByZWNvbW1hbmRlZEZlZWRzU2V0ID0ge307XHJcblxyXG4gICAgdmFyIHJlY29tbWVuZGVkRmVlZHNJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvbW1lbmRlZC1mZWVkcy1pdGVtcycpO1xyXG4gICAgdmFyIHJlY29tbWVuZGVkU2l0ZXNJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNvbW1lbmRlZC1zaXRlcy1pdGVtcycpO1xyXG5cclxuICAgIHZhciBwZXJzaXN0RmVlZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmZWVkcycpIHx8ICd7fScpO1xyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignaGlkZScsIGZlZWRzUmVmZXRjaCk7XHJcblxyXG4gICAgYWRkRmVlZEZhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgd2luZG93LmZuLm5hdmlnYXRvci5wdXNoUGFnZSgndmlld3MvYWRkLWZlZWQuaHRtbCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZmVlZFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwZXJzaXN0RmVlZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmZWVkcycpIHx8ICd7fScpO1xyXG4gICAgICAgIHJlbmRlcigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlRmVlZHNSZWZldGNoKCkge1xyXG4gICAgICAgIHBlcnNpc3RGZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgcmVuZGVyUmVjb21tYW5kZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmZWVkc3JlZmV0Y2gnLCBoYW5kbGVGZWVkc1JlZmV0Y2gpO1xyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmZWVkc3JlZmV0Y2gnLCBoYW5kbGVGZWVkc1JlZmV0Y2gpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcGFnZS5hZGRFdmVudExpc3RlbmVyKCdzaG93JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBlcnNpc3RGZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICAgICAgcmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICAgIHJlbmRlclJlY29tbWFuZGVkKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVuZGVyUmVjb21tYW5kZWQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHJlY29tbWVuZGVkRmVlZHNJdGVtcy5maXJzdENoaWxkKSByZWNvbW1lbmRlZEZlZWRzSXRlbXMucmVtb3ZlQ2hpbGQocmVjb21tZW5kZWRGZWVkc0l0ZW1zLmZpcnN0Q2hpbGQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29tbWFuZGVkRmVlZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgKGZ1bmN0aW9uIChmZWVkKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvbW1hbmRlZEZlZWRzU2V0W2ZlZWQudXJsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l0ZVVybFBhcnRzID0gZmVlZC5zaXRlLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IHNpdGVVcmxQYXJ0c1swXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyBzaXRlVXJsUGFydHNbMl0gKyAnL2Zhdmljb24uaWNvJztcclxuICAgICAgICAgICAgICAgIHZhciBjaGVja2VkID0gISFwZXJzaXN0RmVlZHNbZmVlZC51cmxdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtPlxcXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxcXHJcbiAgICAgICAgICAgICAgICA8aW1nIG9uZXJyb3I9XCJ0aGlzLnNyYz1cXCdpbWFnZXMvaWNvbm5vdGZvdW5kLnBuZ1xcJ1wiIHNyYz1cIicgKyBpY29uICsgJ1wiIGNsYXNzPVwibGlzdC1pdGVtX190aHVtYm5haWxcIj5cXFxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZW50ZXJcIj5cXFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaXN0LWl0ZW1fX3RpdGxlXCI+JyArIGZlZWQudGl0bGUgKyAnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxpc3QtaXRlbV9fc3VidGl0bGVcIj4nICsgZmVlZC5zaXRlICsgJzxzcGFuPlxcXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+PG9ucy1zd2l0Y2ggJyArIChjaGVja2VkID8gJ2NoZWNrZWQnIDogJycpICsgJyBjbGFzcz1cInJlY29tbWVuZGVkLWZlZWQtc3dpdGNoXCI+PC9vbnMtc3dpdGNoPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICA8L29ucy1saXN0LWl0ZW0+JztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRpdi5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9uc1N3aXRjaCA9IGVsZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVjb21tZW5kZWQtZmVlZC1zd2l0Y2gnKVswXTtcclxuICAgICAgICAgICAgICAgIG9uc1N3aXRjaC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNpc3RGZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQgJiYgIXBlcnNpc3RGZWVkc1tmZWVkLnVybF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdEZlZWRzW2ZlZWQudXJsXSA9IGZlZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZS50YXJnZXQuY2hlY2tlZCAmJiBwZXJzaXN0RmVlZHNbZmVlZC51cmxdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwZXJzaXN0RmVlZHNbZmVlZC51cmxdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmVlZHMnLCBKU09OLnN0cmluZ2lmeShwZXJzaXN0RmVlZHMpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVjb21tZW5kZWRGZWVkc0l0ZW1zLmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgICAgICB9KShyZWNvbW1hbmRlZEZlZWRzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoaWxlIChyZWNvbW1lbmRlZFNpdGVzSXRlbXMuZmlyc3RDaGlsZCkgcmVjb21tZW5kZWRTaXRlc0l0ZW1zLnJlbW92ZUNoaWxkKHJlY29tbWVuZGVkU2l0ZXNJdGVtcy5maXJzdENoaWxkKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvbW1hbmRlZFNpdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIChmdW5jdGlvbiAoc2l0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpdGVVcmxQYXJ0cyA9IHNpdGUudXJsLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IHNpdGVVcmxQYXJ0c1swXS5yZXBsYWNlKCdodHRwOicsICdodHRwczonKSArICcvLycgKyBzaXRlVXJsUGFydHNbMl0gKyAnL2Zhdmljb24uaWNvJztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9ICc8b25zLWxpc3QtaXRlbSB0YXBwYWJsZSBcXFxyXG4gICAgICAgICAgICAgICAgb25jbGljaz1cIndpbmRvdy5vcGVuKFxcJycgKyBzaXRlLnVybCArICdcXCcsIFxcJ19zeXN0ZW1cXCcpXCIgbW9kaWZpZXI9XCJjaGV2cm9uXCI+XFxcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XFxcclxuICAgICAgICAgICAgICAgIDxpbWcgb25lcnJvcj1cInRoaXMuc3JjPVxcJ2ltYWdlcy9pY29ubm90Zm91bmQucG5nXFwnXCIgc3JjPVwiJyArIGljb24gKyAnXCIgY2xhc3M9XCJsaXN0LWl0ZW1fX3RodW1ibmFpbFwiPlxcXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbnRlclwiPicgKyBzaXRlLnRpdGxlICsgJzwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICA8L29ucy1saXN0LWl0ZW0+JztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRpdi5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgcmVjb21tZW5kZWRTaXRlc0l0ZW1zLmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgICAgICB9KShyZWNvbW1hbmRlZFNpdGVzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuXHJcbiAgICAgICAgd2hpbGUgKGZlZWRzTGlzdC5maXJzdENoaWxkKSBmZWVkc0xpc3QucmVtb3ZlQ2hpbGQoZmVlZHNMaXN0LmZpcnN0Q2hpbGQpO1xyXG5cclxuICAgICAgICB2YXIgdGVybSA9IGZlZWRTZWFyY2gudmFsdWUudHJpbSgpO1xyXG4gICAgICAgIHZhciBzaG91bGRGaWx0ZXJCeU5hbWUgPSB0ZXJtLmxlbmd0aCA+IDI7XHJcbiAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnLio/JyArIGVzY2FwZVJlZ0V4cCh0ZXJtKSArICcuKicsICdpbScpO1xyXG5cclxuICAgICAgICB2YXIgZmVlZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmZWVkcycpIHx8ICd7fScpO1xyXG4gICAgICAgIGZvciAodmFyIHVybCBpbiBmZWVkcykge1xyXG4gICAgICAgICAgICAoZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlY29tbWFuZGVkRmVlZHNTZXRbdXJsXSkgcmV0dXJuOyAvLyBza2lwIGJlY2F1c2UgaXQncyBhbHJlYWR5IGluIHRoZSByZWNvbW1hbmRlZCBmZWVkcyBzZWN0aW9uXHJcbiAgICAgICAgICAgICAgICB2YXIgZmVlZCA9IGZlZWRzW3VybF07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRmlsdGVyQnlOYW1lICYmICFyZWdleC50ZXN0KGZlZWQudGl0bGUpICYmICFyZWdleC50ZXN0KGZlZWQuZGVzY3JpcHRpb24pKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtIHRhcHBhYmxlIG1vZGlmaWVyPVwiY2hldnJvblwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnRcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgb25lcnJvcj1cInRoaXMuc3JjPVxcJ2ltYWdlcy9pY29ubm90Zm91bmQucG5nXFwnXCIgc3JjPVwiJyArIChmZWVkLmljb24gfHwgJ2ltYWdlcy9mZWVkaWNvbm5vdGZvdW5kLnBuZycpICsgJ1wiIGNsYXNzPVwibGlzdC1pdGVtX190aHVtYm5haWxcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbnRlclwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaXN0LWl0ZW1fX3RpdGxlXCI+JyArIGZlZWQudGl0bGUgKyAnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaXN0LWl0ZW1fX3N1YnRpdGxlXCI+JyArIChmZWVkLmRlc2NyaXB0aW9uIHx8ICcnKSArICc8L3NwYW4+XFxcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgIDwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBkaXYuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4ubmF2aWdhdG9yLnB1c2hQYWdlKCd2aWV3cy9zcGVjaWZpYy1mZWVkLmh0bWwnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmVlZHNMaXN0LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgICAgICB9KSh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIlxyXG5mdW5jdGlvbiBuZXdzUGFnZUluaXQocGFnZSkge1xyXG4gICAgdmFyIGFkZEZlZWRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWZlZWQtYnRuJyk7XHJcbiAgICB2YXIgZmVlZExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3cy1saXN0Jyk7XHJcbiAgICB2YXIgbmV3c1NlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1mZWVkcy1uZXdzLWxpc3QtaXRlbXMnKTtcclxuICAgIHZhciBuZXdzUGFnZVByb2dyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld3MtcGFnZS1wcm9ncmVzcycpO1xyXG5cclxuICAgIGFkZEZlZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHdpbmRvdy5mbi5uYXZpZ2F0b3IucHVzaFBhZ2UoJ3ZpZXdzL2FkZC1mZWVkLmh0bWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBkaXJ0eSA9IGZhbHNlO1xyXG4gICAgbmV3c1NlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZXJtID0gbmV3c1NlYXJjaElucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgICAgICByZW5kZXIoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBmZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICB2YXIgdWx0aW1hdGVMaXN0ID0gW107XHJcbiAgICB2YXIgaGVpZ2h0ID0gMTAwO1xyXG5cclxuICAgIGZlZWRMaXN0LmRlbGVnYXRlID0ge1xyXG4gICAgICAgIGNyZWF0ZUl0ZW1Db250ZW50OiBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdWx0aW1hdGVMaXN0W2ldLmVsZW07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb3VudEl0ZW1zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihfYXBwX21heExhenlMaXN0SXRlbXMsIHVsdGltYXRlTGlzdC5sZW5ndGgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FsY3VsYXRlSXRlbUhlaWdodDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoZWlnaHQ7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHJlbmRlckRlYm91bmNlZCA9IGRlYm91bmNlKHJlbmRlciwgMzAwKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHJlbmRlckRlYm91bmNlZCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVuZGVyRGVib3VuY2VkKTtcclxuXHJcbiAgICB2YXIgZmVlZHNMaXN0SXRlbXMgPSB7fTtcclxuICAgIGZvciAodmFyIHVybCBpbiBmZWVkcykge1xyXG4gICAgICAgIHZhciBmZWVkID0gZmVlZHNbdXJsXTtcclxuICAgICAgICB2YXIgaXRlbXMgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZlZWQuaXRlbXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaXRlbXNbZmVlZC5pdGVtc1tqXS5saW5rXSA9IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06IGZlZWQuaXRlbXNbal0sXHJcbiAgICAgICAgICAgICAgICBlbGVtOiBjcmVhdGVMaXN0SXRlbShmZWVkLCBmZWVkLml0ZW1zW2pdKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmZWVkc0xpc3RJdGVtc1t1cmxdID0gaXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCk7XHJcbiAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmZWVkc1JlZmV0Y2gsIDEyMCAqIDEwMDApO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZlZWRzcmVmZXRjaCcsIGhhbmRsZUZlZWRzUmVmZXRjaCk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmZWVkc3JlZmV0Y2hwcm9ncmVzcycsIGhhbmRsZUZlZWRzUmVmZXRjaFByb2dyZXNzKTtcclxuXHJcbiAgICBwYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZmVlZHNyZWZldGNoJywgaGFuZGxlRmVlZHNSZWZldGNoKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmZWVkc3JlZmV0Y2hwcm9ncmVzcycsIGhhbmRsZUZlZWRzUmVmZXRjaFByb2dyZXNzKTtcclxuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUZlZWRzUmVmZXRjaCgpIHtcclxuICAgICAgICBmZWVkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJykgfHwgJ3t9Jyk7XHJcbiAgICAgICAgdmFyIGZlZWRzQXJyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgdXJsIGluIGZlZWRzKSBmZWVkc0Fyci5wdXNoKGZlZWRzW3VybF0pO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlZWRzQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmZWVkID0gZmVlZHNBcnJbaV07XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBmZWVkLnVybDtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0ge307XHJcbiAgICAgICAgICAgIHZhciBvbGRGZWVkTGlzdEl0ZW1zID0gZmVlZHNMaXN0SXRlbXNbdXJsXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbGRGZWVkTGlzdEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZlZWQuaXRlbXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbSA9IGZlZWQuaXRlbXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbbmV3SXRlbS5saW5rXSA9IChvbGRGZWVkTGlzdEl0ZW1zW25ld0l0ZW0ubGlua10gJiYgb2xkRmVlZExpc3RJdGVtc1tuZXdJdGVtLmxpbmtdLml0ZW0ueG1sX2xlbiA9PT0gbmV3SXRlbS54bWxfbGVuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9sZEZlZWRMaXN0SXRlbXNbbmV3SXRlbS5saW5rXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IG5ld0l0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtOiBjcmVhdGVMaXN0SXRlbShmZWVkLCBuZXdJdGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmZWVkLml0ZW1zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBmZWVkLml0ZW1zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zW25ld0l0ZW0ubGlua10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IG5ld0l0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW06IGNyZWF0ZUxpc3RJdGVtKGZlZWQsIG5ld0l0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmZWVkc0xpc3RJdGVtc1t1cmxdID0gaXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQocmVuZGVyLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVGZWVkc1JlZmV0Y2hQcm9ncmVzcyhlKSB7XHJcbiAgICAgICAgbmV3c1BhZ2VQcm9ncmVzcy52YWx1ZSA9IGUuZGV0YWlsLnByb2dyZXNzO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpc3RJdGVtKGZlZWQsIGl0ZW0pIHtcclxuICAgICAgICB2YXIgdXJsU3BsaXQgPSBmZWVkLnNpdGUuc3BsaXQoJy8nKTtcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb25zLWxpc3QtaXRlbScpO1xyXG4gICAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgndGFwcGFibGUnLCAnJyk7XHJcbiAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdtb2RpZmllcicsICdjaGV2cm9uJyk7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBsZWZ0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGVmdCcpO1xyXG4gICAgICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKGxlZnQpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICB0aHVtYm5haWwub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5zcmMgPSAnaW1hZ2VzL2ljb25ub3Rmb3VuZC5wbmcnOyB9XHJcbiAgICAgICAgdGh1bWJuYWlsLnNyYyA9IHVybFNwbGl0WzBdLnJlcGxhY2UoJ2h0dHA6JywgJ2h0dHBzOicpICsgJy8vJyArIHVybFNwbGl0WzJdICsgJy9mYXZpY29uLmljbyc7XHJcbiAgICAgICAgdGh1bWJuYWlsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGlzdC1pdGVtX190aHVtYm5haWwnKTtcclxuICAgICAgICBsZWZ0LmFwcGVuZENoaWxkKHRodW1ibmFpbCk7XHJcblxyXG4gICAgICAgIHZhciBjZW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjZW50ZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjZW50ZXInKTtcclxuICAgICAgICBjZW50ZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgbGlzdEl0ZW0uYXBwZW5kQ2hpbGQoY2VudGVyKTtcclxuXHJcbiAgICAgICAgdmFyIGxpc3RJdGVtVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgbGlzdEl0ZW1UaXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpc3QtaXRlbV9fdGl0bGUgb3ZlcmZsb3ctZWxsaXBzaXMnKTtcclxuICAgICAgICBsaXN0SXRlbVRpdGxlLnN0eWxlLnBhZGRpbmdSaWdodCA9ICc1MHB4JztcclxuICAgICAgICBsaXN0SXRlbVRpdGxlLmlubmVyVGV4dCA9IGV4Y2VycHQoaXRlbS50aXRsZSwgMzAwKTtcclxuICAgICAgICBjZW50ZXIuYXBwZW5kQ2hpbGQobGlzdEl0ZW1UaXRsZSk7XHJcblxyXG4gICAgICAgIHZhciBsaXN0SXRlbVN1YnRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGxpc3RJdGVtU3VidGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaXN0LWl0ZW1fX3N1YnRpdGxlJyk7XHJcbiAgICAgICAgbGlzdEl0ZW1TdWJ0aXRsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBsaXN0SXRlbVN1YnRpdGxlLmlubmVyVGV4dCA9IGV4Y2VycHQoZmVlZC50aXRsZSwgMTUwKTtcclxuXHJcbiAgICAgICAgdmFyIHN1YnRpdGxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzdWJ0aXRsZURlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc3VidGl0bGUtZGVzY3JpcHRpb24gb3ZlcmZsb3ctZWxsaXBzaXMnKTtcclxuICAgICAgICBzdWJ0aXRsZURlc2NyaXB0aW9uLmlubmVySFRNTCA9IGV4Y2VycHQoaXRlbS5kZXNjcmlwdGlvbiwgMTUwKTtcclxuXHJcbiAgICAgICAgbGlzdEl0ZW1TdWJ0aXRsZS5hcHBlbmRDaGlsZChzdWJ0aXRsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICBsaXN0SXRlbVN1YnRpdGxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRpbWVhZ28oaXRlbS5kYXRlKSkpO1xyXG5cclxuICAgICAgICBjZW50ZXIuYXBwZW5kQ2hpbGQobGlzdEl0ZW1TdWJ0aXRsZSk7XHJcblxyXG4gICAgICAgIGxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZm4ubmF2aWdhdG9yLnB1c2hQYWdlKCd2aWV3cy9zcGVjaWZpYy1uZXdzLWl0ZW0uaHRtbCcsIHsgZGF0YTogeyBmZWVkOiBmZWVkLCBpdGVtOiBpdGVtIH0gfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgICAgICB1bHRpbWF0ZUxpc3QgPSBbXTtcclxuICAgICAgICBmZWVkTGlzdC5yZWZyZXNoKCk7XHJcbiAgICAgICAgdmFyIGMgPSAwO1xyXG5cclxuICAgICAgICB2YXIgdGVybSA9IG5ld3NTZWFyY2hJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgdmFyIHNob3VsZEZpbHRlckJ5TmFtZSA9IHRlcm0ubGVuZ3RoID4gMjtcclxuICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcuKj8nICsgZXNjYXBlUmVnRXhwKHRlcm0pICsgJy4qJywgJ2ltJyk7XHJcblxyXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHVybCBpbiBmZWVkc0xpc3RJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZlZWRJdGVtcyA9IGZlZWRzTGlzdEl0ZW1zW3VybF07XHJcbiAgICAgICAgICAgICAgICB2YXIgZmVlZCA9IGZlZWRzW3VybF07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNlYXJjaE1hdGNoZXNGZWVkID0gcmVnZXgudGVzdChmZWVkLnRpdGxlKSB8fCByZWdleC50ZXN0KGZlZWQuZGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGxpbmsgaW4gZmVlZEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZmVlZEl0ZW1zW2xpbmtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRGaWx0ZXJCeU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgIXNlYXJjaE1hdGNoZXNGZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFyZWdleC50ZXN0KGVudHJ5Lml0ZW0udGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICFyZWdleC50ZXN0KGVudHJ5Lml0ZW0uZGVzY3JpcHRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdWx0aW1hdGVMaXN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjKysgPiBfYXBwX21heExhenlMaXN0SXRlbXMpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgIHVsdGltYXRlTGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShiLml0ZW0uZGF0ZSkgLSBuZXcgRGF0ZShhLml0ZW0uZGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZlZWRMaXN0LnJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImZ1bmN0aW9uIGluaXRTcGVjaWZpY0ZlZWRQYWdlKHBhZ2UpIHtcclxuICAgIHZhciB1cmwgPSBwYWdlLmRhdGEudXJsO1xyXG4gICAgdmFyIGZlZWRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmVlZHMnKSB8fCAne30nKTtcclxuXHJcbiAgICB2YXIgc3BlY2lmaWNGZWVkUGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UnKTtcclxuICAgIHZhciBzcGVjaWZpY0ZlZWRQYWdlQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UtY29udGVudCcpO1xyXG4gICAgdmFyIHNwZWNpZmljRmVlZFBhZ2VJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UtaXRlbXMnKTtcclxuICAgIHZhciBzcGVjaWZpY0ZlZWRQYWdlSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UtaWNvbicpO1xyXG4gICAgdmFyIHNwZWNpZmljRmVlZFBhZ2VUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UtdGl0bGUnKTtcclxuICAgIHZhciBzcGVjaWZpY0ZlZWRQYWdlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtZmVlZC1wYWdlLWRlc2NyaXB0aW9uJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNGZWVkUGFnZVNpdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtZmVlZC1wYWdlLXNpdGUnKTtcclxuICAgIHZhciBzcGVjaWZpY0ZlZWRQYWdlVW5zdWJzY3JpYmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtZmVlZC1wYWdlLXVuc3Vic2NyaWJlJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNGZWVkUGFnZUxpbmtGYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtZmVlZC1wYWdlLWxpbmstZmFiJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNGZWVkUGFnZVRvb2xiYXJUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVjaWZpYy1mZWVkLXBhZ2UtdG9vbGJhci1mZWVkLXRpdGxlJyk7XHJcblxyXG4gICAgdmFyIGZlZWQgPSBmZWVkc1t1cmxdO1xyXG4gICAgaWYgKCFmZWVkKSB7XHJcbiAgICAgICAgb25zLm5vdGlmaWNhdGlvbi5hbGVydCgnQ291bGQgbm90IGZpbmQgZmVlZCA6KCcpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZuLm5hdmlnYXRvci5wb3BQYWdlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzcGVjaWZpY0ZlZWRQYWdlTGlua0ZhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cub3BlbihmZWVkLnNpdGUsICdfc3lzdGVtJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzcGVjaWZpY0ZlZWRQYWdlVW5zdWJzY3JpYmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZmVlZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmZWVkcycpIHx8ICd7fScpO1xyXG4gICAgICAgIGRlbGV0ZSBmZWVkc1t1cmxdO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmZWVkcycsIEpTT04uc3RyaW5naWZ5KGZlZWRzKSk7XHJcbiAgICAgICAgZm4ubmF2aWdhdG9yLnBvcFBhZ2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJlbmRlcigpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZmVlZHNyZWZldGNoJywgcmVuZGVyKTtcclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZlZWRzcmVmZXRjaCcsIHJlbmRlcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICAgICAgc3BlY2lmaWNGZWVkUGFnZUljb24ub25lcnJvciA9IGZ1bmN0aW9uKCkgeyB0aGlzLnNyYyA9ICdpbWFnZXMvaWNvbm5vdGZvdW5kLnBuZycgfTtcclxuICAgICAgICBzcGVjaWZpY0ZlZWRQYWdlSWNvbi5zcmMgPSBmZWVkLmljb247XHJcbiAgICAgICAgc3BlY2lmaWNGZWVkUGFnZVRpdGxlLmlubmVySFRNTCA9IGZlZWQudGl0bGU7XHJcbiAgICAgICAgc3BlY2lmaWNGZWVkUGFnZVRvb2xiYXJUaXRsZS5pbm5lckhUTUwgPSBmZWVkLnRpdGxlO1xyXG4gICAgICAgIHNwZWNpZmljRmVlZFBhZ2VEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBmZWVkLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICB3aGlsZShzcGVjaWZpY0ZlZWRQYWdlSXRlbXMuZmlyc3RDaGlsZCkgc3BlY2lmaWNGZWVkUGFnZUl0ZW1zLnJlbW92ZUNoaWxkKHNwZWNpZmljRmVlZFBhZ2VJdGVtcy5maXJzdENoaWxkKTtcclxuXHJcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGZlZWQuaXRlbXMubGVuZ3RoLCBfYXBwX21heExpc3RJdGVtcyk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gZmVlZC5pdGVtc1tpXTtcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnPG9ucy1saXN0LWl0ZW0gdGFwcGFibGUgbW9kaWZpZXI9XCJjaGV2cm9uXCI+XFxcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XFxcclxuICAgICAgICAgICAgICAgIDxpbWcgb25lcnJvcj1cInRoaXMuc3JjPVxcJ2ltYWdlcy9pY29ubm90Zm91bmQucG5nXFwnXCIgc3JjPVwiJyArIGZlZWQuaWNvbiArICdcIiBjbGFzcz1cImxpc3QtaXRlbV9fdGh1bWJuYWlsXCI+XFxcclxuICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2VudGVyXCI+XFxcclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGlzdC1pdGVtX190aXRsZVwiPicgKyBpdGVtLnRpdGxlICsgJzwvc3Bhbj5cXFxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaXN0LWl0ZW1fX3N1YnRpdGxlXCI+JyArIGl0ZW0uZGVzY3JpcHRpb24gKyAnPGJyPjxzbWFsbD4nICsgdGltZWFnbyhpdGVtLmRhdGUpICsgJzwvc21hbGw+PC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBkaXYuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZm4ubmF2aWdhdG9yLnB1c2hQYWdlKCd2aWV3cy9zcGVjaWZpYy1uZXdzLWl0ZW0uaHRtbCcsIHsgZGF0YTogeyBmZWVkOiBmZWVkLCBpdGVtOiBpdGVtIH0gfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzcGVjaWZpY0ZlZWRQYWdlSXRlbXMuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcblxyXG5mdW5jdGlvbiBpbml0U3BlY2lmaWNOZXdzSXRlbVBhZ2UocGFnZSkge1xyXG4gICAgdmFyIHNwZWNpZmljTmV3c0l0ZW1QYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNOZXdzSXRlbVBhZ2VUb29sYmFyVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtbmV3cy1pdGVtLXBhZ2UtdG9vbGJhci10aXRsZScpO1xyXG4gICAgdmFyIHNwZWNpZmljTmV3c0l0ZW1QYWdlRmVlZFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLWZlZWQtdGl0bGUnKTtcclxuICAgIHZhciBzcGVjaWZpY05ld3NJdGVtUGFnZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtbmV3cy1pdGVtLXBhZ2UtaWNvbicpO1xyXG4gICAgdmFyIHNwZWNpZmljTmV3c0l0ZW1QYWdlVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtbmV3cy1pdGVtLXBhZ2UtdGl0bGUnKTtcclxuICAgIHZhciBzcGVjaWZpY05ld3NJdGVtUGFnZURlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLWRlc2NyaXB0aW9uJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNOZXdzSXRlbVBhZ2VMaW5rRmFiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLWxpbmstZmFiJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNOZXdzSXRlbVBhZ2VDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLWNvbnRlbnQnKTtcclxuICAgIHZhciBzcGVjaWZpY05ld3NJdGVtUGFnZURlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLWRlc2NyaXB0aW9uJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNOZXdzSXRlbVBhZ2VBdXRob3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlY2lmaWMtbmV3cy1pdGVtLXBhZ2UtYXV0aG9yJyk7XHJcbiAgICB2YXIgc3BlY2lmaWNOZXdzSXRlbVBhZ2VUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWNpZmljLW5ld3MtaXRlbS1wYWdlLXRpbWUnKTtcclxuXHJcbiAgICB2YXIgaXRlbSA9IHBhZ2UuZGF0YS5pdGVtO1xyXG4gICAgdmFyIGZlZWQgPSBwYWdlLmRhdGEuZmVlZDtcclxuXHJcbiAgICBzcGVjaWZpY05ld3NJdGVtUGFnZVRvb2xiYXJUaXRsZS5pbm5lclRleHQgPSBleGNlcnB0KGl0ZW0udGl0bGUsIDMwKSB8fCAnTmV3cyBJdGVtJztcclxuICAgIHNwZWNpZmljTmV3c0l0ZW1QYWdlRmVlZFRpdGxlLmlubmVyVGV4dCA9IGV4Y2VycHQoZmVlZC50aXRsZSwgMjAwKTtcclxuICAgIHNwZWNpZmljTmV3c0l0ZW1QYWdlVGl0bGUudGV4dENvbnRlbnQgPSBleGNlcnB0KGl0ZW0udGl0bGUsIDUwMCkgfHwgJ05ld3MgSXRlbSc7XHJcbiAgICBzcGVjaWZpY05ld3NJdGVtUGFnZUljb24ub25lcnJvciA9IGZ1bmN0aW9uKCkgeyB0aGlzLnNyYyA9ICdpbWFnZXMvaWNvbm5vdGZvdW5kLnBuZycgfTtcclxuICAgIHNwZWNpZmljTmV3c0l0ZW1QYWdlSWNvbi5zcmMgPSBmZWVkLmljb24gfHwgJ2ltYWdlcy9pY29ubm90Zm91bmQucG5nJztcclxuICAgIGlmIChpdGVtLmRlc2NyaXB0aW9uICYmIGl0ZW0uZGVzY3JpcHRpb24udHJpbSgpKSB7XHJcbiAgICAgICAgc3BlY2lmaWNOZXdzSXRlbVBhZ2VEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBleGNlcnB0KGl0ZW0uZGVzY3JpcHRpb24sIDIwMDApIHx8ICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzcGVjaWZpY05ld3NJdGVtUGFnZURlc2NyaXB0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcbiAgICBzcGVjaWZpY05ld3NJdGVtUGFnZVRpbWUuaW5uZXJUZXh0ID0gdGltZWFnbyhpdGVtLmRhdGUpICsgJyAtICcgKyBuZXcgRGF0ZShpdGVtLmRhdGUpLnRvTG9jYWxlU3RyaW5nKCk7XHJcbiAgICBzcGVjaWZpY05ld3NJdGVtUGFnZUF1dGhvci5pbm5lclRleHQgPSBpdGVtLmF1dGhvcjtcclxuICAgIHNwZWNpZmljTmV3c0l0ZW1QYWdlTGlua0ZhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKGl0ZW0ubGluaywgJ19zeXN0ZW0nKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGl0ZW0uY29udGVudCkge1xyXG4gICAgICAgIHZhciBiYXNlVXJsID0gaXRlbS5jb250ZW50QmFzZSB8fCBmZWVkLnNpdGU7XHJcbiAgICAgICAgc3BlY2lmaWNOZXdzSXRlbVBhZ2VDb250ZW50LmlubmVySFRNTCA9IGV4Y2VycHQoaXRlbS5jb250ZW50LCAyMDAwMCk7XHJcbiAgICAgICAgdmFyIGhyZWZBdHRyRWxlbXMgPSBzcGVjaWZpY05ld3NJdGVtUGFnZUNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnW2hyZWZdJyk7XHJcbiAgICAgICAgdmFyIHNyY0F0dHJFbGVtcyA9IHNwZWNpZmljTmV3c0l0ZW1QYWdlQ29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3JjXScpO1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaHJlZkF0dHJFbGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBocmVmQXR0ckVsZW1zW2ldLmhyZWYgPSBub3JtYWxpemVVcmwoYmFzZVVybCwgaHJlZkF0dHJFbGVtc1tpXS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3JjQXR0ckVsZW1zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIHNyY0F0dHJFbGVtc1tqXS5zcmMgPSBub3JtYWxpemVVcmwoYmFzZVVybCwgc3JjQXR0ckVsZW1zW2pdLmdldEF0dHJpYnV0ZSgnc3JjJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2UgaWYgKGl0ZW0ubGluayAmJiBpdGVtLmxpbmsudHJpbSgpKSB7XHJcbiAgICAgICAgc3BlY2lmaWNOZXdzSXRlbVBhZ2VDb250ZW50LmlubmVySFRNTCA9ICdcXFxyXG4gICAgICAgIDxhIGNsYXNzPVwiYnV0dG9uXCIgdGFyZ2V0PVwiX3N5c3RlbVwiIGhyZWY9XCInICsgaXRlbS5saW5rICsgJ1wiPjxvbnMtaWNvbiBpY29uPVwibWQtbGlua1wiPjwvb25zLWljb24+IFZpZXcgZW50aXJlIGFydGljbGUgPC9hPlxcXHJcbiAgICAgICAgJztcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsIlxyXG52YXIgaXNPbmxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG59LCBpc09mZmxpbmUgPSBmdW5jdGlvbiAoKSB7XHJcblx0d2luZG93Lm9ucy5ub3RpZmljYXRpb24uYWxlcnQoe1xyXG5cdFx0bWVzc2FnZTogX2FwcF9sb2NhbGl6YXRpb24ubm9Db25uZWN0aW9uW19hcHBfdXNlckxhbmddLFxyXG5cdH0pO1xyXG59O1xyXG5cclxuaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgaXNPbmxpbmUsIGZhbHNlKTtcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgaXNPZmZsaW5lLCBmYWxzZSk7XHJcbn1cclxuZWxzZSB7XHJcblx0ZG9jdW1lbnQuYm9keS5vbm9ubGluZSA9IGlzT25saW5lO1xyXG5cdGRvY3VtZW50LmJvZHkub25vZmZsaW5lID0gaXNPZmZsaW5lO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzdW1lXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcclxuXHRcdHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0KHtcclxuXHRcdFx0bWVzc2FnZTogX2FwcF9sb2NhbGl6YXRpb24ubm9Db25uZWN0aW9uW19hcHBfdXNlckxhbmddLFxyXG5cdFx0fSk7XHJcblx0fVxyXG59LCBmYWxzZSk7XHJcblxyXG5pZighaXNGaXJzdFRpbWVBcHBPcGVuaW5nKCkpIHtcclxuICAgIGZlZWRzUmVmZXRjaCgpO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdpbml0JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB2YXIgcGFnZSA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICBpZiAocGFnZS5pZCA9PT0gJ25ld3MtcGFnZScpIHtcclxuICAgICAgICBpc0ZpcnN0VGltZUFwcE9wZW5pbmcoKSBcclxuICAgICAgICAgICAgPyBmaXJzdFRpbWVBcHBPcGVuaW5nKClcclxuICAgICAgICAgICAgOiBuZXdzUGFnZUluaXQocGFnZSk7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdmZWVkcy1wYWdlJykge1xyXG4gICAgICAgIGlzRmlyc3RUaW1lQXBwT3BlbmluZygpXHJcbiAgICAgICAgICAgID8gZmlyc3RUaW1lQXBwT3BlbmluZygpXHJcbiAgICAgICAgICAgIDogZmVlZHNQYWdlSW5pdChwYWdlKTtcclxuICAgIH0gZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2FkZC1mZWVkLXBhZ2UnKSB7XHJcbiAgICAgICAgaXNGaXJzdFRpbWVBcHBPcGVuaW5nKClcclxuICAgICAgICAgICAgPyBmaXJzdFRpbWVBcHBPcGVuaW5nKClcclxuICAgICAgICAgICAgOiBhZGRGZWVkUGFnZUluaXQocGFnZSk7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdzcGVjaWZpYy1mZWVkLXBhZ2UnKSB7XHJcbiAgICAgICAgaXNGaXJzdFRpbWVBcHBPcGVuaW5nKCkgXHJcbiAgICAgICAgICAgID8gZmlyc3RUaW1lQXBwT3BlbmluZygpXHJcbiAgICAgICAgICAgIDogaW5pdFNwZWNpZmljRmVlZFBhZ2UocGFnZSk7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdyZWNvbW1lbmRlZC1wYWdlJykge1xyXG4gICAgICAgIGlzRmlyc3RUaW1lQXBwT3BlbmluZygpXHJcbiAgICAgICAgICAgID8gZmlyc3RUaW1lQXBwT3BlbmluZygpXHJcbiAgICAgICAgICAgIDogcmVjb21tZW5kZWRGZWVkc1BhZ2VJbml0KHBhZ2UpO1xyXG4gICAgfSBlbHNlIGlmIChwYWdlLmlkID09PSAnc3BlY2lmaWMtbmV3cy1pdGVtLXBhZ2UnKSB7XHJcbiAgICAgICAgaXNGaXJzdFRpbWVBcHBPcGVuaW5nKClcclxuICAgICAgICAgICAgPyBmaXJzdFRpbWVBcHBPcGVuaW5nKClcclxuICAgICAgICAgICAgOiBpbml0U3BlY2lmaWNOZXdzSXRlbVBhZ2UocGFnZSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoY29yZG92YS5wbGF0Zm9ybUlkID09PSAnYnJvd3NlcicpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKS5zcmMgPSAnLi9qcy9icm93c2VyLmpzJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkuc3JjID0gJy4vanMvYWRtb2IuanMnO1xyXG4gICAgfVxyXG4gICAgaWYgKG5hdmlnYXRvci5vbkxpbmUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgd2luZG93Lm9ucy5ub3RpZmljYXRpb24uYWxlcnQoe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBfYXBwX2xvY2FsaXphdGlvbi5ub0Nvbm5lY3Rpb25bX2FwcF91c2VyTGFuZ10sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbndpbmRvdy5vbnMucGxhdGZvcm0uc2VsZWN0KCdhbmRyb2lkJyk7XHJcbndpbmRvdy5vbnMuZGlzYWJsZUF1dG9TdGF0dXNCYXJGaWxsKCk7XHJcblxyXG53aW5kb3cuZm4gPSB7fTtcclxuXHJcbndpbmRvdy5mbi5vcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xyXG4gICAgbWVudS5vcGVuKCk7XHJcbn07XHJcblxyXG53aW5kb3cuZm4ubG9hZCA9IGZ1bmN0aW9uIChwYWdlKSB7XHJcbiAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XHJcbiAgICB2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51Jyk7XHJcbiAgICBjb250ZW50LmxvYWQocGFnZSlcclxuICAgICAgICAudGhlbihtZW51LmNsb3NlLmJpbmQobWVudSkpO1xyXG59O1xyXG5cclxud2luZG93LmZuLm5hdmlnYXRvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0b3InKTtcclxuXHJcbmZ1bmN0aW9uIGlzRmlyc3RUaW1lQXBwT3BlbmluZygpIHtcclxuICAgIHJldHVybiAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZlZWRzJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpcnN0VGltZUFwcE9wZW5pbmcoKSB7XHJcbiAgICBzZXREZWZhdWx0RmVlZHMoKTtcclxuICAgIHdpbmRvdy5mbi5sb2FkKCd2aWV3cy9yZWNvbW1lbmRlZC5odG1sJyk7XHJcbiAgICB3aW5kb3cuZm4ub3BlbigpO1xyXG4gICAgZmVlZHNSZWZldGNoKCk7XHJcbn1cclxuIl19
